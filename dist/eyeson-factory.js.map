{"version":3,"sources":["webpack://eyeson-factory/webpack/universalModuleDefinition","webpack://eyeson-factory/webpack/bootstrap","webpack://eyeson-factory/./node_modules/screenfull/dist/screenfull.js","webpack://eyeson-factory/./node_modules/sdp/sdp.js","webpack://eyeson-factory/./node_modules/@babel/runtime/helpers/typeof.js","webpack://eyeson-factory/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://eyeson-factory/./node_modules/@babel/runtime/helpers/createClass.js","webpack://eyeson-factory/./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js","webpack://eyeson-factory/./node_modules/platform/platform.js","webpack://eyeson-factory/./node_modules/sip.js/dist/sip.js","webpack://eyeson-factory/./node_modules/actioncable/lib/assets/compiled/action_cable.js","webpack://eyeson-factory/(webpack)/buildin/module.js","webpack://eyeson-factory/(webpack)/buildin/global.js","webpack://eyeson-factory/./node_modules/eyeson/src/Logger.js","webpack://eyeson-factory/./node_modules/eyeson/src/ComApi.js","webpack://eyeson-factory/./node_modules/eyeson/src/utils/throttle.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/BaseEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/PlaybackEvents.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/PublicEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/AnnotationEvents.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StfuEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/IgnoreEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/ForwardEvent.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/utils.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/edge/getusermedia.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/edge/edge_shim.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/common_shim.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/adapter_core.js","webpack://eyeson-factory/./node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack://eyeson-factory/./node_modules/eyeson/src/FullscreenHelper.js","webpack://eyeson-factory/./node_modules/eyeson/src/FeatureDetector.js","webpack://eyeson-factory/./node_modules/eyeson/src/NinjaStream.js","webpack://eyeson-factory/./node_modules/eyeson/src/LocalStorage.js","webpack://eyeson-factory/./node_modules/eyeson/src/utils/StreamHelpers.js","webpack://eyeson-factory/./node_modules/eyeson/src/DeviceManager.js","webpack://eyeson-factory/./node_modules/eyeson/src/MediaStreamBuilder.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/ChangeLocalStreamEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/PodiumEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/SnapshotEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/SetLayerEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/SendChatEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/SetLayoutEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/SipMessageWhitelist.js","webpack://eyeson-factory/./node_modules/eyeson/src/PodiumFacade.js","webpack://eyeson-factory/./node_modules/eyeson/src/SipMessageTransformer.js","webpack://eyeson-factory/./node_modules/eyeson/src/SessionDescriptionHandler.js","webpack://eyeson-factory/./node_modules/eyeson/src/SipConnection.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/RoomReceivedEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/FetchRoomEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/DeleteFileEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/UploadFileEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/ReceiveChatEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StopYouTubeEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StartStreamEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/ChangeStreamEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/ToggleCameraEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StartYouTubeEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StopFacebookEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/AcceptSessionEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StartFacebookEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StopRecordingEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/VoiceActivityEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StartRecordingEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/ScreenCaptureEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StartPresentingEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StopPresentingEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/StopBroadcastsEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/ClearFrontLayerEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/PublishBroadcastEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/RequestGuestUserEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/HandleStreamOfferEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/HandleStreamAnswerEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/ParticipantListUpdateEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/utils/scale.js","webpack://eyeson-factory/./node_modules/eyeson/src/utils/debounce.js","webpack://eyeson-factory/./node_modules/eyeson/src/CanvasMixer.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/MixerEvents.js","webpack://eyeson-factory/./node_modules/eyeson/src/events/LockMeetingEvent.js","webpack://eyeson-factory/./node_modules/eyeson/src/EventHandler.js","webpack://eyeson-factory/./node_modules/eyeson/src/SDPModifiers.js","webpack://eyeson-factory/./node_modules/eyeson/src/ConferenceSession.js","webpack://eyeson-factory/./node_modules/eyeson/src/ConnectionMonitor.js","webpack://eyeson-factory/./node_modules/eyeson/src/ActionCableConnection.js","webpack://eyeson-factory/./src/eyeson-factory.js","webpack://eyeson-factory/./node_modules/eyeson/src/utils/GiphyApi.js","webpack://eyeson-factory/./node_modules/eyeson/src/utils/YouTubeApi.js","webpack://eyeson-factory/./node_modules/eyeson/src/utils/FacebookApi.js","webpack://eyeson-factory/./node_modules/eyeson/src/SoundMeter.js","webpack://eyeson-factory/./index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","document","isCommonjs","fn","val","fnMap","length","ret","eventNameMap","change","fullscreenchange","error","fullscreenerror","screenfull","request","element","Promise","resolve","reject","onFullScreenEntered","this","off","on","returnPromise","documentElement","requestFullscreen","then","catch","exit","isFullscreen","onFullScreenExit","exitFullscreen","toggle","onchange","callback","onerror","event","eventName","addEventListener","removeEventListener","raw","defineProperties","Boolean","fullscreenElement","isEnabled","fullscreenEnabled","SDPUtils","Math","random","toString","substr","localCName","generateIdentifier","splitLines","blob","trim","split","map","line","splitSections","part","index","getDescription","sections","getMediaSections","shift","matchPrefix","prefix","filter","indexOf","parseCandidate","parts","candidate","foundation","substring","component","parseInt","protocol","toLowerCase","priority","ip","address","port","type","relatedAddress","relatedPort","tcpType","ufrag","usernameFragment","writeCandidate","sdp","push","toUpperCase","join","parseIceOptions","parseRtpMap","parsed","payloadType","clockRate","channels","numChannels","writeRtpMap","codec","pt","undefined","preferredPayloadType","parseExtmap","id","direction","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","j","writeFmtp","parameters","keys","params","forEach","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","parseSsrcGroup","semantics","ssrcs","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","slice","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","password","writeIceParameters","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","kind","caps","maxptime","extension","parseRtpEncodingParameters","secondarySsrc","encodingParameters","hasRed","hasUlpfec","primarySsrc","flows","apt","encParam","codecPayloadType","rtx","JSON","parse","stringify","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","obj","cname","rsize","reducedSize","compound","mux","parseMsid","spec","stream","track","planB","msidParts","parseSctpDescription","maxMessageSize","parseMLine","maxSizeLine","isNaN","sctpPort","fmt","writeSctpDescription","media","sctp","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","version","writeMediaSection","transceiver","iceGatherer","getLocalParameters","dtlsTransport","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","getKind","isRejected","parseOLine","username","sessionId","sessionVersion","netType","addressType","isValidSDP","charAt","_typeof","iterator","constructor","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","configurable","writable","protoProps","staticProps","dtlsRole","trackId","_initialTrackId","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","findCodecByPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","rCodec","min","lHeaderExtension","rHeaderExtension","isActionAllowedInSignalingState","action","signalingState","offer","setLocalDescription","setRemoteDescription","answer","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","find","remoteCandidate","addRemoteCandidate","makeError","e","Error","code","NotSupportedError","InvalidStateError","InvalidAccessError","OperationError","edgeVersion","addTrackToStreamAndFireEvent","addTrack","dispatchEvent","MediaStreamTrackEvent","fireAddTrack","pc","receiver","streams","trackEvent","Event","setTimeout","_dispatchEvent","RTCPeerConnection","config","_eventTarget","createDocumentFragment","method","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","iceServers","hasTurn","server","urls","url","console","warn","isString","filterIceServers","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","getConfiguration","getLocalStreams","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","RTCRtpSender","addStream","getTracks","clonedStream","clone","idx","clonedTrack","enabled","removeTrack","sender","stop","splice","removeStream","getSenders","getReceivers","_createIceGatherer","sdpMLineIndex","bufferedCandidateEvents","bufferCandidates","end","state","_gather","onlocalcandidate","evt","sdpMid","cand","serializedCandidate","assign","toJSON","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","_disposeIceAndDtlsTransports","_transceive","send","recv","encodings","receive","isIceLite","rejected","remoteIceParameters","remoteDtlsParameters","start","_updateSignalingState","receiverList","iceOptions","remoteMsid","isComplete","cands","setTransport","setRemoteCandidates","MediaStream","default","RTCRtpReceiver","getCapabilities","isNewTrack","nativeTrack","removeTrackFromStreamAndFireEvent","sid","item","close","newState","states","closed","checking","connected","completed","disconnected","failed","new","connecting","createOffer","numAudioTracks","numVideoTracks","offerOptions","arguments","mandatory","optional","offerToReceiveAudio","offerToReceiveVideo","remoteCodec","hdrExt","rHdrExt","getLocalCandidates","desc","RTCSessionDescription","createAnswer","mediaSectionsInOffer","localTrack","getAudioTracks","getVideoTracks","addIceCandidate","candidateString","getStats","selector","MediaStreamTrack","senderOrReceiver","promises","all","allStats","results","Map","stats","stat","set","ortcObjectName","nativeGetstats","apply","nativeStats","mapStats","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","methods","nativeMethod","args","objectTypes","freeExports","freeModule","nodeType","freeGlobal","global","self","maxSafeInteger","pow","reOpera","objectProto","capitalize","string","String","format","test","forOwn","getClassOf","qualify","replace","reduce","array","accumulator","each","platform","ua","context","isCustomContext","nav","navigator","userAgent","data","isSpecialCasedOS","likeChrome","airRuntimeClass","enviroClass","javaClass","java","phantomClass","rhino","environment","alpha","beta","doc","opera","operamini","operaClass","arch","prerelease","useFeatures","layout","result","guess","RegExp","pattern","exec","label","guesses","getName","product","getProduct","manufacturer","getManufacturer","os","cleanupOS","getOS","unshift","parseFloat","runtime","flash","system","Capabilities","phantom","major","minor","patch","documentMode","toFixed","lang","System","getProperty","require","process","browser","versions","electron","node","nw","appMinorVersion","external","family","architecture","cpuClass","pkg","title","SIP","LoggerFactory","EventEmitter","C","Exceptions","Timers","timers","Transport","SessionDescriptionHandler","DigestAuthentication","Utils","Grammar","Web","Modifiers","Simple","defer","deferred","promise","reducePromises","arr","acc","augment","override","proto","defaultOptions","overridingOptions","optionsOverride","options","winner","loser","isDeprecated","logger","defaultValue","str_utf8_length","encodeURIComponent","generateFakeSDP","body","isFunction","isDecimal","num","createRandomToken","size","base","token","newTag","UA","TAG_LENGTH","newUUID","hostType","host","host_type","normalizeTarget","domain","target_array","target_user","target_domain","URI","escapeUser","user","decodeURIComponent","headerize","exceptions","hname","sipErrorCause","status_code","cause","SIP_ERROR_CAUSES","causes","SIP_FAILURE_CODE","getReasonPhrase","specific","REASON_PHRASE","getReasonHeaderValue","reason","getCancelReason","buildStatusLine","getRandomTestNetIP","from","to","floor","levels","level","builtinEnabled","connector","loggers","getLogger","Logger","category","print","content","Date","concat","targetName","NodeEventEmitter","_events","_maxListeners","arg","isObject","isUndefined","defaultMaxListeners","setMaxListeners","emit","er","handler","len","listeners","err","Array","addListener","listener","newListener","warned","trace","once","fired","g","removeListener","list","position","removeAllListeners","listenerCount","evlistener","emitter","USER_AGENT","SIPS","CONNECTION_ERROR","REQUEST_TIMEOUT","INTERNAL_ERROR","BUSY","REJECTED","REDIRECTED","UNAVAILABLE","NOT_FOUND","ADDRESS_INCOMPLETE","INCOMPATIBLE_SDP","AUTHENTICATION_ERROR","DIALOG_ERROR","WEBRTC_NOT_SUPPORTED","WEBRTC_ERROR","CANCELED","NO_ANSWER","EXPIRES","NO_ACK","NO_PRACK","USER_DENIED_MEDIA_ACCESS","BAD_MEDIA_DESCRIPTION","RTP_TIMEOUT","supported","UNSUPPORTED","SUPPORTED","REQUIRED","ACK","BYE","CANCEL","INFO","INVITE","MESSAGE","NOTIFY","OPTIONS","REGISTER","UPDATE","SUBSCRIBE","PUBLISH","REFER","PRACK","100","180","181","182","183","199","200","202","204","300","301","302","305","380","400","401","402","403","404","405","406","407","408","410","412","413","414","415","416","417","420","421","422","423","428","429","430","433","436","437","438","439","440","469","470","478","480","481","482","483","484","485","486","487","488","489","491","493","494","500","501","502","503","504","505","513","580","600","603","604","606","OPTION_TAGS","answermode","eventlist","explicitsub","gin","gruu","histinfo","ice","norefersub","nosub","outbound","path","policy","precondition","pref","privacy","replaces","tdialog","timer","uui","dtmfType","RTP","exception","ConfigurationError","message","status","GetDescriptionError","RenegotiationError","MethodParameterError","TransportError","SessionDescriptionHandlerError","T1","T2","T4","TIMER_B","TIMER_D","TIMER_F","TIMER_H","TIMER_I","TIMER_J","TIMER_K","TIMER_L","TIMER_M","TIMER_N","PROVISIONAL_RESPONSE_INTERVAL","connect","connectPromise","overrideEvent","isConnected","msg","sendPromise","onMessage","disconnect","disconnectPromise","afterConnected","waitForConnected","Parser","getHeader","headerStart","partialEnd","match","parseHeader","headerEnd","header","hcolonIndex","headerName","headerValue","addHeader","getHeaders","via","via_branch","branch","setHeader","from_tag","getParam","to_tag","offset","headers","call_id","cseq","IncomingResponse","refer_to","parseMessage","firstLine","contentLength","bodyStart","reason_phrase","IncomingRequest","ruri","hasHeader","OutgoingRequest","IncomingMessage","getSupportedHeader","allowUnregistered","configuration","hackAllowUnregisteredOptionTags","optionTags","optionTagSet","contact","pub_gruu","temp_gruu","rel100","extraSupported","optionTag","registered","unique","extraHeaders","to_uri","from_uri","statusCode","reasonPhrase","route_set","usePreloadedRoute","transport","sip_uri","MAX_FORWARDS","to_displayName","toRaw","NameAddrHeader","from_displayName","displayName","sipjsId","regexp","userAgentString","contentType","log","server_transaction","reply","onSuccess","onFailure","rr","vias","response","v","hasParam","receiveResponse","reply_sl","scheme","normal","setParam","_normal","_raw","aor","deleteParam","clearParams","deleteHeader","clearHeaders","_toString","uriString","friendlyName","name_addr_header","STATUS_TRYING","STATUS_PROCEEDING","STATUS_CALLING","STATUS_ACCEPTED","STATUS_COMPLETED","STATUS_TERMINATED","STATUS_CONFIRMED","NON_INVITE_CLIENT","NON_INVITE_SERVER","INVITE_CLIENT","INVITE_SERVER","buildViaHeader","request_sender","hackViaTcp","viaHost","forceRport","NonInviteClientTransaction","newTransaction","stateChanged","F","timer_F","onTransportError","clearTimeout","K","destroyTransaction","debug","onRequestTimeout","timer_K","InviteClientTransaction","tr","cancel","extraHeadersString","cancel_request","B","timer_B","D","M","timer_M","timer_D","sendACK","ack","reverse","ackSender","RequestSender","applicant","onRequestTransportError","transaction","AckClientTransaction","NonInviteServerTransaction","last_response","timer_J","transportError","J","InviteServerTransaction","resendProvisionalTimer","timer_H","timer_I","timer_L","clearInterval","L","H","I","resend_provisional","setInterval","Transactions","checkTransaction","transactions","ist","nist","Dialog","STATUS_EARLY","owner","uac_pending_reply","uas_pending_reply","local_tag","remote_tag","remote_seqnum","local_uri","remote_uri","remote_target","invite_seqnum","local_seqnum","pracked","dialogs","update","terminate","sessionDescriptionHandler","createRequest","dialog","checkInDialogRequest","retryAfter","sendRequest","receiveRequest","reattempt","reattemptTimer","clientTransaction","onDialogError","Session","getReattemptTimeout","credentials","challenged","staled","STATUS_USER_CLOSED","challenge","authorization_header_name","stale","authenticationFactory","authenticate","RegisterContext","registrar","registrarServer","expires","registerExpires","instanceId","ClientContext","registrationTimer","registrationExpiredTimer","onTransportDisconnected","register","ALLOWED_METHODS","closeHeaders","closeWithHeaders","contacts","unregistered","registrationFailure","registered_before","onTransportConnected","unregister","modifiers","hasDescription","holdModifier","setDescription","sessionDescription","sendDtmf","tones","originalTarget","localIdentity","remoteIdentity","cancel_reason","applicants","ServerContext","assertedIdentity","progress","minCode","maxCode","events","accept","InviteServerContext","InviteClientContext","ReferServerContext","ReferClientContext","DTMF","STATUS_NULL","STATUS_INVITE_SENT","STATUS_1XX_RECEIVED","STATUS_INVITE_RECEIVED","STATUS_WAITING_FOR_ANSWER","STATUS_ANSWERED","STATUS_WAITING_FOR_PRACK","STATUS_WAITING_FOR_ACK","STATUS_CANCELED","STATUS_ANSWERED_WAITING_FOR_PRACK","STATUS_EARLY_MEDIA","sessionDescriptionHandlerFactory","pendingReinvite","earlyDialogs","SessionDescriptionHandlerMissing","hasOffer","hasAnswer","ackTimer","expiresTimer","invite2xxTimer","userNoAnswerTimer","rel1xxTimer","prackTimer","startTime","endTime","local_hold","early_sdp","dtmf","dtmfs","sendDTMF","timeout","duration","interToneGap","bye","terminated","refer","referContext","receiveNonInviteResponse","errorListener","sessions","createDialog","early","early_dialog","dia","hold","sendReinvite","unhold","reinvite","receiveReinvite","sessionDescriptionHandlerOptions","setACKTimer","receiveReinviteResponse","onInfo","tone","reg_tone","reg_duration","init_incoming","followRefer","passedOptions","inviteOptions","receiveNotify","acceptAndTerminate","setInvite2xxTimer","invite2xxRetransmission","canceled","accepted","replacee","contentDisp","set100rel","h","renderbody","rendertype","noAnswerTimeout","isCanceled","do100rel","rel1xxRetransmission","setupSessionDescriptionHandler","descriptionCreationSucceeded","descriptionCreationFailed","confirmSession","sessionDescriptionHandlerFactoryOptions","inviteWithoutSdp","anonymous","received_100","receiveInviteResponse","invite","session","cancelReason","earlyDialog","earlyMedia","modifers","search","messageBody","activeAfterTransfer","referTo","referredSession","findSession","Contact","referredBy","targetSession","sendNotify","referFailed","MIN_DURATION","MAX_DURATION","abs","DEFAULT_DURATION","MIN_INTER_TONE_GAP","DEFAULT_INTER_TONE_GAP","originator","Subscription","requestedExpires","N","sub_duration","errorCodes","subscribe","refresh","timer_fire","earlySubscriptions","INVALID_EXPIRES_HEADER","EXPIRES_HEADER_MISSING","unsubscribe","terminateDialog","subscriptions","createConfirmedDialog","sub_state","sub","setExpiresTimeout","max","matchEvent","REASON_200","PublishContext","Number","unpublishOnClose","pubRequestBody","pubRequestExpires","pubRequestEtag","publish_refresh_timer","publish","publishers","sendPublishRequest","unpublish","reqOptions","minExpires","STATUS_INIT","STATUS_STARTING","STATUS_READY","STATUS_NOT_READY","CONFIGURATION_ERROR","NETWORK_ERROR","ACCEPTED_BODY_TYPES","checkAuthenticationFactory","Function","initialize","selfEmit","cache","nict","ict","transactionsCount","count","nictTransactionsCount","nistTransactionsCount","ictTransactionsCount","istTransactionsCount","loadConfig","registerContext","autostart","isRegistered","pub","req","subscription","publisher","transactionsListener","chrome","app","environListener","transportConstructor","transportOptions","setTransportListeners","autostop","hostportParams","saveCredentials","realm","getCredentials","onTransportReceiveMsg","sanityCheck","earlySubscription","replacedDialog","ruriMatches","content_type","findDialog","findEarlySubscription","replaces_to_tag","replaces_from_tag","early_only","allowLegacyNotifications","allowOutOfDialogRefers","checked_value","settings","custom","hackIpInContact","hackWssInTransport","constraints","peerConnectionOptions","contactName","contactTransport","defaultFactory","aliasUnderscored","underscored","hasParameter","configCheck","getConfigurationCheck","authorizationUser","skeleton","eval","STATUS_CONNECTING","STATUS_OPEN","STATUS_CLOSING","STATUS_CLOSED","WebSocket","ws","connectionPromise","connectDeferredResolve","connectionTimeout","disconnectionPromise","disconnectDeferredResolve","boundOnOpen","boundOnMessage","boundOnClose","boundOnError","reconnectionAttempts","reconnectTimer","keepAliveInterval","keepAliveDebounceTimeout","statusAssert","force","onError","traceSip","statusTransition","stopSendingKeepAlives","ws_uri","getNextWsServer","disposeWs","onOpen","onClose","startSendingKeepAlives","reconnect","clearKeepAliveTimeout","fromCharCode","Uint8Array","noAvailableServers","resetServerErrorStatus","maxReconnectionAttempts","isError","reconnectionTimeout","wsServers","wsServer","candidates","weight","sendKeepAlive","keepAliveDebounce","upperBound","lowerBound","observer","dtmfSender","shouldAcquireMedia","CONTENT_TYPE","DIRECTION","NULL","SENDRECV","SENDONLY","RECVONLY","INACTIVE","isArray","WebRTC","getUserMedia","mediaDevices","iceGatheringDeferred","iceGatheringTimeout","iceGatheringTimer","initPeerConnection","checkAndDefaultConstraints","peerConnection","resetIceGatheringComplete","newConstraints","acquire","createOfferOrAnswer","RTCOfferOptions","_this","alwaysAcquireMediaFirst","modifiedDescription","disableAudioFallback","stripVideo","hasBrowserGetSenderSupport","senders","hasBrowserTrackSupport","audioTracks","createDTMFSender","insertDTMF","methodName","createRTCSessionDescriptionInit","waitForIceGatheringComplete","localDescription","setDirection","addDefaultIceCheckingTimeout","iceCheckingTimeout","addDefaultIceServers","rtcConfiguration","defaultConstraints","audio","video","trackAdded","triggerIceGatheringComplete","stateEvent","where","offerState","isIceGatheringComplete","directionChanged","isIceGatheringDeferred","SessionDescriptionHandlerObserver","requests","responses","fromTag","mandatoryHeaders","md5","cnonce","nc","ncHex","nonce","opaque","qop","updateNcHex","calculateResponse","ha1","ha2","auth_params","hex","CryptoJS","C_lib","lib","WordArray","Hasher","C_algo","algo","T","sin","MD5","extend","_doReset","_hash","init","_doProcessBlock","offset_i","M_offset_i","words","M_offset_0","M_offset_1","M_offset_2","M_offset_3","M_offset_4","M_offset_5","M_offset_6","M_offset_7","M_offset_8","M_offset_9","M_offset_10","M_offset_11","M_offset_12","M_offset_13","M_offset_14","M_offset_15","a","b","FF","GG","HH","II","_doFinalize","_data","dataWords","nBitsTotal","_nDataBytes","nBitsLeft","sigBytes","nBitsTotalH","nBitsTotalL","_process","hash","H_i","x","_createHelper","HmacMD5","_createHmacHelper","subtype","Base","overrides","mixIn","$super","properties","propertyName","encoder","Hex","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","ceil","nBytes","rcache","m_w","m_z","mask","_r","C_enc","enc","hexChars","bite","hexStr","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","charCodeAt","Utf8","escape","utf8Str","unescape","BufferedBlockAlgorithm","reset","_append","doFlush","dataSigBytes","blockSize","nBlocksReady","nWordsReady","_minBufferSize","nBytesReady","processedWords","cfg","messageUpdate","finalize","hasher","HMAC","input","startRule","peg$SyntaxError","expected","found","location","captureStackTrace","child","parent","ctor","peg$subclass","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","text","escapedParts","classEscape","inverted","any","other","ch","descriptions","sort","describeExpected","describeFound","SyntaxError","peg$result","peg$FAILED","peg$startRuleIndices","Name_Addr_Header","Record_Route","Request_Response","SIP_URI","Subscription_State","Supported","Require","Via","absoluteURI","Call_ID","Content_Disposition","Content_Length","Content_Type","CSeq","From","Max_Forwards","Min_SE","Proxy_Authenticate","quoted_string","Refer_To","Replaces","Session_Expires","stun_URI","To","turn_URI","uuid","WWW_Authenticate","sipfrag","Referred_By","peg$startRuleIndex","peg$consts","peg$literalExpectation","peg$classExpectation","contents","uri_params","uri_headers","uri_scheme","ttl","maddr","hvalue","sip_version","multi_header","peg$currPos","q","delta_seconds","cseq_value","event_type","forwards","min_expires","qop_value","rack_value","head","tail","rseq_value","retry_after","via_ttl_value","via_maddr","via_received","received","response_port","rport","via_protocol","via_transport","via_sent_by_port","deltaSeconds","endpoint","refresher","peg$bytecode","peg$decode","peg$savedPos","peg$posDetailsCache","column","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","peg$computeLocation","ignoreCase","peg$computePosDetails","pos","details","startPos","endPos","startPosDetails","endPosDetails","peg$fail","peg$buildStructuredError","bc","peg$parseRule","ips","ends","stack","pop","stripPayload","payload","current_media_desc","media_descs","stripped","rtpmap","stripTcpCandidates","stripTelephoneEvent","cleanJitsiSdpImageattr","stripG722","stripRtpPayload","descriptionRegExp","groupRegExp","midLineToRemove_1","groupLine","section","groupRegExpReplace","stripMediaDescription","addMidLines","mlines_1","elem","STATUS_NEW","STATUS_CONNECTED","remote","browserUa","isSafari","isFirefox","setupSession","destination","checkRegistration","autoplay","local","volume","hangup","mute","unmute","toggleMute","setupRemoteMedia","remoteStream","srcObject","play","setupLocalMedia","localStream","cleanupMedia","pause","onProgress","onAccepted","onEnded","onFailed","destroyMedia","toplevel","getPrefixedProperty","capitalizedName","prefixedNames","open","ActionCable","INTERNAL","createConsumer","ref","getConfig","default_mount_path","Consumer","createWebSocketURL","querySelector","getAttribute","createElement","href","startDebugging","debugging","stopDebugging","messages","now","ConnectionMonitor","secondsSince","connection","me","visibilityDidChange","reconnectAttempts","pollInterval","staleThreshold","isRunning","startedAt","stoppedAt","startPolling","getPollInterval","stopPolling","recordPing","pingedAt","recordConnect","disconnectedAt","recordDisconnect","poll","pollTimeout","reconnectIfStale","interval","round","connectionIsStale","disconnectedRecently","reopen","visibilityState","isOpen","getTime","time","number","message_types","protocols","supportedProtocols","Connection","consumer","monitor","reopenDelay","webSocket","isActive","getState","uninstallEventHandlers","installEventHandlers","ref1","allowReconnect","error1","getProtocol","isState","isProtocolSupported","readyState","identifier","welcome","reload","ping","confirmation","notify","rejection","notifyAll","willAttemptReconnect","Subscriptions","channelName","mixin","channel","add","ensureActiveConnection","sendCommand","remove","forget","findAll","callbackName","command","perform","webpackPolyfill","deprecate","paths","children","info","users","_handleError","fetch","Request","ok","json","form","namespace","fd","FormData","formKey","File","append","_objectToFormData","_request","formData","userId","cachedUser","apiUser","extendedUser","addUserAttributes","largeAvatarUrl","avatar","apiId","sipId","sip","largeAvatar","_post","email","custom_fields","locale","player_url","playerUrl","stream_url","streamUrl","_put","playback","play_id","previous","later","leading","func","remaining","wait","trailing","_api","startPlayback","stopPlayback","_src","Reflect","deleteProperty","annotationLoop","createAnnotation","super","handle","annotation","stopAnnotation","_rtConnection","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","wrapPeerConnectionEvent","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","cb","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","has","unwrappedCb","delete","disableLog","bool","disableWarnings","deprecated","oldMethod","newMethod","detectBrowser","mozGetUserMedia","webkitGetUserMedia","isSecureContext","webkitRTCPeerConnection","supportsUnifiedPlan","RTCRtpTransceiver","compactObject","isObj","isEmptyObject","filterStats","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","walkStats","resultSet","endsWith","shimGetUserMedia","browserDetails","constraintsToChrome_","cc","ideal","exact","oldname_","oc","mix","advanced","shimConstraints_","remap","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","dev","some","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","origGetUserMedia","cs","DOMException","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","shimMediaStream","webkitMediaStream","shimOnTrack","_ontrack","f","origSetRemoteDescription","_ontrackpoly","te","shimGetSendersWithDtmf","shimSenderWithDtmf","_dtmf","_pc","_senders","origAddTrack","origRemoveTrack","origAddStream","origRemoveStream","origGetSenders","shimGetStats","origGetStats","onSucc","onErr","fixChromeStats_","standardReport","report","standardStats","timestamp","names","makeMapStats","successCallbackWrapper_","shimSenderReceiverGetStats","origGetReceivers","receivers","srcElement","shimAddTrackRemoveTrackWithNative","_shimmedLocalStreams","streamId","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","internalId","externalStream","internalStream","replaceExternalStreamId","alreadyExists","oldStream","methodObj","origSetLocalDescription","origLocalDescription","getOwnPropertyDescriptor","streamid","shimPeerConnection","addIceCandidateNullSupported","RTCIceCandidate","nativeAddIceCandidate","fixNegotiationNeeded","sdpSemantics","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","validTurn","startsWith","shimReplaceTrack","replaceTrack","setTrack","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","nativeGetStats","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","rid","scaleResolutionDownBy","RangeError","maxFramerate","getParameters","setParameters","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","finally","shimCreateAnswer","origCreateAnswer","shimLocalStreamsAPI","_localStreams","_addTrack","tracks","shimRemoteStreamsAPI","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","successCallback","failureCallback","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","audioTransceiver","getTransceivers","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","shimMaxMessageSize","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","canSendMMS","remoteMMS","POSITIVE_INFINITY","shimSendThrowTypeError","wrapDcSend","dc","origDataChannelSend","byteLength","origCreateDataChannel","createDataChannel","dataChannel","shimConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","newEvent","removeAllowExtmapMixed","nativeSRD","shimChrome","shimFirefox","shimEdge","shimSafari","logging","adapter","commonShim","browserShim","adapterFactory","onChange","hasSupport","canMix","canPip","hasPipSupport","canSFU","isPhone","inIframe","canUseEyeson","canFullscreen","hasMobileDevice","canToggleCamera","canPresentFiles","canScreenCapture","canAdjustSettings","canAdjustDeviceSettings","isExperimentalBrowser","isWebView","hasGetUserMedia","hasPeerConnection","isRecentBrowser","hasGetDisplayMedia","isChrome","isRecentChrome","isFF","isRecentFF","isEdge","isRecentEdge","isRecentSafari","hasCaptureStream","HTMLMediaElement","hasCanvasCaptureSupport","hasSenders","hasTrackOnUnmute","hasWebpSupport","canChangeAudioOutput","canChangeMicrophone","isTestSuite","canChangeCamera","isIOSDevice","requiresLowerConstraints","browserName","txt","browserVersion","webkitSupportsPresentationMode","isAndroidDevice","maxTouchPoints","MSStream","isIPhone","screen","isAndroidPhone","isAndroid","isMobile","top","isTouchDevice","canLiveStreamToFacebook","canDisplayTooltips","stopsDeviceActivityIndicatorOnDisable","supportsBlurOnSVG","SVGElement","blur","hasLocalStorage","localStorage","setItem","canGet","getItem","safariWithoutVP8","canShare","share","_stream","createStream","canvas","getContext","fillRect","captureStream","fallbackStorage","FeatureDetector","store","load","defaultValueParam","storedValue","CanvasMedia","CanvasCaptureMediaStream","CanvasCaptureMediaStreamTrack","hasAudio","hasVideo","disableAudio","enableAudio","stopTrack","stopStream","isScreenTrack","isCanvasTrack","isCameraTrack","getScreenTracks","getCameraTracks","stopCamera","disableCamera","enableCamera","toggleCamera","getCanvasTracks","isScreenStream","isCanvasStream","isCameraStream","isCanvasPresentationStream","isPresentationStream","hasCameraVideo","requestFrame","sinkId","eco","cameras","speakers","microphones","terminationInProgress","getSinkId","setStream","handleError","verifyStream","storeConstraints","adjustAudioTrack","device","groupId","res","optionsParam","getDevices","determineConstraintsForDevices","LocalStorage","videoDeviceId","audioDeviceId","watchForNewDevices","fetchDevices","getConstraints","ondevicechange","videoConstraints","audioConstraints","screenStream","existingStream","getMediaStream","addNinjaTrack","addCanvasTrack","addScreenTrack","adjustVideoTrack","addScreenStreamTrack","audioStream","screenTrack","fetchInputDevices","getMobileConstraints","vTrack","canvasStream","canvasTrack","usedStream","fillerTrack","_session","adjustedStream","locallyChanged","adjustMediaStreamTracks","hasPresenter","scanMessageForLocalStreamOptimization","isSource","isPresenter","hasDesktopSources","takeSnapshot","setLayer","setLayout","src","psrc","asrc","vsrc","dsrc","sources","presenterIdx","audioSources","videoSources","desktopSources","userSourceIndex","Set","presenter","source","opts","stamp","sourceUpdate","voiceActivity","source_update","voice_activity","podium","solo","isSolo","hasAudioPosition","hasVideoPosition","hasMedia","hasVideoSources","hasMutedVideoPeers","cid","RTCConstraints","remoteDescriptionUpdate","peerConnectionClosed","stopAllTracks","buildPeerConnectionOptions","onIceCompleted","resolveIceCompleted","rejectIceCompleted","handleOntrack","gotIceCandidate","handleNegotiation","startIceCheckingTimer","onunmute","handleUnmute","handleAccept","iceCheckingTimer","tmp","stunServers","turnServers","urlWithoutProtocol","credential","sdpModifiers","modifier","getLocalStream","stopUnusedTracks","audioTrack","videoTrack","tracksExist","audioSender","videoSender","rtp","factoryOptions","room","_room","uaOptions","adjustUserAgentOptions","transformer","transformedMessage","rtData","ready","links","_eyeson","_connection","connectionStatus","startSipConnection","getRoom","deleteFile","file","uploadFile","addFile","getUser","forwardMessage","ts","created_at","stopBroadcast","canvasMixer","errror","startBroadcast","getRemoteStream","stopRecording","startRecording","presentationStream","stopAllBroadcasts","clearFrontLayer","publishBroadcast","api","requestUser","access_key","isLocked","locked","initial","addition","del","playing","toFixedNumber","ratio","immediate","callNow","CAMERA_SMALL","CAMERA_MEDIUM","CAMERA_LARGE","CAMERA_NONE","defaultTrack","bindVideoToStream","setAttribute","xPos","camSize","draw","onRedraw","setCamera","drawFrame","calcSizesAndPositions","bouncedDraw","debounce","errorCallback","redrawCallback","camera","horizontal","vertical","cameraStream","redrawQueued","cameraPosition","cameraSizeInWords","fitScreen","sourceAspectRatio","targetAspectRatio","y","fitImage","small","medium","large","none","scaledCam","sizes","camPosition","positions","active","t0","performance","t1","clearRect","drawImage","imgData","createImageData","putImageData","changeStream","lockMeeting","_monitor","destroy","con","mon","ses","onEvent","_rtData","eyeson","silenced","stfu","chat","snapshot","send_chat","set_layer","set_layout","fetch_room","room_ready","RoomReceivedEvent","room_setup","memberlist","upload_file","delete_file","request_stfu","stream_offer","stop_youtube","stream_answer","start_youtube","change_stream","toggle_camera","stop_facebook","stop_playback","playback_update","start_playback","start_stream","start_facebook","stop_recording","start_screen_capture","stop_broadcasts","start_recording","stop_presenting","start_presenting","stop_annotation","start_annotation","publish_broadcast","clear_front_layer","request_guest_user","voice_activity_raw","start_mixer","update_mixer","lock_meeting","capture_error","options_update","ext_not_installed","broadcasts_update","facebook_logged_in","facebook_published","presentation_ended","handle_youtube_error","handle_facebook_error","status_update_youtube","recording","ext_cancel","ext_installed","message_status","moderator_info","enableSFU","splitSDP","tLineIdx","findIndex","SDPModifiers","defaultRTCConstraints","startAttempts","maxStartAttempts","endSession","handleExit","initSession","handleFailed","restartSession","tryRecoveryFrom","terminateSession","adjustVideoPodium","sipSession","buildSessionOptions","startSession","handleTermination","observe","sdpWrapper","sfu","sfuLine","Forbidden","NotFoundError","NotAllowedError","NotReadableError","1006","failure","recovery","condition","prevIceState","onOffline","handleIceStateChange","handleConnectionStateChange","addEventListeners","errorHandler","currentTarget","currentIceState","onMessageHandler","onReceived","offMessage","onConnected","onDisconnected","cable","disconnectTimestamp","handleReconnect","EyesonFactory","core","eventHandler","EventHandler","updateStatus","keepRoomAlive","rtConnection","pollingFallback","counter","pollingFallbackInterval","comApi","loadInitialInfos","broadcasts","youtube","client","mediaOptions","ConferenceSession","setMonitor","ActionCableConnection","websocket","onReceive","ComApi","prepareConnection","joinSession","joinOnConnect","offEvent","_throttledSend","throttle","roomUrl","query","staff","staffGifs","rej","img","images","original_mp4","mp4_size","largerGifs","API_URL","apiKey","clientId","activated","broadcastId","activate","getStream","deactivate","startStream","insertStream","insertBroadcast","createLiveStream","cleanupBroadcast","initGoogleApi","gapi","ga","async","onload","handleClientLoad","appendChild","initClient","scope","auth2","getAuthInstance","signIn","prompt","toDateString","snippet","getDefaultTitle","scheduledStartTime","toISOString","privacyStatus","cdn","resolution","ingestionType","broadcastStatus","resp","bindBroadcast","waitForStatus","transitionBroadcast","getBroadcast","items","liveStreamingDetails","concurrentViewers","responseBody","ingestionInfo","ingestionAddress","streamName","desiredStatus","intervalCnt","statusObj","streamStatus","lifeCycleStatus","health","healthStatus","errors","deleteableBroadcastStates","listBroadcast","broadcast","deleteBroadcast","LOAD_ERRORS","facebook","permalLinkUrl","sendStop","loggedIn","fetchLink","streamPublished","initFacebookApi","js","fjs","FB","fbAsyncInit","appId","xfbml","autoLogAppEvents","AppEvents","logPageView","getElementsByTagName","getElementById","parentNode","insertBefore","ui","display","phase","broadcast_data","login","getError","error_message","secure_stream_url","authResponse","userID","permalink_url","instant","intervalCounter","silenceDuration","offUpdate","onstatechange","script","createScriptProcessor","onaudioprocess","inputBuffer","getChannelData","sum","prev","current","sqrt","mic","createMediaStreamSource","audioMeterInterval","readInterval","readAudioLevel","updateInterval","audioLevel","diff"],"mappings":"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","file":"eyeson-factory.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"eyeson-factory\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"eyeson-factory\"] = factory();\n\telse\n\t\troot[\"eyeson-factory\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","/*!\n* screenfull\n* v5.0.2 - 2020-02-13\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  var parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES paramters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n","/*!\n * Platform.js <https://mths.be/platform>\n * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>\n * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>\n * Available under MIT license <https://mths.be/mit>\n */\n;(function() {\n  'use strict';\n\n  /** Used to determine if values are of the language type `Object`. */\n  var objectTypes = {\n    'function': true,\n    'object': true\n  };\n\n  /** Used as a reference to the global object. */\n  var root = (objectTypes[typeof window] && window) || this;\n\n  /** Backup possible global object. */\n  var oldRoot = root;\n\n  /** Detect free variable `exports`. */\n  var freeExports = objectTypes[typeof exports] && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect free variable `global` from Node.js or Browserified code and use it as `root`. */\n  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  /**\n   * Used as the maximum length of an array-like object.\n   * See the [ES6 spec](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength)\n   * for more details.\n   */\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n\n  /** Regular expression to detect Opera. */\n  var reOpera = /\\bOpera/;\n\n  /** Possible global object. */\n  var thisBinding = this;\n\n  /** Used for native method references. */\n  var objectProto = Object.prototype;\n\n  /** Used to check for own properties of an object. */\n  var hasOwnProperty = objectProto.hasOwnProperty;\n\n  /** Used to resolve the internal `[[Class]]` of values. */\n  var toString = objectProto.toString;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Capitalizes a string value.\n   *\n   * @private\n   * @param {string} string The string to capitalize.\n   * @returns {string} The capitalized string.\n   */\n  function capitalize(string) {\n    string = String(string);\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  /**\n   * A utility function to clean up the OS name.\n   *\n   * @private\n   * @param {string} os The OS name to clean up.\n   * @param {string} [pattern] A `RegExp` pattern matching the OS name.\n   * @param {string} [label] A label for the OS.\n   */\n  function cleanupOS(os, pattern, label) {\n    // Platform tokens are defined at:\n    // http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    // http://web.archive.org/web/20081122053950/http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    var data = {\n      '10.0': '10',\n      '6.4':  '10 Technical Preview',\n      '6.3':  '8.1',\n      '6.2':  '8',\n      '6.1':  'Server 2008 R2 / 7',\n      '6.0':  'Server 2008 / Vista',\n      '5.2':  'Server 2003 / XP 64-bit',\n      '5.1':  'XP',\n      '5.01': '2000 SP1',\n      '5.0':  '2000',\n      '4.0':  'NT',\n      '4.90': 'ME'\n    };\n    // Detect Windows version from platform tokens.\n    if (pattern && label && /^Win/i.test(os) && !/^Windows Phone /i.test(os) &&\n        (data = data[/[\\d.]+$/.exec(os)])) {\n      os = 'Windows ' + data;\n    }\n    // Correct character case and cleanup string.\n    os = String(os);\n\n    if (pattern && label) {\n      os = os.replace(RegExp(pattern, 'i'), label);\n    }\n\n    os = format(\n      os.replace(/ ce$/i, ' CE')\n        .replace(/\\bhpw/i, 'web')\n        .replace(/\\bMacintosh\\b/, 'Mac OS')\n        .replace(/_PowerPC\\b/i, ' OS')\n        .replace(/\\b(OS X) [^ \\d]+/i, '$1')\n        .replace(/\\bMac (OS X)\\b/, '$1')\n        .replace(/\\/(\\d)/, ' $1')\n        .replace(/_/g, '.')\n        .replace(/(?: BePC|[ .]*fc[ \\d.]+)$/i, '')\n        .replace(/\\bx86\\.64\\b/gi, 'x86_64')\n        .replace(/\\b(Windows Phone) OS\\b/, '$1')\n        .replace(/\\b(Chrome OS \\w+) [\\d.]+\\b/, '$1')\n        .split(' on ')[0]\n    );\n\n    return os;\n  }\n\n  /**\n   * An iteration utility for arrays and objects.\n   *\n   * @private\n   * @param {Array|Object} object The object to iterate over.\n   * @param {Function} callback The function called per iteration.\n   */\n  function each(object, callback) {\n    var index = -1,\n        length = object ? object.length : 0;\n\n    if (typeof length == 'number' && length > -1 && length <= maxSafeInteger) {\n      while (++index < length) {\n        callback(object[index], index, object);\n      }\n    } else {\n      forOwn(object, callback);\n    }\n  }\n\n  /**\n   * Trim and conditionally capitalize string values.\n   *\n   * @private\n   * @param {string} string The string to format.\n   * @returns {string} The formatted string.\n   */\n  function format(string) {\n    string = trim(string);\n    return /^(?:webOS|i(?:OS|P))/.test(string)\n      ? string\n      : capitalize(string);\n  }\n\n  /**\n   * Iterates over an object's own properties, executing the `callback` for each.\n   *\n   * @private\n   * @param {Object} object The object to iterate over.\n   * @param {Function} callback The function executed per own property.\n   */\n  function forOwn(object, callback) {\n    for (var key in object) {\n      if (hasOwnProperty.call(object, key)) {\n        callback(object[key], key, object);\n      }\n    }\n  }\n\n  /**\n   * Gets the internal `[[Class]]` of a value.\n   *\n   * @private\n   * @param {*} value The value.\n   * @returns {string} The `[[Class]]`.\n   */\n  function getClassOf(value) {\n    return value == null\n      ? capitalize(value)\n      : toString.call(value).slice(8, -1);\n  }\n\n  /**\n   * Host objects can return type values that are different from their actual\n   * data type. The objects we are concerned with usually return non-primitive\n   * types of \"object\", \"function\", or \"unknown\".\n   *\n   * @private\n   * @param {*} object The owner of the property.\n   * @param {string} property The property to check.\n   * @returns {boolean} Returns `true` if the property value is a non-primitive, else `false`.\n   */\n  function isHostType(object, property) {\n    var type = object != null ? typeof object[property] : 'number';\n    return !/^(?:boolean|number|string|undefined)$/.test(type) &&\n      (type == 'object' ? !!object[property] : true);\n  }\n\n  /**\n   * Prepares a string for use in a `RegExp` by making hyphens and spaces optional.\n   *\n   * @private\n   * @param {string} string The string to qualify.\n   * @returns {string} The qualified string.\n   */\n  function qualify(string) {\n    return String(string).replace(/([ -])(?!$)/g, '$1?');\n  }\n\n  /**\n   * A bare-bones `Array#reduce` like utility function.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @returns {*} The accumulated result.\n   */\n  function reduce(array, callback) {\n    var accumulator = null;\n    each(array, function(value, index) {\n      accumulator = callback(accumulator, value, index, array);\n    });\n    return accumulator;\n  }\n\n  /**\n   * Removes leading and trailing whitespace from a string.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} The trimmed string.\n   */\n  function trim(string) {\n    return String(string).replace(/^ +| +$/g, '');\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a new platform object.\n   *\n   * @memberOf platform\n   * @param {Object|string} [ua=navigator.userAgent] The user agent string or\n   *  context object.\n   * @returns {Object} A platform object.\n   */\n  function parse(ua) {\n\n    /** The environment context object. */\n    var context = root;\n\n    /** Used to flag when a custom context is provided. */\n    var isCustomContext = ua && typeof ua == 'object' && getClassOf(ua) != 'String';\n\n    // Juggle arguments.\n    if (isCustomContext) {\n      context = ua;\n      ua = null;\n    }\n\n    /** Browser navigator object. */\n    var nav = context.navigator || {};\n\n    /** Browser user agent string. */\n    var userAgent = nav.userAgent || '';\n\n    ua || (ua = userAgent);\n\n    /** Used to flag when `thisBinding` is the [ModuleScope]. */\n    var isModuleScope = isCustomContext || thisBinding == oldRoot;\n\n    /** Used to detect if browser is like Chrome. */\n    var likeChrome = isCustomContext\n      ? !!nav.likeChrome\n      : /\\bChrome\\b/.test(ua) && !/internal|\\n/i.test(toString.toString());\n\n    /** Internal `[[Class]]` value shortcuts. */\n    var objectClass = 'Object',\n        airRuntimeClass = isCustomContext ? objectClass : 'ScriptBridgingProxyObject',\n        enviroClass = isCustomContext ? objectClass : 'Environment',\n        javaClass = (isCustomContext && context.java) ? 'JavaPackage' : getClassOf(context.java),\n        phantomClass = isCustomContext ? objectClass : 'RuntimeObject';\n\n    /** Detect Java environments. */\n    var java = /\\bJava/.test(javaClass) && context.java;\n\n    /** Detect Rhino. */\n    var rhino = java && getClassOf(context.environment) == enviroClass;\n\n    /** A character to represent alpha. */\n    var alpha = java ? 'a' : '\\u03b1';\n\n    /** A character to represent beta. */\n    var beta = java ? 'b' : '\\u03b2';\n\n    /** Browser document object. */\n    var doc = context.document || {};\n\n    /**\n     * Detect Opera browser (Presto-based).\n     * http://www.howtocreate.co.uk/operaStuff/operaObject.html\n     * http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#operamini\n     */\n    var opera = context.operamini || context.opera;\n\n    /** Opera `[[Class]]`. */\n    var operaClass = reOpera.test(operaClass = (isCustomContext && opera) ? opera['[[Class]]'] : getClassOf(opera))\n      ? operaClass\n      : (opera = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /** Temporary variable used over the script's lifetime. */\n    var data;\n\n    /** The CPU architecture. */\n    var arch = ua;\n\n    /** Platform description array. */\n    var description = [];\n\n    /** Platform alpha/beta indicator. */\n    var prerelease = null;\n\n    /** A flag to indicate that environment features should be used to resolve the platform. */\n    var useFeatures = ua == userAgent;\n\n    /** The browser/environment version. */\n    var version = useFeatures && opera && typeof opera.version == 'function' && opera.version();\n\n    /** A flag to indicate if the OS ends with \"/ Version\" */\n    var isSpecialCasedOS;\n\n    /* Detectable layout engines (order is important). */\n    var layout = getLayout([\n      { 'label': 'EdgeHTML', 'pattern': 'Edge' },\n      'Trident',\n      { 'label': 'WebKit', 'pattern': 'AppleWebKit' },\n      'iCab',\n      'Presto',\n      'NetFront',\n      'Tasman',\n      'KHTML',\n      'Gecko'\n    ]);\n\n    /* Detectable browser names (order is important). */\n    var name = getName([\n      'Adobe AIR',\n      'Arora',\n      'Avant Browser',\n      'Breach',\n      'Camino',\n      'Electron',\n      'Epiphany',\n      'Fennec',\n      'Flock',\n      'Galeon',\n      'GreenBrowser',\n      'iCab',\n      'Iceweasel',\n      'K-Meleon',\n      'Konqueror',\n      'Lunascape',\n      'Maxthon',\n      { 'label': 'Microsoft Edge', 'pattern': 'Edge' },\n      'Midori',\n      'Nook Browser',\n      'PaleMoon',\n      'PhantomJS',\n      'Raven',\n      'Rekonq',\n      'RockMelt',\n      { 'label': 'Samsung Internet', 'pattern': 'SamsungBrowser' },\n      'SeaMonkey',\n      { 'label': 'Silk', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Sleipnir',\n      'SlimBrowser',\n      { 'label': 'SRWare Iron', 'pattern': 'Iron' },\n      'Sunrise',\n      'Swiftfox',\n      'Waterfox',\n      'WebPositive',\n      'Opera Mini',\n      { 'label': 'Opera Mini', 'pattern': 'OPiOS' },\n      'Opera',\n      { 'label': 'Opera', 'pattern': 'OPR' },\n      'Chrome',\n      { 'label': 'Chrome Mobile', 'pattern': '(?:CriOS|CrMo)' },\n      { 'label': 'Firefox', 'pattern': '(?:Firefox|Minefield)' },\n      { 'label': 'Firefox for iOS', 'pattern': 'FxiOS' },\n      { 'label': 'IE', 'pattern': 'IEMobile' },\n      { 'label': 'IE', 'pattern': 'MSIE' },\n      'Safari'\n    ]);\n\n    /* Detectable products (order is important). */\n    var product = getProduct([\n      { 'label': 'BlackBerry', 'pattern': 'BB10' },\n      'BlackBerry',\n      { 'label': 'Galaxy S', 'pattern': 'GT-I9000' },\n      { 'label': 'Galaxy S2', 'pattern': 'GT-I9100' },\n      { 'label': 'Galaxy S3', 'pattern': 'GT-I9300' },\n      { 'label': 'Galaxy S4', 'pattern': 'GT-I9500' },\n      { 'label': 'Galaxy S5', 'pattern': 'SM-G900' },\n      { 'label': 'Galaxy S6', 'pattern': 'SM-G920' },\n      { 'label': 'Galaxy S6 Edge', 'pattern': 'SM-G925' },\n      { 'label': 'Galaxy S7', 'pattern': 'SM-G930' },\n      { 'label': 'Galaxy S7 Edge', 'pattern': 'SM-G935' },\n      'Google TV',\n      'Lumia',\n      'iPad',\n      'iPod',\n      'iPhone',\n      'Kindle',\n      { 'label': 'Kindle Fire', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Nexus',\n      'Nook',\n      'PlayBook',\n      'PlayStation Vita',\n      'PlayStation',\n      'TouchPad',\n      'Transformer',\n      { 'label': 'Wii U', 'pattern': 'WiiU' },\n      'Wii',\n      'Xbox One',\n      { 'label': 'Xbox 360', 'pattern': 'Xbox' },\n      'Xoom'\n    ]);\n\n    /* Detectable manufacturers. */\n    var manufacturer = getManufacturer({\n      'Apple': { 'iPad': 1, 'iPhone': 1, 'iPod': 1 },\n      'Archos': {},\n      'Amazon': { 'Kindle': 1, 'Kindle Fire': 1 },\n      'Asus': { 'Transformer': 1 },\n      'Barnes & Noble': { 'Nook': 1 },\n      'BlackBerry': { 'PlayBook': 1 },\n      'Google': { 'Google TV': 1, 'Nexus': 1 },\n      'HP': { 'TouchPad': 1 },\n      'HTC': {},\n      'LG': {},\n      'Microsoft': { 'Xbox': 1, 'Xbox One': 1 },\n      'Motorola': { 'Xoom': 1 },\n      'Nintendo': { 'Wii U': 1,  'Wii': 1 },\n      'Nokia': { 'Lumia': 1 },\n      'Samsung': { 'Galaxy S': 1, 'Galaxy S2': 1, 'Galaxy S3': 1, 'Galaxy S4': 1 },\n      'Sony': { 'PlayStation': 1, 'PlayStation Vita': 1 }\n    });\n\n    /* Detectable operating systems (order is important). */\n    var os = getOS([\n      'Windows Phone',\n      'Android',\n      'CentOS',\n      { 'label': 'Chrome OS', 'pattern': 'CrOS' },\n      'Debian',\n      'Fedora',\n      'FreeBSD',\n      'Gentoo',\n      'Haiku',\n      'Kubuntu',\n      'Linux Mint',\n      'OpenBSD',\n      'Red Hat',\n      'SuSE',\n      'Ubuntu',\n      'Xubuntu',\n      'Cygwin',\n      'Symbian OS',\n      'hpwOS',\n      'webOS ',\n      'webOS',\n      'Tablet OS',\n      'Tizen',\n      'Linux',\n      'Mac OS X',\n      'Macintosh',\n      'Mac',\n      'Windows 98;',\n      'Windows '\n    ]);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Picks the layout engine from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected layout engine.\n     */\n    function getLayout(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the manufacturer from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An object of guesses.\n     * @returns {null|string} The detected manufacturer.\n     */\n    function getManufacturer(guesses) {\n      return reduce(guesses, function(result, value, key) {\n        // Lookup the manufacturer by product or scan the UA for the manufacturer.\n        return result || (\n          value[product] ||\n          value[/^[a-z]+(?: +[a-z]+\\b)*/i.exec(product)] ||\n          RegExp('\\\\b' + qualify(key) + '(?:\\\\b|\\\\w*\\\\d)', 'i').exec(ua)\n        ) && key;\n      });\n    }\n\n    /**\n     * Picks the browser name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected browser name.\n     */\n    function getName(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the OS name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected OS name.\n     */\n    function getOS(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + '(?:/[\\\\d.]+|[ \\\\w.]*)', 'i').exec(ua)\n            )) {\n          result = cleanupOS(result, pattern, guess.label || guess);\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Picks the product name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected product name.\n     */\n    function getProduct(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + ' *\\\\d+[.\\\\w_]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + ' *\\\\w+-[\\\\w]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + '(?:; *(?:[a-z]+[_-])?[a-z]+\\\\d+|[^ ();-]*)', 'i').exec(ua)\n            )) {\n          // Split by forward slash and append product version if needed.\n          if ((result = String((guess.label && !RegExp(pattern, 'i').test(guess.label)) ? guess.label : result).split('/'))[1] && !/[\\d.]+/.test(result[0])) {\n            result[0] += ' ' + result[1];\n          }\n          // Correct character case and cleanup string.\n          guess = guess.label || guess;\n          result = format(result[0]\n            .replace(RegExp(pattern, 'i'), guess)\n            .replace(RegExp('; *(?:' + guess + '[_-])?', 'i'), ' ')\n            .replace(RegExp('(' + guess + ')[-_.]?(\\\\w)', 'i'), '$1 $2'));\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Resolves the version using an array of UA patterns.\n     *\n     * @private\n     * @param {Array} patterns An array of UA patterns.\n     * @returns {null|string} The detected version.\n     */\n    function getVersion(patterns) {\n      return reduce(patterns, function(result, pattern) {\n        return result || (RegExp(pattern +\n          '(?:-[\\\\d.]+/|(?: for [\\\\w-]+)?[ /-])([\\\\d.]+[^ ();/_-]*)', 'i').exec(ua) || 0)[1] || null;\n      });\n    }\n\n    /**\n     * Returns `platform.description` when the platform object is coerced to a string.\n     *\n     * @name toString\n     * @memberOf platform\n     * @returns {string} Returns `platform.description` if available, else an empty string.\n     */\n    function toStringPlatform() {\n      return this.description || '';\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Convert layout to an array so we can add extra details.\n    layout && (layout = [layout]);\n\n    // Detect product names that contain their manufacturer's name.\n    if (manufacturer && !product) {\n      product = getProduct([manufacturer]);\n    }\n    // Clean up Google TV.\n    if ((data = /\\bGoogle TV\\b/.exec(product))) {\n      product = data[0];\n    }\n    // Detect simulators.\n    if (/\\bSimulator\\b/i.test(ua)) {\n      product = (product ? product + ' ' : '') + 'Simulator';\n    }\n    // Detect Opera Mini 8+ running in Turbo/Uncompressed mode on iOS.\n    if (name == 'Opera Mini' && /\\bOPiOS\\b/.test(ua)) {\n      description.push('running in Turbo/Uncompressed mode');\n    }\n    // Detect IE Mobile 11.\n    if (name == 'IE' && /\\blike iPhone OS\\b/.test(ua)) {\n      data = parse(ua.replace(/like iPhone OS/, ''));\n      manufacturer = data.manufacturer;\n      product = data.product;\n    }\n    // Detect iOS.\n    else if (/^iP/.test(product)) {\n      name || (name = 'Safari');\n      os = 'iOS' + ((data = / OS ([\\d_]+)/i.exec(ua))\n        ? ' ' + data[1].replace(/_/g, '.')\n        : '');\n    }\n    // Detect Kubuntu.\n    else if (name == 'Konqueror' && !/buntu/i.test(os)) {\n      os = 'Kubuntu';\n    }\n    // Detect Android browsers.\n    else if ((manufacturer && manufacturer != 'Google' &&\n        ((/Chrome/.test(name) && !/\\bMobile Safari\\b/i.test(ua)) || /\\bVita\\b/.test(product))) ||\n        (/\\bAndroid\\b/.test(os) && /^Chrome/.test(name) && /\\bVersion\\//i.test(ua))) {\n      name = 'Android Browser';\n      os = /\\bAndroid\\b/.test(os) ? os : 'Android';\n    }\n    // Detect Silk desktop/accelerated modes.\n    else if (name == 'Silk') {\n      if (!/\\bMobi/i.test(ua)) {\n        os = 'Android';\n        description.unshift('desktop mode');\n      }\n      if (/Accelerated *= *true/i.test(ua)) {\n        description.unshift('accelerated');\n      }\n    }\n    // Detect PaleMoon identifying as Firefox.\n    else if (name == 'PaleMoon' && (data = /\\bFirefox\\/([\\d.]+)\\b/.exec(ua))) {\n      description.push('identifying as Firefox ' + data[1]);\n    }\n    // Detect Firefox OS and products running Firefox.\n    else if (name == 'Firefox' && (data = /\\b(Mobile|Tablet|TV)\\b/i.exec(ua))) {\n      os || (os = 'Firefox OS');\n      product || (product = data[1]);\n    }\n    // Detect false positives for Firefox/Safari.\n    else if (!name || (data = !/\\bMinefield\\b/i.test(ua) && /\\b(?:Firefox|Safari)\\b/.exec(name))) {\n      // Escape the `/` for Firefox 1.\n      if (name && !product && /[\\/,]|^[^(]+?\\)/.test(ua.slice(ua.indexOf(data + '/') + 8))) {\n        // Clear name of false positives.\n        name = null;\n      }\n      // Reassign a generic name.\n      if ((data = product || manufacturer || os) &&\n          (product || manufacturer || /\\b(?:Android|Symbian OS|Tablet OS|webOS)\\b/.test(os))) {\n        name = /[a-z]+(?: Hat)?/i.exec(/\\bAndroid\\b/.test(os) ? os : data) + ' Browser';\n      }\n    }\n    // Add Chrome version to description for Electron.\n    else if (name == 'Electron' && (data = (/\\bChrome\\/([\\d.]+)\\b/.exec(ua) || 0)[1])) {\n      description.push('Chromium ' + data);\n    }\n    // Detect non-Opera (Presto-based) versions (order is important).\n    if (!version) {\n      version = getVersion([\n        '(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\\\d.]+$))',\n        'Version',\n        qualify(name),\n        '(?:Firefox|Minefield|NetFront)'\n      ]);\n    }\n    // Detect stubborn layout engines.\n    if ((data =\n          layout == 'iCab' && parseFloat(version) > 3 && 'WebKit' ||\n          /\\bOpera\\b/.test(name) && (/\\bOPR\\b/.test(ua) ? 'Blink' : 'Presto') ||\n          /\\b(?:Midori|Nook|Safari)\\b/i.test(ua) && !/^(?:Trident|EdgeHTML)$/.test(layout) && 'WebKit' ||\n          !layout && /\\bMSIE\\b/i.test(ua) && (os == 'Mac OS' ? 'Tasman' : 'Trident') ||\n          layout == 'WebKit' && /\\bPlayStation\\b(?! Vita\\b)/i.test(name) && 'NetFront'\n        )) {\n      layout = [data];\n    }\n    // Detect Windows Phone 7 desktop mode.\n    if (name == 'IE' && (data = (/; *(?:XBLWP|ZuneWP)(\\d+)/i.exec(ua) || 0)[1])) {\n      name += ' Mobile';\n      os = 'Windows Phone ' + (/\\+$/.test(data) ? data : data + '.x');\n      description.unshift('desktop mode');\n    }\n    // Detect Windows Phone 8.x desktop mode.\n    else if (/\\bWPDesktop\\b/i.test(ua)) {\n      name = 'IE Mobile';\n      os = 'Windows Phone 8.x';\n      description.unshift('desktop mode');\n      version || (version = (/\\brv:([\\d.]+)/.exec(ua) || 0)[1]);\n    }\n    // Detect IE 11 identifying as other browsers.\n    else if (name != 'IE' && layout == 'Trident' && (data = /\\brv:([\\d.]+)/.exec(ua))) {\n      if (name) {\n        description.push('identifying as ' + name + (version ? ' ' + version : ''));\n      }\n      name = 'IE';\n      version = data[1];\n    }\n    // Leverage environment features.\n    if (useFeatures) {\n      // Detect server-side environments.\n      // Rhino has a global function while others have a global object.\n      if (isHostType(context, 'global')) {\n        if (java) {\n          data = java.lang.System;\n          arch = data.getProperty('os.arch');\n          os = os || data.getProperty('os.name') + ' ' + data.getProperty('os.version');\n        }\n        if (rhino) {\n          try {\n            version = context.require('ringo/engine').version.join('.');\n            name = 'RingoJS';\n          } catch(e) {\n            if ((data = context.system) && data.global.system == context.system) {\n              name = 'Narwhal';\n              os || (os = data[0].os || null);\n            }\n          }\n          if (!name) {\n            name = 'Rhino';\n          }\n        }\n        else if (\n          typeof context.process == 'object' && !context.process.browser &&\n          (data = context.process)\n        ) {\n          if (typeof data.versions == 'object') {\n            if (typeof data.versions.electron == 'string') {\n              description.push('Node ' + data.versions.node);\n              name = 'Electron';\n              version = data.versions.electron;\n            } else if (typeof data.versions.nw == 'string') {\n              description.push('Chromium ' + version, 'Node ' + data.versions.node);\n              name = 'NW.js';\n              version = data.versions.nw;\n            }\n          }\n          if (!name) {\n            name = 'Node.js';\n            arch = data.arch;\n            os = data.platform;\n            version = /[\\d.]+/.exec(data.version);\n            version = version ? version[0] : null;\n          }\n        }\n      }\n      // Detect Adobe AIR.\n      else if (getClassOf((data = context.runtime)) == airRuntimeClass) {\n        name = 'Adobe AIR';\n        os = data.flash.system.Capabilities.os;\n      }\n      // Detect PhantomJS.\n      else if (getClassOf((data = context.phantom)) == phantomClass) {\n        name = 'PhantomJS';\n        version = (data = data.version || null) && (data.major + '.' + data.minor + '.' + data.patch);\n      }\n      // Detect IE compatibility modes.\n      else if (typeof doc.documentMode == 'number' && (data = /\\bTrident\\/(\\d+)/i.exec(ua))) {\n        // We're in compatibility mode when the Trident version + 4 doesn't\n        // equal the document mode.\n        version = [version, doc.documentMode];\n        if ((data = +data[1] + 4) != version[1]) {\n          description.push('IE ' + version[1] + ' mode');\n          layout && (layout[1] = '');\n          version[1] = data;\n        }\n        version = name == 'IE' ? String(version[1].toFixed(1)) : version[0];\n      }\n      // Detect IE 11 masking as other browsers.\n      else if (typeof doc.documentMode == 'number' && /^(?:Chrome|Firefox)\\b/.test(name)) {\n        description.push('masking as ' + name + ' ' + version);\n        name = 'IE';\n        version = '11.0';\n        layout = ['Trident'];\n        os = 'Windows';\n      }\n      os = os && format(os);\n    }\n    // Detect prerelease phases.\n    if (version && (data =\n          /(?:[ab]|dp|pre|[ab]\\d+pre)(?:\\d+\\+?)?$/i.exec(version) ||\n          /(?:alpha|beta)(?: ?\\d)?/i.exec(ua + ';' + (useFeatures && nav.appMinorVersion)) ||\n          /\\bMinefield\\b/i.test(ua) && 'a'\n        )) {\n      prerelease = /b/i.test(data) ? 'beta' : 'alpha';\n      version = version.replace(RegExp(data + '\\\\+?$'), '') +\n        (prerelease == 'beta' ? beta : alpha) + (/\\d+\\+?/.exec(data) || '');\n    }\n    // Detect Firefox Mobile.\n    if (name == 'Fennec' || name == 'Firefox' && /\\b(?:Android|Firefox OS)\\b/.test(os)) {\n      name = 'Firefox Mobile';\n    }\n    // Obscure Maxthon's unreliable version.\n    else if (name == 'Maxthon' && version) {\n      version = version.replace(/\\.[\\d.]+/, '.x');\n    }\n    // Detect Xbox 360 and Xbox One.\n    else if (/\\bXbox\\b/i.test(product)) {\n      if (product == 'Xbox 360') {\n        os = null;\n      }\n      if (product == 'Xbox 360' && /\\bIEMobile\\b/.test(ua)) {\n        description.unshift('mobile mode');\n      }\n    }\n    // Add mobile postfix.\n    else if ((/^(?:Chrome|IE|Opera)$/.test(name) || name && !product && !/Browser|Mobi/.test(name)) &&\n        (os == 'Windows CE' || /Mobi/i.test(ua))) {\n      name += ' Mobile';\n    }\n    // Detect IE platform preview.\n    else if (name == 'IE' && useFeatures) {\n      try {\n        if (context.external === null) {\n          description.unshift('platform preview');\n        }\n      } catch(e) {\n        description.unshift('embedded');\n      }\n    }\n    // Detect BlackBerry OS version.\n    // http://docs.blackberry.com/en/developers/deliverables/18169/HTTP_headers_sent_by_BB_Browser_1234911_11.jsp\n    else if ((/\\bBlackBerry\\b/.test(product) || /\\bBB10\\b/.test(ua)) && (data =\n          (RegExp(product.replace(/ +/g, ' *') + '/([.\\\\d]+)', 'i').exec(ua) || 0)[1] ||\n          version\n        )) {\n      data = [data, /BB10/.test(ua)];\n      os = (data[1] ? (product = null, manufacturer = 'BlackBerry') : 'Device Software') + ' ' + data[0];\n      version = null;\n    }\n    // Detect Opera identifying/masking itself as another browser.\n    // http://www.opera.com/support/kb/view/843/\n    else if (this != forOwn && product != 'Wii' && (\n          (useFeatures && opera) ||\n          (/Opera/.test(name) && /\\b(?:MSIE|Firefox)\\b/i.test(ua)) ||\n          (name == 'Firefox' && /\\bOS X (?:\\d+\\.){2,}/.test(os)) ||\n          (name == 'IE' && (\n            (os && !/^Win/.test(os) && version > 5.5) ||\n            /\\bWindows XP\\b/.test(os) && version > 8 ||\n            version == 8 && !/\\bTrident\\b/.test(ua)\n          ))\n        ) && !reOpera.test((data = parse.call(forOwn, ua.replace(reOpera, '') + ';'))) && data.name) {\n      // When \"identifying\", the UA contains both Opera and the other browser's name.\n      data = 'ing as ' + data.name + ((data = data.version) ? ' ' + data : '');\n      if (reOpera.test(name)) {\n        if (/\\bIE\\b/.test(data) && os == 'Mac OS') {\n          os = null;\n        }\n        data = 'identify' + data;\n      }\n      // When \"masking\", the UA contains only the other browser's name.\n      else {\n        data = 'mask' + data;\n        if (operaClass) {\n          name = format(operaClass.replace(/([a-z])([A-Z])/g, '$1 $2'));\n        } else {\n          name = 'Opera';\n        }\n        if (/\\bIE\\b/.test(data)) {\n          os = null;\n        }\n        if (!useFeatures) {\n          version = null;\n        }\n      }\n      layout = ['Presto'];\n      description.push(data);\n    }\n    // Detect WebKit Nightly and approximate Chrome/Safari versions.\n    if ((data = (/\\bAppleWebKit\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n      // Correct build number for numeric comparison.\n      // (e.g. \"532.5\" becomes \"532.05\")\n      data = [parseFloat(data.replace(/\\.(\\d)$/, '.0$1')), data];\n      // Nightly builds are postfixed with a \"+\".\n      if (name == 'Safari' && data[1].slice(-1) == '+') {\n        name = 'WebKit Nightly';\n        prerelease = 'alpha';\n        version = data[1].slice(0, -1);\n      }\n      // Clear incorrect browser versions.\n      else if (version == data[1] ||\n          version == (data[2] = (/\\bSafari\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n        version = null;\n      }\n      // Use the full Chrome version when available.\n      data[1] = (/\\bChrome\\/([\\d.]+)/i.exec(ua) || 0)[1];\n      // Detect Blink layout engine.\n      if (data[0] == 537.36 && data[2] == 537.36 && parseFloat(data[1]) >= 28 && layout == 'WebKit') {\n        layout = ['Blink'];\n      }\n      // Detect JavaScriptCore.\n      // http://stackoverflow.com/questions/6768474/how-can-i-detect-which-javascript-engine-v8-or-jsc-is-used-at-runtime-in-androi\n      if (!useFeatures || (!likeChrome && !data[1])) {\n        layout && (layout[1] = 'like Safari');\n        data = (data = data[0], data < 400 ? 1 : data < 500 ? 2 : data < 526 ? 3 : data < 533 ? 4 : data < 534 ? '4+' : data < 535 ? 5 : data < 537 ? 6 : data < 538 ? 7 : data < 601 ? 8 : '8');\n      } else {\n        layout && (layout[1] = 'like Chrome');\n        data = data[1] || (data = data[0], data < 530 ? 1 : data < 532 ? 2 : data < 532.05 ? 3 : data < 533 ? 4 : data < 534.03 ? 5 : data < 534.07 ? 6 : data < 534.10 ? 7 : data < 534.13 ? 8 : data < 534.16 ? 9 : data < 534.24 ? 10 : data < 534.30 ? 11 : data < 535.01 ? 12 : data < 535.02 ? '13+' : data < 535.07 ? 15 : data < 535.11 ? 16 : data < 535.19 ? 17 : data < 536.05 ? 18 : data < 536.10 ? 19 : data < 537.01 ? 20 : data < 537.11 ? '21+' : data < 537.13 ? 23 : data < 537.18 ? 24 : data < 537.24 ? 25 : data < 537.36 ? 26 : layout != 'Blink' ? '27' : '28');\n      }\n      // Add the postfix of \".x\" or \"+\" for approximate versions.\n      layout && (layout[1] += ' ' + (data += typeof data == 'number' ? '.x' : /[.+]/.test(data) ? '' : '+'));\n      // Obscure version for some Safari 1-2 releases.\n      if (name == 'Safari' && (!version || parseInt(version) > 45)) {\n        version = data;\n      }\n    }\n    // Detect Opera desktop modes.\n    if (name == 'Opera' &&  (data = /\\bzbov|zvav$/.exec(os))) {\n      name += ' ';\n      description.unshift('desktop mode');\n      if (data == 'zvav') {\n        name += 'Mini';\n        version = null;\n      } else {\n        name += 'Mobile';\n      }\n      os = os.replace(RegExp(' *' + data + '$'), '');\n    }\n    // Detect Chrome desktop mode.\n    else if (name == 'Safari' && /\\bChrome\\b/.exec(layout && layout[1])) {\n      description.unshift('desktop mode');\n      name = 'Chrome Mobile';\n      version = null;\n\n      if (/\\bOS X\\b/.test(os)) {\n        manufacturer = 'Apple';\n        os = 'iOS 4.3+';\n      } else {\n        os = null;\n      }\n    }\n    // Strip incorrect OS versions.\n    if (version && version.indexOf((data = /[\\d.]+$/.exec(os))) == 0 &&\n        ua.indexOf('/' + data + '-') > -1) {\n      os = trim(os.replace(data, ''));\n    }\n    // Add layout engine.\n    if (layout && !/\\b(?:Avant|Nook)\\b/.test(name) && (\n        /Browser|Lunascape|Maxthon/.test(name) ||\n        name != 'Safari' && /^iOS/.test(os) && /\\bSafari\\b/.test(layout[1]) ||\n        /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(name) && layout[1])) {\n      // Don't add layout details to description if they are falsey.\n      (data = layout[layout.length - 1]) && description.push(data);\n    }\n    // Combine contextual information.\n    if (description.length) {\n      description = ['(' + description.join('; ') + ')'];\n    }\n    // Append manufacturer to description.\n    if (manufacturer && product && product.indexOf(manufacturer) < 0) {\n      description.push('on ' + manufacturer);\n    }\n    // Append product to description.\n    if (product) {\n      description.push((/^on /.test(description[description.length - 1]) ? '' : 'on ') + product);\n    }\n    // Parse the OS into an object.\n    if (os) {\n      data = / ([\\d.+]+)$/.exec(os);\n      isSpecialCasedOS = data && os.charAt(os.length - data[0].length - 1) == '/';\n      os = {\n        'architecture': 32,\n        'family': (data && !isSpecialCasedOS) ? os.replace(data[0], '') : os,\n        'version': data ? data[1] : null,\n        'toString': function() {\n          var version = this.version;\n          return this.family + ((version && !isSpecialCasedOS) ? ' ' + version : '') + (this.architecture == 64 ? ' 64-bit' : '');\n        }\n      };\n    }\n    // Add browser/OS architecture.\n    if ((data = /\\b(?:AMD|IA|Win|WOW|x86_|x)64\\b/i.exec(arch)) && !/\\bi686\\b/i.test(arch)) {\n      if (os) {\n        os.architecture = 64;\n        os.family = os.family.replace(RegExp(' *' + data), '');\n      }\n      if (\n          name && (/\\bWOW64\\b/i.test(ua) ||\n          (useFeatures && /\\w(?:86|32)$/.test(nav.cpuClass || nav.platform) && !/\\bWin64; x64\\b/i.test(ua)))\n      ) {\n        description.unshift('32-bit');\n      }\n    }\n    // Chrome 39 and above on OS X is always 64-bit.\n    else if (\n        os && /^OS X/.test(os.family) &&\n        name == 'Chrome' && parseFloat(version) >= 39\n    ) {\n      os.architecture = 64;\n    }\n\n    ua || (ua = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The platform object.\n     *\n     * @name platform\n     * @type Object\n     */\n    var platform = {};\n\n    /**\n     * The platform description.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.description = ua;\n\n    /**\n     * The name of the browser's layout engine.\n     *\n     * The list of common layout engines include:\n     * \"Blink\", \"EdgeHTML\", \"Gecko\", \"Trident\" and \"WebKit\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.layout = layout && layout[0];\n\n    /**\n     * The name of the product's manufacturer.\n     *\n     * The list of manufacturers include:\n     * \"Apple\", \"Archos\", \"Amazon\", \"Asus\", \"Barnes & Noble\", \"BlackBerry\",\n     * \"Google\", \"HP\", \"HTC\", \"LG\", \"Microsoft\", \"Motorola\", \"Nintendo\",\n     * \"Nokia\", \"Samsung\" and \"Sony\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.manufacturer = manufacturer;\n\n    /**\n     * The name of the browser/environment.\n     *\n     * The list of common browser names include:\n     * \"Chrome\", \"Electron\", \"Firefox\", \"Firefox for iOS\", \"IE\",\n     * \"Microsoft Edge\", \"PhantomJS\", \"Safari\", \"SeaMonkey\", \"Silk\",\n     * \"Opera Mini\" and \"Opera\"\n     *\n     * Mobile versions of some browsers have \"Mobile\" appended to their name:\n     * eg. \"Chrome Mobile\", \"Firefox Mobile\", \"IE Mobile\" and \"Opera Mobile\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.name = name;\n\n    /**\n     * The alpha/beta release indicator.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.prerelease = prerelease;\n\n    /**\n     * The name of the product hosting the browser.\n     *\n     * The list of common products include:\n     *\n     * \"BlackBerry\", \"Galaxy S4\", \"Lumia\", \"iPad\", \"iPod\", \"iPhone\", \"Kindle\",\n     * \"Kindle Fire\", \"Nexus\", \"Nook\", \"PlayBook\", \"TouchPad\" and \"Transformer\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.product = product;\n\n    /**\n     * The browser's user agent string.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.ua = ua;\n\n    /**\n     * The browser/environment version.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.version = name && version;\n\n    /**\n     * The name of the operating system.\n     *\n     * @memberOf platform\n     * @type Object\n     */\n    platform.os = os || {\n\n      /**\n       * The CPU architecture the OS is built for.\n       *\n       * @memberOf platform.os\n       * @type number|null\n       */\n      'architecture': null,\n\n      /**\n       * The family of the OS.\n       *\n       * Common values include:\n       * \"Windows\", \"Windows Server 2008 R2 / 7\", \"Windows Server 2008 / Vista\",\n       * \"Windows XP\", \"OS X\", \"Ubuntu\", \"Debian\", \"Fedora\", \"Red Hat\", \"SuSE\",\n       * \"Android\", \"iOS\" and \"Windows Phone\"\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'family': null,\n\n      /**\n       * The version of the OS.\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'version': null,\n\n      /**\n       * Returns the OS string.\n       *\n       * @memberOf platform.os\n       * @returns {string} The OS string.\n       */\n      'toString': function() { return 'null'; }\n    };\n\n    platform.parse = parse;\n    platform.toString = toStringPlatform;\n\n    if (platform.version) {\n      description.unshift(version);\n    }\n    if (platform.name) {\n      description.unshift(name);\n    }\n    if (os && name && !(os == String(os).split(' ')[0] && (os == name.split(' ')[0] || product))) {\n      description.push(product ? '(' + os + ')' : 'on ' + os);\n    }\n    if (description.length) {\n      platform.description = description.join(' ');\n    }\n    return platform;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export platform.\n  var platform = parse();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose platform on the global object to prevent errors when platform is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    root.platform = platform;\n\n    // Define as an anonymous module so platform can be aliased through path mapping.\n    define(function() {\n      return platform;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.\n  else if (freeExports && freeModule) {\n    // Export for CommonJS support.\n    forOwn(platform, function(value, key) {\n      freeExports[key] = value;\n    });\n  }\n  else {\n    // Export to the global object.\n    root.platform = platform;\n  }\n}.call(this));\n","/*!\n * \n *  SIP version 0.11.6\n *  Copyright (c) 2014-2018 Junction Networks, Inc <http://www.onsip.com>\n *  Homepage: https://sipjs.com\n *  License: https://sipjs.com/license/\n * \n * \n *  ~~~SIP.js contains substantial portions of JsSIP under the following license~~~\n *  Homepage: http://jssip.net\n *  Copyright (c) 2012-2013 José Luis Millán - Versatica <http://www.versatica.com>\n * \n *  Permission is hereby granted, free of charge, to any person obtaining\n *  a copy of this software and associated documentation files (the\n *  \"Software\"), to deal in the Software without restriction, including\n *  without limitation the rights to use, copy, modify, merge, publish,\n *  distribute, sublicense, and/or sell copies of the Software, and to\n *  permit persons to whom the Software is furnished to do so, subject to\n *  the following conditions:\n * \n *  The above copyright notice and this permission notice shall be\n *  included in all copies or substantial portions of the Software.\n * \n *  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n *  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n *  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n *  LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n *  WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * \n *  ~~~ end JsSIP license ~~~\n * \n * \n * \n * \n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SIP\"] = factory();\n\telse\n\t\troot[\"SIP\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = __webpack_require__(1)(__webpack_require__(40));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * @name SIP\n * @namespace\n */\n\nmodule.exports = function (environment) {\n    var pkg = __webpack_require__(2), version = pkg.version, title = pkg.title;\n    var SIP = Object.defineProperties({}, {\n        version: {\n            get: function () { return version; }\n        },\n        name: {\n            get: function () { return title; }\n        }\n    });\n    __webpack_require__(3)(SIP, environment);\n    SIP.LoggerFactory = __webpack_require__(4)(environment.console);\n    SIP.EventEmitter = __webpack_require__(5)();\n    SIP.C = __webpack_require__(7)(SIP.name, SIP.version);\n    SIP.Exceptions = __webpack_require__(8);\n    SIP.Timers = __webpack_require__(9)(environment.timers);\n    SIP.Transport = __webpack_require__(10)(SIP);\n    __webpack_require__(11)(SIP);\n    __webpack_require__(12)(SIP);\n    __webpack_require__(13)(SIP);\n    __webpack_require__(14)(SIP);\n    __webpack_require__(15)(SIP);\n    __webpack_require__(16)(SIP);\n    __webpack_require__(18)(SIP);\n    __webpack_require__(19)(SIP);\n    SIP.SessionDescriptionHandler = __webpack_require__(20)(SIP.EventEmitter);\n    __webpack_require__(21)(SIP);\n    __webpack_require__(22)(SIP);\n    __webpack_require__(23)(SIP);\n    __webpack_require__(25)(SIP);\n    __webpack_require__(26)(SIP);\n    __webpack_require__(27)(SIP, environment);\n    __webpack_require__(32)(SIP);\n    SIP.DigestAuthentication = __webpack_require__(33)(SIP.Utils);\n    SIP.Grammar = __webpack_require__(36)(SIP);\n    SIP.Web = {\n        Modifiers: __webpack_require__(38)(SIP),\n        Simple: __webpack_require__(39)(SIP)\n    };\n    return SIP;\n};\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module) {\n\nmodule.exports = {\"name\":\"sip.js\",\"title\":\"SIP.js\",\"description\":\"A simple, intuitive, and powerful JavaScript signaling library\",\"version\":\"0.11.6\",\"main\":\"dist/sip.js\",\"browser\":{\"./src/environment.js\":\"./src/environment_browser.js\"},\"homepage\":\"https://sipjs.com\",\"author\":\"OnSIP <developer@onsip.com> (https://sipjs.com/aboutus/)\",\"contributors\":[{\"url\":\"https://github.com/onsip/SIP.js/blob/master/THANKS.md\"}],\"repository\":{\"type\":\"git\",\"url\":\"https://github.com/onsip/SIP.js.git\"},\"keywords\":[\"sip\",\"websocket\",\"webrtc\",\"library\",\"javascript\"],\"devDependencies\":{\"awesome-typescript-loader\":\"^5.2.1\",\"eslint\":\"^5.4.0\",\"jasmine-core\":\"^3.2.1\",\"karma\":\"^3.0.0\",\"karma-chrome-launcher\":\"^2.2.0\",\"karma-cli\":\"^1.0.1\",\"karma-jasmine\":\"^1.1.0\",\"karma-jasmine-html-reporter\":\"^1.3.1\",\"karma-mocha-reporter\":\"^2.2.5\",\"karma-webpack\":\"^3.0.0\",\"pegjs\":\"^0.10.0\",\"pegjs-loader\":\"^0.5.4\",\"typescript\":\"^3.0.3\",\"webpack\":\"^4.19.0\",\"webpack-cli\":\"^3.0.8\"},\"engines\":{\"node\":\">=6.0\"},\"license\":\"MIT\",\"scripts\":{\"prebuild\":\"eslint src/*.js src/**/*.js\",\"build-dev\":\"webpack --progress --env.buildType dev\",\"build-prod\":\"webpack --progress --env.buildType prod\",\"copy-dist-files\":\"cp dist/sip.js dist/sip-$npm_package_version.js && cp dist/sip.min.js  dist/sip-$npm_package_version.min.js\",\"build\":\"npm run build-dev && npm run build-prod && npm run copy-dist-files\",\"browserTest\":\"sleep 2 && open http://0.0.0.0:9876/debug.html & karma start --reporters kjhtml --no-single-run\",\"commandLineTest\":\"karma start --reporters mocha --browsers ChromeHeadless --single-run\",\"buildAndTest\":\"npm run build && npm run commandLineTest\",\"buildAndBrowserTest\":\"npm run build && npm run browserTest\"},\"dependencies\":{\"crypto-js\":\"^3.1.9-1\"},\"optionalDependencies\":{\"promiscuous\":\"^0.6.0\"}};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview Utils\n */\nmodule.exports = function (SIP, environment) {\n    var Utils;\n    Utils = {\n        Promise: environment.Promise,\n        defer: function defer() {\n            var deferred = {};\n            deferred.promise = new Utils.Promise(function (resolve, reject) {\n                deferred.resolve = resolve;\n                deferred.reject = reject;\n            });\n            return deferred;\n        },\n        reducePromises: function reducePromises(arr, val) {\n            return arr.reduce(function (acc, fn) {\n                acc = acc.then(fn);\n                return acc;\n            }, SIP.Utils.Promise.resolve(val));\n        },\n        augment: function (object, constructor, args, override) {\n            var idx, proto;\n            // Add public properties from constructor's prototype onto object\n            proto = constructor.prototype;\n            for (idx in proto) {\n                if (override || object[idx] === undefined) {\n                    object[idx] = proto[idx];\n                }\n            }\n            // Construct the object as though it were just created by constructor\n            constructor.apply(object, args);\n        },\n        defaultOptions: function (defaultOptions, overridingOptions) {\n            defaultOptions = defaultOptions || {};\n            overridingOptions = overridingOptions || {};\n            return Object.assign({}, defaultOptions, overridingOptions);\n        },\n        optionsOverride: function (options, winner, loser, isDeprecated, logger, defaultValue) {\n            if (isDeprecated && options[loser]) {\n                logger.warn(loser + ' is deprecated, please use ' + winner + ' instead');\n            }\n            if (options[winner] && options[loser]) {\n                logger.warn(winner + ' overriding ' + loser);\n            }\n            options[winner] = options[winner] || options[loser] || defaultValue;\n        },\n        str_utf8_length: function (string) {\n            return encodeURIComponent(string).replace(/%[A-F\\d]{2}/g, 'U').length;\n        },\n        generateFakeSDP: function (body) {\n            if (!body) {\n                return;\n            }\n            var start = body.indexOf('o=');\n            var end = body.indexOf('\\r\\n', start);\n            return 'v=0\\r\\n' + body.slice(start, end) + '\\r\\ns=-\\r\\nt=0 0\\r\\nc=IN IP4 0.0.0.0';\n        },\n        isFunction: function (fn) {\n            if (fn !== undefined) {\n                return Object.prototype.toString.call(fn) === '[object Function]';\n            }\n            else {\n                return false;\n            }\n        },\n        isDecimal: function (num) {\n            return !isNaN(num) && (parseFloat(num) === parseInt(num, 10));\n        },\n        createRandomToken: function (size, base) {\n            var i, r, token = '';\n            base = base || 32;\n            for (i = 0; i < size; i++) {\n                r = Math.random() * base | 0;\n                token += r.toString(base);\n            }\n            return token;\n        },\n        newTag: function () {\n            return SIP.Utils.createRandomToken(SIP.UA.C.TAG_LENGTH);\n        },\n        // http://stackoverflow.com/users/109538/broofa\n        newUUID: function () {\n            var UUID = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n                return v.toString(16);\n            });\n            return UUID;\n        },\n        hostType: function (host) {\n            if (!host) {\n                return;\n            }\n            else {\n                host = SIP.Grammar.parse(host, 'host');\n                if (host !== -1) {\n                    return host.host_type;\n                }\n            }\n        },\n        /**\n        * Normalize SIP URI.\n        * NOTE: It does not allow a SIP URI without username.\n        * Accepts 'sip', 'sips' and 'tel' URIs and convert them into 'sip'.\n        * Detects the domain part (if given) and properly hex-escapes the user portion.\n        * If the user portion has only 'tel' number symbols the user portion is clean of 'tel' visual separators.\n        * @private\n        * @param {String} target\n        * @param {String} [domain]\n        */\n        normalizeTarget: function (target, domain) {\n            var uri, target_array, target_user, target_domain;\n            // If no target is given then raise an error.\n            if (!target) {\n                return;\n                // If a SIP.URI instance is given then return it.\n            }\n            else if (target instanceof SIP.URI) {\n                return target;\n                // If a string is given split it by '@':\n                // - Last fragment is the desired domain.\n                // - Otherwise append the given domain argument.\n            }\n            else if (typeof target === 'string') {\n                target_array = target.split('@');\n                switch (target_array.length) {\n                    case 1:\n                        if (!domain) {\n                            return;\n                        }\n                        target_user = target;\n                        target_domain = domain;\n                        break;\n                    case 2:\n                        target_user = target_array[0];\n                        target_domain = target_array[1];\n                        break;\n                    default:\n                        target_user = target_array.slice(0, target_array.length - 1).join('@');\n                        target_domain = target_array[target_array.length - 1];\n                }\n                // Remove the URI scheme (if present).\n                target_user = target_user.replace(/^(sips?|tel):/i, '');\n                // Remove 'tel' visual separators if the user portion just contains 'tel' number symbols.\n                if (/^[\\-\\.\\(\\)]*\\+?[0-9\\-\\.\\(\\)]+$/.test(target_user)) {\n                    target_user = target_user.replace(/[\\-\\.\\(\\)]/g, '');\n                }\n                // Build the complete SIP URI.\n                target = SIP.C.SIP + ':' + SIP.Utils.escapeUser(target_user) + '@' + target_domain;\n                // Finally parse the resulting URI.\n                uri = SIP.URI.parse(target);\n                return uri;\n            }\n            else {\n                return;\n            }\n        },\n        /**\n        * Hex-escape a SIP URI user.\n        * @private\n        * @param {String} user\n        */\n        escapeUser: function (user) {\n            // Don't hex-escape ':' (%3A), '+' (%2B), '?' (%3F\"), '/' (%2F).\n            return encodeURIComponent(decodeURIComponent(user)).replace(/%3A/ig, ':').replace(/%2B/ig, '+').replace(/%3F/ig, '?').replace(/%2F/ig, '/');\n        },\n        headerize: function (string) {\n            var exceptions = {\n                'Call-Id': 'Call-ID',\n                'Cseq': 'CSeq',\n                'Min-Se': 'Min-SE',\n                'Rack': 'RAck',\n                'Rseq': 'RSeq',\n                'Www-Authenticate': 'WWW-Authenticate'\n            }, name = string.toLowerCase().replace(/_/g, '-').split('-'), hname = '', parts = name.length, part;\n            for (part = 0; part < parts; part++) {\n                if (part !== 0) {\n                    hname += '-';\n                }\n                hname += name[part].charAt(0).toUpperCase() + name[part].substring(1);\n            }\n            if (exceptions[hname]) {\n                hname = exceptions[hname];\n            }\n            return hname;\n        },\n        sipErrorCause: function (status_code) {\n            var cause;\n            for (cause in SIP.C.SIP_ERROR_CAUSES) {\n                if (SIP.C.SIP_ERROR_CAUSES[cause].indexOf(status_code) !== -1) {\n                    return SIP.C.causes[cause];\n                }\n            }\n            return SIP.C.causes.SIP_FAILURE_CODE;\n        },\n        getReasonPhrase: function getReasonPhrase(code, specific) {\n            return specific || SIP.C.REASON_PHRASE[code] || '';\n        },\n        getReasonHeaderValue: function getReasonHeaderValue(code, reason) {\n            reason = SIP.Utils.getReasonPhrase(code, reason);\n            return 'SIP;cause=' + code + ';text=\"' + reason + '\"';\n        },\n        getCancelReason: function getCancelReason(code, reason) {\n            if (code && code < 200 || code > 699) {\n                throw new TypeError('Invalid status_code: ' + code);\n            }\n            else if (code) {\n                return SIP.Utils.getReasonHeaderValue(code, reason);\n            }\n        },\n        buildStatusLine: function buildStatusLine(code, reason) {\n            code = code || null;\n            reason = reason || null;\n            // Validate code and reason values\n            if (!code || (code < 100 || code > 699)) {\n                throw new TypeError('Invalid status_code: ' + code);\n            }\n            else if (reason && typeof reason !== 'string' && !(reason instanceof String)) {\n                throw new TypeError('Invalid reason_phrase: ' + reason);\n            }\n            reason = Utils.getReasonPhrase(code, reason);\n            return 'SIP/2.0 ' + code + ' ' + reason + '\\r\\n';\n        },\n        /**\n        * Generate a random Test-Net IP (http://tools.ietf.org/html/rfc5735)\n        * @private\n        */\n        getRandomTestNetIP: function () {\n            function getOctet(from, to) {\n                return Math.floor(Math.random() * (to - from + 1) + from);\n            }\n            return '192.0.2.' + getOctet(1, 254);\n        }\n    };\n    SIP.Utils = Utils;\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar levels = {\n    'error': 0,\n    'warn': 1,\n    'log': 2,\n    'debug': 3\n};\nmodule.exports = function (console) {\n    var LoggerFactory = function () {\n        var logger, level = 2, builtinEnabled = true, connector = null;\n        this.loggers = {};\n        logger = this.getLogger('sip.loggerfactory');\n        Object.defineProperties(this, {\n            builtinEnabled: {\n                get: function () { return builtinEnabled; },\n                set: function (value) {\n                    if (typeof value === 'boolean') {\n                        builtinEnabled = value;\n                    }\n                    else {\n                        logger.error('invalid \"builtinEnabled\" parameter value: ' + JSON.stringify(value));\n                    }\n                }\n            },\n            level: {\n                get: function () { return level; },\n                set: function (value) {\n                    if (value >= 0 && value <= 3) {\n                        level = value;\n                    }\n                    else if (value > 3) {\n                        level = 3;\n                    }\n                    else if (levels.hasOwnProperty(value)) {\n                        level = levels[value];\n                    }\n                    else {\n                        logger.error('invalid \"level\" parameter value: ' + JSON.stringify(value));\n                    }\n                }\n            },\n            connector: {\n                get: function () { return connector; },\n                set: function (value) {\n                    if (value === null || value === \"\" || value === undefined) {\n                        connector = null;\n                    }\n                    else if (typeof value === 'function') {\n                        connector = value;\n                    }\n                    else {\n                        logger.error('invalid \"connector\" parameter value: ' + JSON.stringify(value));\n                    }\n                }\n            }\n        });\n    };\n    LoggerFactory.prototype.print = function (target, category, label, content) {\n        if (typeof content === 'string') {\n            var prefix = [new Date(), category];\n            if (label) {\n                prefix.push(label);\n            }\n            content = prefix.concat(content).join(' | ');\n        }\n        target.call(console, content);\n    };\n    function Logger(logger, category, label) {\n        this.logger = logger;\n        this.category = category;\n        this.label = label;\n    }\n    Object.keys(levels).forEach(function (targetName) {\n        Logger.prototype[targetName] = function (content) {\n            this.logger[targetName](this.category, this.label, content);\n        };\n        LoggerFactory.prototype[targetName] = function (category, label, content) {\n            if (this.level >= levels[targetName]) {\n                if (this.builtinEnabled) {\n                    this.print(console[targetName], category, label, content);\n                }\n                if (this.connector) {\n                    this.connector(targetName, category, label, content);\n                }\n            }\n        };\n    });\n    LoggerFactory.prototype.getLogger = function (category, label) {\n        var logger;\n        if (label && this.level === 3) {\n            return new Logger(this, category, label);\n        }\n        else if (this.loggers[category]) {\n            return this.loggers[category];\n        }\n        else {\n            logger = new Logger(this, category);\n            this.loggers[category] = logger;\n            return logger;\n        }\n    };\n    return LoggerFactory;\n};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar NodeEventEmitter = __webpack_require__(6).EventEmitter;\nmodule.exports = function () {\n    // Don't use `new SIP.EventEmitter()` for inheriting.\n    // Use Object.create(SIP.EventEmitter.prototoype);\n    function EventEmitter() {\n        NodeEventEmitter.call(this);\n    }\n    EventEmitter.prototype = Object.create(NodeEventEmitter.prototype, {\n        constructor: {\n            value: EventEmitter,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n    return EventEmitter;\n};\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Constants\n */\n/**\n * SIP Constants.\n * @augments SIP\n */\nmodule.exports = function (name, version) {\n    return {\n        USER_AGENT: name + '/' + version,\n        // SIP scheme\n        SIP: 'sip',\n        SIPS: 'sips',\n        // End and Failure causes\n        causes: {\n            // Generic error causes\n            CONNECTION_ERROR: 'Connection Error',\n            REQUEST_TIMEOUT: 'Request Timeout',\n            SIP_FAILURE_CODE: 'SIP Failure Code',\n            INTERNAL_ERROR: 'Internal Error',\n            // SIP error causes\n            BUSY: 'Busy',\n            REJECTED: 'Rejected',\n            REDIRECTED: 'Redirected',\n            UNAVAILABLE: 'Unavailable',\n            NOT_FOUND: 'Not Found',\n            ADDRESS_INCOMPLETE: 'Address Incomplete',\n            INCOMPATIBLE_SDP: 'Incompatible SDP',\n            AUTHENTICATION_ERROR: 'Authentication Error',\n            DIALOG_ERROR: 'Dialog Error',\n            // Session error causes\n            WEBRTC_NOT_SUPPORTED: 'WebRTC Not Supported',\n            WEBRTC_ERROR: 'WebRTC Error',\n            CANCELED: 'Canceled',\n            NO_ANSWER: 'No Answer',\n            EXPIRES: 'Expires',\n            NO_ACK: 'No ACK',\n            NO_PRACK: 'No PRACK',\n            USER_DENIED_MEDIA_ACCESS: 'User Denied Media Access',\n            BAD_MEDIA_DESCRIPTION: 'Bad Media Description',\n            RTP_TIMEOUT: 'RTP Timeout'\n        },\n        supported: {\n            UNSUPPORTED: 'none',\n            SUPPORTED: 'supported',\n            REQUIRED: 'required'\n        },\n        SIP_ERROR_CAUSES: {\n            REDIRECTED: [300, 301, 302, 305, 380],\n            BUSY: [486, 600],\n            REJECTED: [403, 603],\n            NOT_FOUND: [404, 604],\n            UNAVAILABLE: [480, 410, 408, 430],\n            ADDRESS_INCOMPLETE: [484],\n            INCOMPATIBLE_SDP: [488, 606],\n            AUTHENTICATION_ERROR: [401, 407]\n        },\n        // SIP Methods\n        ACK: 'ACK',\n        BYE: 'BYE',\n        CANCEL: 'CANCEL',\n        INFO: 'INFO',\n        INVITE: 'INVITE',\n        MESSAGE: 'MESSAGE',\n        NOTIFY: 'NOTIFY',\n        OPTIONS: 'OPTIONS',\n        REGISTER: 'REGISTER',\n        UPDATE: 'UPDATE',\n        SUBSCRIBE: 'SUBSCRIBE',\n        PUBLISH: 'PUBLISH',\n        REFER: 'REFER',\n        PRACK: 'PRACK',\n        /* SIP Response Reasons\n         * DOC: http://www.iana.org/assignments/sip-parameters\n         * Copied from https://github.com/versatica/OverSIP/blob/master/lib/oversip/sip/constants.rb#L7\n         */\n        REASON_PHRASE: {\n            100: 'Trying',\n            180: 'Ringing',\n            181: 'Call Is Being Forwarded',\n            182: 'Queued',\n            183: 'Session Progress',\n            199: 'Early Dialog Terminated',\n            200: 'OK',\n            202: 'Accepted',\n            204: 'No Notification',\n            300: 'Multiple Choices',\n            301: 'Moved Permanently',\n            302: 'Moved Temporarily',\n            305: 'Use Proxy',\n            380: 'Alternative Service',\n            400: 'Bad Request',\n            401: 'Unauthorized',\n            402: 'Payment Required',\n            403: 'Forbidden',\n            404: 'Not Found',\n            405: 'Method Not Allowed',\n            406: 'Not Acceptable',\n            407: 'Proxy Authentication Required',\n            408: 'Request Timeout',\n            410: 'Gone',\n            412: 'Conditional Request Failed',\n            413: 'Request Entity Too Large',\n            414: 'Request-URI Too Long',\n            415: 'Unsupported Media Type',\n            416: 'Unsupported URI Scheme',\n            417: 'Unknown Resource-Priority',\n            420: 'Bad Extension',\n            421: 'Extension Required',\n            422: 'Session Interval Too Small',\n            423: 'Interval Too Brief',\n            428: 'Use Identity Header',\n            429: 'Provide Referrer Identity',\n            430: 'Flow Failed',\n            433: 'Anonymity Disallowed',\n            436: 'Bad Identity-Info',\n            437: 'Unsupported Certificate',\n            438: 'Invalid Identity Header',\n            439: 'First Hop Lacks Outbound Support',\n            440: 'Max-Breadth Exceeded',\n            469: 'Bad Info Package',\n            470: 'Consent Needed',\n            478: 'Unresolvable Destination',\n            480: 'Temporarily Unavailable',\n            481: 'Call/Transaction Does Not Exist',\n            482: 'Loop Detected',\n            483: 'Too Many Hops',\n            484: 'Address Incomplete',\n            485: 'Ambiguous',\n            486: 'Busy Here',\n            487: 'Request Terminated',\n            488: 'Not Acceptable Here',\n            489: 'Bad Event',\n            491: 'Request Pending',\n            493: 'Undecipherable',\n            494: 'Security Agreement Required',\n            500: 'Internal Server Error',\n            501: 'Not Implemented',\n            502: 'Bad Gateway',\n            503: 'Service Unavailable',\n            504: 'Server Time-out',\n            505: 'Version Not Supported',\n            513: 'Message Too Large',\n            580: 'Precondition Failure',\n            600: 'Busy Everywhere',\n            603: 'Decline',\n            604: 'Does Not Exist Anywhere',\n            606: 'Not Acceptable'\n        },\n        /* SIP Option Tags\n         * DOC: http://www.iana.org/assignments/sip-parameters/sip-parameters.xhtml#sip-parameters-4\n         */\n        OPTION_TAGS: {\n            '100rel': true,\n            199: true,\n            answermode: true,\n            'early-session': true,\n            eventlist: true,\n            explicitsub: true,\n            'from-change': true,\n            'geolocation-http': true,\n            'geolocation-sip': true,\n            gin: true,\n            gruu: true,\n            histinfo: true,\n            ice: true,\n            join: true,\n            'multiple-refer': true,\n            norefersub: true,\n            nosub: true,\n            outbound: true,\n            path: true,\n            policy: true,\n            precondition: true,\n            pref: true,\n            privacy: true,\n            'recipient-list-invite': true,\n            'recipient-list-message': true,\n            'recipient-list-subscribe': true,\n            replaces: true,\n            'resource-priority': true,\n            'sdp-anat': true,\n            'sec-agree': true,\n            tdialog: true,\n            timer: true,\n            uui: true // RFC 7433\n        },\n        dtmfType: {\n            INFO: 'info',\n            RTP: 'rtp'\n        }\n    };\n};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview Exceptions\n */\n/**\n * SIP Exceptions.\n * @augments SIP\n */\nmodule.exports = {\n    ConfigurationError: (function () {\n        var exception = function (parameter, value) {\n            this.code = 1;\n            this.name = 'CONFIGURATION_ERROR';\n            this.parameter = parameter;\n            this.value = value;\n            this.message = (!this.value) ? 'Missing parameter: ' + this.parameter : 'Invalid value ' + JSON.stringify(this.value) + ' for parameter \"' + this.parameter + '\"';\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    InvalidStateError: (function () {\n        var exception = function (status) {\n            this.code = 2;\n            this.name = 'INVALID_STATE_ERROR';\n            this.status = status;\n            this.message = 'Invalid status: ' + status;\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    NotSupportedError: (function () {\n        var exception = function (message) {\n            this.code = 3;\n            this.name = 'NOT_SUPPORTED_ERROR';\n            this.message = message;\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    // Deprecated\n    GetDescriptionError: (function () {\n        var exception = function (message) {\n            this.code = 4;\n            this.name = 'GET_DESCRIPTION_ERROR';\n            this.message = message;\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    RenegotiationError: (function () {\n        var exception = function (message) {\n            this.code = 5;\n            this.name = 'RENEGOTIATION_ERROR';\n            this.message = message;\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    MethodParameterError: (function () {\n        var exception = function (method, parameter, value) {\n            this.code = 6;\n            this.name = 'METHOD_PARAMETER_ERROR';\n            this.method = method;\n            this.parameter = parameter;\n            this.value = value;\n            this.message = (!this.value) ? 'Missing parameter: ' + this.parameter : 'Invalid value ' + JSON.stringify(this.value) + ' for parameter \"' + this.parameter + '\"';\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    TransportError: (function () {\n        var exception = function (message) {\n            this.code = 7;\n            this.name = 'TRANSPORT_ERROR';\n            this.message = message;\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    SessionDescriptionHandlerError: (function () {\n        var exception = function (method, error, message) {\n            this.code = 8;\n            this.name = 'SESSION_DESCRIPTION_HANDLER_ERROR';\n            this.method = method;\n            this.error = error;\n            this.message = message || 'Error with Session Description Handler';\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n};\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP TIMERS\n */\n/**\n * @augments SIP\n */\nvar T1 = 500, T2 = 4000, T4 = 5000;\nmodule.exports = function (timers) {\n    var Timers = {\n        T1: T1,\n        T2: T2,\n        T4: T4,\n        TIMER_B: 64 * T1,\n        TIMER_D: 0 * T1,\n        TIMER_F: 64 * T1,\n        TIMER_H: 64 * T1,\n        TIMER_I: 0 * T1,\n        TIMER_J: 0 * T1,\n        TIMER_K: 0 * T4,\n        TIMER_L: 64 * T1,\n        TIMER_M: 64 * T1,\n        TIMER_N: 64 * T1,\n        PROVISIONAL_RESPONSE_INTERVAL: 60000 // See RFC 3261 Section 13.3.1.1\n    };\n    ['setTimeout', 'clearTimeout', 'setInterval', 'clearInterval']\n        .forEach(function (name) {\n        // can't just use timers[name].bind(timers) since it bypasses jasmine's\n        // clock-mocking\n        Timers[name] = function () {\n            return timers[name].apply(timers, arguments);\n        };\n    });\n    return Timers;\n};\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/* eslint-disable */\n/**\n * @fileoverview Transport\n */\n/* Transport\n * @class Abstract transport layer parent class\n * @param {Logger} logger\n * @param {Object} [options]\n */\nmodule.exports = function (SIP) {\n    var Transport = function (logger, options) { };\n    Transport.prototype = Object.create(SIP.EventEmitter.prototype, {\n        /**\n        * Returns the promise designated by the child layer then emits a connected event. Automatically emits an event upon resolution, unless overrideEvent is set. If you override the event in this fashion, you should emit it in your implementation of connectPromise\n        * @param {Object} [options]\n        * @returns {Promise}\n        */\n        connect: { writable: true, value: function connect(options) {\n                options = options || {};\n                return this.connectPromise(options).then(function (data) { !data.overrideEvent && this.emit('connected'); }.bind(this));\n            } },\n        /**\n        * Called by connect, must return a promise\n        * promise must resolve to an object. object supports 1 parameter: overrideEvent - Boolean\n        * @abstract\n        * @private\n        * @param {Object} [options]\n        * @returns {Promise}\n        */\n        connectPromise: { writable: true, value: function connectPromise(options) { } },\n        /**\n        * Returns true if the transport is connected\n        * @abstract\n        * @returns {Boolean}\n        */\n        isConnected: { writable: true, value: function isConnected() { } },\n        /**\n        * Sends a message then emits a 'messageSent' event. Automatically emits an event upon resolution, unless data.overrideEvent is set. If you override the event in this fashion, you should emit it in your implementation of sendPromise\n        * @param {SIP.OutgoingRequest|String} msg\n        * @param {Object} options\n        * @returns {Promise}\n        */\n        send: { writable: true, value: function send(msg, options) {\n                options = options || {};\n                return this.sendPromise(msg).then(function (data) { !data.overrideEvent && this.emit('messageSent', data.msg); }.bind(this));\n            } },\n        /**\n        * Called by send, must return a promise\n        * promise must resolve to an object. object supports 2 parameters: msg - string (mandatory) and overrideEvent - Boolean (optional)\n        * @abstract\n        * @private\n        * @param {SIP.OutgoingRequest|String} msg\n        * @param {Object} [options]\n        * @returns {Promise}\n        */\n        sendPromise: { writable: true, value: function sendPromise(msg, options) { } },\n        /**\n        * To be called when a message is received\n        * @abstract\n        * @param {Event} e\n        */\n        onMessage: { writable: true, value: function onMessage(e) { } },\n        /**\n        * Returns the promise designated by the child layer then emits a disconnected event. Automatically emits an event upon resolution, unless overrideEvent is set. If you override the event in this fashion, you should emit it in your implementation of disconnectPromise\n        * @param {Object} [options]\n        * @returns {Promise}\n        */\n        disconnect: { writable: true, value: function disconnect(options) {\n                options = options || {};\n                return this.disconnectPromise(options).then(function (data) { !data.overrideEvent && this.emit('disconnected'); }.bind(this));\n            } },\n        /**\n        * Called by disconnect, must return a promise\n        * promise must resolve to an object. object supports 1 parameter: overrideEvent - Boolean\n        * @abstract\n        * @private\n        * @param {Object} [options]\n        * @returns {Promise}\n        */\n        disconnectPromise: { writable: true, value: function disconnectPromise(options) { } },\n        afterConnected: { writable: true, value: function afterConnected(callback) {\n                if (this.isConnected()) {\n                    callback();\n                }\n                else {\n                    this.once('connected', callback);\n                }\n            } },\n        /**\n         * Returns a promise which resolves once the UA is connected. DEPRECATION WARNING: just use afterConnected()\n         * @returns {Promise}\n         */\n        waitForConnected: { writable: true, value: function waitForConnected() {\n                console.warn(\"DEPRECATION WARNING Transport.waitForConnected(): use afterConnected() instead\");\n                return new SIP.Utils.Promise(function (resolve) {\n                    this.afterConnected(resolve);\n                }.bind(this));\n            } },\n    });\n    return Transport;\n};\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Message Parser\n */\n/**\n * Extract and parse every header of a SIP message.\n * @augments SIP\n * @namespace\n */\nmodule.exports = function (SIP) {\n    var Parser;\n    function getHeader(data, headerStart) {\n        var \n        // 'start' position of the header.\n        start = headerStart, \n        // 'end' position of the header.\n        end = 0, \n        // 'partial end' position of the header.\n        partialEnd = 0;\n        //End of message.\n        if (data.substring(start, start + 2).match(/(^\\r\\n)/)) {\n            return -2;\n        }\n        while (end === 0) {\n            // Partial End of Header.\n            partialEnd = data.indexOf('\\r\\n', start);\n            // 'indexOf' returns -1 if the value to be found never occurs.\n            if (partialEnd === -1) {\n                return partialEnd;\n            }\n            if (!data.substring(partialEnd + 2, partialEnd + 4).match(/(^\\r\\n)/) && data.charAt(partialEnd + 2).match(/(^\\s+)/)) {\n                // Not the end of the message. Continue from the next position.\n                start = partialEnd + 2;\n            }\n            else {\n                end = partialEnd;\n            }\n        }\n        return end;\n    }\n    function parseHeader(message, data, headerStart, headerEnd) {\n        var header, idx, length, parsed, hcolonIndex = data.indexOf(':', headerStart), headerName = data.substring(headerStart, hcolonIndex).trim(), headerValue = data.substring(hcolonIndex + 1, headerEnd).trim();\n        // If header-field is well-known, parse it.\n        switch (headerName.toLowerCase()) {\n            case 'via':\n            case 'v':\n                message.addHeader('via', headerValue);\n                if (message.getHeaders('via').length === 1) {\n                    parsed = message.parseHeader('Via');\n                    if (parsed) {\n                        message.via = parsed;\n                        message.via_branch = parsed.branch;\n                    }\n                }\n                else {\n                    parsed = 0;\n                }\n                break;\n            case 'from':\n            case 'f':\n                message.setHeader('from', headerValue);\n                parsed = message.parseHeader('from');\n                if (parsed) {\n                    message.from = parsed;\n                    message.from_tag = parsed.getParam('tag');\n                }\n                break;\n            case 'to':\n            case 't':\n                message.setHeader('to', headerValue);\n                parsed = message.parseHeader('to');\n                if (parsed) {\n                    message.to = parsed;\n                    message.to_tag = parsed.getParam('tag');\n                }\n                break;\n            case 'record-route':\n                parsed = SIP.Grammar.parse(headerValue, 'Record_Route');\n                if (parsed === -1) {\n                    parsed = undefined;\n                    break;\n                }\n                length = parsed.length;\n                for (idx = 0; idx < length; idx++) {\n                    header = parsed[idx];\n                    message.addHeader('record-route', headerValue.substring(header.position, header.offset));\n                    message.headers['Record-Route'][message.getHeaders('record-route').length - 1].parsed = header.parsed;\n                }\n                break;\n            case 'call-id':\n            case 'i':\n                message.setHeader('call-id', headerValue);\n                parsed = message.parseHeader('call-id');\n                if (parsed) {\n                    message.call_id = headerValue;\n                }\n                break;\n            case 'contact':\n            case 'm':\n                parsed = SIP.Grammar.parse(headerValue, 'Contact');\n                if (parsed === -1) {\n                    parsed = undefined;\n                    break;\n                }\n                length = parsed.length;\n                for (idx = 0; idx < length; idx++) {\n                    header = parsed[idx];\n                    message.addHeader('contact', headerValue.substring(header.position, header.offset));\n                    message.headers['Contact'][message.getHeaders('contact').length - 1].parsed = header.parsed;\n                }\n                break;\n            case 'content-length':\n            case 'l':\n                message.setHeader('content-length', headerValue);\n                parsed = message.parseHeader('content-length');\n                break;\n            case 'content-type':\n            case 'c':\n                message.setHeader('content-type', headerValue);\n                parsed = message.parseHeader('content-type');\n                break;\n            case 'cseq':\n                message.setHeader('cseq', headerValue);\n                parsed = message.parseHeader('cseq');\n                if (parsed) {\n                    message.cseq = parsed.value;\n                }\n                if (message instanceof SIP.IncomingResponse) {\n                    message.method = parsed.method;\n                }\n                break;\n            case 'max-forwards':\n                message.setHeader('max-forwards', headerValue);\n                parsed = message.parseHeader('max-forwards');\n                break;\n            case 'www-authenticate':\n                message.setHeader('www-authenticate', headerValue);\n                parsed = message.parseHeader('www-authenticate');\n                break;\n            case 'proxy-authenticate':\n                message.setHeader('proxy-authenticate', headerValue);\n                parsed = message.parseHeader('proxy-authenticate');\n                break;\n            case 'refer-to':\n            case 'r':\n                message.setHeader('refer-to', headerValue);\n                parsed = message.parseHeader('refer-to');\n                if (parsed) {\n                    message.refer_to = parsed;\n                }\n                break;\n            default:\n                // Do not parse this header.\n                message.setHeader(headerName, headerValue);\n                parsed = 0;\n        }\n        if (parsed === undefined) {\n            return {\n                error: 'error parsing header \"' + headerName + '\"'\n            };\n        }\n        else {\n            return true;\n        }\n    }\n    /** Parse SIP Message\n     * @function\n     * @param {String} message SIP message.\n     * @param {Object} logger object.\n     * @returns {SIP.IncomingRequest|SIP.IncomingResponse|undefined}\n     */\n    Parser = {};\n    Parser.parseMessage = function (data, ua) {\n        var message, firstLine, contentLength, bodyStart, parsed, headerStart = 0, headerEnd = data.indexOf('\\r\\n'), logger = ua.getLogger('sip.parser');\n        if (headerEnd === -1) {\n            logger.warn('no CRLF found, not a SIP message, discarded');\n            return;\n        }\n        // Parse first line. Check if it is a Request or a Reply.\n        firstLine = data.substring(0, headerEnd);\n        parsed = SIP.Grammar.parse(firstLine, 'Request_Response');\n        if (parsed === -1) {\n            logger.warn('error parsing first line of SIP message: \"' + firstLine + '\"');\n            return;\n        }\n        else if (!parsed.status_code) {\n            message = new SIP.IncomingRequest(ua);\n            message.method = parsed.method;\n            message.ruri = parsed.uri;\n        }\n        else {\n            message = new SIP.IncomingResponse(ua);\n            message.status_code = parsed.status_code;\n            message.reason_phrase = parsed.reason_phrase;\n        }\n        message.data = data;\n        headerStart = headerEnd + 2;\n        /* Loop over every line in data. Detect the end of each header and parse\n        * it or simply add to the headers collection.\n        */\n        while (true) {\n            headerEnd = getHeader(data, headerStart);\n            // The SIP message has normally finished.\n            if (headerEnd === -2) {\n                bodyStart = headerStart + 2;\n                break;\n            }\n            // data.indexOf returned -1 due to a malformed message.\n            else if (headerEnd === -1) {\n                logger.error('malformed message');\n                return;\n            }\n            parsed = parseHeader(message, data, headerStart, headerEnd);\n            if (parsed !== true) {\n                logger.error(parsed.error);\n                return;\n            }\n            headerStart = headerEnd + 2;\n        }\n        /* RFC3261 18.3.\n         * If there are additional bytes in the transport packet\n         * beyond the end of the body, they MUST be discarded.\n         */\n        if (message.hasHeader('content-length')) {\n            contentLength = message.getHeader('content-length');\n            message.body = data.substr(bodyStart, contentLength);\n        }\n        else {\n            message.body = data.substring(bodyStart);\n        }\n        return message;\n    };\n    SIP.Parser = Parser;\n};\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Message\n */\nmodule.exports = function (SIP) {\n    var OutgoingRequest, IncomingMessage, IncomingRequest, IncomingResponse;\n    function getSupportedHeader(request) {\n        var allowUnregistered = request.ua.configuration.hackAllowUnregisteredOptionTags;\n        var optionTags = [];\n        var optionTagSet = {};\n        if (request.method === SIP.C.REGISTER) {\n            optionTags.push('path', 'gruu');\n        }\n        else if (request.method === SIP.C.INVITE &&\n            (request.ua.contact.pub_gruu || request.ua.contact.temp_gruu)) {\n            optionTags.push('gruu');\n        }\n        if (request.ua.configuration.rel100 === SIP.C.supported.SUPPORTED) {\n            optionTags.push('100rel');\n        }\n        if (request.ua.configuration.replaces === SIP.C.supported.SUPPORTED) {\n            optionTags.push('replaces');\n        }\n        optionTags.push('outbound');\n        optionTags = optionTags.concat(request.ua.configuration.extraSupported);\n        optionTags = optionTags.filter(function (optionTag) {\n            var registered = SIP.C.OPTION_TAGS[optionTag];\n            var unique = !optionTagSet[optionTag];\n            optionTagSet[optionTag] = true;\n            return (registered || allowUnregistered) && unique;\n        });\n        return 'Supported: ' + optionTags.join(', ') + '\\r\\n';\n    }\n    /**\n     * @augments SIP\n     * @class Class for outgoing SIP request.\n     * @param {String} method request method\n     * @param {String} ruri request uri\n     * @param {SIP.UA} ua\n     * @param {Object} params parameters that will have priority over ua.configuration parameters:\n     * <br>\n     *  - cseq, call_id, from_tag, from_uri, from_displayName, to_uri, to_tag, route_set\n     * @param {Object} [headers] extra headers\n     * @param {String} [body]\n     */\n    OutgoingRequest = function (method, ruri, ua, params, extraHeaders, body) {\n        var to, from, call_id, cseq, to_uri, from_uri;\n        params = params || {};\n        // Mandatory parameters check\n        if (!method || !ruri || !ua) {\n            return null;\n        }\n        this.logger = ua.getLogger('sip.sipmessage');\n        this.ua = ua;\n        this.headers = {};\n        this.method = method;\n        this.ruri = ruri;\n        this.body = body;\n        this.extraHeaders = (extraHeaders || []).slice();\n        this.statusCode = params.status_code;\n        this.reasonPhrase = params.reason_phrase;\n        // Fill the Common SIP Request Headers\n        // Route\n        if (params.route_set) {\n            this.setHeader('route', params.route_set);\n        }\n        else if (ua.configuration.usePreloadedRoute) {\n            this.setHeader('route', ua.transport.server.sip_uri);\n        }\n        // Via\n        // Empty Via header. Will be filled by the client transaction.\n        this.setHeader('via', '');\n        // Max-Forwards\n        this.setHeader('max-forwards', SIP.UA.C.MAX_FORWARDS);\n        // To\n        to_uri = params.to_uri || ruri;\n        to = (params.to_displayName || params.to_displayName === 0) ? '\"' + params.to_displayName + '\" ' : '';\n        to += '<' + (to_uri && to_uri.toRaw ? to_uri.toRaw() : to_uri) + '>';\n        to += params.to_tag ? ';tag=' + params.to_tag : '';\n        this.to = new SIP.NameAddrHeader.parse(to);\n        this.setHeader('to', to);\n        // From\n        from_uri = params.from_uri || ua.configuration.uri;\n        if (params.from_displayName || params.from_displayName === 0) {\n            from = '\"' + params.from_displayName + '\" ';\n        }\n        else if (ua.configuration.displayName) {\n            from = '\"' + ua.configuration.displayName + '\" ';\n        }\n        else {\n            from = '';\n        }\n        from += '<' + (from_uri && from_uri.toRaw ? from_uri.toRaw() : from_uri) + '>;tag=';\n        from += params.from_tag || SIP.Utils.newTag();\n        this.from = new SIP.NameAddrHeader.parse(from);\n        this.setHeader('from', from);\n        // Call-ID\n        call_id = params.call_id || (ua.configuration.sipjsId + SIP.Utils.createRandomToken(15));\n        this.call_id = call_id;\n        this.setHeader('call-id', call_id);\n        // CSeq\n        cseq = params.cseq || Math.floor(Math.random() * 10000);\n        this.cseq = cseq;\n        this.setHeader('cseq', cseq + ' ' + method);\n    };\n    OutgoingRequest.prototype = {\n        /**\n         * Replace the the given header by the given value.\n         * @param {String} name header name\n         * @param {String | Array} value header value\n         */\n        setHeader: function (name, value) {\n            this.headers[SIP.Utils.headerize(name)] = (value instanceof Array) ? value : [value];\n        },\n        /**\n         * Get the value of the given header name at the given position.\n         * @param {String} name header name\n         * @returns {String|undefined} Returns the specified header, undefined if header doesn't exist.\n         */\n        getHeader: function (name) {\n            var regexp, idx, length = this.extraHeaders.length, header = this.headers[SIP.Utils.headerize(name)];\n            if (header) {\n                if (header[0]) {\n                    return header[0];\n                }\n            }\n            else {\n                regexp = new RegExp('^\\\\s*' + name + '\\\\s*:', 'i');\n                for (idx = 0; idx < length; idx++) {\n                    header = this.extraHeaders[idx];\n                    if (regexp.test(header)) {\n                        return header.substring(header.indexOf(':') + 1).trim();\n                    }\n                }\n            }\n            return;\n        },\n        /**\n         * Get the header/s of the given name.\n         * @param {String} name header name\n         * @returns {Array} Array with all the headers of the specified name.\n         */\n        getHeaders: function (name) {\n            var idx, length, regexp, header = this.headers[SIP.Utils.headerize(name)], result = [];\n            if (header) {\n                length = header.length;\n                for (idx = 0; idx < length; idx++) {\n                    result.push(header[idx]);\n                }\n                return result;\n            }\n            else {\n                length = this.extraHeaders.length;\n                regexp = new RegExp('^\\\\s*' + name + '\\\\s*:', 'i');\n                for (idx = 0; idx < length; idx++) {\n                    header = this.extraHeaders[idx];\n                    if (regexp.test(header)) {\n                        result.push(header.substring(header.indexOf(':') + 1).trim());\n                    }\n                }\n                return result;\n            }\n        },\n        /**\n         * Verify the existence of the given header.\n         * @param {String} name header name\n         * @returns {boolean} true if header with given name exists, false otherwise\n         */\n        hasHeader: function (name) {\n            var regexp, idx, length = this.extraHeaders.length;\n            if (this.headers[SIP.Utils.headerize(name)]) {\n                return true;\n            }\n            else {\n                regexp = new RegExp('^\\\\s*' + name + '\\\\s*:', 'i');\n                for (idx = 0; idx < length; idx++) {\n                    if (regexp.test(this.extraHeaders[idx])) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        },\n        toString: function () {\n            var msg = '', header, length, idx;\n            msg += this.method + ' ' + (this.ruri.toRaw ? this.ruri.toRaw() : this.ruri) + ' SIP/2.0\\r\\n';\n            for (header in this.headers) {\n                length = this.headers[header].length;\n                for (idx = 0; idx < length; idx++) {\n                    msg += header + ': ' + this.headers[header][idx] + '\\r\\n';\n                }\n            }\n            length = this.extraHeaders.length;\n            for (idx = 0; idx < length; idx++) {\n                msg += this.extraHeaders[idx].trim() + '\\r\\n';\n            }\n            msg += getSupportedHeader(this);\n            msg += 'User-Agent: ' + this.ua.configuration.userAgentString + '\\r\\n';\n            if (this.body) {\n                if (typeof this.body === 'string') {\n                    length = SIP.Utils.str_utf8_length(this.body);\n                    msg += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                    msg += this.body;\n                }\n                else {\n                    if (this.body.body && this.body.contentType) {\n                        length = SIP.Utils.str_utf8_length(this.body.body);\n                        msg += 'Content-Type: ' + this.body.contentType + '\\r\\n';\n                        msg += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                        msg += this.body.body;\n                    }\n                    else {\n                        msg += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n                    }\n                }\n            }\n            else {\n                msg += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n            }\n            return msg;\n        }\n    };\n    /**\n     * @augments SIP\n     * @class Class for incoming SIP message.\n     */\n    IncomingMessage = function () {\n        this.data = null;\n        this.headers = null;\n        this.method = null;\n        this.via = null;\n        this.via_branch = null;\n        this.call_id = null;\n        this.cseq = null;\n        this.from = null;\n        this.from_tag = null;\n        this.to = null;\n        this.to_tag = null;\n        this.body = null;\n    };\n    IncomingMessage.prototype = {\n        /**\n        * Insert a header of the given name and value into the last position of the\n        * header array.\n        * @param {String} name header name\n        * @param {String} value header value\n        */\n        addHeader: function (name, value) {\n            var header = { raw: value };\n            name = SIP.Utils.headerize(name);\n            if (this.headers[name]) {\n                this.headers[name].push(header);\n            }\n            else {\n                this.headers[name] = [header];\n            }\n        },\n        /**\n         * Get the value of the given header name at the given position.\n         * @param {String} name header name\n         * @returns {String|undefined} Returns the specified header, null if header doesn't exist.\n         */\n        getHeader: function (name) {\n            var header = this.headers[SIP.Utils.headerize(name)];\n            if (header) {\n                if (header[0]) {\n                    return header[0].raw;\n                }\n            }\n            else {\n                return;\n            }\n        },\n        /**\n         * Get the header/s of the given name.\n         * @param {String} name header name\n         * @returns {Array} Array with all the headers of the specified name.\n         */\n        getHeaders: function (name) {\n            var idx, length, header = this.headers[SIP.Utils.headerize(name)], result = [];\n            if (!header) {\n                return [];\n            }\n            length = header.length;\n            for (idx = 0; idx < length; idx++) {\n                result.push(header[idx].raw);\n            }\n            return result;\n        },\n        /**\n         * Verify the existence of the given header.\n         * @param {String} name header name\n         * @returns {boolean} true if header with given name exists, false otherwise\n         */\n        hasHeader: function (name) {\n            return (this.headers[SIP.Utils.headerize(name)]) ? true : false;\n        },\n        /**\n        * Parse the given header on the given index.\n        * @param {String} name header name\n        * @param {Number} [idx=0] header index\n        * @returns {Object|undefined} Parsed header object, undefined if the header is not present or in case of a parsing error.\n        */\n        parseHeader: function (name, idx) {\n            var header, value, parsed;\n            name = SIP.Utils.headerize(name);\n            idx = idx || 0;\n            if (!this.headers[name]) {\n                this.logger.log('header \"' + name + '\" not present');\n                return;\n            }\n            else if (idx >= this.headers[name].length) {\n                this.logger.log('not so many \"' + name + '\" headers present');\n                return;\n            }\n            header = this.headers[name][idx];\n            value = header.raw;\n            if (header.parsed) {\n                return header.parsed;\n            }\n            //substitute '-' by '_' for grammar rule matching.\n            parsed = SIP.Grammar.parse(value, name.replace(/-/g, '_'));\n            if (parsed === -1) {\n                this.headers[name].splice(idx, 1); //delete from headers\n                this.logger.warn('error parsing \"' + name + '\" header field with value \"' + value + '\"');\n                return;\n            }\n            else {\n                header.parsed = parsed;\n                return parsed;\n            }\n        },\n        /**\n         * Message Header attribute selector. Alias of parseHeader.\n         * @param {String} name header name\n         * @param {Number} [idx=0] header index\n         * @returns {Object|undefined} Parsed header object, undefined if the header is not present or in case of a parsing error.\n         *\n         * @example\n         * message.s('via',3).port\n         */\n        s: function (name, idx) {\n            return this.parseHeader(name, idx);\n        },\n        /**\n        * Replace the value of the given header by the value.\n        * @param {String} name header name\n        * @param {String} value header value\n        */\n        setHeader: function (name, value) {\n            var header = { raw: value };\n            this.headers[SIP.Utils.headerize(name)] = [header];\n        },\n        toString: function () {\n            return this.data;\n        }\n    };\n    /**\n     * @augments IncomingMessage\n     * @class Class for incoming SIP request.\n     */\n    IncomingRequest = function (ua) {\n        this.logger = ua.getLogger('sip.sipmessage');\n        this.ua = ua;\n        this.headers = {};\n        this.ruri = null;\n        this.transport = null;\n        this.server_transaction = null;\n    };\n    IncomingRequest.prototype = new IncomingMessage();\n    /**\n    * Stateful reply.\n    * @param {Number} code status code\n    * @param {String} reason reason phrase\n    * @param {Object} headers extra headers\n    * @param {String} body body\n    * @param {Function} [onSuccess] onSuccess callback\n    * @param {Function} [onFailure] onFailure callback\n    */\n    // TODO: Get rid of callbacks and make promise based\n    IncomingRequest.prototype.reply = function (code, reason, extraHeaders, body, onSuccess, onFailure) {\n        var rr, vias, length, idx, response, to = this.getHeader('To'), r = 0, v = 0;\n        response = SIP.Utils.buildStatusLine(code, reason);\n        extraHeaders = (extraHeaders || []).slice();\n        if (this.method === SIP.C.INVITE && code > 100 && code <= 200) {\n            rr = this.getHeaders('record-route');\n            length = rr.length;\n            for (r; r < length; r++) {\n                response += 'Record-Route: ' + rr[r] + '\\r\\n';\n            }\n        }\n        vias = this.getHeaders('via');\n        length = vias.length;\n        for (v; v < length; v++) {\n            response += 'Via: ' + vias[v] + '\\r\\n';\n        }\n        if (!this.to_tag && code > 100) {\n            to += ';tag=' + SIP.Utils.newTag();\n        }\n        else if (this.to_tag && !this.s('to').hasParam('tag')) {\n            to += ';tag=' + this.to_tag;\n        }\n        response += 'To: ' + to + '\\r\\n';\n        response += 'From: ' + this.getHeader('From') + '\\r\\n';\n        response += 'Call-ID: ' + this.call_id + '\\r\\n';\n        response += 'CSeq: ' + this.cseq + ' ' + this.method + '\\r\\n';\n        length = extraHeaders.length;\n        for (idx = 0; idx < length; idx++) {\n            response += extraHeaders[idx].trim() + '\\r\\n';\n        }\n        response += getSupportedHeader(this);\n        response += 'User-Agent: ' + this.ua.configuration.userAgentString + '\\r\\n';\n        if (body) {\n            if (typeof body === 'string') {\n                length = SIP.Utils.str_utf8_length(body);\n                response += 'Content-Type: application/sdp\\r\\n';\n                response += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                response += body;\n            }\n            else {\n                if (body.body && body.contentType) {\n                    length = SIP.Utils.str_utf8_length(body.body);\n                    response += 'Content-Type: ' + body.contentType + '\\r\\n';\n                    response += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                    response += body.body;\n                }\n                else {\n                    response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n                }\n            }\n        }\n        else {\n            response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n        }\n        this.server_transaction.receiveResponse(code, response).then(onSuccess, onFailure);\n        return response;\n    };\n    /**\n    * Stateless reply.\n    * @param {Number} code status code\n    * @param {String} reason reason phrase\n    */\n    IncomingRequest.prototype.reply_sl = function (code, reason) {\n        var to, response, v = 0, vias = this.getHeaders('via'), length = vias.length;\n        response = SIP.Utils.buildStatusLine(code, reason);\n        for (v; v < length; v++) {\n            response += 'Via: ' + vias[v] + '\\r\\n';\n        }\n        to = this.getHeader('To');\n        if (!this.to_tag && code > 100) {\n            to += ';tag=' + SIP.Utils.newTag();\n        }\n        else if (this.to_tag && !this.s('to').hasParam('tag')) {\n            to += ';tag=' + this.to_tag;\n        }\n        response += 'To: ' + to + '\\r\\n';\n        response += 'From: ' + this.getHeader('From') + '\\r\\n';\n        response += 'Call-ID: ' + this.call_id + '\\r\\n';\n        response += 'CSeq: ' + this.cseq + ' ' + this.method + '\\r\\n';\n        response += 'User-Agent: ' + this.ua.configuration.userAgentString + '\\r\\n';\n        response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n        this.transport.send(response);\n    };\n    /**\n     * @augments IncomingMessage\n     * @class Class for incoming SIP response.\n     */\n    IncomingResponse = function (ua) {\n        this.logger = ua.getLogger('sip.sipmessage');\n        this.headers = {};\n        this.status_code = null;\n        this.reason_phrase = null;\n    };\n    IncomingResponse.prototype = new IncomingMessage();\n    SIP.OutgoingRequest = OutgoingRequest;\n    SIP.IncomingRequest = IncomingRequest;\n    SIP.IncomingResponse = IncomingResponse;\n};\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP URI\n */\n/**\n * @augments SIP\n * @class Class creating a SIP URI.\n *\n * @param {String} [scheme]\n * @param {String} [user]\n * @param {String} host\n * @param {String} [port]\n * @param {Object} [parameters]\n * @param {Object} [headers]\n *\n */\nmodule.exports = function (SIP) {\n    var URI;\n    URI = function (scheme, user, host, port, parameters, headers) {\n        var param, header, raw, normal;\n        // Checks\n        if (!host) {\n            throw new TypeError('missing or invalid \"host\" parameter');\n        }\n        // Initialize parameters\n        scheme = scheme || SIP.C.SIP;\n        this.parameters = {};\n        this.headers = {};\n        for (param in parameters) {\n            this.setParam(param, parameters[param]);\n        }\n        for (header in headers) {\n            this.setHeader(header, headers[header]);\n        }\n        // Raw URI\n        raw = {\n            scheme: scheme,\n            user: user,\n            host: host,\n            port: port\n        };\n        // Normalized URI\n        normal = {\n            scheme: scheme.toLowerCase(),\n            user: user,\n            host: host.toLowerCase(),\n            port: port\n        };\n        Object.defineProperties(this, {\n            _normal: {\n                get: function () { return normal; }\n            },\n            _raw: {\n                get: function () { return raw; }\n            },\n            scheme: {\n                get: function () { return normal.scheme; },\n                set: function (value) {\n                    raw.scheme = value;\n                    normal.scheme = value.toLowerCase();\n                }\n            },\n            user: {\n                get: function () { return normal.user; },\n                set: function (value) {\n                    normal.user = raw.user = value;\n                }\n            },\n            host: {\n                get: function () { return normal.host; },\n                set: function (value) {\n                    raw.host = value;\n                    normal.host = value.toLowerCase();\n                }\n            },\n            aor: {\n                get: function () { return normal.user + '@' + normal.host; }\n            },\n            port: {\n                get: function () { return normal.port; },\n                set: function (value) {\n                    normal.port = raw.port = value === 0 ? value : (parseInt(value, 10) || null);\n                }\n            }\n        });\n    };\n    URI.prototype = {\n        setParam: function (key, value) {\n            if (key) {\n                this.parameters[key.toLowerCase()] = (typeof value === 'undefined' || value === null) ? null : value.toString();\n            }\n        },\n        getParam: function (key) {\n            if (key) {\n                return this.parameters[key.toLowerCase()];\n            }\n        },\n        hasParam: function (key) {\n            if (key) {\n                return (this.parameters.hasOwnProperty(key.toLowerCase()) && true) || false;\n            }\n        },\n        deleteParam: function (parameter) {\n            var value;\n            parameter = parameter.toLowerCase();\n            if (this.parameters.hasOwnProperty(parameter)) {\n                value = this.parameters[parameter];\n                delete this.parameters[parameter];\n                return value;\n            }\n        },\n        clearParams: function () {\n            this.parameters = {};\n        },\n        setHeader: function (name, value) {\n            this.headers[SIP.Utils.headerize(name)] = (value instanceof Array) ? value : [value];\n        },\n        getHeader: function (name) {\n            if (name) {\n                return this.headers[SIP.Utils.headerize(name)];\n            }\n        },\n        hasHeader: function (name) {\n            if (name) {\n                return (this.headers.hasOwnProperty(SIP.Utils.headerize(name)) && true) || false;\n            }\n        },\n        deleteHeader: function (header) {\n            var value;\n            header = SIP.Utils.headerize(header);\n            if (this.headers.hasOwnProperty(header)) {\n                value = this.headers[header];\n                delete this.headers[header];\n                return value;\n            }\n        },\n        clearHeaders: function () {\n            this.headers = {};\n        },\n        clone: function () {\n            return new URI(this._raw.scheme, this._raw.user, this._raw.host, this._raw.port, JSON.parse(JSON.stringify(this.parameters)), JSON.parse(JSON.stringify(this.headers)));\n        },\n        toRaw: function () {\n            return this._toString(this._raw);\n        },\n        toString: function () {\n            return this._toString(this._normal);\n        },\n        _toString: function (uri) {\n            var header, parameter, idx, uriString, headers = [];\n            uriString = uri.scheme + ':';\n            // add slashes if it's not a sip(s) URI\n            if (!uri.scheme.toLowerCase().match(\"^sips?$\")) {\n                uriString += \"//\";\n            }\n            if (uri.user) {\n                uriString += SIP.Utils.escapeUser(uri.user) + '@';\n            }\n            uriString += uri.host;\n            if (uri.port || uri.port === 0) {\n                uriString += ':' + uri.port;\n            }\n            for (parameter in this.parameters) {\n                uriString += ';' + parameter;\n                if (this.parameters[parameter] !== null) {\n                    uriString += '=' + this.parameters[parameter];\n                }\n            }\n            for (header in this.headers) {\n                for (idx in this.headers[header]) {\n                    headers.push(header + '=' + this.headers[header][idx]);\n                }\n            }\n            if (headers.length > 0) {\n                uriString += '?' + headers.join('&');\n            }\n            return uriString;\n        }\n    };\n    /**\n      * Parse the given string and returns a SIP.URI instance or undefined if\n      * it is an invalid URI.\n      * @public\n      * @param {String} uri\n      */\n    URI.parse = function (uri) {\n        uri = SIP.Grammar.parse(uri, 'SIP_URI');\n        if (uri !== -1) {\n            return uri;\n        }\n        else {\n            return undefined;\n        }\n    };\n    SIP.URI = URI;\n};\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP NameAddrHeader\n */\n/**\n * @augments SIP\n * @class Class creating a Name Address SIP header.\n *\n * @param {SIP.URI} uri\n * @param {String} [displayName]\n * @param {Object} [parameters]\n *\n */\nmodule.exports = function (SIP) {\n    var NameAddrHeader;\n    NameAddrHeader = function (uri, displayName, parameters) {\n        var param;\n        // Checks\n        if (!uri || !(uri instanceof SIP.URI)) {\n            throw new TypeError('missing or invalid \"uri\" parameter');\n        }\n        // Initialize parameters\n        this.uri = uri;\n        this.parameters = {};\n        for (param in parameters) {\n            this.setParam(param, parameters[param]);\n        }\n        Object.defineProperties(this, {\n            friendlyName: {\n                get: function () { return this.displayName || uri.aor; }\n            },\n            displayName: {\n                get: function () { return displayName; },\n                set: function (value) {\n                    displayName = (value === 0) ? '0' : value;\n                }\n            }\n        });\n    };\n    NameAddrHeader.prototype = {\n        setParam: function (key, value) {\n            if (key) {\n                this.parameters[key.toLowerCase()] = (typeof value === 'undefined' || value === null) ? null : value.toString();\n            }\n        },\n        getParam: SIP.URI.prototype.getParam,\n        hasParam: SIP.URI.prototype.hasParam,\n        deleteParam: SIP.URI.prototype.deleteParam,\n        clearParams: SIP.URI.prototype.clearParams,\n        clone: function () {\n            return new NameAddrHeader(this.uri.clone(), this.displayName, JSON.parse(JSON.stringify(this.parameters)));\n        },\n        toString: function () {\n            var body, parameter;\n            body = (this.displayName || this.displayName === 0) ? '\"' + this.displayName + '\" ' : '';\n            body += '<' + this.uri.toString() + '>';\n            for (parameter in this.parameters) {\n                body += ';' + parameter;\n                if (this.parameters[parameter] !== null) {\n                    body += '=' + this.parameters[parameter];\n                }\n            }\n            return body;\n        }\n    };\n    /**\n      * Parse the given string and returns a SIP.NameAddrHeader instance or undefined if\n      * it is an invalid NameAddrHeader.\n      * @public\n      * @param {String} name_addr_header\n      */\n    NameAddrHeader.parse = function (name_addr_header) {\n        name_addr_header = SIP.Grammar.parse(name_addr_header, 'Name_Addr_Header');\n        if (name_addr_header !== -1) {\n            return name_addr_header;\n        }\n        else {\n            return undefined;\n        }\n    };\n    SIP.NameAddrHeader = NameAddrHeader;\n};\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Transactions\n */\n/**\n * SIP Transactions module.\n * @augments SIP\n */\nmodule.exports = function (SIP) {\n    var C = {\n        // Transaction states\n        STATUS_TRYING: 1,\n        STATUS_PROCEEDING: 2,\n        STATUS_CALLING: 3,\n        STATUS_ACCEPTED: 4,\n        STATUS_COMPLETED: 5,\n        STATUS_TERMINATED: 6,\n        STATUS_CONFIRMED: 7,\n        // Transaction types\n        NON_INVITE_CLIENT: 'nict',\n        NON_INVITE_SERVER: 'nist',\n        INVITE_CLIENT: 'ict',\n        INVITE_SERVER: 'ist'\n    };\n    function buildViaHeader(request_sender, transport, id) {\n        var via;\n        via = 'SIP/2.0/' + (request_sender.ua.configuration.hackViaTcp ? 'TCP' : transport.server.scheme);\n        via += ' ' + request_sender.ua.configuration.viaHost + ';branch=' + id;\n        if (request_sender.ua.configuration.forceRport) {\n            via += ';rport';\n        }\n        return via;\n    }\n    /**\n    * @augments SIP.Transactions\n    * @class Non Invite Client Transaction\n    * @param {SIP.RequestSender} request_sender\n    * @param {SIP.OutgoingRequest} request\n    * @param {SIP.Transport} transport\n    */\n    var NonInviteClientTransaction = function (request_sender, request, transport) {\n        var via;\n        this.type = C.NON_INVITE_CLIENT;\n        this.transport = transport;\n        this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n        this.request_sender = request_sender;\n        this.request = request;\n        this.logger = request_sender.ua.getLogger('sip.transaction.nict', this.id);\n        via = buildViaHeader(request_sender, transport, this.id);\n        this.request.setHeader('via', via);\n        this.request_sender.ua.newTransaction(this);\n    };\n    NonInviteClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    NonInviteClientTransaction.prototype.stateChanged = function (state) {\n        this.state = state;\n        this.emit('stateChanged');\n    };\n    NonInviteClientTransaction.prototype.send = function () {\n        var tr = this;\n        this.stateChanged(C.STATUS_TRYING);\n        this.F = SIP.Timers.setTimeout(tr.timer_F.bind(tr), SIP.Timers.TIMER_F);\n        this.transport.send(this.request).catch(function () {\n            this.onTransportError();\n        }.bind(this));\n    };\n    NonInviteClientTransaction.prototype.onTransportError = function () {\n        this.logger.log('transport error occurred, deleting non-INVITE client transaction ' + this.id);\n        SIP.Timers.clearTimeout(this.F);\n        SIP.Timers.clearTimeout(this.K);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n        this.request_sender.onTransportError();\n    };\n    NonInviteClientTransaction.prototype.timer_F = function () {\n        this.logger.debug('Timer F expired for non-INVITE client transaction ' + this.id);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n        this.request_sender.onRequestTimeout();\n    };\n    NonInviteClientTransaction.prototype.timer_K = function () {\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n    };\n    NonInviteClientTransaction.prototype.receiveResponse = function (response) {\n        var tr = this, status_code = response.status_code;\n        if (status_code < 200) {\n            switch (this.state) {\n                case C.STATUS_TRYING:\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_PROCEEDING);\n                    this.request_sender.receiveResponse(response);\n                    break;\n            }\n        }\n        else {\n            switch (this.state) {\n                case C.STATUS_TRYING:\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_COMPLETED);\n                    SIP.Timers.clearTimeout(this.F);\n                    if (status_code === 408) {\n                        this.request_sender.onRequestTimeout();\n                    }\n                    else {\n                        this.request_sender.receiveResponse(response);\n                    }\n                    this.K = SIP.Timers.setTimeout(tr.timer_K.bind(tr), SIP.Timers.TIMER_K);\n                    break;\n                case C.STATUS_COMPLETED:\n                    break;\n            }\n        }\n    };\n    /**\n    * @augments SIP.Transactions\n    * @class Invite Client Transaction\n    * @param {SIP.RequestSender} request_sender\n    * @param {SIP.OutgoingRequest} request\n    * @param {SIP.Transport} transport\n    */\n    var InviteClientTransaction = function (request_sender, request, transport) {\n        var via, tr = this;\n        this.type = C.INVITE_CLIENT;\n        this.transport = transport;\n        this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n        this.request_sender = request_sender;\n        this.request = request;\n        this.logger = request_sender.ua.getLogger('sip.transaction.ict', this.id);\n        via = buildViaHeader(request_sender, transport, this.id);\n        this.request.setHeader('via', via);\n        this.request_sender.ua.newTransaction(this);\n        // Add the cancel property to the request.\n        //Will be called from the request instance, not the transaction itself.\n        this.request.cancel = function (reason, extraHeaders) {\n            extraHeaders = (extraHeaders || []).slice();\n            var length = extraHeaders.length;\n            var extraHeadersString = null;\n            for (var idx = 0; idx < length; idx++) {\n                extraHeadersString = (extraHeadersString || '') + extraHeaders[idx].trim() + '\\r\\n';\n            }\n            tr.cancel_request(tr, reason, extraHeadersString);\n        };\n    };\n    InviteClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    InviteClientTransaction.prototype.stateChanged = function (state) {\n        this.state = state;\n        this.emit('stateChanged');\n    };\n    InviteClientTransaction.prototype.send = function () {\n        var tr = this;\n        this.stateChanged(C.STATUS_CALLING);\n        this.B = SIP.Timers.setTimeout(tr.timer_B.bind(tr), SIP.Timers.TIMER_B);\n        this.transport.send(this.request).catch(function () {\n            this.onTransportError();\n        }.bind(this));\n    };\n    InviteClientTransaction.prototype.onTransportError = function () {\n        this.logger.log('transport error occurred, deleting INVITE client transaction ' + this.id);\n        SIP.Timers.clearTimeout(this.B);\n        SIP.Timers.clearTimeout(this.D);\n        SIP.Timers.clearTimeout(this.M);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n        if (this.state !== C.STATUS_ACCEPTED) {\n            this.request_sender.onTransportError();\n        }\n    };\n    // RFC 6026 7.2\n    InviteClientTransaction.prototype.timer_M = function () {\n        this.logger.debug('Timer M expired for INVITE client transaction ' + this.id);\n        if (this.state === C.STATUS_ACCEPTED) {\n            SIP.Timers.clearTimeout(this.B);\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.request_sender.ua.destroyTransaction(this);\n        }\n    };\n    // RFC 3261 17.1.1\n    InviteClientTransaction.prototype.timer_B = function () {\n        this.logger.debug('Timer B expired for INVITE client transaction ' + this.id);\n        if (this.state === C.STATUS_CALLING) {\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.request_sender.ua.destroyTransaction(this);\n            this.request_sender.onRequestTimeout();\n        }\n    };\n    InviteClientTransaction.prototype.timer_D = function () {\n        this.logger.debug('Timer D expired for INVITE client transaction ' + this.id);\n        SIP.Timers.clearTimeout(this.B);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n    };\n    InviteClientTransaction.prototype.sendACK = function (options) {\n        // TODO: Move PRACK stuff into the transaction layer. That is really where it should be\n        var self = this, ruri;\n        options = options || {};\n        if (this.response.getHeader('contact')) {\n            ruri = this.response.parseHeader('contact').uri;\n        }\n        else {\n            ruri = this.request.ruri;\n        }\n        var ack = new SIP.OutgoingRequest(\"ACK\", ruri, this.request.ua, {\n            cseq: this.response.cseq,\n            call_id: this.response.call_id,\n            from_uri: this.response.from.uri,\n            from_tag: this.response.from_tag,\n            to_uri: this.response.to.uri,\n            to_tag: this.response.to_tag,\n            route_set: this.response.getHeaders('record-route').reverse()\n        }, options.extraHeaders || [], options.body);\n        this.ackSender = new SIP.RequestSender({\n            request: ack,\n            onRequestTimeout: this.request_sender.applicant.applicant ? this.request_sender.applicant.applicant.onRequestTimeout : function () {\n                self.logger.warn(\"ACK Request timed out\");\n            },\n            onTransportError: this.request_sender.applicant.applicant ? this.request_sender.applicant.applicant.onRequestTransportError : function () {\n                self.logger.warn(\"ACK Request had a transport error\");\n            },\n            receiveResponse: options.receiveResponse || function () {\n                self.logger.warn(\"Received a response to an ACK which was unexpected. Dropping Response.\");\n            }\n        }, this.request.ua).send();\n        return ack;\n    };\n    InviteClientTransaction.prototype.cancel_request = function (tr, reason, extraHeaders) {\n        var request = tr.request;\n        this.cancel = SIP.C.CANCEL + ' ' + request.ruri + ' SIP/2.0\\r\\n';\n        this.cancel += 'Via: ' + request.headers['Via'].toString() + '\\r\\n';\n        if (this.request.headers['Route']) {\n            this.cancel += 'Route: ' + request.headers['Route'].toString() + '\\r\\n';\n        }\n        this.cancel += 'To: ' + request.headers['To'].toString() + '\\r\\n';\n        this.cancel += 'From: ' + request.headers['From'].toString() + '\\r\\n';\n        this.cancel += 'Call-ID: ' + request.headers['Call-ID'].toString() + '\\r\\n';\n        this.cancel += 'Max-Forwards: ' + SIP.UA.C.MAX_FORWARDS + '\\r\\n';\n        this.cancel += 'CSeq: ' + request.headers['CSeq'].toString().split(' ')[0] +\n            ' CANCEL\\r\\n';\n        if (reason) {\n            this.cancel += 'Reason: ' + reason + '\\r\\n';\n        }\n        if (extraHeaders) {\n            this.cancel += extraHeaders;\n        }\n        this.cancel += 'Content-Length: 0\\r\\n\\r\\n';\n        // Send only if a provisional response (>100) has been received.\n        if (this.state === C.STATUS_PROCEEDING) {\n            this.transport.send(this.cancel);\n        }\n    };\n    InviteClientTransaction.prototype.receiveResponse = function (response) {\n        var tr = this, status_code = response.status_code;\n        // This may create a circular dependency...\n        response.transaction = this;\n        if (this.response &&\n            this.response.status_code === response.status_code &&\n            this.response.cseq === response.cseq) {\n            this.logger.debug(\"ICT Received a retransmission for cseq: \" + response.cseq);\n            if (this.ackSender) {\n                this.ackSender.send();\n            }\n            return;\n        }\n        this.response = response;\n        if (status_code >= 100 && status_code <= 199) {\n            switch (this.state) {\n                case C.STATUS_CALLING:\n                    this.stateChanged(C.STATUS_PROCEEDING);\n                    this.request_sender.receiveResponse(response);\n                    if (this.cancel) {\n                        this.transport.send(this.cancel);\n                    }\n                    break;\n                case C.STATUS_PROCEEDING:\n                    this.request_sender.receiveResponse(response);\n                    break;\n            }\n        }\n        else if (status_code >= 200 && status_code <= 299) {\n            switch (this.state) {\n                case C.STATUS_CALLING:\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_ACCEPTED);\n                    this.M = SIP.Timers.setTimeout(tr.timer_M.bind(tr), SIP.Timers.TIMER_M);\n                    this.request_sender.receiveResponse(response);\n                    break;\n                case C.STATUS_ACCEPTED:\n                    this.request_sender.receiveResponse(response);\n                    break;\n            }\n        }\n        else if (status_code >= 300 && status_code <= 699) {\n            switch (this.state) {\n                case C.STATUS_CALLING:\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_COMPLETED);\n                    this.sendACK();\n                    this.request_sender.receiveResponse(response);\n                    break;\n                case C.STATUS_COMPLETED:\n                    this.sendACK();\n                    break;\n            }\n        }\n    };\n    /**\n     * @augments SIP.Transactions\n     * @class ACK Client Transaction\n     * @param {SIP.RequestSender} request_sender\n     * @param {SIP.OutgoingRequest} request\n     * @param {SIP.Transport} transport\n     */\n    var AckClientTransaction = function (request_sender, request, transport) {\n        var via;\n        this.transport = transport;\n        this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n        this.request_sender = request_sender;\n        this.request = request;\n        this.logger = request_sender.ua.getLogger('sip.transaction.nict', this.id);\n        via = buildViaHeader(request_sender, transport, this.id);\n        this.request.setHeader('via', via);\n    };\n    AckClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    AckClientTransaction.prototype.send = function () {\n        this.transport.send(this.request).catch(function () {\n            this.onTransportError();\n        }.bind(this));\n    };\n    AckClientTransaction.prototype.onTransportError = function () {\n        this.logger.log('transport error occurred, for an ACK client transaction ' + this.id);\n        this.request_sender.onTransportError();\n    };\n    /**\n    * @augments SIP.Transactions\n    * @class Non Invite Server Transaction\n    * @param {SIP.IncomingRequest} request\n    * @param {SIP.UA} ua\n    */\n    var NonInviteServerTransaction = function (request, ua) {\n        this.type = C.NON_INVITE_SERVER;\n        this.id = request.via_branch;\n        this.request = request;\n        this.transport = ua.transport;\n        this.ua = ua;\n        this.last_response = '';\n        request.server_transaction = this;\n        this.logger = ua.getLogger('sip.transaction.nist', this.id);\n        this.state = C.STATUS_TRYING;\n        ua.newTransaction(this);\n    };\n    NonInviteServerTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    NonInviteServerTransaction.prototype.stateChanged = function (state) {\n        this.state = state;\n        this.emit('stateChanged');\n    };\n    NonInviteServerTransaction.prototype.timer_J = function () {\n        this.logger.debug('Timer J expired for non-INVITE server transaction ' + this.id);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.ua.destroyTransaction(this);\n    };\n    NonInviteServerTransaction.prototype.onTransportError = function () {\n        if (!this.transportError) {\n            this.transportError = true;\n            this.logger.log('transport error occurred, deleting non-INVITE server transaction ' + this.id);\n            SIP.Timers.clearTimeout(this.J);\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.ua.destroyTransaction(this);\n        }\n    };\n    NonInviteServerTransaction.prototype.receiveResponse = function (status_code, response) {\n        var tr = this;\n        var deferred = SIP.Utils.defer();\n        if (status_code === 100) {\n            /* RFC 4320 4.1\n             * 'A SIP element MUST NOT\n             * send any provisional response with a\n             * Status-Code other than 100 to a non-INVITE request.'\n             */\n            switch (this.state) {\n                case C.STATUS_TRYING:\n                    this.stateChanged(C.STATUS_PROCEEDING);\n                    this.transport.send(response).catch(function () {\n                        this.onTransportError();\n                    }.bind(this));\n                    break;\n                case C.STATUS_PROCEEDING:\n                    this.last_response = response;\n                    this.transport.send(response).then(function () {\n                        deferred.resolve();\n                    }).catch(function () {\n                        this.onTransportError();\n                        deferred.reject();\n                    }.bind(this));\n                    break;\n            }\n        }\n        else if (status_code >= 200 && status_code <= 699) {\n            switch (this.state) {\n                case C.STATUS_TRYING:\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_COMPLETED);\n                    this.last_response = response;\n                    this.J = SIP.Timers.setTimeout(tr.timer_J.bind(tr), SIP.Timers.TIMER_J);\n                    this.transport.send(response).then(function () {\n                        deferred.resolve();\n                    }).catch(function () {\n                        this.onTransportError();\n                        deferred.reject();\n                    }.bind(this));\n                    break;\n                case C.STATUS_COMPLETED:\n                    break;\n            }\n        }\n        return deferred.promise;\n    };\n    /**\n    * @augments SIP.Transactions\n    * @class Invite Server Transaction\n    * @param {SIP.IncomingRequest} request\n    * @param {SIP.UA} ua\n    */\n    var InviteServerTransaction = function (request, ua) {\n        this.type = C.INVITE_SERVER;\n        this.id = request.via_branch;\n        this.request = request;\n        this.transport = ua.transport;\n        this.ua = ua;\n        this.last_response = '';\n        request.server_transaction = this;\n        this.logger = ua.getLogger('sip.transaction.ist', this.id);\n        this.state = C.STATUS_PROCEEDING;\n        ua.newTransaction(this);\n        this.resendProvisionalTimer = null;\n        request.reply(100);\n    };\n    InviteServerTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    InviteServerTransaction.prototype.stateChanged = function (state) {\n        this.state = state;\n        this.emit('stateChanged');\n    };\n    InviteServerTransaction.prototype.timer_H = function () {\n        this.logger.debug('Timer H expired for INVITE server transaction ' + this.id);\n        if (this.state === C.STATUS_COMPLETED) {\n            this.logger.warn('transactions', 'ACK for INVITE server transaction was never received, call will be terminated');\n        }\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.ua.destroyTransaction(this);\n    };\n    InviteServerTransaction.prototype.timer_I = function () {\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.ua.destroyTransaction(this);\n    };\n    // RFC 6026 7.1\n    InviteServerTransaction.prototype.timer_L = function () {\n        this.logger.debug('Timer L expired for INVITE server transaction ' + this.id);\n        if (this.state === C.STATUS_ACCEPTED) {\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.ua.destroyTransaction(this);\n        }\n    };\n    InviteServerTransaction.prototype.onTransportError = function () {\n        if (!this.transportError) {\n            this.transportError = true;\n            this.logger.log('transport error occurred, deleting INVITE server transaction ' + this.id);\n            if (this.resendProvisionalTimer !== null) {\n                SIP.Timers.clearInterval(this.resendProvisionalTimer);\n                this.resendProvisionalTimer = null;\n            }\n            SIP.Timers.clearTimeout(this.L);\n            SIP.Timers.clearTimeout(this.H);\n            SIP.Timers.clearTimeout(this.I);\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.ua.destroyTransaction(this);\n        }\n    };\n    InviteServerTransaction.prototype.resend_provisional = function () {\n        this.transport.send(this.request).catch(function () {\n            this.onTransportError();\n        }.bind(this));\n    };\n    // INVITE Server Transaction RFC 3261 17.2.1\n    InviteServerTransaction.prototype.receiveResponse = function (status_code, response) {\n        var tr = this;\n        var deferred = SIP.Utils.defer();\n        if (status_code >= 100 && status_code <= 199) {\n            switch (this.state) {\n                case C.STATUS_PROCEEDING:\n                    this.transport.send(response).catch(function () {\n                        this.onTransportError();\n                    }.bind(this));\n                    this.last_response = response;\n                    break;\n            }\n        }\n        if (status_code > 100 && status_code <= 199 && this.state === C.STATUS_PROCEEDING) {\n            // Trigger the resendProvisionalTimer only for the first non 100 provisional response.\n            if (this.resendProvisionalTimer === null) {\n                this.resendProvisionalTimer = SIP.Timers.setInterval(tr.resend_provisional.bind(tr), SIP.Timers.PROVISIONAL_RESPONSE_INTERVAL);\n            }\n        }\n        else if (status_code >= 200 && status_code <= 299) {\n            switch (this.state) {\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_ACCEPTED);\n                    this.last_response = response;\n                    this.L = SIP.Timers.setTimeout(tr.timer_L.bind(tr), SIP.Timers.TIMER_L);\n                    if (this.resendProvisionalTimer !== null) {\n                        SIP.Timers.clearInterval(this.resendProvisionalTimer);\n                        this.resendProvisionalTimer = null;\n                    }\n                /* falls through */\n                case C.STATUS_ACCEPTED:\n                    // Note that this point will be reached for proceeding tr.state also.\n                    this.transport.send(response).then(function () {\n                        deferred.resolve();\n                    }).catch(function (error) {\n                        this.logger.error(error);\n                        this.onTransportError();\n                        deferred.reject();\n                    }.bind(this));\n                    break;\n            }\n        }\n        else if (status_code >= 300 && status_code <= 699) {\n            switch (this.state) {\n                case C.STATUS_PROCEEDING:\n                    if (this.resendProvisionalTimer !== null) {\n                        SIP.Timers.clearInterval(this.resendProvisionalTimer);\n                        this.resendProvisionalTimer = null;\n                    }\n                    this.transport.send(response).then(function () {\n                        this.stateChanged(C.STATUS_COMPLETED);\n                        this.H = SIP.Timers.setTimeout(tr.timer_H.bind(tr), SIP.Timers.TIMER_H);\n                        deferred.resolve();\n                    }.bind(this)).catch(function (error) {\n                        this.logger.error(error);\n                        this.onTransportError();\n                        deferred.reject();\n                    }.bind(this));\n                    break;\n            }\n        }\n        return deferred.promise;\n    };\n    /**\n     * @function\n     * @param {SIP.UA} ua\n     * @param {SIP.IncomingRequest} request\n     *\n     * @return {boolean}\n     * INVITE:\n     *  _true_ if retransmission\n     *  _false_ new request\n     *\n     * ACK:\n     *  _true_  ACK to non2xx response\n     *  _false_ ACK must be passed to TU (accepted state)\n     *          ACK to 2xx response\n     *\n     * CANCEL:\n     *  _true_  no matching invite transaction\n     *  _false_ matching invite transaction and no final response sent\n     *\n     * OTHER:\n     *  _true_  retransmission\n     *  _false_ new request\n     */\n    var checkTransaction = function (ua, request) {\n        var tr;\n        switch (request.method) {\n            case SIP.C.INVITE:\n                tr = ua.transactions.ist[request.via_branch];\n                if (tr) {\n                    switch (tr.state) {\n                        case C.STATUS_PROCEEDING:\n                            tr.transport.send(tr.last_response);\n                            break;\n                        // RFC 6026 7.1 Invite retransmission\n                        //received while in C.STATUS_ACCEPTED state. Absorb it.\n                        case C.STATUS_ACCEPTED:\n                            break;\n                    }\n                    return true;\n                }\n                break;\n            case SIP.C.ACK:\n                tr = ua.transactions.ist[request.via_branch];\n                // RFC 6026 7.1\n                if (tr) {\n                    if (tr.state === C.STATUS_ACCEPTED) {\n                        return false;\n                    }\n                    else if (tr.state === C.STATUS_COMPLETED) {\n                        tr.stateChanged(C.STATUS_CONFIRMED);\n                        tr.I = SIP.Timers.setTimeout(tr.timer_I.bind(tr), SIP.Timers.TIMER_I);\n                        return true;\n                    }\n                }\n                // ACK to 2XX Response.\n                else {\n                    return false;\n                }\n                break;\n            case SIP.C.CANCEL:\n                tr = ua.transactions.ist[request.via_branch];\n                if (tr) {\n                    request.reply_sl(200);\n                    if (tr.state === C.STATUS_PROCEEDING) {\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                }\n                else {\n                    request.reply_sl(481);\n                    return true;\n                }\n            default:\n                // Non-INVITE Server Transaction RFC 3261 17.2.2\n                tr = ua.transactions.nist[request.via_branch];\n                if (tr) {\n                    switch (tr.state) {\n                        case C.STATUS_TRYING:\n                            break;\n                        case C.STATUS_PROCEEDING:\n                        case C.STATUS_COMPLETED:\n                            tr.transport.send(tr.last_response);\n                            break;\n                    }\n                    return true;\n                }\n                break;\n        }\n    };\n    SIP.Transactions = {\n        C: C,\n        checkTransaction: checkTransaction,\n        NonInviteClientTransaction: NonInviteClientTransaction,\n        InviteClientTransaction: InviteClientTransaction,\n        AckClientTransaction: AckClientTransaction,\n        NonInviteServerTransaction: NonInviteServerTransaction,\n        InviteServerTransaction: InviteServerTransaction\n    };\n};\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Dialog\n */\n/**\n * @augments SIP\n * @class Class creating a SIP dialog.\n * @param {SIP.RTCSession} owner\n * @param {SIP.IncomingRequest|SIP.IncomingResponse} message\n * @param {Enum} type UAC / UAS\n * @param {Enum} state SIP.Dialog.C.STATUS_EARLY / SIP.Dialog.C.STATUS_CONFIRMED\n */\nmodule.exports = function (SIP) {\n    var RequestSender = __webpack_require__(17)(SIP);\n    var Dialog, C = {\n        // Dialog states\n        STATUS_EARLY: 1,\n        STATUS_CONFIRMED: 2\n    };\n    // RFC 3261 12.1\n    Dialog = function (owner, message, type, state) {\n        var contact;\n        this.uac_pending_reply = false;\n        this.uas_pending_reply = false;\n        if (!message.hasHeader('contact')) {\n            return {\n                error: 'unable to create a Dialog without Contact header field'\n            };\n        }\n        if (message instanceof SIP.IncomingResponse) {\n            state = (message.status_code < 200) ? C.STATUS_EARLY : C.STATUS_CONFIRMED;\n        }\n        else {\n            // Create confirmed dialog if state is not defined\n            state = state || C.STATUS_CONFIRMED;\n        }\n        contact = message.parseHeader('contact');\n        // RFC 3261 12.1.1\n        if (type === 'UAS') {\n            this.id = {\n                call_id: message.call_id,\n                local_tag: message.to_tag,\n                remote_tag: message.from_tag,\n                toString: function () {\n                    return this.call_id + this.local_tag + this.remote_tag;\n                }\n            };\n            this.state = state;\n            this.remote_seqnum = message.cseq;\n            this.local_uri = message.parseHeader('to').uri;\n            this.remote_uri = message.parseHeader('from').uri;\n            this.remote_target = contact.uri;\n            this.route_set = message.getHeaders('record-route');\n            this.invite_seqnum = message.cseq;\n            this.local_seqnum = message.cseq;\n        }\n        // RFC 3261 12.1.2\n        else if (type === 'UAC') {\n            this.id = {\n                call_id: message.call_id,\n                local_tag: message.from_tag,\n                remote_tag: message.to_tag,\n                toString: function () {\n                    return this.call_id + this.local_tag + this.remote_tag;\n                }\n            };\n            this.state = state;\n            this.invite_seqnum = message.cseq;\n            this.local_seqnum = message.cseq;\n            this.local_uri = message.parseHeader('from').uri;\n            this.pracked = [];\n            this.remote_uri = message.parseHeader('to').uri;\n            this.remote_target = contact.uri;\n            this.route_set = message.getHeaders('record-route').reverse();\n        }\n        this.logger = owner.ua.getLogger('sip.dialog', this.id.toString());\n        this.owner = owner;\n        owner.ua.dialogs[this.id.toString()] = this;\n        this.logger.log('new ' + type + ' dialog created with status ' + (this.state === C.STATUS_EARLY ? 'EARLY' : 'CONFIRMED'));\n        owner.emit('dialog', this);\n    };\n    Dialog.prototype = {\n        /**\n         * @param {SIP.IncomingMessage} message\n         * @param {Enum} UAC/UAS\n         */\n        update: function (message, type) {\n            this.state = C.STATUS_CONFIRMED;\n            this.logger.log('dialog ' + this.id.toString() + '  changed to CONFIRMED state');\n            if (type === 'UAC') {\n                // RFC 3261 13.2.2.4\n                this.route_set = message.getHeaders('record-route').reverse();\n            }\n        },\n        terminate: function () {\n            this.logger.log('dialog ' + this.id.toString() + ' deleted');\n            if (this.sessionDescriptionHandler && this.state !== C.STATUS_CONFIRMED) {\n                // TODO: This should call .close() on the handler when implemented\n                this.sessionDescriptionHandler.close();\n            }\n            delete this.owner.ua.dialogs[this.id.toString()];\n        },\n        /**\n        * @param {String} method request method\n        * @param {Object} extraHeaders extra headers\n        * @returns {SIP.OutgoingRequest}\n        */\n        // RFC 3261 12.2.1.1\n        createRequest: function (method, extraHeaders, body) {\n            var cseq, request;\n            extraHeaders = (extraHeaders || []).slice();\n            if (!this.local_seqnum) {\n                this.local_seqnum = Math.floor(Math.random() * 10000);\n            }\n            cseq = (method === SIP.C.CANCEL || method === SIP.C.ACK) ? this.invite_seqnum : this.local_seqnum += 1;\n            request = new SIP.OutgoingRequest(method, this.remote_target, this.owner.ua, {\n                'cseq': cseq,\n                'call_id': this.id.call_id,\n                'from_uri': this.local_uri,\n                'from_tag': this.id.local_tag,\n                'to_uri': this.remote_uri,\n                'to_tag': this.id.remote_tag,\n                'route_set': this.route_set\n            }, extraHeaders, body);\n            request.dialog = this;\n            return request;\n        },\n        /**\n        * @param {SIP.IncomingRequest} request\n        * @returns {Boolean}\n        */\n        // RFC 3261 12.2.2\n        checkInDialogRequest: function (request) {\n            var self = this;\n            if (!this.remote_seqnum) {\n                this.remote_seqnum = request.cseq;\n            }\n            else if (request.cseq < this.remote_seqnum) {\n                //Do not try to reply to an ACK request.\n                if (request.method !== SIP.C.ACK) {\n                    request.reply(500);\n                }\n                if (request.cseq === this.invite_seqnum) {\n                    return true;\n                }\n                return false;\n            }\n            switch (request.method) {\n                // RFC3261 14.2 Modifying an Existing Session -UAS BEHAVIOR-\n                case SIP.C.INVITE:\n                    if (this.uac_pending_reply === true) {\n                        request.reply(491);\n                    }\n                    else if (this.uas_pending_reply === true && request.cseq > this.remote_seqnum) {\n                        var retryAfter = (Math.random() * 10 | 0) + 1;\n                        request.reply(500, null, ['Retry-After:' + retryAfter]);\n                        this.remote_seqnum = request.cseq;\n                        return false;\n                    }\n                    else {\n                        this.uas_pending_reply = true;\n                        request.server_transaction.on('stateChanged', function stateChanged() {\n                            if (this.state === SIP.Transactions.C.STATUS_ACCEPTED ||\n                                this.state === SIP.Transactions.C.STATUS_COMPLETED ||\n                                this.state === SIP.Transactions.C.STATUS_TERMINATED) {\n                                this.removeListener('stateChanged', stateChanged);\n                                self.uas_pending_reply = false;\n                            }\n                        });\n                    }\n                    // RFC3261 12.2.2 Replace the dialog`s remote target URI if the request is accepted\n                    if (request.hasHeader('contact')) {\n                        request.server_transaction.on('stateChanged', function () {\n                            if (this.state === SIP.Transactions.C.STATUS_ACCEPTED) {\n                                self.remote_target = request.parseHeader('contact').uri;\n                            }\n                        });\n                    }\n                    break;\n                case SIP.C.NOTIFY:\n                    // RFC6665 3.2 Replace the dialog`s remote target URI if the request is accepted\n                    if (request.hasHeader('contact')) {\n                        request.server_transaction.on('stateChanged', function () {\n                            if (this.state === SIP.Transactions.C.STATUS_COMPLETED) {\n                                self.remote_target = request.parseHeader('contact').uri;\n                            }\n                        });\n                    }\n                    break;\n            }\n            if (request.cseq > this.remote_seqnum) {\n                this.remote_seqnum = request.cseq;\n            }\n            return true;\n        },\n        sendRequest: function (applicant, method, options) {\n            options = options || {};\n            var extraHeaders = (options.extraHeaders || []).slice();\n            var body = null;\n            if (options.body) {\n                if (options.body.body) {\n                    body = options.body;\n                }\n                else {\n                    body = {};\n                    body.body = options.body;\n                    if (options.contentType) {\n                        body.contentType = options.contentType;\n                    }\n                }\n            }\n            var request = this.createRequest(method, extraHeaders, body), request_sender = new RequestSender(this, applicant, request);\n            request_sender.send();\n            return request;\n        },\n        /**\n        * @param {SIP.IncomingRequest} request\n        */\n        receiveRequest: function (request) {\n            //Check in-dialog request\n            if (!this.checkInDialogRequest(request)) {\n                return;\n            }\n            this.owner.receiveRequest(request);\n        }\n    };\n    Dialog.C = C;\n    SIP.Dialog = Dialog;\n};\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview In-Dialog Request Sender\n */\n/**\n * @augments SIP.Dialog\n * @class Class creating an In-dialog request sender.\n * @param {SIP.Dialog} dialog\n * @param {Object} applicant\n * @param {SIP.OutgoingRequest} request\n */\n/**\n * @fileoverview in-Dialog Request Sender\n */\nmodule.exports = function (SIP) {\n    var RequestSender;\n    RequestSender = function (dialog, applicant, request) {\n        this.dialog = dialog;\n        this.applicant = applicant;\n        this.request = request;\n        // RFC3261 14.1 Modifying an Existing Session. UAC Behavior.\n        this.reattempt = false;\n        this.reattemptTimer = null;\n    };\n    RequestSender.prototype = {\n        send: function () {\n            var self = this, request_sender = new SIP.RequestSender(this, this.dialog.owner.ua);\n            request_sender.send();\n            // RFC3261 14.2 Modifying an Existing Session -UAC BEHAVIOR-\n            if (this.request.method === SIP.C.INVITE && request_sender.clientTransaction.state !== SIP.Transactions.C.STATUS_TERMINATED) {\n                this.dialog.uac_pending_reply = true;\n                request_sender.clientTransaction.on('stateChanged', function stateChanged() {\n                    if (this.state === SIP.Transactions.C.STATUS_ACCEPTED ||\n                        this.state === SIP.Transactions.C.STATUS_COMPLETED ||\n                        this.state === SIP.Transactions.C.STATUS_TERMINATED) {\n                        this.removeListener('stateChanged', stateChanged);\n                        self.dialog.uac_pending_reply = false;\n                    }\n                });\n            }\n        },\n        onRequestTimeout: function () {\n            this.applicant.onRequestTimeout();\n        },\n        onTransportError: function () {\n            this.applicant.onTransportError();\n        },\n        receiveResponse: function (response) {\n            var self = this;\n            // RFC3261 12.2.1.2 408 or 481 is received for a request within a dialog.\n            if (response.status_code === 408 || response.status_code === 481) {\n                this.applicant.onDialogError(response);\n            }\n            else if (response.method === SIP.C.INVITE && response.status_code === 491) {\n                if (this.reattempt) {\n                    this.applicant.receiveResponse(response);\n                }\n                else {\n                    this.request.cseq.value = this.dialog.local_seqnum += 1;\n                    this.reattemptTimer = SIP.Timers.setTimeout(function () {\n                        if (self.applicant.owner.status !== SIP.Session.C.STATUS_TERMINATED) {\n                            self.reattempt = true;\n                            self.request_sender.send();\n                        }\n                    }, this.getReattemptTimeout());\n                }\n            }\n            else {\n                this.applicant.receiveResponse(response);\n            }\n        }\n    };\n    return RequestSender;\n};\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview Request Sender\n */\n/**\n * @augments SIP\n * @class Class creating a request sender.\n * @param {Object} applicant\n * @param {SIP.UA} ua\n */\nmodule.exports = function (SIP) {\n    var RequestSender;\n    RequestSender = function (applicant, ua) {\n        this.logger = ua.getLogger('sip.requestsender');\n        this.ua = ua;\n        this.applicant = applicant;\n        this.method = applicant.request.method;\n        this.request = applicant.request;\n        this.credentials = null;\n        this.challenged = false;\n        this.staled = false;\n        // If ua is in closing process or even closed just allow sending Bye and ACK\n        if (ua.status === SIP.UA.C.STATUS_USER_CLOSED && (this.method !== SIP.C.BYE || this.method !== SIP.C.ACK)) {\n            this.onTransportError();\n        }\n    };\n    /**\n    * Create the client transaction and send the message.\n    */\n    RequestSender.prototype = {\n        send: function () {\n            switch (this.method) {\n                case \"INVITE\":\n                    this.clientTransaction = new SIP.Transactions.InviteClientTransaction(this, this.request, this.ua.transport);\n                    break;\n                case \"ACK\":\n                    this.clientTransaction = new SIP.Transactions.AckClientTransaction(this, this.request, this.ua.transport);\n                    break;\n                default:\n                    this.clientTransaction = new SIP.Transactions.NonInviteClientTransaction(this, this.request, this.ua.transport);\n            }\n            this.clientTransaction.send();\n            return this.clientTransaction;\n        },\n        /**\n        * Callback fired when receiving a request timeout error from the client transaction.\n        * To be re-defined by the applicant.\n        * @event\n        */\n        onRequestTimeout: function () {\n            this.applicant.onRequestTimeout();\n        },\n        /**\n        * Callback fired when receiving a transport error from the client transaction.\n        * To be re-defined by the applicant.\n        * @event\n        */\n        onTransportError: function () {\n            this.applicant.onTransportError();\n        },\n        /**\n        * Called from client transaction when receiving a correct response to the request.\n        * Authenticate request if needed or pass the response back to the applicant.\n        * @param {SIP.IncomingResponse} response\n        */\n        receiveResponse: function (response) {\n            var cseq, challenge, authorization_header_name, status_code = response.status_code;\n            /*\n            * Authentication\n            * Authenticate once. _challenged_ flag used to avoid infinite authentications.\n            */\n            if (status_code === 401 || status_code === 407) {\n                // Get and parse the appropriate WWW-Authenticate or Proxy-Authenticate header.\n                if (response.status_code === 401) {\n                    challenge = response.parseHeader('www-authenticate');\n                    authorization_header_name = 'authorization';\n                }\n                else {\n                    challenge = response.parseHeader('proxy-authenticate');\n                    authorization_header_name = 'proxy-authorization';\n                }\n                // Verify it seems a valid challenge.\n                if (!challenge) {\n                    this.logger.warn(response.status_code + ' with wrong or missing challenge, cannot authenticate');\n                    this.applicant.receiveResponse(response);\n                    return;\n                }\n                if (!this.challenged || (!this.staled && challenge.stale === true)) {\n                    if (!this.credentials) {\n                        this.credentials = this.ua.configuration.authenticationFactory(this.ua);\n                    }\n                    // Verify that the challenge is really valid.\n                    if (!this.credentials.authenticate(this.request, challenge)) {\n                        this.applicant.receiveResponse(response);\n                        return;\n                    }\n                    this.challenged = true;\n                    if (challenge.stale) {\n                        this.staled = true;\n                    }\n                    if (response.method === SIP.C.REGISTER) {\n                        cseq = this.applicant.cseq += 1;\n                    }\n                    else if (this.request.dialog) {\n                        cseq = this.request.dialog.local_seqnum += 1;\n                    }\n                    else {\n                        cseq = this.request.cseq + 1;\n                        this.request.cseq = cseq;\n                    }\n                    this.request.setHeader('cseq', cseq + ' ' + this.method);\n                    this.request.setHeader(authorization_header_name, this.credentials.toString());\n                    this.send();\n                }\n                else {\n                    this.applicant.receiveResponse(response);\n                }\n            }\n            else {\n                this.applicant.receiveResponse(response);\n            }\n        }\n    };\n    SIP.RequestSender = RequestSender;\n};\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = function (SIP) {\n    var RegisterContext;\n    RegisterContext = function (ua) {\n        var params = {}, regId = 1;\n        this.registrar = ua.configuration.registrarServer;\n        this.expires = ua.configuration.registerExpires;\n        // Contact header\n        this.contact = ua.contact.toString();\n        if (regId) {\n            this.contact += ';reg-id=' + regId;\n            this.contact += ';+sip.instance=\"<urn:uuid:' + ua.configuration.instanceId + '>\"';\n        }\n        // Call-ID and CSeq values RFC3261 10.2\n        this.call_id = SIP.Utils.createRandomToken(22);\n        this.cseq = Math.floor(Math.random() * 10000);\n        this.to_uri = ua.configuration.uri;\n        params.to_uri = this.to_uri;\n        params.to_displayName = ua.configuration.displayName;\n        params.call_id = this.call_id;\n        params.cseq = this.cseq;\n        // Extends ClientContext\n        SIP.Utils.augment(this, SIP.ClientContext, [ua, 'REGISTER', this.registrar, { params: params }]);\n        this.registrationTimer = null;\n        this.registrationExpiredTimer = null;\n        // Set status\n        this.registered = false;\n        this.logger = ua.getLogger('sip.registercontext');\n        ua.on('transportCreated', function (transport) {\n            transport.on('disconnected', this.onTransportDisconnected.bind(this));\n        }.bind(this));\n    };\n    RegisterContext.prototype = Object.create({}, {\n        register: { writable: true, value: function register(options) {\n                var self = this, extraHeaders;\n                // Handle Options\n                this.options = options || {};\n                extraHeaders = (this.options.extraHeaders || []).slice();\n                extraHeaders.push('Contact: ' + this.contact + ';expires=' + this.expires);\n                extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n                // Save original extraHeaders to be used in .close\n                this.closeHeaders = this.options.closeWithHeaders ?\n                    (this.options.extraHeaders || []).slice() : [];\n                this.receiveResponse = function (response) {\n                    var contact, expires, contacts = response.getHeaders('contact').length, cause;\n                    // Discard responses to older REGISTER/un-REGISTER requests.\n                    if (response.cseq !== this.cseq) {\n                        return;\n                    }\n                    // Clear registration timer\n                    if (this.registrationTimer !== null) {\n                        SIP.Timers.clearTimeout(this.registrationTimer);\n                        this.registrationTimer = null;\n                    }\n                    switch (true) {\n                        case /^1[0-9]{2}$/.test(response.status_code):\n                            this.emit('progress', response);\n                            break;\n                        case /^2[0-9]{2}$/.test(response.status_code):\n                            this.emit('accepted', response);\n                            if (response.hasHeader('expires')) {\n                                expires = response.getHeader('expires');\n                            }\n                            if (this.registrationExpiredTimer !== null) {\n                                SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n                                this.registrationExpiredTimer = null;\n                            }\n                            // Search the Contact pointing to us and update the expires value accordingly.\n                            if (!contacts) {\n                                this.logger.warn('no Contact header in response to REGISTER, response ignored');\n                                break;\n                            }\n                            while (contacts--) {\n                                contact = response.parseHeader('contact', contacts);\n                                if (contact.uri.user === this.ua.contact.uri.user) {\n                                    expires = contact.getParam('expires');\n                                    break;\n                                }\n                                else {\n                                    contact = null;\n                                }\n                            }\n                            if (!contact) {\n                                this.logger.warn('no Contact header pointing to us, response ignored');\n                                break;\n                            }\n                            if (!expires) {\n                                expires = this.expires;\n                            }\n                            // Re-Register before the expiration interval has elapsed.\n                            // For that, decrease the expires value. ie: 3 seconds\n                            this.registrationTimer = SIP.Timers.setTimeout(function () {\n                                self.registrationTimer = null;\n                                self.register(self.options);\n                            }, (expires * 1000) - 3000);\n                            this.registrationExpiredTimer = SIP.Timers.setTimeout(function () {\n                                self.logger.warn('registration expired');\n                                if (self.registered) {\n                                    self.unregistered(null, SIP.C.causes.EXPIRES);\n                                }\n                            }, expires * 1000);\n                            //Save gruu values\n                            if (contact.hasParam('temp-gruu')) {\n                                this.ua.contact.temp_gruu = SIP.URI.parse(contact.getParam('temp-gruu').replace(/\"/g, ''));\n                            }\n                            if (contact.hasParam('pub-gruu')) {\n                                this.ua.contact.pub_gruu = SIP.URI.parse(contact.getParam('pub-gruu').replace(/\"/g, ''));\n                            }\n                            this.registered = true;\n                            this.emit('registered', response || null);\n                            break;\n                        // Interval too brief RFC3261 10.2.8\n                        case /^423$/.test(response.status_code):\n                            if (response.hasHeader('min-expires')) {\n                                // Increase our registration interval to the suggested minimum\n                                this.expires = response.getHeader('min-expires');\n                                // Attempt the registration again immediately\n                                this.register(this.options);\n                            }\n                            else { //This response MUST contain a Min-Expires header field\n                                this.logger.warn('423 response received for REGISTER without Min-Expires');\n                                this.registrationFailure(response, SIP.C.causes.SIP_FAILURE_CODE);\n                            }\n                            break;\n                        default:\n                            cause = SIP.Utils.sipErrorCause(response.status_code);\n                            this.registrationFailure(response, cause);\n                    }\n                };\n                this.onRequestTimeout = function () {\n                    this.registrationFailure(null, SIP.C.causes.REQUEST_TIMEOUT);\n                };\n                this.onTransportError = function () {\n                    this.registrationFailure(null, SIP.C.causes.CONNECTION_ERROR);\n                };\n                this.cseq++;\n                this.request.cseq = this.cseq;\n                this.request.setHeader('cseq', this.cseq + ' REGISTER');\n                this.request.extraHeaders = extraHeaders;\n                this.send();\n            } },\n        registrationFailure: { writable: true, value: function registrationFailure(response, cause) {\n                this.emit('failed', response || null, cause || null);\n            } },\n        onTransportDisconnected: { writable: true, value: function onTransportDisconnected() {\n                this.registered_before = this.registered;\n                if (this.registrationTimer !== null) {\n                    SIP.Timers.clearTimeout(this.registrationTimer);\n                    this.registrationTimer = null;\n                }\n                if (this.registrationExpiredTimer !== null) {\n                    SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n                    this.registrationExpiredTimer = null;\n                }\n                if (this.registered) {\n                    this.unregistered(null, SIP.C.causes.CONNECTION_ERROR);\n                }\n            } },\n        onTransportConnected: { writable: true, value: function onTransportConnected() {\n                this.register(this.options);\n            } },\n        close: { writable: true, value: function close() {\n                var options = {\n                    all: false,\n                    extraHeaders: this.closeHeaders\n                };\n                this.registered_before = this.registered;\n                if (this.registered) {\n                    this.unregister(options);\n                }\n            } },\n        unregister: { writable: true, value: function unregister(options) {\n                var extraHeaders;\n                options = options || {};\n                if (!this.registered && !options.all) {\n                    this.logger.warn('Already unregistered, but sending an unregister anyways.');\n                }\n                extraHeaders = (options.extraHeaders || []).slice();\n                this.registered = false;\n                // Clear the registration timer.\n                if (this.registrationTimer !== null) {\n                    SIP.Timers.clearTimeout(this.registrationTimer);\n                    this.registrationTimer = null;\n                }\n                if (options.all) {\n                    extraHeaders.push('Contact: *');\n                    extraHeaders.push('Expires: 0');\n                }\n                else {\n                    extraHeaders.push('Contact: ' + this.contact + ';expires=0');\n                }\n                this.receiveResponse = function (response) {\n                    var cause;\n                    switch (true) {\n                        case /^1[0-9]{2}$/.test(response.status_code):\n                            this.emit('progress', response);\n                            break;\n                        case /^2[0-9]{2}$/.test(response.status_code):\n                            this.emit('accepted', response);\n                            if (this.registrationExpiredTimer !== null) {\n                                SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n                                this.registrationExpiredTimer = null;\n                            }\n                            this.unregistered(response);\n                            break;\n                        default:\n                            cause = SIP.Utils.sipErrorCause(response.status_code);\n                            this.unregistered(response, cause);\n                    }\n                };\n                this.onRequestTimeout = function () {\n                    // Not actually unregistered...\n                    //this.unregistered(null, SIP.C.causes.REQUEST_TIMEOUT);\n                };\n                this.cseq++;\n                this.request.cseq = this.cseq;\n                this.request.setHeader('cseq', this.cseq + ' REGISTER');\n                this.request.extraHeaders = extraHeaders;\n                this.send();\n            } },\n        unregistered: { writable: true, value: function unregistered(response, cause) {\n                this.registered = false;\n                this.emit('unregistered', response || null, cause || null);\n            } }\n    });\n    SIP.RegisterContext = RegisterContext;\n};\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/* eslint-disable */\n/**\n * @fileoverview SessionDescriptionHandler\n */\n/* SessionDescriptionHandler\n * @class PeerConnection helper Class.\n * @param {SIP.Session} session\n * @param {Object} [options]\n */\nmodule.exports = function (EventEmitter) {\n    var SessionDescriptionHandler = function () { };\n    SessionDescriptionHandler.prototype = Object.create(EventEmitter.prototype, {\n        /**\n         * Destructor\n         */\n        close: { value: function close() { } },\n        /**\n         * Gets the local description from the underlying media implementation\n         * @param {Object} [options] Options object to be used by getDescription\n         * @param {Array} [modifiers] Array with one time use description modifiers\n         * @returns {Promise} Promise that resolves with the local description to be used for the session\n         */\n        getDescription: { value: function getDescription(options, modifiers) { } },\n        /**\n         * Check if the Session Description Handler can handle the Content-Type described by a SIP Message\n         * @param {String} contentType The content type that is in the SIP Message\n         * @returns {boolean}\n         */\n        hasDescription: { value: function hasSessionDescription(contentType) { } },\n        /**\n         * The modifier that should be used when the session would like to place the call on hold\n         * @param {String} [sdp] The description that will be modified\n         * @returns {Promise} Promise that resolves with modified SDP\n         */\n        holdModifier: { value: function holdModifier(sdp) { } },\n        /**\n         * Set the remote description to the underlying media implementation\n         * @param {String} sessionDescription The description provided by a SIP message to be set on the media implementation\n         * @param {Object} [options] Options object to be used by setDescription\n         * @param {Array} [modifiers] Array with one time use description modifiers\n         * @returns {Promise} Promise that resolves once the description is set\n         */\n        setDescription: { value: function setDescription(sessionDescription, options, modifiers) { } },\n        /**\n         * Send DTMF via RTP (RFC 4733)\n         * @param {String} tones A string containing DTMF digits\n         * @param {Object} [options] Options object to be used by sendDtmf\n         * @returns {boolean} true if DTMF send is successful, false otherwise\n         */\n        sendDtmf: { value: function sendDtmf(tones, options) { } },\n        /**\n        * Get the direction of the session description\n        * @returns {String} direction of the description\n        */\n        getDirection: { value: function getDirection() { } },\n    });\n    return SessionDescriptionHandler;\n};\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = function (SIP) {\n    var ClientContext;\n    ClientContext = function (ua, method, target, options) {\n        var originalTarget = target;\n        // Validate arguments\n        if (target === undefined) {\n            throw new TypeError('Not enough arguments');\n        }\n        this.ua = ua;\n        this.logger = ua.getLogger('sip.clientcontext');\n        this.method = method;\n        target = ua.normalizeTarget(target);\n        if (!target) {\n            throw new TypeError('Invalid target: ' + originalTarget);\n        }\n        /* Options\n         * - extraHeaders\n         * - params\n         * - contentType\n         * - body\n         */\n        options = Object.create(options || Object.prototype);\n        options.extraHeaders = (options.extraHeaders || []).slice();\n        // Build the request\n        this.request = new SIP.OutgoingRequest(this.method, target, this.ua, options.params, options.extraHeaders);\n        if (options.body) {\n            this.body = {};\n            this.body.body = options.body;\n            if (options.contentType) {\n                this.body.contentType = options.contentType;\n            }\n            this.request.body = this.body;\n        }\n        /* Set other properties from the request */\n        this.localIdentity = this.request.from;\n        this.remoteIdentity = this.request.to;\n        this.data = {};\n    };\n    ClientContext.prototype = Object.create(SIP.EventEmitter.prototype);\n    ClientContext.prototype.send = function () {\n        (new SIP.RequestSender(this, this.ua)).send();\n        return this;\n    };\n    ClientContext.prototype.cancel = function (options) {\n        options = options || {};\n        options.extraHeaders = (options.extraHeaders || []).slice();\n        var cancel_reason = SIP.Utils.getCancelReason(options.status_code, options.reason_phrase);\n        this.request.cancel(cancel_reason, options.extraHeaders);\n        this.emit('cancel');\n    };\n    ClientContext.prototype.receiveResponse = function (response) {\n        var cause = SIP.Utils.getReasonPhrase(response.status_code);\n        switch (true) {\n            case /^1[0-9]{2}$/.test(response.status_code):\n                this.emit('progress', response, cause);\n                break;\n            case /^2[0-9]{2}$/.test(response.status_code):\n                if (this.ua.applicants[this]) {\n                    delete this.ua.applicants[this];\n                }\n                this.emit('accepted', response, cause);\n                break;\n            default:\n                if (this.ua.applicants[this]) {\n                    delete this.ua.applicants[this];\n                }\n                this.emit('rejected', response, cause);\n                this.emit('failed', response, cause);\n                break;\n        }\n    };\n    ClientContext.prototype.onRequestTimeout = function () {\n        this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n    };\n    ClientContext.prototype.onTransportError = function () {\n        this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n    };\n    SIP.ClientContext = ClientContext;\n};\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = function (SIP) {\n    var ServerContext;\n    ServerContext = function (ua, request) {\n        this.ua = ua;\n        this.logger = ua.getLogger('sip.servercontext');\n        this.request = request;\n        if (request.method === SIP.C.INVITE) {\n            this.transaction = new SIP.Transactions.InviteServerTransaction(request, ua);\n        }\n        else {\n            this.transaction = new SIP.Transactions.NonInviteServerTransaction(request, ua);\n        }\n        if (request.body) {\n            this.body = request.body;\n        }\n        if (request.hasHeader('Content-Type')) {\n            this.contentType = request.getHeader('Content-Type');\n        }\n        this.method = request.method;\n        this.data = {};\n        this.localIdentity = request.to;\n        this.remoteIdentity = request.from;\n        if (request.hasHeader('P-Asserted-Identity')) {\n            this.assertedIdentity = new SIP.NameAddrHeader.parse(request.getHeader('P-Asserted-Identity'));\n        }\n    };\n    ServerContext.prototype = Object.create(SIP.EventEmitter.prototype);\n    ServerContext.prototype.progress = function (options) {\n        options = Object.create(options || Object.prototype);\n        options.statusCode || (options.statusCode = 180);\n        options.minCode = 100;\n        options.maxCode = 199;\n        options.events = ['progress'];\n        return this.reply(options);\n    };\n    ServerContext.prototype.accept = function (options) {\n        options = Object.create(options || Object.prototype);\n        options.statusCode || (options.statusCode = 200);\n        options.minCode = 200;\n        options.maxCode = 299;\n        options.events = ['accepted'];\n        return this.reply(options);\n    };\n    ServerContext.prototype.reject = function (options) {\n        options = Object.create(options || Object.prototype);\n        options.statusCode || (options.statusCode = 480);\n        options.minCode = 300;\n        options.maxCode = 699;\n        options.events = ['rejected', 'failed'];\n        return this.reply(options);\n    };\n    ServerContext.prototype.reply = function (options) {\n        options = options || {}; // This is okay, so long as we treat options as read-only in this method\n        var statusCode = options.statusCode || 100, minCode = options.minCode || 100, maxCode = options.maxCode || 699, reasonPhrase = SIP.Utils.getReasonPhrase(statusCode, options.reasonPhrase), extraHeaders = options.extraHeaders || [], body = options.body, events = options.events || [], response;\n        if (statusCode < minCode || statusCode > maxCode) {\n            throw new TypeError('Invalid statusCode: ' + statusCode);\n        }\n        response = this.request.reply(statusCode, reasonPhrase, extraHeaders, body);\n        events.forEach(function (event) {\n            this.emit(event, response, reasonPhrase);\n        }, this);\n        return this;\n    };\n    ServerContext.prototype.onRequestTimeout = function () {\n        this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n    };\n    ServerContext.prototype.onTransportError = function () {\n        this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n    };\n    SIP.ServerContext = ServerContext;\n};\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = function (SIP) {\n    var DTMF = __webpack_require__(24)(SIP);\n    var Session, InviteServerContext, InviteClientContext, ReferServerContext, ReferClientContext, C = {\n        //Session states\n        STATUS_NULL: 0,\n        STATUS_INVITE_SENT: 1,\n        STATUS_1XX_RECEIVED: 2,\n        STATUS_INVITE_RECEIVED: 3,\n        STATUS_WAITING_FOR_ANSWER: 4,\n        STATUS_ANSWERED: 5,\n        STATUS_WAITING_FOR_PRACK: 6,\n        STATUS_WAITING_FOR_ACK: 7,\n        STATUS_CANCELED: 8,\n        STATUS_TERMINATED: 9,\n        STATUS_ANSWERED_WAITING_FOR_PRACK: 10,\n        STATUS_EARLY_MEDIA: 11,\n        STATUS_CONFIRMED: 12\n    };\n    /*\n     * @param {function returning SIP.sessionDescriptionHandler} [sessionDescriptionHandlerFactory]\n     *        (See the documentation for the sessionDescriptionHandlerFactory argument of the UA constructor.)\n     */\n    Session = function (sessionDescriptionHandlerFactory) {\n        this.status = C.STATUS_NULL;\n        this.dialog = null;\n        this.pendingReinvite = false;\n        this.earlyDialogs = {};\n        if (!sessionDescriptionHandlerFactory) {\n            throw new SIP.Exceptions.SessionDescriptionHandlerMissing('A session description handler is required for the session to function');\n        }\n        this.sessionDescriptionHandlerFactory = sessionDescriptionHandlerFactory;\n        this.hasOffer = false;\n        this.hasAnswer = false;\n        // Session Timers\n        this.timers = {\n            ackTimer: null,\n            expiresTimer: null,\n            invite2xxTimer: null,\n            userNoAnswerTimer: null,\n            rel1xxTimer: null,\n            prackTimer: null\n        };\n        // Session info\n        this.startTime = null;\n        this.endTime = null;\n        this.tones = null;\n        // Hold state\n        this.local_hold = false;\n        this.early_sdp = null;\n        this.rel100 = SIP.C.supported.UNSUPPORTED;\n    };\n    Session.prototype = {\n        dtmf: function (tones, options) {\n            var tone, dtmfs = [], self = this, dtmfType = this.ua.configuration.dtmfType;\n            options = options || {};\n            if (tones === undefined) {\n                throw new TypeError('Not enough arguments');\n            }\n            // Check Session Status\n            if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_WAITING_FOR_ACK) {\n                throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n            // Check tones\n            if ((typeof tones !== 'string' && typeof tones !== 'number') || !tones.toString().match(/^[0-9A-D#*,]+$/i)) {\n                throw new TypeError('Invalid tones: ' + tones);\n            }\n            var sendDTMF = function () {\n                var dtmf, timeout;\n                if (self.status === C.STATUS_TERMINATED || !self.tones || self.tones.length === 0) {\n                    // Stop sending DTMF\n                    self.tones = null;\n                    return this;\n                }\n                dtmf = self.tones.shift();\n                if (tone === ',') {\n                    timeout = 2000;\n                }\n                else {\n                    dtmf.on('failed', function () { self.tones = null; });\n                    dtmf.send(options);\n                    timeout = dtmf.duration + dtmf.interToneGap;\n                }\n                // Set timeout for the next tone\n                SIP.Timers.setTimeout(sendDTMF, timeout);\n            };\n            tones = tones.toString();\n            if (dtmfType === SIP.C.dtmfType.RTP) {\n                var sent = this.sessionDescriptionHandler.sendDtmf(tones, options);\n                if (!sent) {\n                    this.logger.warn(\"Attempt to use dtmfType 'RTP' has failed, falling back to INFO packet method\");\n                    dtmfType = SIP.C.dtmfType.INFO;\n                }\n            }\n            if (dtmfType === SIP.C.dtmfType.INFO) {\n                tones = tones.split('');\n                while (tones.length > 0) {\n                    dtmfs.push(new DTMF(this, tones.shift(), options));\n                }\n                if (this.tones) {\n                    // Tones are already queued, just add to the queue\n                    this.tones = this.tones.concat(dtmfs);\n                    return this;\n                }\n                this.tones = dtmfs;\n                sendDTMF();\n            }\n            return this;\n        },\n        bye: function (options) {\n            options = Object.create(options || Object.prototype);\n            var statusCode = options.statusCode;\n            // Check Session Status\n            if (this.status === C.STATUS_TERMINATED) {\n                this.logger.error('Error: Attempted to send BYE in a terminated session.');\n                return this;\n            }\n            this.logger.log('terminating Session');\n            if (statusCode && (statusCode < 200 || statusCode >= 700)) {\n                throw new TypeError('Invalid statusCode: ' + statusCode);\n            }\n            options.receiveResponse = function () { };\n            return this.\n                sendRequest(SIP.C.BYE, options).\n                terminated();\n        },\n        refer: function (target, options) {\n            options = options || {};\n            // Check Session Status\n            if (this.status !== C.STATUS_CONFIRMED) {\n                throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n            this.referContext = new SIP.ReferClientContext(this.ua, this, target, options);\n            this.emit('referRequested', this.referContext);\n            this.referContext.refer(options);\n        },\n        sendRequest: function (method, options) {\n            options = options || {};\n            var self = this;\n            var request = new SIP.OutgoingRequest(method, this.dialog.remote_target, this.ua, {\n                cseq: options.cseq || (this.dialog.local_seqnum += 1),\n                call_id: this.dialog.id.call_id,\n                from_uri: this.dialog.local_uri,\n                from_tag: this.dialog.id.local_tag,\n                to_uri: this.dialog.remote_uri,\n                to_tag: this.dialog.id.remote_tag,\n                route_set: this.dialog.route_set,\n                statusCode: options.statusCode,\n                reasonPhrase: options.reasonPhrase\n            }, options.extraHeaders || [], options.body);\n            new SIP.RequestSender({\n                request: request,\n                onRequestTimeout: function () {\n                    self.onRequestTimeout();\n                },\n                onTransportError: function () {\n                    self.onTransportError();\n                },\n                receiveResponse: options.receiveResponse || function (response) {\n                    self.receiveNonInviteResponse(response);\n                }\n            }, this.ua).send();\n            // Emit the request event\n            this.emit(method.toLowerCase(), request);\n            return this;\n        },\n        close: function () {\n            var idx;\n            if (this.status === C.STATUS_TERMINATED) {\n                return this;\n            }\n            this.logger.log('closing INVITE session ' + this.id);\n            // 1st Step. Terminate media.\n            if (this.sessionDescriptionHandler) {\n                this.sessionDescriptionHandler.close();\n            }\n            // 2nd Step. Terminate signaling.\n            // Clear session timers\n            for (idx in this.timers) {\n                SIP.Timers.clearTimeout(this.timers[idx]);\n            }\n            // Terminate dialogs\n            // Terminate confirmed dialog\n            if (this.dialog) {\n                this.dialog.terminate();\n                delete this.dialog;\n            }\n            // Terminate early dialogs\n            for (idx in this.earlyDialogs) {\n                this.earlyDialogs[idx].terminate();\n                delete this.earlyDialogs[idx];\n            }\n            this.status = C.STATUS_TERMINATED;\n            this.ua.transport.removeListener(\"transportError\", this.errorListener);\n            delete this.ua.sessions[this.id];\n            return this;\n        },\n        createDialog: function (message, type, early) {\n            var dialog, early_dialog, local_tag = message[(type === 'UAS') ? 'to_tag' : 'from_tag'], remote_tag = message[(type === 'UAS') ? 'from_tag' : 'to_tag'], id = message.call_id + local_tag + remote_tag;\n            early_dialog = this.earlyDialogs[id];\n            // Early Dialog\n            if (early) {\n                if (early_dialog) {\n                    return true;\n                }\n                else {\n                    early_dialog = new SIP.Dialog(this, message, type, SIP.Dialog.C.STATUS_EARLY);\n                    // Dialog has been successfully created.\n                    if (early_dialog.error) {\n                        this.logger.error(early_dialog.error);\n                        this.failed(message, SIP.C.causes.INTERNAL_ERROR);\n                        return false;\n                    }\n                    else {\n                        this.earlyDialogs[id] = early_dialog;\n                        return true;\n                    }\n                }\n            }\n            // Confirmed Dialog\n            else {\n                // In case the dialog is in _early_ state, update it\n                if (early_dialog) {\n                    early_dialog.update(message, type);\n                    this.dialog = early_dialog;\n                    delete this.earlyDialogs[id];\n                    for (var dia in this.earlyDialogs) {\n                        this.earlyDialogs[dia].terminate();\n                        delete this.earlyDialogs[dia];\n                    }\n                    return true;\n                }\n                // Otherwise, create a _confirmed_ dialog\n                dialog = new SIP.Dialog(this, message, type);\n                if (dialog.error) {\n                    this.logger.error(dialog.error);\n                    this.failed(message, SIP.C.causes.INTERNAL_ERROR);\n                    return false;\n                }\n                else {\n                    this.to_tag = message.to_tag;\n                    this.dialog = dialog;\n                    return true;\n                }\n            }\n        },\n        /**\n         * Hold\n         */\n        hold: function (options, modifiers) {\n            if (this.status !== C.STATUS_WAITING_FOR_ACK && this.status !== C.STATUS_CONFIRMED) {\n                throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n            if (this.local_hold) {\n                this.logger.log('Session is already on hold, cannot put it on hold again');\n                return;\n            }\n            options = options || {};\n            options.modifiers = modifiers || [];\n            options.modifiers.push(this.sessionDescriptionHandler.holdModifier);\n            this.local_hold = true;\n            this.sendReinvite(options);\n        },\n        /**\n         * Unhold\n         */\n        unhold: function (options, modifiers) {\n            if (this.status !== C.STATUS_WAITING_FOR_ACK && this.status !== C.STATUS_CONFIRMED) {\n                throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n            if (!this.local_hold) {\n                this.logger.log('Session is not on hold, cannot unhold it');\n                return;\n            }\n            options = options || {};\n            if (modifiers) {\n                options.modifiers = modifiers;\n            }\n            this.local_hold = false;\n            this.sendReinvite(options);\n        },\n        reinvite: function (options, modifiers) {\n            options = options || {};\n            if (modifiers) {\n                options.modifiers = modifiers;\n            }\n            return this.sendReinvite(options);\n        },\n        /**\n         * In dialog INVITE Reception\n         * @private\n         */\n        receiveReinvite: function (request) {\n            var self = this, promise;\n            // TODO: Should probably check state of the session\n            self.emit('reinvite', this);\n            if (request.hasHeader('P-Asserted-Identity')) {\n                this.assertedIdentity = new SIP.NameAddrHeader.parse(request.getHeader('P-Asserted-Identity'));\n            }\n            // Invite w/o SDP\n            if (request.getHeader('Content-Length') === '0' && !request.getHeader('Content-Type')) {\n                promise = this.sessionDescriptionHandler.getDescription(this.sessionDescriptionHandlerOptions, this.modifiers);\n                // Invite w/ SDP\n            }\n            else if (this.sessionDescriptionHandler.hasDescription(request.getHeader('Content-Type'))) {\n                promise = this.sessionDescriptionHandler.setDescription(request.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                    .then(this.sessionDescriptionHandler.getDescription.bind(this.sessionDescriptionHandler, this.sessionDescriptionHandlerOptions, this.modifiers));\n                // Bad Packet (should never get hit)\n            }\n            else {\n                request.reply(415);\n                this.emit('reinviteFailed', self);\n                return;\n            }\n            this.receiveRequest = function (request) {\n                if (request.method === SIP.C.ACK && this.status === C.STATUS_WAITING_FOR_ACK) {\n                    if (this.sessionDescriptionHandler.hasDescription(request.getHeader('Content-Type'))) {\n                        this.hasAnswer = true;\n                        this.sessionDescriptionHandler.setDescription(request.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                            .then(function () {\n                            SIP.Timers.clearTimeout(this.timers.ackTimer);\n                            SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n                            this.status = C.STATUS_CONFIRMED;\n                            this.emit('confirmed', request);\n                        }.bind(this));\n                    }\n                    else {\n                        SIP.Timers.clearTimeout(this.timers.ackTimer);\n                        SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n                        this.status = C.STATUS_CONFIRMED;\n                        this.emit('confirmed', request);\n                    }\n                }\n                else {\n                    SIP.Session.prototype.receiveRequest.apply(this, [request]);\n                }\n            }.bind(this);\n            promise.catch(function onFailure(e) {\n                var statusCode;\n                if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                    statusCode = 500;\n                }\n                else if (e instanceof SIP.Exceptions.RenegotiationError) {\n                    self.emit('renegotiationError', e);\n                    self.logger.warn(e);\n                    statusCode = 488;\n                }\n                else {\n                    self.logger.error(e);\n                    statusCode = 488;\n                }\n                request.reply(statusCode);\n                self.emit('reinviteFailed', self);\n                // TODO: This could be better\n                throw e;\n            })\n                .then(function (description) {\n                var extraHeaders = ['Contact: ' + self.contact];\n                request.reply(200, null, extraHeaders, description, function () {\n                    self.status = C.STATUS_WAITING_FOR_ACK;\n                    self.setACKTimer();\n                    self.emit('reinviteAccepted', self);\n                });\n            });\n        },\n        sendReinvite: function (options) {\n            if (this.pendingReinvite) {\n                this.logger.warn('Reinvite in progress. Please wait until complete, then try again.');\n                return;\n            }\n            this.pendingReinvite = true;\n            options = options || {};\n            options.modifiers = options.modifiers || [];\n            var self = this, extraHeaders = (options.extraHeaders || []).slice();\n            extraHeaders.push('Contact: ' + this.contact);\n            extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n            this.sessionDescriptionHandler.getDescription(options.sessionDescriptionHandlerOptions, options.modifiers)\n                .then(function (description) {\n                self.sendRequest(SIP.C.INVITE, {\n                    extraHeaders: extraHeaders,\n                    body: description,\n                    receiveResponse: self.receiveReinviteResponse.bind(self)\n                });\n            }).catch(function onFailure(e) {\n                if (e instanceof SIP.Exceptions.RenegotiationError) {\n                    self.pendingReinvite = false;\n                    self.emit('renegotiationError', e);\n                    self.logger.warn('Renegotiation Error');\n                    self.logger.warn(e);\n                    return;\n                }\n                self.logger.error('sessionDescriptionHandler error');\n                self.logger.error(e);\n            });\n        },\n        receiveRequest: function (request) {\n            switch (request.method) {\n                case SIP.C.BYE:\n                    request.reply(200);\n                    if (this.status === C.STATUS_CONFIRMED) {\n                        this.emit('bye', request);\n                        this.terminated(request, SIP.C.causes.BYE);\n                    }\n                    break;\n                case SIP.C.INVITE:\n                    if (this.status === C.STATUS_CONFIRMED) {\n                        this.logger.log('re-INVITE received');\n                        this.receiveReinvite(request);\n                    }\n                    break;\n                case SIP.C.INFO:\n                    if (this.status === C.STATUS_CONFIRMED || this.status === C.STATUS_WAITING_FOR_ACK) {\n                        if (this.onInfo) {\n                            return this.onInfo(request);\n                        }\n                        var body, tone, duration, contentType = request.getHeader('content-type'), reg_tone = /^(Signal\\s*?=\\s*?)([0-9A-D#*]{1})(\\s)?.*/, reg_duration = /^(Duration\\s?=\\s?)([0-9]{1,4})(\\s)?.*/;\n                        if (contentType) {\n                            if (contentType.match(/^application\\/dtmf-relay/i)) {\n                                if (request.body) {\n                                    body = request.body.split('\\r\\n', 2);\n                                    if (body.length === 2) {\n                                        if (reg_tone.test(body[0])) {\n                                            tone = body[0].replace(reg_tone, \"$2\");\n                                        }\n                                        if (reg_duration.test(body[1])) {\n                                            duration = parseInt(body[1].replace(reg_duration, \"$2\"), 10);\n                                        }\n                                    }\n                                }\n                                new DTMF(this, tone, { duration: duration }).init_incoming(request);\n                            }\n                            else {\n                                request.reply(415, null, [\"Accept: application/dtmf-relay\"]);\n                            }\n                        }\n                    }\n                    break;\n                case SIP.C.REFER:\n                    if (this.status === C.STATUS_CONFIRMED) {\n                        this.logger.log('REFER received');\n                        this.referContext = new SIP.ReferServerContext(this.ua, request);\n                        var hasReferListener = this.listeners('referRequested').length;\n                        if (hasReferListener) {\n                            this.emit('referRequested', this.referContext);\n                        }\n                        else {\n                            this.logger.log('No referRequested listeners, automatically accepting and following the refer');\n                            var options = { followRefer: true };\n                            if (this.passedOptions) {\n                                options.inviteOptions = this.passedOptions;\n                            }\n                            this.referContext.accept(options, this.modifiers);\n                        }\n                    }\n                    break;\n                case SIP.C.NOTIFY:\n                    if ((this.referContext && this.referContext instanceof SIP.ReferClientContext) && request.hasHeader('event') && /^refer(;.*)?$/.test(request.getHeader('event'))) {\n                        this.referContext.receiveNotify(request);\n                        return;\n                    }\n                    request.reply(200, 'OK');\n                    this.emit('notify', request);\n                    break;\n            }\n        },\n        /**\n         * Reception of Response for in-dialog INVITE\n         * @private\n         */\n        receiveReinviteResponse: function (response) {\n            var self = this;\n            if (this.status === C.STATUS_TERMINATED) {\n                this.logger.error('Received reinvite response, but in STATUS_TERMINATED');\n                // TODO: Do we need to send a SIP response?\n                return;\n            }\n            if (!this.pendingReinvite) {\n                this.logger.error('Received reinvite response, but have no pending reinvite');\n                // TODO: Do we need to send a SIP response?\n                return;\n            }\n            switch (true) {\n                case /^1[0-9]{2}$/.test(response.status_code):\n                    break;\n                case /^2[0-9]{2}$/.test(response.status_code):\n                    this.status = C.STATUS_CONFIRMED;\n                    // 17.1.1.1 - For each final response that is received at the client transaction, the client transaction sends an ACK,\n                    this.emit(\"ack\", response.transaction.sendACK());\n                    this.pendingReinvite = false;\n                    // TODO: All of these timers should move into the Transaction layer\n                    SIP.Timers.clearTimeout(self.timers.invite2xxTimer);\n                    if (!this.sessionDescriptionHandler.hasDescription(response.getHeader('Content-Type'))) {\n                        this.logger.error('2XX response received to re-invite but did not have a description');\n                        this.emit('reinviteFailed', self);\n                        this.emit('renegotiationError', new SIP.Exceptions.RenegotiationError('2XX response received to re-invite but did not have a description'));\n                        break;\n                    }\n                    this.sessionDescriptionHandler.setDescription(response.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                        .catch(function onFailure(e) {\n                        self.logger.error('Could not set the description in 2XX response');\n                        self.logger.error(e);\n                        self.emit('reinviteFailed', self);\n                        self.emit('renegotiationError', e);\n                        self.sendRequest(SIP.C.BYE, {\n                            extraHeaders: ['Reason: ' + SIP.Utils.getReasonHeaderValue(488, 'Not Acceptable Here')]\n                        });\n                        self.terminated(null, SIP.C.causes.INCOMPATIBLE_SDP);\n                    }).then(function () {\n                        self.emit('reinviteAccepted', self);\n                    });\n                    break;\n                default:\n                    this.pendingReinvite = false;\n                    this.logger.log('Received a non 1XX or 2XX response to a re-invite');\n                    this.emit('reinviteFailed', self);\n                    this.emit('renegotiationError', new SIP.Exceptions.RenegotiationError('Invalid response to a re-invite'));\n            }\n        },\n        acceptAndTerminate: function (response, status_code, reason_phrase) {\n            var extraHeaders = [];\n            if (status_code) {\n                extraHeaders.push('Reason: ' + SIP.Utils.getReasonHeaderValue(status_code, reason_phrase));\n            }\n            // An error on dialog creation will fire 'failed' event\n            if (this.dialog || this.createDialog(response, 'UAC')) {\n                this.emit(\"ack\", response.transaction.sendACK());\n                this.sendRequest(SIP.C.BYE, {\n                    extraHeaders: extraHeaders\n                });\n            }\n            return this;\n        },\n        /**\n         * RFC3261 13.3.1.4\n         * Response retransmissions cannot be accomplished by transaction layer\n         *  since it is destroyed when receiving the first 2xx answer\n         */\n        setInvite2xxTimer: function (request, description) {\n            var self = this, timeout = SIP.Timers.T1;\n            this.timers.invite2xxTimer = SIP.Timers.setTimeout(function invite2xxRetransmission() {\n                if (self.status !== C.STATUS_WAITING_FOR_ACK) {\n                    return;\n                }\n                self.logger.log('no ACK received, attempting to retransmit OK');\n                var extraHeaders = ['Contact: ' + self.contact];\n                request.reply(200, null, extraHeaders, description);\n                timeout = Math.min(timeout * 2, SIP.Timers.T2);\n                self.timers.invite2xxTimer = SIP.Timers.setTimeout(invite2xxRetransmission, timeout);\n            }, timeout);\n        },\n        /**\n         * RFC3261 14.2\n         * If a UAS generates a 2xx response and never receives an ACK,\n         *  it SHOULD generate a BYE to terminate the dialog.\n         */\n        setACKTimer: function () {\n            var self = this;\n            this.timers.ackTimer = SIP.Timers.setTimeout(function () {\n                if (self.status === C.STATUS_WAITING_FOR_ACK) {\n                    self.logger.log('no ACK received for an extended period of time, terminating the call');\n                    SIP.Timers.clearTimeout(self.timers.invite2xxTimer);\n                    self.sendRequest(SIP.C.BYE);\n                    self.terminated(null, SIP.C.causes.NO_ACK);\n                }\n            }, SIP.Timers.TIMER_H);\n        },\n        /*\n         * @private\n         */\n        onTransportError: function () {\n            if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n                this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n            }\n        },\n        onRequestTimeout: function () {\n            if (this.status === C.STATUS_CONFIRMED) {\n                this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n            }\n            else if (this.status !== C.STATUS_TERMINATED) {\n                this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n                this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n            }\n        },\n        onDialogError: function (response) {\n            if (this.status === C.STATUS_CONFIRMED) {\n                this.terminated(response, SIP.C.causes.DIALOG_ERROR);\n            }\n            else if (this.status !== C.STATUS_TERMINATED) {\n                this.failed(response, SIP.C.causes.DIALOG_ERROR);\n                this.terminated(response, SIP.C.causes.DIALOG_ERROR);\n            }\n        },\n        /**\n         * @private\n         */\n        failed: function (response, cause) {\n            if (this.status === C.STATUS_TERMINATED) {\n                return this;\n            }\n            this.emit('failed', response || null, cause || null);\n            return this;\n        },\n        rejected: function (response, cause) {\n            this.emit('rejected', response || null, cause || null);\n            return this;\n        },\n        canceled: function () {\n            if (this.sessionDescriptionHandler) {\n                this.sessionDescriptionHandler.close();\n            }\n            this.emit('cancel');\n            return this;\n        },\n        accepted: function (response, cause) {\n            cause = SIP.Utils.getReasonPhrase(response && response.status_code, cause);\n            this.startTime = new Date();\n            if (this.replacee) {\n                this.replacee.emit('replaced', this);\n                this.replacee.terminate();\n            }\n            this.emit('accepted', response, cause);\n            return this;\n        },\n        terminated: function (message, cause) {\n            if (this.status === C.STATUS_TERMINATED) {\n                return this;\n            }\n            this.endTime = new Date();\n            this.close();\n            this.emit('terminated', message || null, cause || null);\n            return this;\n        },\n        connecting: function (request) {\n            this.emit('connecting', { request: request });\n            return this;\n        }\n    };\n    Session.C = C;\n    SIP.Session = Session;\n    InviteServerContext = function (ua, request) {\n        var expires, self = this, contentType = request.getHeader('Content-Type'), contentDisp = request.parseHeader('Content-Disposition');\n        SIP.Utils.augment(this, SIP.ServerContext, [ua, request]);\n        SIP.Utils.augment(this, SIP.Session, [ua.configuration.sessionDescriptionHandlerFactory]);\n        if (contentDisp && contentDisp.type === 'render') {\n            this.renderbody = request.body;\n            this.rendertype = contentType;\n        }\n        this.status = C.STATUS_INVITE_RECEIVED;\n        this.from_tag = request.from_tag;\n        this.id = request.call_id + this.from_tag;\n        this.request = request;\n        this.contact = this.ua.contact.toString();\n        this.receiveNonInviteResponse = function () { }; // intentional no-op\n        this.logger = ua.getLogger('sip.inviteservercontext', this.id);\n        //Save the session into the ua sessions collection.\n        this.ua.sessions[this.id] = this;\n        //Get the Expires header value if exists\n        if (request.hasHeader('expires')) {\n            expires = request.getHeader('expires') * 1000;\n        }\n        //Set 100rel if necessary\n        function set100rel(h, c) {\n            if (request.hasHeader(h) && request.getHeader(h).toLowerCase().indexOf('100rel') >= 0) {\n                self.rel100 = c;\n            }\n        }\n        set100rel('require', SIP.C.supported.REQUIRED);\n        set100rel('supported', SIP.C.supported.SUPPORTED);\n        /* Set the to_tag before\n         * replying a response code that will create a dialog.\n         */\n        request.to_tag = SIP.Utils.newTag();\n        // An error on dialog creation will fire 'failed' event\n        if (!this.createDialog(request, 'UAS', true)) {\n            request.reply(500, 'Missing Contact header field');\n            return;\n        }\n        var options = { extraHeaders: ['Contact: ' + self.contact] };\n        if (self.rel100 !== SIP.C.supported.REQUIRED) {\n            self.progress(options);\n        }\n        self.status = C.STATUS_WAITING_FOR_ANSWER;\n        // Set userNoAnswerTimer\n        self.timers.userNoAnswerTimer = SIP.Timers.setTimeout(function () {\n            request.reply(408);\n            self.failed(request, SIP.C.causes.NO_ANSWER);\n            self.terminated(request, SIP.C.causes.NO_ANSWER);\n        }, self.ua.configuration.noAnswerTimeout);\n        /* Set expiresTimer\n         * RFC3261 13.3.1\n         */\n        if (expires) {\n            self.timers.expiresTimer = SIP.Timers.setTimeout(function () {\n                if (self.status === C.STATUS_WAITING_FOR_ANSWER) {\n                    request.reply(487);\n                    self.failed(request, SIP.C.causes.EXPIRES);\n                    self.terminated(request, SIP.C.causes.EXPIRES);\n                }\n            }, expires);\n        }\n        this.errorListener = this.onTransportError.bind(this);\n        ua.transport.on('transportError', this.errorListener);\n    };\n    InviteServerContext.prototype = Object.create({}, {\n        reject: { writable: true, value: function (options) {\n                // Check Session Status\n                if (this.status === C.STATUS_TERMINATED) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                this.logger.log('rejecting RTCSession');\n                SIP.ServerContext.prototype.reject.call(this, options);\n                return this.terminated();\n            } },\n        terminate: { writable: true, value: function (options) {\n                options = options || {};\n                var extraHeaders = (options.extraHeaders || []).slice(), body = options.body, dialog, self = this;\n                if (this.status === C.STATUS_WAITING_FOR_ACK &&\n                    this.request.server_transaction.state !== SIP.Transactions.C.STATUS_TERMINATED) {\n                    dialog = this.dialog;\n                    this.receiveRequest = function (request) {\n                        if (request.method === SIP.C.ACK) {\n                            this.sendRequest(SIP.C.BYE, {\n                                extraHeaders: extraHeaders,\n                                body: body\n                            });\n                            dialog.terminate();\n                        }\n                    };\n                    this.request.server_transaction.on('stateChanged', function () {\n                        if (this.state === SIP.Transactions.C.STATUS_TERMINATED && this.dialog) {\n                            this.request = new SIP.OutgoingRequest(SIP.C.BYE, this.dialog.remote_target, this.ua, {\n                                'cseq': this.dialog.local_seqnum += 1,\n                                'call_id': this.dialog.id.call_id,\n                                'from_uri': this.dialog.local_uri,\n                                'from_tag': this.dialog.id.local_tag,\n                                'to_uri': this.dialog.remote_uri,\n                                'to_tag': this.dialog.id.remote_tag,\n                                'route_set': this.dialog.route_set\n                            }, extraHeaders, body);\n                            new SIP.RequestSender({\n                                request: this.request,\n                                onRequestTimeout: function () {\n                                    self.onRequestTimeout();\n                                },\n                                onTransportError: function () {\n                                    self.onTransportError();\n                                },\n                                receiveResponse: function () {\n                                    return;\n                                }\n                            }, this.ua).send();\n                            dialog.terminate();\n                        }\n                    });\n                    this.emit('bye', this.request);\n                    this.terminated();\n                    // Restore the dialog into 'this' in order to be able to send the in-dialog BYE :-)\n                    this.dialog = dialog;\n                    // Restore the dialog into 'ua' so the ACK can reach 'this' session\n                    this.ua.dialogs[dialog.id.toString()] = dialog;\n                }\n                else if (this.status === C.STATUS_CONFIRMED) {\n                    this.bye(options);\n                }\n                else {\n                    this.reject(options);\n                }\n                return this;\n            } },\n        /*\n         * @param {Object} [options.sessionDescriptionHandlerOptions] gets passed to SIP.SessionDescriptionHandler.getDescription as options\n         */\n        progress: { writable: true, value: function (options) {\n                options = options || {};\n                var statusCode = options.statusCode || 180, reasonPhrase = options.reasonPhrase, extraHeaders = (options.extraHeaders || []).slice(), body = options.body, response;\n                if (statusCode < 100 || statusCode > 199) {\n                    throw new TypeError('Invalid statusCode: ' + statusCode);\n                }\n                if (this.isCanceled || this.status === C.STATUS_TERMINATED) {\n                    return this;\n                }\n                function do100rel() {\n                    /* jshint validthis: true */\n                    statusCode = options.statusCode || 183;\n                    // Set status and add extra headers\n                    this.status = C.STATUS_WAITING_FOR_PRACK;\n                    extraHeaders.push('Contact: ' + this.contact);\n                    extraHeaders.push('Require: 100rel');\n                    extraHeaders.push('RSeq: ' + Math.floor(Math.random() * 10000));\n                    // Get the session description to add to preaccept with\n                    this.sessionDescriptionHandler.getDescription(options.sessionDescriptionHandlerOptions, options.modifiers)\n                        .then(function onSuccess(description) {\n                        if (this.isCanceled || this.status === C.STATUS_TERMINATED) {\n                            return;\n                        }\n                        this.early_sdp = description.body;\n                        this[this.hasOffer ? 'hasAnswer' : 'hasOffer'] = true;\n                        // Retransmit until we get a response or we time out (see prackTimer below)\n                        var timeout = SIP.Timers.T1;\n                        this.timers.rel1xxTimer = SIP.Timers.setTimeout(function rel1xxRetransmission() {\n                            this.request.reply(statusCode, null, extraHeaders, description);\n                            timeout *= 2;\n                            this.timers.rel1xxTimer = SIP.Timers.setTimeout(rel1xxRetransmission.bind(this), timeout);\n                        }.bind(this), timeout);\n                        // Timeout and reject INVITE if no response\n                        this.timers.prackTimer = SIP.Timers.setTimeout(function () {\n                            if (this.status !== C.STATUS_WAITING_FOR_PRACK) {\n                                return;\n                            }\n                            this.logger.log('no PRACK received, rejecting the call');\n                            SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                            this.request.reply(504);\n                            this.terminated(null, SIP.C.causes.NO_PRACK);\n                        }.bind(this), SIP.Timers.T1 * 64);\n                        // Send the initial response\n                        response = this.request.reply(statusCode, reasonPhrase, extraHeaders, description);\n                        this.emit('progress', response, reasonPhrase);\n                    }.bind(this), function onFailure() {\n                        this.request.reply(480);\n                        this.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                        this.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                    }.bind(this));\n                } // end do100rel\n                function normalReply() {\n                    /* jshint validthis:true */\n                    response = this.request.reply(statusCode, reasonPhrase, extraHeaders, body);\n                    this.emit('progress', response, reasonPhrase);\n                }\n                if (options.statusCode !== 100 &&\n                    (this.rel100 === SIP.C.supported.REQUIRED ||\n                        (this.rel100 === SIP.C.supported.SUPPORTED && options.rel100) ||\n                        (this.rel100 === SIP.C.supported.SUPPORTED && (this.ua.configuration.rel100 === SIP.C.supported.REQUIRED)))) {\n                    this.sessionDescriptionHandler = this.setupSessionDescriptionHandler();\n                    this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                    if (this.sessionDescriptionHandler.hasDescription(this.request.getHeader('Content-Type'))) {\n                        this.hasOffer = true;\n                        this.sessionDescriptionHandler.setDescription(this.request.body, options.sessionDescriptionHandlerOptions, options.modifiers)\n                            .then(do100rel.apply(this))\n                            .catch(function onFailure(e) {\n                            this.logger.warn('invalid description');\n                            this.logger.warn(e);\n                            this.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                            this.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                        }.bind(this));\n                    }\n                    else {\n                        do100rel.apply(this);\n                    }\n                }\n                else {\n                    normalReply.apply(this);\n                }\n                return this;\n            } },\n        /*\n         * @param {Object} [options.sessionDescriptionHandlerOptions] gets passed to SIP.SessionDescriptionHandler.getDescription as options\n         */\n        accept: { writable: true, value: function (options) {\n                options = options || {};\n                this.onInfo = options.onInfo;\n                var self = this, request = this.request, extraHeaders = (options.extraHeaders || []).slice(), descriptionCreationSucceeded = function (description) {\n                    var response, \n                    // run for reply success callback\n                    replySucceeded = function () {\n                        self.status = C.STATUS_WAITING_FOR_ACK;\n                        self.setInvite2xxTimer(request, description);\n                        self.setACKTimer();\n                    }, \n                    // run for reply failure callback\n                    replyFailed = function () {\n                        self.failed(null, SIP.C.causes.CONNECTION_ERROR);\n                        self.terminated(null, SIP.C.causes.CONNECTION_ERROR);\n                    };\n                    extraHeaders.push('Contact: ' + self.contact);\n                    extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n                    if (!self.hasOffer) {\n                        self.hasOffer = true;\n                    }\n                    else {\n                        self.hasAnswer = true;\n                    }\n                    response = request.reply(200, null, extraHeaders, description, replySucceeded, replyFailed);\n                    if (self.status !== C.STATUS_TERMINATED) { // Didn't fail\n                        self.accepted(response, SIP.Utils.getReasonPhrase(200));\n                    }\n                }, descriptionCreationFailed = function (err) {\n                    if (err instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        self.logger.log(err.message);\n                        self.logger.log(err.error);\n                    }\n                    // TODO: This should check the actual error and make sure it is an\n                    //        \"expected\" error. Otherwise it should throw.\n                    if (self.status === C.STATUS_TERMINATED) {\n                        return;\n                    }\n                    self.request.reply(480);\n                    self.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                    self.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                };\n                // Check Session Status\n                if (this.status === C.STATUS_WAITING_FOR_PRACK) {\n                    this.status = C.STATUS_ANSWERED_WAITING_FOR_PRACK;\n                    return this;\n                }\n                else if (this.status === C.STATUS_WAITING_FOR_ANSWER) {\n                    this.status = C.STATUS_ANSWERED;\n                }\n                else if (this.status !== C.STATUS_EARLY_MEDIA) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                // An error on dialog creation will fire 'failed' event\n                if (!this.createDialog(request, 'UAS')) {\n                    request.reply(500, 'Missing Contact header field');\n                    return this;\n                }\n                SIP.Timers.clearTimeout(this.timers.userNoAnswerTimer);\n                if (this.status === C.STATUS_EARLY_MEDIA) {\n                    descriptionCreationSucceeded({});\n                }\n                else {\n                    this.sessionDescriptionHandler = this.setupSessionDescriptionHandler();\n                    this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                    if (this.request.getHeader('Content-Length') === '0' && !this.request.getHeader('Content-Type')) {\n                        this.sessionDescriptionHandler.getDescription(options.sessionDescriptionHandlerOptions, options.modifiers)\n                            .catch(descriptionCreationFailed)\n                            .then(descriptionCreationSucceeded);\n                    }\n                    else if (this.sessionDescriptionHandler.hasDescription(this.request.getHeader('Content-Type'))) {\n                        this.hasOffer = true;\n                        this.sessionDescriptionHandler.setDescription(this.request.body, options.sessionDescriptionHandlerOptions, options.modifiers)\n                            .then(function () {\n                            return this.sessionDescriptionHandler.getDescription(options.sessionDescriptionHandlerOptions, options.modifiers);\n                        }.bind(this))\n                            .catch(descriptionCreationFailed)\n                            .then(descriptionCreationSucceeded);\n                    }\n                    else {\n                        this.request.reply(415);\n                        // TODO: Events\n                        return;\n                    }\n                }\n                return this;\n            } },\n        receiveRequest: { writable: true, value: function (request) {\n                // ISC RECEIVE REQUEST\n                function confirmSession() {\n                    /* jshint validthis:true */\n                    var contentType, contentDisp;\n                    SIP.Timers.clearTimeout(this.timers.ackTimer);\n                    SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n                    this.status = C.STATUS_CONFIRMED;\n                    contentType = request.getHeader('Content-Type');\n                    contentDisp = request.getHeader('Content-Disposition');\n                    if (contentDisp && contentDisp.type === 'render') {\n                        this.renderbody = request.body;\n                        this.rendertype = contentType;\n                    }\n                    this.emit('confirmed', request);\n                }\n                switch (request.method) {\n                    case SIP.C.CANCEL:\n                        /* RFC3261 15 States that a UAS may have accepted an invitation while a CANCEL\n                         * was in progress and that the UAC MAY continue with the session established by\n                         * any 2xx response, or MAY terminate with BYE. SIP does continue with the\n                         * established session. So the CANCEL is processed only if the session is not yet\n                         * established.\n                         */\n                        /*\n                         * Terminate the whole session in case the user didn't accept (or yet to send the answer) nor reject the\n                         *request opening the session.\n                         */\n                        if (this.status === C.STATUS_WAITING_FOR_ANSWER ||\n                            this.status === C.STATUS_WAITING_FOR_PRACK ||\n                            this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK ||\n                            this.status === C.STATUS_EARLY_MEDIA ||\n                            this.status === C.STATUS_ANSWERED) {\n                            this.status = C.STATUS_CANCELED;\n                            this.request.reply(487);\n                            this.canceled(request);\n                            this.rejected(request, SIP.C.causes.CANCELED);\n                            this.failed(request, SIP.C.causes.CANCELED);\n                            this.terminated(request, SIP.C.causes.CANCELED);\n                        }\n                        break;\n                    case SIP.C.ACK:\n                        if (this.status === C.STATUS_WAITING_FOR_ACK) {\n                            if (this.sessionDescriptionHandler.hasDescription(request.getHeader('Content-Type'))) {\n                                // ACK contains answer to an INVITE w/o SDP negotiation\n                                this.hasAnswer = true;\n                                this.sessionDescriptionHandler.setDescription(request.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                                    .then(\n                                // TODO: Catch then .then\n                                confirmSession.bind(this), function onFailure(e) {\n                                    this.logger.warn(e);\n                                    this.terminate({\n                                        statusCode: '488',\n                                        reasonPhrase: 'Bad Media Description'\n                                    });\n                                    this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                    this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                }.bind(this));\n                            }\n                            else {\n                                confirmSession.apply(this);\n                            }\n                        }\n                        break;\n                    case SIP.C.PRACK:\n                        if (this.status === C.STATUS_WAITING_FOR_PRACK || this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                            if (!this.hasAnswer) {\n                                this.sessionDescriptionHandler = this.setupSessionDescriptionHandler();\n                                this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                                if (this.sessionDescriptionHandler.hasDescription(request.getHeader('Content-Type'))) {\n                                    this.hasAnswer = true;\n                                    this.sessionDescriptionHandler.setDescription(request.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                                        .then(function onSuccess() {\n                                        SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                                        SIP.Timers.clearTimeout(this.timers.prackTimer);\n                                        request.reply(200);\n                                        if (this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                                            this.status = C.STATUS_EARLY_MEDIA;\n                                            this.accept();\n                                        }\n                                        this.status = C.STATUS_EARLY_MEDIA;\n                                    }.bind(this), function onFailure(e) {\n                                        this.logger.warn(e);\n                                        this.terminate({\n                                            statusCode: '488',\n                                            reasonPhrase: 'Bad Media Description'\n                                        });\n                                        this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                        this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                    }.bind(this));\n                                }\n                                else {\n                                    this.terminate({\n                                        statusCode: '488',\n                                        reasonPhrase: 'Bad Media Description'\n                                    });\n                                    this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                    this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                }\n                            }\n                            else {\n                                SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                                SIP.Timers.clearTimeout(this.timers.prackTimer);\n                                request.reply(200);\n                                if (this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                                    this.status = C.STATUS_EARLY_MEDIA;\n                                    this.accept();\n                                }\n                                this.status = C.STATUS_EARLY_MEDIA;\n                            }\n                        }\n                        else if (this.status === C.STATUS_EARLY_MEDIA) {\n                            request.reply(200);\n                        }\n                        break;\n                    default:\n                        Session.prototype.receiveRequest.apply(this, [request]);\n                        break;\n                }\n            } },\n        // Internal Function to setup the handler consistently\n        setupSessionDescriptionHandler: { writable: true, value: function () {\n                if (this.sessionDescriptionHandler) {\n                    return this.sessionDescriptionHandler;\n                }\n                return this.sessionDescriptionHandlerFactory(this, this.ua.configuration.sessionDescriptionHandlerFactoryOptions);\n            } },\n        onTransportError: { writable: true, value: function () {\n                if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n                    this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n                }\n            } },\n        onRequestTimeout: { writable: true, value: function () {\n                if (this.status === C.STATUS_CONFIRMED) {\n                    this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n                }\n                else if (this.status !== C.STATUS_TERMINATED) {\n                    this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n                    this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n                }\n            } }\n    });\n    SIP.InviteServerContext = InviteServerContext;\n    InviteClientContext = function (ua, target, options, modifiers) {\n        options = options || {};\n        this.passedOptions = options; // Save for later to use with refer\n        options.params = Object.create(options.params || Object.prototype);\n        var extraHeaders = (options.extraHeaders || []).slice(), sessionDescriptionHandlerFactory = ua.configuration.sessionDescriptionHandlerFactory;\n        this.sessionDescriptionHandlerFactoryOptions = ua.configuration.sessionDescriptionHandlerFactoryOptions || {};\n        this.sessionDescriptionHandlerOptions = options.sessionDescriptionHandlerOptions || {};\n        this.modifiers = modifiers;\n        this.inviteWithoutSdp = options.inviteWithoutSdp || false;\n        // Set anonymous property\n        this.anonymous = options.anonymous || false;\n        // Custom data to be sent either in INVITE or in ACK\n        this.renderbody = options.renderbody || null;\n        this.rendertype = options.rendertype || 'text/plain';\n        // Session parameter initialization\n        this.from_tag = SIP.Utils.newTag();\n        options.params.from_tag = this.from_tag;\n        /* Do not add ;ob in initial forming dialog requests if the registration over\n         *  the current connection got a GRUU URI.\n         */\n        this.contact = ua.contact.toString({\n            anonymous: this.anonymous,\n            outbound: this.anonymous ? !ua.contact.temp_gruu : !ua.contact.pub_gruu\n        });\n        if (this.anonymous) {\n            options.params.from_displayName = 'Anonymous';\n            options.params.from_uri = 'sip:anonymous@anonymous.invalid';\n            extraHeaders.push('P-Preferred-Identity: ' + ua.configuration.uri.toString());\n            extraHeaders.push('Privacy: id');\n        }\n        extraHeaders.push('Contact: ' + this.contact);\n        extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n        if (this.inviteWithoutSdp && this.renderbody) {\n            extraHeaders.push('Content-Type: ' + this.rendertype);\n            extraHeaders.push('Content-Disposition: render;handling=optional');\n        }\n        if (ua.configuration.rel100 === SIP.C.supported.REQUIRED) {\n            extraHeaders.push('Require: 100rel');\n        }\n        if (ua.configuration.replaces === SIP.C.supported.REQUIRED) {\n            extraHeaders.push('Require: replaces');\n        }\n        options.extraHeaders = extraHeaders;\n        SIP.Utils.augment(this, SIP.ClientContext, [ua, SIP.C.INVITE, target, options]);\n        SIP.Utils.augment(this, SIP.Session, [sessionDescriptionHandlerFactory]);\n        // Check Session Status\n        if (this.status !== C.STATUS_NULL) {\n            throw new SIP.Exceptions.InvalidStateError(this.status);\n        }\n        // OutgoingSession specific parameters\n        this.isCanceled = false;\n        this.received_100 = false;\n        this.method = SIP.C.INVITE;\n        this.receiveNonInviteResponse = this.receiveResponse;\n        this.receiveResponse = this.receiveInviteResponse;\n        this.logger = ua.getLogger('sip.inviteclientcontext');\n        ua.applicants[this] = this;\n        this.id = this.request.call_id + this.from_tag;\n        this.onInfo = options.onInfo;\n        this.errorListener = this.onTransportError.bind(this);\n        ua.transport.on('transportError', this.errorListener);\n    };\n    InviteClientContext.prototype = Object.create({}, {\n        invite: { writable: true, value: function () {\n                var self = this;\n                //Save the session into the ua sessions collection.\n                //Note: placing in constructor breaks call to request.cancel on close... User does not need this anyway\n                this.ua.sessions[this.id] = this;\n                // This should allow the function to return so that listeners can be set up for these events\n                SIP.Utils.Promise.resolve().then(function () {\n                    if (this.inviteWithoutSdp) {\n                        //just send an invite with no sdp...\n                        this.request.body = self.renderbody;\n                        this.status = C.STATUS_INVITE_SENT;\n                        this.send();\n                    }\n                    else {\n                        //Initialize Media Session\n                        this.sessionDescriptionHandler = this.sessionDescriptionHandlerFactory(this, this.sessionDescriptionHandlerFactoryOptions);\n                        this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                        this.sessionDescriptionHandler.getDescription(this.sessionDescriptionHandlerOptions, this.modifiers)\n                            .then(function onSuccess(description) {\n                            if (self.isCanceled || self.status === C.STATUS_TERMINATED) {\n                                return;\n                            }\n                            self.hasOffer = true;\n                            self.request.body = description;\n                            self.status = C.STATUS_INVITE_SENT;\n                            self.send();\n                        }, function onFailure(err) {\n                            if (err instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                                self.logger.log(err.message);\n                                self.logger.log(err.error);\n                            }\n                            if (self.status === C.STATUS_TERMINATED) {\n                                return;\n                            }\n                            self.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                            self.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                        });\n                    }\n                }.bind(this));\n                return this;\n            } },\n        receiveInviteResponse: { writable: true, value: function (response) {\n                var cause, session = this, id = response.call_id + response.from_tag + response.to_tag, extraHeaders = [], options = {};\n                if (this.status === C.STATUS_TERMINATED || response.method !== SIP.C.INVITE) {\n                    return;\n                }\n                if (this.dialog && (response.status_code >= 200 && response.status_code <= 299)) {\n                    if (id !== this.dialog.id.toString()) {\n                        if (!this.createDialog(response, 'UAC', true)) {\n                            return;\n                        }\n                        this.emit(\"ack\", response.transaction.sendACK({ body: SIP.Utils.generateFakeSDP(response.body) }));\n                        this.earlyDialogs[id].sendRequest(this, SIP.C.BYE);\n                        /* NOTE: This fails because the forking proxy does not recognize that an unanswerable\n                         * leg (due to peerConnection limitations) has been answered first. If your forking\n                         * proxy does not hang up all unanswered branches on the first branch answered, remove this.\n                         */\n                        if (this.status !== C.STATUS_CONFIRMED) {\n                            this.failed(response, SIP.C.causes.WEBRTC_ERROR);\n                            this.terminated(response, SIP.C.causes.WEBRTC_ERROR);\n                        }\n                        return;\n                    }\n                    else if (this.status === C.STATUS_CONFIRMED) {\n                        this.emit(\"ack\", response.transaction.sendACK());\n                        return;\n                    }\n                    else if (!this.hasAnswer) {\n                        // invite w/o sdp is waiting for callback\n                        //an invite with sdp must go on, and hasAnswer is true\n                        return;\n                    }\n                }\n                if (this.dialog && response.status_code < 200) {\n                    /*\n                      Early media has been set up with at least one other different branch,\n                      but a final 2xx response hasn't been received\n                    */\n                    if (this.dialog.pracked.indexOf(response.getHeader('rseq')) !== -1 ||\n                        (this.dialog.pracked[this.dialog.pracked.length - 1] >= response.getHeader('rseq') && this.dialog.pracked.length > 0)) {\n                        return;\n                    }\n                    if (!this.earlyDialogs[id] && !this.createDialog(response, 'UAC', true)) {\n                        return;\n                    }\n                    if (this.earlyDialogs[id].pracked.indexOf(response.getHeader('rseq')) !== -1 ||\n                        (this.earlyDialogs[id].pracked[this.earlyDialogs[id].pracked.length - 1] >= response.getHeader('rseq') && this.earlyDialogs[id].pracked.length > 0)) {\n                        return;\n                    }\n                    extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                    this.earlyDialogs[id].pracked.push(response.getHeader('rseq'));\n                    this.earlyDialogs[id].sendRequest(this, SIP.C.PRACK, {\n                        extraHeaders: extraHeaders,\n                        body: SIP.Utils.generateFakeSDP(response.body)\n                    });\n                    return;\n                }\n                // Proceed to cancellation if the user requested.\n                if (this.isCanceled) {\n                    if (response.status_code >= 100 && response.status_code < 200) {\n                        this.request.cancel(this.cancelReason, extraHeaders);\n                        this.canceled(null);\n                    }\n                    else if (response.status_code >= 200 && response.status_code < 299) {\n                        this.acceptAndTerminate(response);\n                        this.emit('bye', this.request);\n                    }\n                    else if (response.status_code >= 300) {\n                        cause = SIP.C.REASON_PHRASE[response.status_code] || SIP.C.causes.CANCELED;\n                        this.rejected(response, cause);\n                        this.failed(response, cause);\n                        this.terminated(response, cause);\n                    }\n                    return;\n                }\n                switch (true) {\n                    case /^100$/.test(response.status_code):\n                        this.received_100 = true;\n                        this.emit('progress', response);\n                        break;\n                    case (/^1[0-9]{2}$/.test(response.status_code)):\n                        // Do nothing with 1xx responses without To tag.\n                        if (!response.to_tag) {\n                            this.logger.warn('1xx response received without to tag');\n                            break;\n                        }\n                        // Create Early Dialog if 1XX comes with contact\n                        if (response.hasHeader('contact')) {\n                            // An error on dialog creation will fire 'failed' event\n                            if (!this.createDialog(response, 'UAC', true)) {\n                                break;\n                            }\n                        }\n                        this.status = C.STATUS_1XX_RECEIVED;\n                        if (response.hasHeader('P-Asserted-Identity')) {\n                            this.assertedIdentity = new SIP.NameAddrHeader.parse(response.getHeader('P-Asserted-Identity'));\n                        }\n                        if (response.hasHeader('require') &&\n                            response.getHeader('require').indexOf('100rel') !== -1) {\n                            // Do nothing if this.dialog is already confirmed\n                            if (this.dialog || !this.earlyDialogs[id]) {\n                                break;\n                            }\n                            if (this.earlyDialogs[id].pracked.indexOf(response.getHeader('rseq')) !== -1 ||\n                                (this.earlyDialogs[id].pracked[this.earlyDialogs[id].pracked.length - 1] >= response.getHeader('rseq') && this.earlyDialogs[id].pracked.length > 0)) {\n                                return;\n                            }\n                            // TODO: This may be broken. It may have to be on the early dialog\n                            this.sessionDescriptionHandler = this.sessionDescriptionHandlerFactory(this, this.sessionDescriptionHandlerFactoryOptions);\n                            this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                            if (!this.sessionDescriptionHandler.hasDescription(response.getHeader('Content-Type'))) {\n                                extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                                this.earlyDialogs[id].pracked.push(response.getHeader('rseq'));\n                                this.earlyDialogs[id].sendRequest(this, SIP.C.PRACK, {\n                                    extraHeaders: extraHeaders\n                                });\n                                this.emit('progress', response);\n                            }\n                            else if (this.hasOffer) {\n                                if (!this.createDialog(response, 'UAC')) {\n                                    break;\n                                }\n                                this.hasAnswer = true;\n                                this.dialog.pracked.push(response.getHeader('rseq'));\n                                this.sessionDescriptionHandler.setDescription(response.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                                    .then(function onSuccess() {\n                                    extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                                    session.sendRequest(SIP.C.PRACK, {\n                                        extraHeaders: extraHeaders,\n                                        receiveResponse: function () { }\n                                    });\n                                    session.status = C.STATUS_EARLY_MEDIA;\n                                    session.emit('progress', response);\n                                }, function onFailure(e) {\n                                    session.logger.warn(e);\n                                    session.acceptAndTerminate(response, 488, 'Not Acceptable Here');\n                                    session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                });\n                            }\n                            else {\n                                var earlyDialog = this.earlyDialogs[id];\n                                var earlyMedia = earlyDialog.sessionDescriptionHandler = this.sessionDescriptionHandlerFactory(this, this.sessionDescriptionHandlerFactoryOptions);\n                                this.emit('SessionDescriptionHandler-created', earlyMedia);\n                                earlyDialog.pracked.push(response.getHeader('rseq'));\n                                earlyMedia.setDescription(response.body, session.sessionDescriptionHandlerOptions, session.modifers)\n                                    .then(earlyMedia.getDescription.bind(earlyMedia, session.sessionDescriptionHandlerOptions, session.modifiers))\n                                    .then(function onSuccess(description) {\n                                    extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                                    earlyDialog.sendRequest(session, SIP.C.PRACK, {\n                                        extraHeaders: extraHeaders,\n                                        body: description\n                                    });\n                                    session.status = C.STATUS_EARLY_MEDIA;\n                                    session.emit('progress', response);\n                                })\n                                    .catch(function onFailure(e) {\n                                    // TODO: This is a bit wonky\n                                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                                        earlyDialog.pracked.push(response.getHeader('rseq'));\n                                        if (session.status === C.STATUS_TERMINATED) {\n                                            return;\n                                        }\n                                        session.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                                        session.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                                    }\n                                    else {\n                                        earlyDialog.pracked.splice(earlyDialog.pracked.indexOf(response.getHeader('rseq')), 1);\n                                        // Could not set remote description\n                                        session.logger.warn('invalid description');\n                                        session.logger.warn(e);\n                                    }\n                                });\n                            }\n                        }\n                        else {\n                            this.emit('progress', response);\n                        }\n                        break;\n                    case /^2[0-9]{2}$/.test(response.status_code):\n                        var cseq = this.request.cseq + ' ' + this.request.method;\n                        if (cseq !== response.getHeader('cseq')) {\n                            break;\n                        }\n                        if (response.hasHeader('P-Asserted-Identity')) {\n                            this.assertedIdentity = new SIP.NameAddrHeader.parse(response.getHeader('P-Asserted-Identity'));\n                        }\n                        if (this.status === C.STATUS_EARLY_MEDIA && this.dialog) {\n                            this.status = C.STATUS_CONFIRMED;\n                            options = {};\n                            if (this.renderbody) {\n                                extraHeaders.push('Content-Type: ' + this.rendertype);\n                                options.extraHeaders = extraHeaders;\n                                options.body = this.renderbody;\n                            }\n                            this.emit(\"ack\", response.transaction.sendACK(options));\n                            this.accepted(response);\n                            break;\n                        }\n                        // Do nothing if this.dialog is already confirmed\n                        if (this.dialog) {\n                            break;\n                        }\n                        // This is an invite without sdp\n                        if (!this.hasOffer) {\n                            if (this.earlyDialogs[id] && this.earlyDialogs[id].sessionDescriptionHandler) {\n                                //REVISIT\n                                this.hasOffer = true;\n                                this.hasAnswer = true;\n                                this.sessionDescriptionHandler = this.earlyDialogs[id].sessionDescriptionHandler;\n                                if (!this.createDialog(response, 'UAC')) {\n                                    break;\n                                }\n                                this.status = C.STATUS_CONFIRMED;\n                                this.emit(\"ack\", response.transaction.sendACK());\n                                this.accepted(response);\n                            }\n                            else {\n                                this.sessionDescriptionHandler = this.sessionDescriptionHandlerFactory(this, this.sessionDescriptionHandlerFactoryOptions);\n                                this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                                if (!this.sessionDescriptionHandler.hasDescription(response.getHeader('Content-Type'))) {\n                                    this.acceptAndTerminate(response, 400, 'Missing session description');\n                                    this.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                    break;\n                                }\n                                if (!this.createDialog(response, 'UAC')) {\n                                    break;\n                                }\n                                this.hasOffer = true;\n                                this.sessionDescriptionHandler.setDescription(response.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                                    .then(this.sessionDescriptionHandler.getDescription.bind(this.sessionDescriptionHandler, this.sessionDescriptionHandlerOptions, this.modifiers))\n                                    .then(function onSuccess(description) {\n                                    //var localMedia;\n                                    if (session.isCanceled || session.status === C.STATUS_TERMINATED) {\n                                        return;\n                                    }\n                                    session.status = C.STATUS_CONFIRMED;\n                                    session.hasAnswer = true;\n                                    session.emit(\"ack\", response.transaction.sendACK({ body: description }));\n                                    session.accepted(response);\n                                })\n                                    .catch(function onFailure(e) {\n                                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                                        session.logger.warn('invalid description');\n                                        session.logger.warn(e);\n                                        // TODO: This message is inconsistent\n                                        session.acceptAndTerminate(response, 488, 'Invalid session description');\n                                        session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                    }\n                                });\n                            }\n                        }\n                        else if (this.hasAnswer) {\n                            if (this.renderbody) {\n                                extraHeaders.push('Content-Type: ' + session.rendertype);\n                                options.extraHeaders = extraHeaders;\n                                options.body = this.renderbody;\n                            }\n                            this.emit(\"ack\", response.transaction.sendACK(options));\n                        }\n                        else {\n                            if (!this.sessionDescriptionHandler.hasDescription(response.getHeader('Content-Type'))) {\n                                this.acceptAndTerminate(response, 400, 'Missing session description');\n                                this.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                break;\n                            }\n                            if (!this.createDialog(response, 'UAC')) {\n                                break;\n                            }\n                            this.hasAnswer = true;\n                            this.sessionDescriptionHandler.setDescription(response.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                                .then(function onSuccess() {\n                                var options = {};\n                                session.status = C.STATUS_CONFIRMED;\n                                if (session.renderbody) {\n                                    extraHeaders.push('Content-Type: ' + session.rendertype);\n                                    options.extraHeaders = extraHeaders;\n                                    options.body = session.renderbody;\n                                }\n                                session.emit(\"ack\", response.transaction.sendACK(options));\n                                session.accepted(response);\n                            }, function onFailure(e) {\n                                session.logger.warn(e);\n                                session.acceptAndTerminate(response, 488, 'Not Acceptable Here');\n                                session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                            });\n                        }\n                        break;\n                    default:\n                        cause = SIP.Utils.sipErrorCause(response.status_code);\n                        this.rejected(response, cause);\n                        this.failed(response, cause);\n                        this.terminated(response, cause);\n                }\n            } },\n        cancel: { writable: true, value: function (options) {\n                options = options || {};\n                options.extraHeaders = (options.extraHeaders || []).slice();\n                if (this.isCanceled) {\n                    throw new SIP.Exceptions.InvalidStateError('CANCELED');\n                }\n                // Check Session Status\n                if (this.status === C.STATUS_TERMINATED || this.status === C.STATUS_CONFIRMED) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                this.logger.log('canceling RTCSession');\n                this.isCanceled = true;\n                var cancel_reason = SIP.Utils.getCancelReason(options.status_code, options.reason_phrase);\n                // Check Session Status\n                if (this.status === C.STATUS_NULL ||\n                    (this.status === C.STATUS_INVITE_SENT && !this.received_100)) {\n                    this.cancelReason = cancel_reason;\n                }\n                else if (this.status === C.STATUS_INVITE_SENT ||\n                    this.status === C.STATUS_1XX_RECEIVED ||\n                    this.status === C.STATUS_EARLY_MEDIA) {\n                    this.request.cancel(cancel_reason, options.extraHeaders);\n                }\n                return this.canceled();\n            } },\n        terminate: { writable: true, value: function (options) {\n                if (this.status === C.STATUS_TERMINATED) {\n                    return this;\n                }\n                if (this.status === C.STATUS_WAITING_FOR_ACK || this.status === C.STATUS_CONFIRMED) {\n                    this.bye(options);\n                }\n                else {\n                    this.cancel(options);\n                }\n                return this;\n            } },\n        receiveRequest: { writable: true, value: function (request) {\n                // ICC RECEIVE REQUEST\n                // Reject CANCELs\n                if (request.method === SIP.C.CANCEL) {\n                    // TODO; make this a switch when it gets added\n                }\n                if (request.method === SIP.C.ACK && this.status === C.STATUS_WAITING_FOR_ACK) {\n                    SIP.Timers.clearTimeout(this.timers.ackTimer);\n                    SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n                    this.status = C.STATUS_CONFIRMED;\n                    this.accepted();\n                }\n                return Session.prototype.receiveRequest.apply(this, [request]);\n            } },\n        onTransportError: { writable: true, value: function () {\n                if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n                    this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n                }\n            } },\n        onRequestTimeout: { writable: true, value: function () {\n                if (this.status === C.STATUS_CONFIRMED) {\n                    this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n                }\n                else if (this.status !== C.STATUS_TERMINATED) {\n                    this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n                    this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n                }\n            } }\n    });\n    SIP.InviteClientContext = InviteClientContext;\n    ReferClientContext = function (ua, applicant, target, options) {\n        this.options = options || {};\n        this.extraHeaders = (this.options.extraHeaders || []).slice();\n        if (ua === undefined || applicant === undefined || target === undefined) {\n            throw new TypeError('Not enough arguments');\n        }\n        SIP.Utils.augment(this, SIP.ClientContext, [ua, SIP.C.REFER, applicant.remoteIdentity.uri.toString(), options]);\n        this.applicant = applicant;\n        var withReplaces = target instanceof SIP.InviteServerContext ||\n            target instanceof SIP.InviteClientContext;\n        if (withReplaces) {\n            // Attended Transfer\n            // All of these fields should be defined based on the check above\n            this.target = '\"' + target.remoteIdentity.friendlyName + '\" ' +\n                '<' + target.dialog.remote_target.toString() +\n                '?Replaces=' + target.dialog.id.call_id +\n                '%3Bto-tag%3D' + target.dialog.id.remote_tag +\n                '%3Bfrom-tag%3D' + target.dialog.id.local_tag + '>';\n        }\n        else {\n            // Blind Transfer\n            // Refer-To: <sip:bob@example.com>\n            try {\n                this.target = SIP.Grammar.parse(target, 'Refer_To').uri || target;\n            }\n            catch (e) {\n                this.logger.debug(\".refer() cannot parse Refer_To from\", target);\n                this.logger.debug(\"...falling through to normalizeTarget()\");\n            }\n            // Check target validity\n            this.target = this.ua.normalizeTarget(this.target);\n            if (!this.target) {\n                throw new TypeError('Invalid target: ' + target);\n            }\n        }\n        if (this.ua) {\n            this.extraHeaders.push('Referred-By: <' + this.ua.configuration.uri + '>');\n        }\n        // TODO: Check that this is correct isc/icc\n        this.extraHeaders.push('Contact: ' + applicant.contact);\n        this.extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n        this.extraHeaders.push('Refer-To: ' + this.target);\n        this.errorListener = this.onTransportError.bind(this);\n        ua.transport.on('transportError', this.errorListener);\n    };\n    ReferClientContext.prototype = Object.create({}, {\n        refer: { writable: true, value: function (options) {\n                options = options || {};\n                var extraHeaders = (this.extraHeaders || []).slice();\n                if (options.extraHeaders) {\n                    extraHeaders.concat(options.extraHeaders);\n                }\n                this.applicant.sendRequest(SIP.C.REFER, {\n                    extraHeaders: this.extraHeaders,\n                    receiveResponse: function (response) {\n                        if (/^1[0-9]{2}$/.test(response.status_code)) {\n                            this.emit('referRequestProgress', this);\n                        }\n                        else if (/^2[0-9]{2}$/.test(response.status_code)) {\n                            this.emit('referRequestAccepted', this);\n                        }\n                        else if (/^[4-6][0-9]{2}$/.test(response.status_code)) {\n                            this.emit('referRequestRejected', this);\n                        }\n                        if (options.receiveResponse) {\n                            options.receiveResponse(response);\n                        }\n                    }.bind(this)\n                });\n                return this;\n            } },\n        receiveNotify: { writable: true, value: function (request) {\n                // If we can correctly handle this, then we need to send a 200 OK!\n                if (request.hasHeader('Content-Type') && request.getHeader('Content-Type').search(/^message\\/sipfrag/) !== -1) {\n                    var messageBody = SIP.Grammar.parse(request.body, 'sipfrag');\n                    if (messageBody === -1) {\n                        request.reply(489, 'Bad Event');\n                        return;\n                    }\n                    switch (true) {\n                        case (/^1[0-9]{2}$/.test(messageBody.status_code)):\n                            this.emit('referProgress', this);\n                            break;\n                        case (/^2[0-9]{2}$/.test(messageBody.status_code)):\n                            this.emit('referAccepted', this);\n                            if (!this.options.activeAfterTransfer && this.applicant.terminate) {\n                                this.applicant.terminate();\n                            }\n                            break;\n                        default:\n                            this.emit('referRejected', this);\n                            break;\n                    }\n                    request.reply(200);\n                    this.emit('notify', request);\n                    return;\n                }\n                request.reply(489, 'Bad Event');\n            } }\n    });\n    SIP.ReferClientContext = ReferClientContext;\n    ReferServerContext = function (ua, request) {\n        SIP.Utils.augment(this, SIP.ServerContext, [ua, request]);\n        this.ua = ua;\n        this.status = C.STATUS_INVITE_RECEIVED;\n        this.from_tag = request.from_tag;\n        this.id = request.call_id + this.from_tag;\n        this.request = request;\n        this.contact = this.ua.contact.toString();\n        this.logger = ua.getLogger('sip.referservercontext', this.id);\n        // RFC 3515 2.4.1\n        if (!this.request.hasHeader('refer-to')) {\n            this.logger.warn('Invalid REFER packet. A refer-to header is required. Rejecting refer.');\n            this.reject();\n            return;\n        }\n        this.referTo = this.request.parseHeader('refer-to');\n        // TODO: Must set expiration timer and send 202 if there is no response by then\n        this.referredSession = this.ua.findSession(request);\n        // Needed to send the NOTIFY's\n        this.cseq = Math.floor(Math.random() * 10000);\n        this.call_id = this.request.call_id;\n        this.from_uri = this.request.to.uri;\n        this.from_tag = this.request.to.parameters.tag;\n        this.remote_target = this.request.headers.Contact[0].parsed.uri;\n        this.to_uri = this.request.from.uri;\n        this.to_tag = this.request.from_tag;\n        this.route_set = this.request.getHeaders('record-route');\n        this.receiveNonInviteResponse = function () { };\n        if (this.request.hasHeader('referred-by')) {\n            this.referredBy = this.request.getHeader('referred-by');\n        }\n        if (this.referTo.uri.hasHeader('replaces')) {\n            this.replaces = this.referTo.uri.getHeader('replaces');\n        }\n        this.errorListener = this.onTransportError.bind(this);\n        ua.transport.on('transportError', this.errorListener);\n        this.status = C.STATUS_WAITING_FOR_ANSWER;\n    };\n    ReferServerContext.prototype = Object.create({}, {\n        progress: { writable: true, value: function () {\n                if (this.status !== C.STATUS_WAITING_FOR_ANSWER) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                this.request.reply(100);\n            } },\n        reject: { writable: true, value: function (options) {\n                if (this.status === C.STATUS_TERMINATED) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                this.logger.log('Rejecting refer');\n                this.status = C.STATUS_TERMINATED;\n                SIP.ServerContext.prototype.reject.call(this, options);\n                this.emit('referRequestRejected', this);\n            } },\n        accept: { writable: true, value: function (options, modifiers) {\n                options = options || {};\n                if (this.status === C.STATUS_WAITING_FOR_ANSWER) {\n                    this.status = C.STATUS_ANSWERED;\n                }\n                else {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                this.request.reply(202, 'Accepted');\n                this.emit('referRequestAccepted', this);\n                if (options.followRefer) {\n                    this.logger.log('Accepted refer, attempting to automatically follow it');\n                    var target = this.referTo.uri;\n                    if (!target.scheme.match(\"^sips?$\")) {\n                        this.logger.error('SIP.js can only automatically follow SIP refer target');\n                        this.reject();\n                        return;\n                    }\n                    var inviteOptions = options.inviteOptions || {};\n                    var extraHeaders = (inviteOptions.extraHeaders || []).slice();\n                    if (this.replaces) {\n                        // decodeURIComponent is a holdover from 2c086eb4. Not sure that it is actually necessary\n                        extraHeaders.push('Replaces: ' + decodeURIComponent(this.replaces));\n                    }\n                    if (this.referredBy) {\n                        extraHeaders.push('Referred-By: ' + this.referredBy);\n                    }\n                    inviteOptions.extraHeaders = extraHeaders;\n                    target.clearHeaders();\n                    this.targetSession = this.ua.invite(target, inviteOptions, modifiers);\n                    this.emit('referInviteSent', this);\n                    this.targetSession.once('progress', function () {\n                        this.sendNotify('SIP/2.0 100 Trying');\n                        this.emit('referProgress', this);\n                        if (this.referredSession) {\n                            this.referredSession.emit('referProgress', this);\n                        }\n                    }.bind(this));\n                    this.targetSession.once('accepted', function () {\n                        this.logger.log('Successfully followed the refer');\n                        this.sendNotify('SIP/2.0 200 OK');\n                        this.emit('referAccepted', this);\n                        if (this.referredSession) {\n                            this.referredSession.emit('referAccepted', this);\n                        }\n                    }.bind(this));\n                    var referFailed = function (response) {\n                        if (this.status === C.STATUS_TERMINATED) {\n                            return; // No throw here because it is possible this gets called multiple times\n                        }\n                        this.logger.log('Refer was not successful. Resuming session');\n                        if (response && response.status_code === 429) {\n                            this.logger.log('Alerting referrer that identity is required.');\n                            this.sendNotify('SIP/2.0 429 Provide Referrer Identity');\n                            return;\n                        }\n                        this.sendNotify('SIP/2.0 603 Declined');\n                        // Must change the status after sending the final Notify or it will not send due to check\n                        this.status = C.STATUS_TERMINATED;\n                        this.emit('referRejected', this);\n                        if (this.referredSession) {\n                            this.referredSession.emit('referRejected');\n                        }\n                    };\n                    this.targetSession.once('rejected', referFailed.bind(this));\n                    this.targetSession.once('failed', referFailed.bind(this));\n                }\n                else {\n                    this.logger.log('Accepted refer, but did not automatically follow it');\n                    this.sendNotify('SIP/2.0 200 OK');\n                    this.emit('referAccepted', this);\n                    if (this.referredSession) {\n                        this.referredSession.emit('referAccepted', this);\n                    }\n                }\n            } },\n        sendNotify: { writable: true, value: function (body) {\n                if (this.status !== C.STATUS_ANSWERED) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                if (SIP.Grammar.parse(body, 'sipfrag') === -1) {\n                    throw new Error('sipfrag body is required to send notify for refer');\n                }\n                var request = new SIP.OutgoingRequest(SIP.C.NOTIFY, this.remote_target, this.ua, {\n                    cseq: this.cseq += 1,\n                    call_id: this.call_id,\n                    from_uri: this.from_uri,\n                    from_tag: this.from_tag,\n                    to_uri: this.to_uri,\n                    to_tag: this.to_tag,\n                    route_set: this.route_set\n                }, [\n                    'Event: refer',\n                    'Subscription-State: terminated',\n                    'Content-Type: message/sipfrag'\n                ], body);\n                new SIP.RequestSender({\n                    request: request,\n                    onRequestTimeout: function () {\n                        return;\n                    },\n                    onTransportError: function () {\n                        return;\n                    },\n                    receiveResponse: function () {\n                        return;\n                    }\n                }, this.ua).send();\n            } }\n    });\n    SIP.ReferServerContext = ReferServerContext;\n};\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview DTMF\n */\n/**\n * @class DTMF\n * @param {SIP.Session} session\n */\nmodule.exports = function (SIP) {\n    var DTMF, C = {\n        MIN_DURATION: 70,\n        MAX_DURATION: 6000,\n        DEFAULT_DURATION: 100,\n        MIN_INTER_TONE_GAP: 50,\n        DEFAULT_INTER_TONE_GAP: 500\n    };\n    DTMF = function (session, tone, options) {\n        var duration, interToneGap;\n        if (tone === undefined) {\n            throw new TypeError('Not enough arguments');\n        }\n        this.logger = session.ua.getLogger('sip.invitecontext.dtmf', session.id);\n        this.owner = session;\n        this.direction = null;\n        options = options || {};\n        duration = options.duration || null;\n        interToneGap = options.interToneGap || null;\n        // Check tone type\n        if (typeof tone === 'string') {\n            tone = tone.toUpperCase();\n        }\n        else if (typeof tone === 'number') {\n            tone = tone.toString();\n        }\n        else {\n            throw new TypeError('Invalid tone: ' + tone);\n        }\n        // Check tone value\n        if (!tone.match(/^[0-9A-D#*]$/)) {\n            throw new TypeError('Invalid tone: ' + tone);\n        }\n        else {\n            this.tone = tone;\n        }\n        // Check duration\n        if (duration && !SIP.Utils.isDecimal(duration)) {\n            throw new TypeError('Invalid tone duration: ' + duration);\n        }\n        else if (!duration) {\n            duration = DTMF.C.DEFAULT_DURATION;\n        }\n        else if (duration < DTMF.C.MIN_DURATION) {\n            this.logger.warn('\"duration\" value is lower than the minimum allowed, setting it to ' + DTMF.C.MIN_DURATION + ' milliseconds');\n            duration = DTMF.C.MIN_DURATION;\n        }\n        else if (duration > DTMF.C.MAX_DURATION) {\n            this.logger.warn('\"duration\" value is greater than the maximum allowed, setting it to ' + DTMF.C.MAX_DURATION + ' milliseconds');\n            duration = DTMF.C.MAX_DURATION;\n        }\n        else {\n            duration = Math.abs(duration);\n        }\n        this.duration = duration;\n        // Check interToneGap\n        if (interToneGap && !SIP.Utils.isDecimal(interToneGap)) {\n            throw new TypeError('Invalid interToneGap: ' + interToneGap);\n        }\n        else if (!interToneGap) {\n            interToneGap = DTMF.C.DEFAULT_INTER_TONE_GAP;\n        }\n        else if (interToneGap < DTMF.C.MIN_INTER_TONE_GAP) {\n            this.logger.warn('\"interToneGap\" value is lower than the minimum allowed, setting it to ' + DTMF.C.MIN_INTER_TONE_GAP + ' milliseconds');\n            interToneGap = DTMF.C.MIN_INTER_TONE_GAP;\n        }\n        else {\n            interToneGap = Math.abs(interToneGap);\n        }\n        this.interToneGap = interToneGap;\n    };\n    DTMF.prototype = Object.create(SIP.EventEmitter.prototype);\n    DTMF.prototype.send = function (options) {\n        var extraHeaders, body = {};\n        this.direction = 'outgoing';\n        // Check RTCSession Status\n        if (this.owner.status !== SIP.Session.C.STATUS_CONFIRMED &&\n            this.owner.status !== SIP.Session.C.STATUS_WAITING_FOR_ACK) {\n            throw new SIP.Exceptions.InvalidStateError(this.owner.status);\n        }\n        // Get DTMF options\n        options = options || {};\n        extraHeaders = options.extraHeaders ? options.extraHeaders.slice() : [];\n        body.contentType = 'application/dtmf-relay';\n        body.body = \"Signal= \" + this.tone + \"\\r\\n\";\n        body.body += \"Duration= \" + this.duration;\n        this.request = this.owner.dialog.sendRequest(this, SIP.C.INFO, {\n            extraHeaders: extraHeaders,\n            body: body\n        });\n        this.owner.emit('dtmf', this.request, this);\n    };\n    /**\n     * @private\n     */\n    DTMF.prototype.receiveResponse = function (response) {\n        var cause;\n        switch (true) {\n            case /^1[0-9]{2}$/.test(response.status_code):\n                // Ignore provisional responses.\n                break;\n            case /^2[0-9]{2}$/.test(response.status_code):\n                this.emit('succeeded', {\n                    originator: 'remote',\n                    response: response\n                });\n                break;\n            default:\n                cause = SIP.Utils.sipErrorCause(response.status_code);\n                this.emit('failed', response, cause);\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    DTMF.prototype.onRequestTimeout = function () {\n        this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n        this.owner.onRequestTimeout();\n    };\n    /**\n     * @private\n     */\n    DTMF.prototype.onTransportError = function () {\n        this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n        this.owner.onTransportError();\n    };\n    /**\n     * @private\n     */\n    DTMF.prototype.onDialogError = function (response) {\n        this.emit('failed', response, SIP.C.causes.DIALOG_ERROR);\n        this.owner.onDialogError(response);\n    };\n    /**\n     * @private\n     */\n    DTMF.prototype.init_incoming = function (request) {\n        this.direction = 'incoming';\n        this.request = request;\n        request.reply(200);\n        if (!this.tone || !this.duration) {\n            this.logger.warn('invalid INFO DTMF received, discarded');\n        }\n        else {\n            this.owner.emit('dtmf', request, this);\n        }\n    };\n    DTMF.C = C;\n    return DTMF;\n};\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Subscriber (SIP-Specific Event Notifications RFC6665)\n */\n/**\n * @augments SIP\n * @class Class creating a SIP Subscription.\n */\nmodule.exports = function (SIP) {\n    SIP.Subscription = function (ua, target, event, options) {\n        options = Object.create(options || Object.prototype);\n        this.extraHeaders = options.extraHeaders = (options.extraHeaders || []).slice();\n        this.id = null;\n        this.state = 'init';\n        if (!event) {\n            throw new TypeError('Event necessary to create a subscription.');\n        }\n        else {\n            //TODO: check for valid events here probably make a list in SIP.C; or leave it up to app to check?\n            //The check may need to/should probably occur on the other side,\n            this.event = event;\n        }\n        if (typeof options.expires !== 'number') {\n            ua.logger.warn('expires must be a number. Using default of 3600.');\n            this.expires = 3600;\n        }\n        else {\n            this.expires = options.expires;\n        }\n        this.requestedExpires = this.expires;\n        options.extraHeaders.push('Event: ' + this.event);\n        options.extraHeaders.push('Expires: ' + this.expires);\n        if (options.body) {\n            this.body = options.body;\n        }\n        this.contact = ua.contact.toString();\n        options.extraHeaders.push('Contact: ' + this.contact);\n        options.extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n        SIP.Utils.augment(this, SIP.ClientContext, [ua, SIP.C.SUBSCRIBE, target, options]);\n        this.logger = ua.getLogger('sip.subscription');\n        this.dialog = null;\n        this.timers = { N: null, sub_duration: null };\n        this.errorCodes = [404, 405, 410, 416, 480, 481, 482, 483, 484, 485, 489, 501, 604];\n    };\n    SIP.Subscription.prototype = {\n        subscribe: function () {\n            var sub = this;\n            //these states point to an existing subscription, no subscribe is necessary\n            if (this.state === 'active') {\n                this.refresh();\n                return this;\n            }\n            else if (this.state === 'notify_wait') {\n                return this;\n            }\n            SIP.Timers.clearTimeout(this.timers.sub_duration);\n            SIP.Timers.clearTimeout(this.timers.N);\n            this.timers.N = SIP.Timers.setTimeout(sub.timer_fire.bind(sub), SIP.Timers.TIMER_N);\n            this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event] = this;\n            this.send();\n            this.state = 'notify_wait';\n            return this;\n        },\n        refresh: function () {\n            if (this.state === 'terminated' || this.state === 'pending' || this.state === 'notify_wait') {\n                return;\n            }\n            this.dialog.sendRequest(this, SIP.C.SUBSCRIBE, {\n                extraHeaders: this.extraHeaders,\n                body: this.body\n            });\n        },\n        receiveResponse: function (response) {\n            var expires, sub = this, cause = SIP.Utils.getReasonPhrase(response.status_code);\n            if ((this.state === 'notify_wait' && response.status_code >= 300) ||\n                (this.state !== 'notify_wait' && this.errorCodes.indexOf(response.status_code) !== -1)) {\n                this.failed(response, null);\n            }\n            else if (/^2[0-9]{2}$/.test(response.status_code)) {\n                this.emit('accepted', response, cause);\n                //As we don't support RFC 5839 or other extensions where the NOTIFY is optional, timer N will not be cleared\n                //SIP.Timers.clearTimeout(this.timers.N);\n                expires = response.getHeader('Expires');\n                if (expires && expires <= this.requestedExpires) {\n                    // Preserve new expires value for subsequent requests\n                    this.expires = expires;\n                    this.timers.sub_duration = SIP.Timers.setTimeout(sub.refresh.bind(sub), expires * 900);\n                }\n                else {\n                    if (!expires) {\n                        this.logger.warn('Expires header missing in a 200-class response to SUBSCRIBE');\n                        this.failed(response, SIP.C.EXPIRES_HEADER_MISSING);\n                    }\n                    else {\n                        this.logger.warn('Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request');\n                        this.failed(response, SIP.C.INVALID_EXPIRES_HEADER);\n                    }\n                }\n            }\n            else if (response.statusCode > 300) {\n                this.emit('failed', response, cause);\n                this.emit('rejected', response, cause);\n            }\n        },\n        unsubscribe: function () {\n            var extraHeaders = [], sub = this;\n            this.state = 'terminated';\n            extraHeaders.push('Event: ' + this.event);\n            extraHeaders.push('Expires: 0');\n            extraHeaders.push('Contact: ' + this.contact);\n            extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n            //makes sure expires isn't set, and other typical resubscribe behavior\n            this.receiveResponse = function () { };\n            this.dialog.sendRequest(this, this.method, {\n                extraHeaders: extraHeaders,\n                body: this.body\n            });\n            SIP.Timers.clearTimeout(this.timers.sub_duration);\n            SIP.Timers.clearTimeout(this.timers.N);\n            this.timers.N = SIP.Timers.setTimeout(sub.timer_fire.bind(sub), SIP.Timers.TIMER_N);\n        },\n        /**\n        * @private\n        */\n        timer_fire: function () {\n            if (this.state === 'terminated') {\n                this.terminateDialog();\n                SIP.Timers.clearTimeout(this.timers.N);\n                SIP.Timers.clearTimeout(this.timers.sub_duration);\n                delete this.ua.subscriptions[this.id];\n            }\n            else if (this.state === 'notify_wait' || this.state === 'pending') {\n                this.close();\n            }\n            else {\n                this.refresh();\n            }\n        },\n        /**\n        * @private\n        */\n        close: function () {\n            if (this.state === 'notify_wait') {\n                this.state = 'terminated';\n                SIP.Timers.clearTimeout(this.timers.N);\n                SIP.Timers.clearTimeout(this.timers.sub_duration);\n                this.receiveResponse = function () { };\n                delete this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event];\n            }\n            else if (this.state !== 'terminated') {\n                this.unsubscribe();\n            }\n        },\n        /**\n        * @private\n        */\n        createConfirmedDialog: function (message, type) {\n            var dialog;\n            this.terminateDialog();\n            dialog = new SIP.Dialog(this, message, type);\n            dialog.invite_seqnum = this.request.cseq;\n            dialog.local_seqnum = this.request.cseq;\n            if (!dialog.error) {\n                this.dialog = dialog;\n                return true;\n            }\n            // Dialog not created due to an error\n            else {\n                return false;\n            }\n        },\n        /**\n        * @private\n        */\n        terminateDialog: function () {\n            if (this.dialog) {\n                delete this.ua.subscriptions[this.id];\n                this.dialog.terminate();\n                delete this.dialog;\n            }\n        },\n        /**\n        * @private\n        */\n        receiveRequest: function (request) {\n            var sub_state, sub = this;\n            function setExpiresTimeout() {\n                if (sub_state.expires) {\n                    SIP.Timers.clearTimeout(sub.timers.sub_duration);\n                    sub_state.expires = Math.min(sub.expires, Math.max(sub_state.expires, 0));\n                    sub.timers.sub_duration = SIP.Timers.setTimeout(sub.refresh.bind(sub), sub_state.expires * 900);\n                }\n            }\n            if (!this.matchEvent(request)) { //checks event and subscription_state headers\n                request.reply(489);\n                return;\n            }\n            if (!this.dialog) {\n                if (this.createConfirmedDialog(request, 'UAS')) {\n                    this.id = this.dialog.id.toString();\n                    delete this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event];\n                    this.ua.subscriptions[this.id] = this;\n                    // UPDATE ROUTE SET TO BE BACKWARDS COMPATIBLE?\n                }\n            }\n            sub_state = request.parseHeader('Subscription-State');\n            request.reply(200, SIP.C.REASON_200);\n            SIP.Timers.clearTimeout(this.timers.N);\n            this.emit('notify', { request: request });\n            // if we've set state to terminated, no further processing should take place\n            // and we are only interested in cleaning up after the appropriate NOTIFY\n            if (this.state === 'terminated') {\n                if (sub_state.state === 'terminated') {\n                    this.terminateDialog();\n                    SIP.Timers.clearTimeout(this.timers.N);\n                    SIP.Timers.clearTimeout(this.timers.sub_duration);\n                    delete this.ua.subscriptions[this.id];\n                }\n                return;\n            }\n            switch (sub_state.state) {\n                case 'active':\n                    this.state = 'active';\n                    setExpiresTimeout();\n                    break;\n                case 'pending':\n                    if (this.state === 'notify_wait') {\n                        setExpiresTimeout();\n                    }\n                    this.state = 'pending';\n                    break;\n                case 'terminated':\n                    SIP.Timers.clearTimeout(this.timers.sub_duration);\n                    if (sub_state.reason) {\n                        this.logger.log('terminating subscription with reason ' + sub_state.reason);\n                        switch (sub_state.reason) {\n                            case 'deactivated':\n                            case 'timeout':\n                                this.subscribe();\n                                return;\n                            case 'probation':\n                            case 'giveup':\n                                if (sub_state.params && sub_state.params['retry-after']) {\n                                    this.timers.sub_duration = SIP.Timers.setTimeout(sub.subscribe.bind(sub), sub_state.params['retry-after']);\n                                }\n                                else {\n                                    this.subscribe();\n                                }\n                                return;\n                            case 'rejected':\n                            case 'noresource':\n                            case 'invariant':\n                                break;\n                        }\n                    }\n                    this.close();\n                    break;\n            }\n        },\n        failed: function (response, cause) {\n            this.close();\n            this.emit('failed', response, cause);\n            this.emit('rejected', response, cause);\n            return this;\n        },\n        onDialogError: function (response) {\n            this.failed(response, SIP.C.causes.DIALOG_ERROR);\n        },\n        /**\n        * @private\n        */\n        matchEvent: function (request) {\n            var event;\n            // Check mandatory header Event\n            if (!request.hasHeader('Event')) {\n                this.logger.warn('missing Event header');\n                return false;\n            }\n            // Check mandatory header Subscription-State\n            if (!request.hasHeader('Subscription-State')) {\n                this.logger.warn('missing Subscription-State header');\n                return false;\n            }\n            // Check whether the event in NOTIFY matches the event in SUBSCRIBE\n            event = request.parseHeader('event').event;\n            if (this.event !== event) {\n                this.logger.warn('event match failed');\n                request.reply(481, 'Event Match Failed');\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n    };\n};\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Publish (SIP Extension for Event State Publication RFC3903)\n */\n/**\n * @augments SIP\n * @class Class creating a SIP PublishContext.\n */\nmodule.exports = function (SIP) {\n    var PublishContext;\n    PublishContext = function (ua, target, event, options) {\n        this.options = options = (options || {});\n        this.options.extraHeaders = (options.extraHeaders || []).slice();\n        this.options.contentType = (options.contentType || 'text/plain');\n        if (typeof options.expires !== 'number' || (options.expires % 1) !== 0) {\n            this.options.expires = 3600;\n        }\n        else {\n            this.options.expires = Number(options.expires);\n        }\n        if (typeof (options.unpublishOnClose) !== \"boolean\") {\n            this.options.unpublishOnClose = true;\n        }\n        else {\n            this.options.unpublishOnClose = options.unpublishOnClose;\n        }\n        if (target === undefined || target === null || target === '') {\n            throw new SIP.Exceptions.MethodParameterError('Publish', 'Target', target);\n        }\n        else {\n            this.target = ua.normalizeTarget(target);\n        }\n        if (event === undefined || event === null || event === '') {\n            throw new SIP.Exceptions.MethodParameterError('Publish', 'Event', event);\n        }\n        else {\n            this.event = event;\n        }\n        // Call parent constructor\n        SIP.ClientContext.call(this, ua, SIP.C.PUBLISH, this.target, this.options);\n        this.logger = this.ua.getLogger('sip.publish');\n        this.pubRequestBody = null;\n        this.pubRequestExpires = this.options.expires;\n        this.pubRequestEtag = null;\n        this.publish_refresh_timer = null;\n        ua.on('transportCreated', function (transport) {\n            transport.on('transportError', this.onTransportError.bind(this));\n        }.bind(this));\n    };\n    // Extend ClientContext\n    PublishContext.prototype = Object.create(SIP.ClientContext.prototype);\n    // Restore the class constructor\n    PublishContext.prototype.constructor = PublishContext;\n    /**\n     * Publish\n     *\n     * @param {string} Event body to publish, optional\n     *\n     */\n    PublishContext.prototype.publish = function (body) {\n        // Clean up before the run\n        this.request = null;\n        SIP.Timers.clearTimeout(this.publish_refresh_timer);\n        if (body !== undefined && body !== null && body !== '') {\n            // is Inital or Modify request\n            this.options.body = body;\n            this.pubRequestBody = this.options.body;\n            if (this.pubRequestExpires === 0) {\n                // This is Initial request after unpublish\n                this.pubRequestExpires = this.options.expires;\n                this.pubRequestEtag = null;\n            }\n            if (!(this.ua.publishers[this.target.toString() + ':' + this.event])) {\n                this.ua.publishers[this.target.toString() + ':' + this.event] = this;\n            }\n        }\n        else {\n            // This is Refresh request\n            this.pubRequestBody = null;\n            if (this.pubRequestEtag === null) {\n                //Request not valid\n                throw new SIP.Exceptions.MethodParameterError('Publish', 'Body', body);\n            }\n            if (this.pubRequestExpires === 0) {\n                //Request not valid\n                throw new SIP.Exceptions.MethodParameterError('Publish', 'Expire', this.pubRequestExpires);\n            }\n        }\n        this.sendPublishRequest();\n    };\n    /**\n     * Unpublish\n     *\n     */\n    PublishContext.prototype.unpublish = function () {\n        // Clean up before the run\n        this.request = null;\n        SIP.Timers.clearTimeout(this.publish_refresh_timer);\n        this.pubRequestBody = null;\n        this.pubRequestExpires = 0;\n        if (this.pubRequestEtag !== null) {\n            this.sendPublishRequest();\n        }\n    };\n    /**\n     * Close\n     *\n     */\n    PublishContext.prototype.close = function () {\n        // Send unpublish, if requested\n        if (this.options.unpublishOnClose) {\n            this.unpublish();\n        }\n        else {\n            this.request = null;\n            SIP.Timers.clearTimeout(this.publish_refresh_timer);\n            this.pubRequestBody = null;\n            this.pubRequestExpires = 0;\n            this.pubRequestEtag = null;\n        }\n        if (this.ua.publishers[this.target.toString() + ':' + this.event]) {\n            delete this.ua.publishers[this.target.toString() + ':' + this.event];\n        }\n    };\n    /**\n     * @private\n     *\n     */\n    PublishContext.prototype.sendPublishRequest = function () {\n        var reqOptions;\n        reqOptions = Object.create(this.options || Object.prototype);\n        reqOptions.extraHeaders = (this.options.extraHeaders || []).slice();\n        reqOptions.extraHeaders.push('Event: ' + this.event);\n        reqOptions.extraHeaders.push('Expires: ' + this.pubRequestExpires);\n        if (this.pubRequestEtag !== null) {\n            reqOptions.extraHeaders.push('SIP-If-Match: ' + this.pubRequestEtag);\n        }\n        this.request = new SIP.OutgoingRequest(SIP.C.PUBLISH, this.target, this.ua, this.options.params, reqOptions.extraHeaders);\n        if (this.pubRequestBody !== null) {\n            this.request.body = {};\n            this.request.body.body = this.pubRequestBody;\n            this.request.body.contentType = this.options.contentType;\n        }\n        this.send();\n    };\n    /**\n     * @private\n     *\n     */\n    PublishContext.prototype.receiveResponse = function (response) {\n        var expires, minExpires, cause = SIP.Utils.getReasonPhrase(response.status_code);\n        switch (true) {\n            case /^1[0-9]{2}$/.test(response.status_code):\n                this.emit('progress', response, cause);\n                break;\n            case /^2[0-9]{2}$/.test(response.status_code):\n                // Set SIP-Etag\n                if (response.hasHeader('SIP-ETag')) {\n                    this.pubRequestEtag = response.getHeader('SIP-ETag');\n                }\n                else {\n                    this.logger.warn('SIP-ETag header missing in a 200-class response to PUBLISH');\n                }\n                // Update Expire\n                if (response.hasHeader('Expires')) {\n                    expires = Number(response.getHeader('Expires'));\n                    if (typeof expires === 'number' && expires >= 0 && expires <= this.pubRequestExpires) {\n                        this.pubRequestExpires = expires;\n                    }\n                    else {\n                        this.logger.warn('Bad Expires header in a 200-class response to PUBLISH');\n                    }\n                }\n                else {\n                    this.logger.warn('Expires header missing in a 200-class response to PUBLISH');\n                }\n                if (this.pubRequestExpires !== 0) {\n                    // Schedule refresh\n                    this.publish_refresh_timer = SIP.Timers.setTimeout(this.publish.bind(this), this.pubRequestExpires * 900);\n                    this.emit('published', response, cause);\n                }\n                else {\n                    this.emit('unpublished', response, cause);\n                }\n                break;\n            case /^412$/.test(response.status_code):\n                // 412 code means no matching ETag - possibly the PUBLISH expired\n                // Resubmit as new request, if the current request is not a \"remove\"\n                if (this.pubRequestEtag !== null && this.pubRequestExpires !== 0) {\n                    this.logger.warn('412 response to PUBLISH, recovering');\n                    this.pubRequestEtag = null;\n                    this.emit('progress', response, cause);\n                    this.publish(this.options.body);\n                }\n                else {\n                    this.logger.warn('412 response to PUBLISH, recovery failed');\n                    this.pubRequestExpires = 0;\n                    this.emit('failed', response, cause);\n                    this.emit('unpublished', response, cause);\n                }\n                break;\n            case /^423$/.test(response.status_code):\n                // 423 code means we need to adjust the Expires interval up\n                if (this.pubRequestExpires !== 0 && response.hasHeader('Min-Expires')) {\n                    minExpires = Number(response.getHeader('Min-Expires'));\n                    if (typeof minExpires === 'number' || minExpires > this.pubRequestExpires) {\n                        this.logger.warn('423 code in response to PUBLISH, adjusting the Expires value and trying to recover');\n                        this.pubRequestExpires = minExpires;\n                        this.emit('progress', response, cause);\n                        this.publish(this.options.body);\n                    }\n                    else {\n                        this.logger.warn('Bad 423 response Min-Expires header received for PUBLISH');\n                        this.pubRequestExpires = 0;\n                        this.emit('failed', response, cause);\n                        this.emit('unpublished', response, cause);\n                    }\n                }\n                else {\n                    this.logger.warn('423 response to PUBLISH, recovery failed');\n                    this.pubRequestExpires = 0;\n                    this.emit('failed', response, cause);\n                    this.emit('unpublished', response, cause);\n                }\n                break;\n            default:\n                this.pubRequestExpires = 0;\n                this.emit('failed', response, cause);\n                this.emit('unpublished', response, cause);\n                break;\n        }\n        // Do the cleanup\n        if (this.pubRequestExpires === 0) {\n            SIP.Timers.clearTimeout(this.publish_refresh_timer);\n            this.pubRequestBody = null;\n            this.pubRequestEtag = null;\n        }\n    };\n    PublishContext.prototype.onRequestTimeout = function () {\n        SIP.ClientContext.prototype.onRequestTimeout.call(this);\n        this.emit('unpublished', null, SIP.C.causes.REQUEST_TIMEOUT);\n    };\n    PublishContext.prototype.onTransportError = function () {\n        SIP.ClientContext.prototype.onTransportError.call(this);\n        this.emit('unpublished', null, SIP.C.causes.CONNECTION_ERROR);\n    };\n    SIP.PublishContext = PublishContext;\n};\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * @augments SIP\n * @class Class creating a SIP User Agent.\n * @param {function returning SIP.sessionDescriptionHandler} [configuration.sessionDescriptionHandlerFactory]\n *        A function will be invoked by each of the UA's Sessions to build the sessionDescriptionHandler for that Session.\n *        If no (or a falsy) value is provided, each Session will use a default (WebRTC) sessionDescriptionHandler.\n *\n * @param {Object} [configuration.media] gets passed to SIP.sessionDescriptionHandler.getDescription as mediaHint\n */\nmodule.exports = function (SIP, environment) {\n    var UA, C = {\n        // UA status codes\n        STATUS_INIT: 0,\n        STATUS_STARTING: 1,\n        STATUS_READY: 2,\n        STATUS_USER_CLOSED: 3,\n        STATUS_NOT_READY: 4,\n        // UA error codes\n        CONFIGURATION_ERROR: 1,\n        NETWORK_ERROR: 2,\n        ALLOWED_METHODS: [\n            'ACK',\n            'CANCEL',\n            'INVITE',\n            'MESSAGE',\n            'BYE',\n            'OPTIONS',\n            'INFO',\n            'NOTIFY',\n            'REFER'\n        ],\n        ACCEPTED_BODY_TYPES: [\n            'application/sdp',\n            'application/dtmf-relay'\n        ],\n        MAX_FORWARDS: 70,\n        TAG_LENGTH: 10\n    };\n    UA = function (configuration) {\n        var self = this;\n        // Helper function for forwarding events\n        function selfEmit(type) {\n            //registrationFailed handler is invoked with two arguments. Allow event handlers to be invoked with a variable no. of arguments\n            return self.emit.bind(self, type);\n        }\n        // Set Accepted Body Types\n        C.ACCEPTED_BODY_TYPES = C.ACCEPTED_BODY_TYPES.toString();\n        this.log = new SIP.LoggerFactory();\n        this.logger = this.getLogger('sip.ua');\n        this.cache = {\n            credentials: {}\n        };\n        this.configuration = {};\n        this.dialogs = {};\n        //User actions outside any session/dialog (MESSAGE)\n        this.applicants = {};\n        this.data = {};\n        this.sessions = {};\n        this.subscriptions = {};\n        this.earlySubscriptions = {};\n        this.publishers = {};\n        this.transport = null;\n        this.contact = null;\n        this.status = C.STATUS_INIT;\n        this.error = null;\n        this.transactions = {\n            nist: {},\n            nict: {},\n            ist: {},\n            ict: {}\n        };\n        Object.defineProperties(this, {\n            transactionsCount: {\n                get: function () {\n                    var type, transactions = ['nist', 'nict', 'ist', 'ict'], count = 0;\n                    for (type in transactions) {\n                        count += Object.keys(this.transactions[transactions[type]]).length;\n                    }\n                    return count;\n                }\n            },\n            nictTransactionsCount: {\n                get: function () {\n                    return Object.keys(this.transactions['nict']).length;\n                }\n            },\n            nistTransactionsCount: {\n                get: function () {\n                    return Object.keys(this.transactions['nist']).length;\n                }\n            },\n            ictTransactionsCount: {\n                get: function () {\n                    return Object.keys(this.transactions['ict']).length;\n                }\n            },\n            istTransactionsCount: {\n                get: function () {\n                    return Object.keys(this.transactions['ist']).length;\n                }\n            }\n        });\n        /**\n         * Load configuration\n         *\n         * @throws {SIP.Exceptions.ConfigurationError}\n         * @throws {TypeError}\n         */\n        if (configuration === undefined) {\n            configuration = {};\n        }\n        else if (typeof configuration === 'string' || configuration instanceof String) {\n            configuration = {\n                uri: configuration\n            };\n        }\n        // Apply log configuration if present\n        if (configuration.log) {\n            if (configuration.log.hasOwnProperty('builtinEnabled')) {\n                this.log.builtinEnabled = configuration.log.builtinEnabled;\n            }\n            if (configuration.log.hasOwnProperty('level')) {\n                this.log.level = configuration.log.level;\n            }\n            if (configuration.log.hasOwnProperty('connector')) {\n                this.log.connector = configuration.log.connector;\n            }\n        }\n        try {\n            this.loadConfig(configuration);\n        }\n        catch (e) {\n            this.status = C.STATUS_NOT_READY;\n            this.error = C.CONFIGURATION_ERROR;\n            throw e;\n        }\n        // Initialize registerContext\n        this.registerContext = new SIP.RegisterContext(this);\n        this.registerContext.on('failed', selfEmit('registrationFailed'));\n        this.registerContext.on('registered', selfEmit('registered'));\n        this.registerContext.on('unregistered', selfEmit('unregistered'));\n        if (this.configuration.autostart) {\n            this.start();\n        }\n    };\n    UA.prototype = Object.create(SIP.EventEmitter.prototype);\n    //=================\n    //  High Level API\n    //=================\n    UA.prototype.register = function (options) {\n        this.configuration.register = true;\n        this.registerContext.register(options);\n        return this;\n    };\n    /**\n     * Unregister.\n     *\n     * @param {Boolean} [all] unregister all user bindings.\n     *\n     */\n    UA.prototype.unregister = function (options) {\n        this.configuration.register = false;\n        var context = this.registerContext;\n        this.transport.afterConnected(context.unregister.bind(context, options));\n        return this;\n    };\n    UA.prototype.isRegistered = function () {\n        return this.registerContext.registered;\n    };\n    /**\n     * Make an outgoing call.\n     *\n     * @param {String} target\n     * @param {Object} views\n     * @param {Object} [options.media] gets passed to SIP.sessionDescriptionHandler.getDescription as mediaHint\n     *\n     * @throws {TypeError}\n     *\n     */\n    UA.prototype.invite = function (target, options, modifiers) {\n        var context = new SIP.InviteClientContext(this, target, options, modifiers);\n        // Delay sending actual invite until the next 'tick' if we are already\n        // connected, so that API consumers can register to events fired by the\n        // the session.\n        this.transport.afterConnected(function () {\n            context.invite();\n            this.emit('inviteSent', context);\n        }.bind(this));\n        return context;\n    };\n    UA.prototype.subscribe = function (target, event, options) {\n        var sub = new SIP.Subscription(this, target, event, options);\n        this.transport.afterConnected(sub.subscribe.bind(sub));\n        return sub;\n    };\n    /**\n     * Send PUBLISH Event State Publication (RFC3903)\n     *\n     * @param {String} target\n     * @param {String} event\n     * @param {String} body\n     * @param {Object} [options]\n     *\n     * @throws {SIP.Exceptions.MethodParameterError}\n     *\n     */\n    UA.prototype.publish = function (target, event, body, options) {\n        var pub = new SIP.PublishContext(this, target, event, options);\n        this.transport.afterConnected(pub.publish.bind(pub, body));\n        return pub;\n    };\n    /**\n     * Send a message.\n     *\n     * @param {String} target\n     * @param {String} body\n     * @param {Object} [options]\n     *\n     * @throws {TypeError}\n     *\n     */\n    UA.prototype.message = function (target, body, options) {\n        if (body === undefined) {\n            throw new TypeError('Not enough arguments');\n        }\n        // There is no Message module, so it is okay that the UA handles defaults here.\n        options = Object.create(options || Object.prototype);\n        options.contentType || (options.contentType = 'text/plain');\n        options.body = body;\n        return this.request(SIP.C.MESSAGE, target, options);\n    };\n    UA.prototype.request = function (method, target, options) {\n        var req = new SIP.ClientContext(this, method, target, options);\n        this.transport.afterConnected(req.send.bind(req));\n        return req;\n    };\n    /**\n     * Gracefully close.\n     *\n     */\n    UA.prototype.stop = function () {\n        var session, subscription, applicant, publisher, ua = this;\n        function transactionsListener() {\n            if (ua.nistTransactionsCount === 0 && ua.nictTransactionsCount === 0) {\n                ua.removeListener('transactionDestroyed', transactionsListener);\n                ua.transport.disconnect();\n            }\n        }\n        this.logger.log('user requested closure...');\n        if (this.status === C.STATUS_USER_CLOSED) {\n            this.logger.warn('UA already closed');\n            return this;\n        }\n        // Close registerContext\n        this.logger.log('closing registerContext');\n        this.registerContext.close();\n        // Run  _terminate_ on every Session\n        for (session in this.sessions) {\n            this.logger.log('closing session ' + session);\n            this.sessions[session].terminate();\n        }\n        //Run _close_ on every confirmed Subscription\n        for (subscription in this.subscriptions) {\n            this.logger.log('unsubscribing from subscription ' + subscription);\n            this.subscriptions[subscription].close();\n        }\n        //Run _close_ on every early Subscription\n        for (subscription in this.earlySubscriptions) {\n            this.logger.log('unsubscribing from early subscription ' + subscription);\n            this.earlySubscriptions[subscription].close();\n        }\n        //Run _close_ on every Publisher\n        for (publisher in this.publishers) {\n            this.logger.log('unpublish ' + publisher);\n            this.publishers[publisher].close();\n        }\n        // Run  _close_ on every applicant\n        for (applicant in this.applicants) {\n            this.applicants[applicant].close();\n        }\n        this.status = C.STATUS_USER_CLOSED;\n        /*\n         * If the remaining transactions are all INVITE transactions, there is no need to\n         * wait anymore because every session has already been closed by this method.\n         * - locally originated sessions where terminated (CANCEL or BYE)\n         * - remotely originated sessions where rejected (4XX) or terminated (BYE)\n         * Remaining INVITE transactions belong tho sessions that where answered. This are in\n         * 'accepted' state due to timers 'L' and 'M' defined in [RFC 6026]\n         */\n        if (this.nistTransactionsCount === 0 && this.nictTransactionsCount === 0) {\n            this.transport.disconnect();\n        }\n        else {\n            this.on('transactionDestroyed', transactionsListener);\n        }\n        if (typeof environment.removeEventListener === 'function') {\n            // Google Chrome Packaged Apps don't allow 'unload' listeners:\n            // unload is not available in packaged apps\n            if (!(global.chrome && global.chrome.app && global.chrome.app.runtime)) {\n                environment.removeEventListener('unload', this.environListener);\n            }\n        }\n        return this;\n    };\n    /**\n     * Connect to the WS server if status = STATUS_INIT.\n     * Resume UA after being closed.\n     *\n     */\n    UA.prototype.start = function () {\n        // var server;\n        this.logger.log('user requested startup...');\n        if (this.status === C.STATUS_INIT) {\n            this.status = C.STATUS_STARTING;\n            if (!this.configuration.transportConstructor) {\n                throw new SIP.Exceptions.TransportError(\"Transport constructor not set\");\n            }\n            this.transport = new this.configuration.transportConstructor(this.getLogger('sip.transport'), this.configuration.transportOptions);\n            this.setTransportListeners();\n            this.emit('transportCreated', this.transport);\n            this.transport.connect();\n        }\n        else if (this.status === C.STATUS_USER_CLOSED) {\n            this.logger.log('resuming');\n            this.status = C.STATUS_READY;\n            this.transport.connect();\n        }\n        else if (this.status === C.STATUS_STARTING) {\n            this.logger.log('UA is in STARTING status, not opening new connection');\n        }\n        else if (this.status === C.STATUS_READY) {\n            this.logger.log('UA is in READY status, not resuming');\n        }\n        else {\n            this.logger.error('Connection is down. Auto-Recovery system is trying to connect');\n        }\n        if (this.configuration.autostop && typeof environment.addEventListener === 'function') {\n            // Google Chrome Packaged Apps don't allow 'unload' listeners:\n            // unload is not available in packaged apps\n            if (!(global.chrome && global.chrome.app && global.chrome.app.runtime)) {\n                this.environListener = this.stop.bind(this);\n                environment.addEventListener('unload', this.environListener);\n            }\n        }\n        return this;\n    };\n    /**\n     * Normalize a string into a valid SIP request URI\n     *\n     * @param {String} target\n     *\n     * @returns {SIP.URI|undefined}\n     */\n    UA.prototype.normalizeTarget = function (target) {\n        return SIP.Utils.normalizeTarget(target, this.configuration.hostportParams);\n    };\n    //===============================\n    //  Private (For internal use)\n    //===============================\n    UA.prototype.saveCredentials = function (credentials) {\n        this.cache.credentials[credentials.realm] = this.cache.credentials[credentials.realm] || {};\n        this.cache.credentials[credentials.realm][credentials.uri] = credentials;\n        return this;\n    };\n    UA.prototype.getCredentials = function (request) {\n        var realm, credentials;\n        realm = request.ruri.host;\n        if (this.cache.credentials[realm] && this.cache.credentials[realm][request.ruri]) {\n            credentials = this.cache.credentials[realm][request.ruri];\n            credentials.method = request.method;\n        }\n        return credentials;\n    };\n    UA.prototype.getLogger = function (category, label) {\n        return this.log.getLogger(category, label);\n    };\n    //==============================\n    // Event Handlers\n    //==============================\n    UA.prototype.onTransportError = function () {\n        if (this.status === C.STATUS_USER_CLOSED) {\n            return;\n        }\n        if (!this.error || this.error !== C.NETWORK_ERROR) {\n            this.status = C.STATUS_NOT_READY;\n            this.error = C.NETWORK_ERROR;\n        }\n    };\n    /**\n     * Helper function. Sets transport listeners\n     * @private\n     */\n    UA.prototype.setTransportListeners = function () {\n        this.transport.on('connected', this.onTransportConnected.bind(this));\n        this.transport.on('message', this.onTransportReceiveMsg.bind(this));\n        this.transport.on('transportError', this.onTransportError.bind(this));\n    };\n    /**\n     * Transport connection event.\n     * @private\n     * @event\n     * @param {SIP.Transport} transport.\n     */\n    UA.prototype.onTransportConnected = function () {\n        if (this.configuration.register) {\n            this.configuration.authenticationFactory.initialize().then(function () {\n                this.registerContext.onTransportConnected();\n            }.bind(this));\n        }\n    };\n    /**\n     * Transport message receipt event.\n     * @private\n     * @event\n     * @param {String} message\n     */\n    UA.prototype.onTransportReceiveMsg = function (message) {\n        var transaction;\n        message = SIP.Parser.parseMessage(message, this);\n        if (this.status === SIP.UA.C.STATUS_USER_CLOSED && message instanceof SIP.IncomingRequest) {\n            this.logger.warn('UA received message when status = USER_CLOSED - aborting');\n            return;\n        }\n        // Do some sanity check\n        if (SIP.sanityCheck(message, this, this.transport)) {\n            if (message instanceof SIP.IncomingRequest) {\n                message.transport = this.transport;\n                this.receiveRequest(message);\n            }\n            else if (message instanceof SIP.IncomingResponse) {\n                /* Unike stated in 18.1.2, if a response does not match\n                * any transaction, it is discarded here and no passed to the core\n                * in order to be discarded there.\n                */\n                switch (message.method) {\n                    case SIP.C.INVITE:\n                        transaction = this.transactions.ict[message.via_branch];\n                        if (transaction) {\n                            transaction.receiveResponse(message);\n                        }\n                        break;\n                    case SIP.C.ACK:\n                        // Just in case ;-)\n                        break;\n                    default:\n                        transaction = this.transactions.nict[message.via_branch];\n                        if (transaction) {\n                            transaction.receiveResponse(message);\n                        }\n                        break;\n                }\n            }\n        }\n    };\n    /**\n     * new Transaction\n     * @private\n     * @param {SIP.Transaction} transaction.\n     */\n    UA.prototype.newTransaction = function (transaction) {\n        this.transactions[transaction.type][transaction.id] = transaction;\n        this.emit('newTransaction', { transaction: transaction });\n    };\n    /**\n     * destroy Transaction\n     * @private\n     * @param {SIP.Transaction} transaction.\n     */\n    UA.prototype.destroyTransaction = function (transaction) {\n        delete this.transactions[transaction.type][transaction.id];\n        this.emit('transactionDestroyed', {\n            transaction: transaction\n        });\n    };\n    //=========================\n    // receiveRequest\n    //=========================\n    /**\n     * Request reception\n     * @private\n     * @param {SIP.IncomingRequest} request.\n     */\n    UA.prototype.receiveRequest = function (request) {\n        var dialog, session, message, earlySubscription, method = request.method, replaces, replacedDialog, self = this;\n        function ruriMatches(uri) {\n            return uri && uri.user === request.ruri.user;\n        }\n        // Check that request URI points to us\n        if (!(ruriMatches(this.configuration.uri) ||\n            ruriMatches(this.contact.uri) ||\n            ruriMatches(this.contact.pub_gruu) ||\n            ruriMatches(this.contact.temp_gruu))) {\n            this.logger.warn('Request-URI does not point to us');\n            if (request.method !== SIP.C.ACK) {\n                request.reply_sl(404);\n            }\n            return;\n        }\n        // Check request URI scheme\n        if (request.ruri.scheme === SIP.C.SIPS) {\n            request.reply_sl(416);\n            return;\n        }\n        // Check transaction\n        if (SIP.Transactions.checkTransaction(this, request)) {\n            return;\n        }\n        /* RFC3261 12.2.2\n         * Requests that do not change in any way the state of a dialog may be\n         * received within a dialog (for example, an OPTIONS request).\n         * They are processed as if they had been received outside the dialog.\n         */\n        if (method === SIP.C.OPTIONS) {\n            new SIP.Transactions.NonInviteServerTransaction(request, this);\n            request.reply(200, null, [\n                'Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString(),\n                'Accept: ' + C.ACCEPTED_BODY_TYPES\n            ]);\n        }\n        else if (method === SIP.C.MESSAGE) {\n            message = new SIP.ServerContext(this, request);\n            message.body = request.body;\n            message.content_type = request.getHeader('Content-Type') || 'text/plain';\n            request.reply(200, null);\n            this.emit('message', message);\n        }\n        else if (method !== SIP.C.INVITE &&\n            method !== SIP.C.ACK) {\n            // Let those methods pass through to normal processing for now.\n            new SIP.ServerContext(this, request);\n        }\n        // Initial Request\n        if (!request.to_tag) {\n            switch (method) {\n                case SIP.C.INVITE:\n                    replaces =\n                        this.configuration.replaces !== SIP.C.supported.UNSUPPORTED &&\n                            request.parseHeader('replaces');\n                    if (replaces) {\n                        replacedDialog = this.dialogs[replaces.call_id + replaces.replaces_to_tag + replaces.replaces_from_tag];\n                        if (!replacedDialog) {\n                            //Replaced header without a matching dialog, reject\n                            request.reply_sl(481, null);\n                            return;\n                        }\n                        else if (replacedDialog.owner.status === SIP.Session.C.STATUS_TERMINATED) {\n                            request.reply_sl(603, null);\n                            return;\n                        }\n                        else if (replacedDialog.state === SIP.Dialog.C.STATUS_CONFIRMED && replaces.early_only) {\n                            request.reply_sl(486, null);\n                            return;\n                        }\n                    }\n                    session = new SIP.InviteServerContext(this, request);\n                    session.replacee = replacedDialog && replacedDialog.owner;\n                    self.emit('invite', session);\n                    break;\n                case SIP.C.BYE:\n                    // Out of dialog BYE received\n                    request.reply(481);\n                    break;\n                case SIP.C.CANCEL:\n                    session = this.findSession(request);\n                    if (session) {\n                        session.receiveRequest(request);\n                    }\n                    else {\n                        this.logger.warn('received CANCEL request for a non existent session');\n                    }\n                    break;\n                case SIP.C.ACK:\n                    /* Absorb it.\n                     * ACK request without a corresponding Invite Transaction\n                     * and without To tag.\n                     */\n                    break;\n                case SIP.C.NOTIFY:\n                    if (this.configuration.allowLegacyNotifications && this.listeners('notify').length > 0) {\n                        request.reply(200, null);\n                        self.emit('notify', { request: request });\n                    }\n                    else {\n                        request.reply(481, 'Subscription does not exist');\n                    }\n                    break;\n                case SIP.C.REFER:\n                    this.logger.log('Received an out of dialog refer');\n                    if (this.configuration.allowOutOfDialogRefers) {\n                        this.logger.log('Allow out of dialog refers is enabled on the UA');\n                        var referContext = new SIP.ReferServerContext(this, request);\n                        var hasReferListener = this.listeners('outOfDialogReferRequested').length;\n                        if (hasReferListener) {\n                            this.emit('outOfDialogReferRequested', referContext);\n                        }\n                        else {\n                            this.logger.log('No outOfDialogReferRequest listeners, automatically accepting and following the out of dialog refer');\n                            referContext.accept({ followRefer: true });\n                        }\n                        break;\n                    }\n                    request.reply(405);\n                    break;\n                default:\n                    request.reply(405);\n                    break;\n            }\n        }\n        // In-dialog request\n        else {\n            dialog = this.findDialog(request);\n            if (dialog) {\n                if (method === SIP.C.INVITE) {\n                    new SIP.Transactions.InviteServerTransaction(request, this);\n                }\n                dialog.receiveRequest(request);\n            }\n            else if (method === SIP.C.NOTIFY) {\n                session = this.findSession(request);\n                earlySubscription = this.findEarlySubscription(request);\n                if (session) {\n                    session.receiveRequest(request);\n                }\n                else if (earlySubscription) {\n                    earlySubscription.receiveRequest(request);\n                }\n                else {\n                    this.logger.warn('received NOTIFY request for a non existent session or subscription');\n                    request.reply(481, 'Subscription does not exist');\n                }\n            }\n            /* RFC3261 12.2.2\n             * Request with to tag, but no matching dialog found.\n             * Exception: ACK for an Invite request for which a dialog has not\n             * been created.\n             */\n            else {\n                if (method !== SIP.C.ACK) {\n                    request.reply(481);\n                }\n            }\n        }\n    };\n    //=================\n    // Utils\n    //=================\n    /**\n     * Get the session to which the request belongs to, if any.\n     * @private\n     * @param {SIP.IncomingRequest} request.\n     * @returns {SIP.OutgoingSession|SIP.IncomingSession|null}\n     */\n    UA.prototype.findSession = function (request) {\n        return this.sessions[request.call_id + request.from_tag] ||\n            this.sessions[request.call_id + request.to_tag] ||\n            null;\n    };\n    /**\n     * Get the dialog to which the request belongs to, if any.\n     * @private\n     * @param {SIP.IncomingRequest}\n     * @returns {SIP.Dialog|null}\n     */\n    UA.prototype.findDialog = function (request) {\n        return this.dialogs[request.call_id + request.from_tag + request.to_tag] ||\n            this.dialogs[request.call_id + request.to_tag + request.from_tag] ||\n            null;\n    };\n    /**\n     * Get the subscription which has not been confirmed to which the request belongs to, if any\n     * @private\n     * @param {SIP.IncomingRequest}\n     * @returns {SIP.Subscription|null}\n     */\n    UA.prototype.findEarlySubscription = function (request) {\n        return this.earlySubscriptions[request.call_id + request.to_tag + request.getHeader('event')] || null;\n    };\n    function checkAuthenticationFactory(authenticationFactory) {\n        if (!(authenticationFactory instanceof Function)) {\n            return;\n        }\n        if (!authenticationFactory.initialize) {\n            authenticationFactory.initialize = function initialize() {\n                return SIP.Utils.Promise.resolve();\n            };\n        }\n        return authenticationFactory;\n    }\n    /**\n     * Configuration load.\n     * @private\n     * returns {Boolean}\n     */\n    UA.prototype.loadConfig = function (configuration) {\n        // Settings and default values\n        var parameter, value, checked_value, hostportParams, registrarServer, settings = {\n            /* Host address\n            * Value to be set in Via sent_by and host part of Contact FQDN\n            */\n            viaHost: SIP.Utils.createRandomToken(12) + '.invalid',\n            uri: new SIP.URI('sip', 'anonymous.' + SIP.Utils.createRandomToken(6), 'anonymous.invalid', null, null),\n            //Custom Configuration Settings\n            custom: {},\n            //Display name\n            displayName: '',\n            // Password\n            password: null,\n            // Registration parameters\n            registerExpires: 600,\n            register: true,\n            registrarServer: null,\n            // Transport related parameters\n            transportConstructor: __webpack_require__(29)(SIP),\n            transportOptions: {},\n            //string to be inserted into User-Agent request header\n            userAgentString: SIP.C.USER_AGENT,\n            // Session parameters\n            noAnswerTimeout: 60,\n            // Hacks\n            hackViaTcp: false,\n            hackIpInContact: false,\n            hackWssInTransport: false,\n            hackAllowUnregisteredOptionTags: false,\n            // Session Description Handler Options\n            sessionDescriptionHandlerFactoryOptions: {\n                constraints: {},\n                peerConnectionOptions: {}\n            },\n            contactName: SIP.Utils.createRandomToken(8),\n            contactTransport: 'ws',\n            forceRport: false,\n            //autostarting\n            autostart: true,\n            autostop: true,\n            //Reliable Provisional Responses\n            rel100: SIP.C.supported.UNSUPPORTED,\n            // DTMF type: 'info' or 'rtp' (RFC 4733)\n            // RTP Payload Spec: https://tools.ietf.org/html/rfc4733\n            // WebRTC Audio Spec: https://tools.ietf.org/html/rfc7874\n            dtmfType: SIP.C.dtmfType.INFO,\n            // Replaces header (RFC 3891)\n            // http://tools.ietf.org/html/rfc3891\n            replaces: SIP.C.supported.UNSUPPORTED,\n            sessionDescriptionHandlerFactory: __webpack_require__(30)(SIP).defaultFactory,\n            authenticationFactory: checkAuthenticationFactory(function authenticationFactory(ua) {\n                return new SIP.DigestAuthentication(ua);\n            }),\n            allowLegacyNotifications: false,\n            allowOutOfDialogRefers: false,\n        };\n        // Pre-Configuration\n        function aliasUnderscored(parameter, logger) {\n            var underscored = parameter.replace(/([a-z][A-Z])/g, function (m) {\n                return m[0] + '_' + m[1].toLowerCase();\n            });\n            if (parameter === underscored) {\n                return;\n            }\n            var hasParameter = configuration.hasOwnProperty(parameter);\n            if (configuration.hasOwnProperty(underscored)) {\n                logger.warn(underscored + ' is deprecated, please use ' + parameter);\n                if (hasParameter) {\n                    logger.warn(parameter + ' overriding ' + underscored);\n                }\n            }\n            configuration[parameter] = hasParameter ? configuration[parameter] : configuration[underscored];\n        }\n        var configCheck = this.getConfigurationCheck();\n        // Check Mandatory parameters\n        for (parameter in configCheck.mandatory) {\n            aliasUnderscored(parameter, this.logger);\n            if (!configuration.hasOwnProperty(parameter)) {\n                throw new SIP.Exceptions.ConfigurationError(parameter);\n            }\n            else {\n                value = configuration[parameter];\n                checked_value = configCheck.mandatory[parameter](value);\n                if (checked_value !== undefined) {\n                    settings[parameter] = checked_value;\n                }\n                else {\n                    throw new SIP.Exceptions.ConfigurationError(parameter, value);\n                }\n            }\n        }\n        // Check Optional parameters\n        for (parameter in configCheck.optional) {\n            aliasUnderscored(parameter, this.logger);\n            if (configuration.hasOwnProperty(parameter)) {\n                value = configuration[parameter];\n                // If the parameter value is an empty array, but shouldn't be, apply its default value.\n                if (value instanceof Array && value.length === 0) {\n                    continue;\n                }\n                // If the parameter value is null, empty string, or undefined then apply its default value.\n                if (value === null || value === \"\" || value === undefined) {\n                    continue;\n                }\n                // If it's a number with NaN value then also apply its default value.\n                // NOTE: JS does not allow \"value === NaN\", the following does the work:\n                else if (typeof (value) === 'number' && isNaN(value)) {\n                    continue;\n                }\n                checked_value = configCheck.optional[parameter](value);\n                if (checked_value !== undefined) {\n                    settings[parameter] = checked_value;\n                }\n                else {\n                    throw new SIP.Exceptions.ConfigurationError(parameter, value);\n                }\n            }\n        }\n        // Post Configuration Process\n        // Allow passing 0 number as displayName.\n        if (settings.displayName === 0) {\n            settings.displayName = '0';\n        }\n        // Instance-id for GRUU\n        if (!settings.instanceId) {\n            settings.instanceId = SIP.Utils.newUUID();\n        }\n        // sipjsId instance parameter. Static random tag of length 5\n        settings.sipjsId = SIP.Utils.createRandomToken(5);\n        // String containing settings.uri without scheme and user.\n        hostportParams = settings.uri.clone();\n        hostportParams.user = null;\n        settings.hostportParams = hostportParams.toRaw().replace(/^sip:/i, '');\n        /* Check whether authorizationUser is explicitly defined.\n         * Take 'settings.uri.user' value if not.\n         */\n        if (!settings.authorizationUser) {\n            settings.authorizationUser = settings.uri.user;\n        }\n        /* If no 'registrarServer' is set use the 'uri' value without user portion. */\n        if (!settings.registrarServer) {\n            registrarServer = settings.uri.clone();\n            registrarServer.user = null;\n            settings.registrarServer = registrarServer;\n        }\n        // User noAnswerTimeout\n        settings.noAnswerTimeout = settings.noAnswerTimeout * 1000;\n        // Via Host\n        if (settings.hackIpInContact) {\n            if (typeof settings.hackIpInContact === 'boolean') {\n                settings.viaHost = SIP.Utils.getRandomTestNetIP();\n            }\n            else if (typeof settings.hackIpInContact === 'string') {\n                settings.viaHost = settings.hackIpInContact;\n            }\n        }\n        // Contact transport parameter\n        if (settings.hackWssInTransport) {\n            settings.contactTransport = 'wss';\n        }\n        this.contact = {\n            pub_gruu: null,\n            temp_gruu: null,\n            uri: new SIP.URI('sip', settings.contactName, settings.viaHost, null, { transport: settings.contactTransport }),\n            toString: function (options) {\n                options = options || {};\n                var anonymous = options.anonymous || null, outbound = options.outbound || null, contact = '<';\n                if (anonymous) {\n                    contact += (this.temp_gruu || ('sip:anonymous@anonymous.invalid;transport=' + settings.contactTransport)).toString();\n                }\n                else {\n                    contact += (this.pub_gruu || this.uri).toString();\n                }\n                if (outbound) {\n                    contact += ';ob';\n                }\n                contact += '>';\n                return contact;\n            }\n        };\n        var skeleton = {};\n        // Fill the value of the configuration_skeleton\n        for (parameter in settings) {\n            skeleton[parameter] = settings[parameter];\n        }\n        Object.assign(this.configuration, skeleton);\n        this.logger.log('configuration parameters after validation:');\n        for (parameter in settings) {\n            switch (parameter) {\n                case 'uri':\n                case 'registrarServer':\n                case 'sessionDescriptionHandlerFactory':\n                    this.logger.log('· ' + parameter + ': ' + settings[parameter]);\n                    break;\n                case 'password':\n                    this.logger.log('· ' + parameter + ': ' + 'NOT SHOWN');\n                    break;\n                case 'transportConstructor':\n                    this.logger.log('· ' + parameter + ': ' + settings[parameter].name);\n                    break;\n                default:\n                    this.logger.log('· ' + parameter + ': ' + JSON.stringify(settings[parameter]));\n            }\n        }\n        return;\n    };\n    /**\n     * Configuration checker.\n     * @private\n     * @return {Boolean}\n     */\n    UA.prototype.getConfigurationCheck = function () {\n        return {\n            mandatory: {},\n            optional: {\n                uri: function (uri) {\n                    var parsed;\n                    if (!(/^sip:/i).test(uri)) {\n                        uri = SIP.C.SIP + ':' + uri;\n                    }\n                    parsed = SIP.URI.parse(uri);\n                    if (!parsed) {\n                        return;\n                    }\n                    else if (!parsed.user) {\n                        return;\n                    }\n                    else {\n                        return parsed;\n                    }\n                },\n                transportConstructor: function (transportConstructor) {\n                    if (transportConstructor instanceof Function) {\n                        return transportConstructor;\n                    }\n                },\n                transportOptions: function (transportOptions) {\n                    if (typeof transportOptions === 'object') {\n                        return transportOptions;\n                    }\n                },\n                authorizationUser: function (authorizationUser) {\n                    if (SIP.Grammar.parse('\"' + authorizationUser + '\"', 'quoted_string') === -1) {\n                        return;\n                    }\n                    else {\n                        return authorizationUser;\n                    }\n                },\n                displayName: function (displayName) {\n                    if (SIP.Grammar.parse('\"' + displayName + '\"', 'displayName') === -1) {\n                        return;\n                    }\n                    else {\n                        return displayName;\n                    }\n                },\n                dtmfType: function (dtmfType) {\n                    switch (dtmfType) {\n                        case SIP.C.dtmfType.RTP:\n                            return SIP.C.dtmfType.RTP;\n                        case SIP.C.dtmfType.INFO:\n                        // Fall through\n                        default:\n                            return SIP.C.dtmfType.INFO;\n                    }\n                },\n                hackViaTcp: function (hackViaTcp) {\n                    if (typeof hackViaTcp === 'boolean') {\n                        return hackViaTcp;\n                    }\n                },\n                hackIpInContact: function (hackIpInContact) {\n                    if (typeof hackIpInContact === 'boolean') {\n                        return hackIpInContact;\n                    }\n                    else if (typeof hackIpInContact === 'string' && SIP.Grammar.parse(hackIpInContact, 'host') !== -1) {\n                        return hackIpInContact;\n                    }\n                },\n                hackWssInTransport: function (hackWssInTransport) {\n                    if (typeof hackWssInTransport === 'boolean') {\n                        return hackWssInTransport;\n                    }\n                },\n                hackAllowUnregisteredOptionTags: function (hackAllowUnregisteredOptionTags) {\n                    if (typeof hackAllowUnregisteredOptionTags === 'boolean') {\n                        return hackAllowUnregisteredOptionTags;\n                    }\n                },\n                contactTransport: function (contactTransport) {\n                    if (typeof contactTransport === 'string') {\n                        return contactTransport;\n                    }\n                },\n                forceRport: function (forceRport) {\n                    if (typeof forceRport === 'boolean') {\n                        return forceRport;\n                    }\n                },\n                instanceId: function (instanceId) {\n                    if (typeof instanceId !== 'string') {\n                        return;\n                    }\n                    if ((/^uuid:/i.test(instanceId))) {\n                        instanceId = instanceId.substr(5);\n                    }\n                    if (SIP.Grammar.parse(instanceId, 'uuid') === -1) {\n                        return;\n                    }\n                    else {\n                        return instanceId;\n                    }\n                },\n                noAnswerTimeout: function (noAnswerTimeout) {\n                    var value;\n                    if (SIP.Utils.isDecimal(noAnswerTimeout)) {\n                        value = Number(noAnswerTimeout);\n                        if (value > 0) {\n                            return value;\n                        }\n                    }\n                },\n                password: function (password) {\n                    return String(password);\n                },\n                rel100: function (rel100) {\n                    if (rel100 === SIP.C.supported.REQUIRED) {\n                        return SIP.C.supported.REQUIRED;\n                    }\n                    else if (rel100 === SIP.C.supported.SUPPORTED) {\n                        return SIP.C.supported.SUPPORTED;\n                    }\n                    else {\n                        return SIP.C.supported.UNSUPPORTED;\n                    }\n                },\n                replaces: function (replaces) {\n                    if (replaces === SIP.C.supported.REQUIRED) {\n                        return SIP.C.supported.REQUIRED;\n                    }\n                    else if (replaces === SIP.C.supported.SUPPORTED) {\n                        return SIP.C.supported.SUPPORTED;\n                    }\n                    else {\n                        return SIP.C.supported.UNSUPPORTED;\n                    }\n                },\n                register: function (register) {\n                    if (typeof register === 'boolean') {\n                        return register;\n                    }\n                },\n                registerExpires: function (registerExpires) {\n                    var value;\n                    if (SIP.Utils.isDecimal(registerExpires)) {\n                        value = Number(registerExpires);\n                        if (value > 0) {\n                            return value;\n                        }\n                    }\n                },\n                registrarServer: function (registrarServer) {\n                    var parsed;\n                    if (typeof registrarServer !== 'string') {\n                        return;\n                    }\n                    if (!/^sip:/i.test(registrarServer)) {\n                        registrarServer = SIP.C.SIP + ':' + registrarServer;\n                    }\n                    parsed = SIP.URI.parse(registrarServer);\n                    if (!parsed) {\n                        return;\n                    }\n                    else if (parsed.user) {\n                        return;\n                    }\n                    else {\n                        return parsed;\n                    }\n                },\n                userAgentString: function (userAgentString) {\n                    if (typeof userAgentString === 'string') {\n                        return userAgentString;\n                    }\n                },\n                autostart: function (autostart) {\n                    if (typeof autostart === 'boolean') {\n                        return autostart;\n                    }\n                },\n                autostop: function (autostop) {\n                    if (typeof autostop === 'boolean') {\n                        return autostop;\n                    }\n                },\n                sessionDescriptionHandlerFactory: function (sessionDescriptionHandlerFactory) {\n                    if (sessionDescriptionHandlerFactory instanceof Function) {\n                        return sessionDescriptionHandlerFactory;\n                    }\n                },\n                sessionDescriptionHandlerFactoryOptions: function (options) {\n                    if (typeof options === 'object') {\n                        return options;\n                    }\n                },\n                authenticationFactory: checkAuthenticationFactory,\n                allowLegacyNotifications: function (allowLegacyNotifications) {\n                    if (typeof allowLegacyNotifications === 'boolean') {\n                        return allowLegacyNotifications;\n                    }\n                },\n                custom: function (custom) {\n                    if (typeof custom === 'object') {\n                        return custom;\n                    }\n                },\n                contactName: function (contactName) {\n                    if (typeof contactName === 'string') {\n                        return contactName;\n                    }\n                },\n            }\n        };\n    };\n    UA.C = C;\n    SIP.UA = UA;\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(28)))\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * @fileoverview Transport\n */\n/**\n * @augments SIP\n * @class Transport\n * @param {Object} options\n */\nmodule.exports = function (SIP) {\n    var Transport, C = {\n        // Transport status codes\n        STATUS_CONNECTING: 0,\n        STATUS_OPEN: 1,\n        STATUS_CLOSING: 2,\n        STATUS_CLOSED: 3,\n    };\n    var WebSocket = (global.window || global).WebSocket;\n    /**\n     * Compute an amount of time in seconds to wait before sending another\n     * keep-alive.\n     * @returns {Number}\n     */\n    function computeKeepAliveTimeout(upperBound) {\n        var lowerBound = upperBound * 0.8;\n        return 1000 * (Math.random() * (upperBound - lowerBound) + lowerBound);\n    }\n    Transport = function (logger, options) {\n        options = SIP.Utils.defaultOptions({}, options);\n        this.logger = logger;\n        this.ws = null;\n        this.server = null;\n        this.connectionPromise = null;\n        this.connectDeferredResolve = null;\n        this.connectionTimeout = null;\n        this.disconnectionPromise = null;\n        this.disconnectDeferredResolve = null;\n        this.boundOnOpen = null;\n        this.boundOnMessage = null;\n        this.boundOnClose = null;\n        this.boundOnError = null;\n        this.reconnectionAttempts = 0;\n        this.reconnectTimer = null;\n        // Keep alive\n        this.keepAliveInterval = null;\n        this.keepAliveDebounceTimeout = null;\n        this.status = C.STATUS_CONNECTING;\n        this.configuration = {};\n        this.loadConfig(options);\n    };\n    Transport.prototype = Object.create(SIP.Transport.prototype, {\n        /**\n        *\n        * @returns {Boolean}\n        */\n        isConnected: { writable: true, value: function isConnected() {\n                return this.status === C.STATUS_OPEN;\n            } },\n        /**\n         * Send a message.\n         * @param {SIP.OutgoingRequest|String} msg\n         * @param {Object} [options]\n         * @returns {Promise}\n         */\n        sendPromise: { writable: true, value: function sendPromise(msg, options) {\n                options = options || {};\n                if (!this.statusAssert(C.STATUS_OPEN, options.force)) {\n                    this.onError('unable to send message - WebSocket not open');\n                    return SIP.Utils.Promise.reject();\n                }\n                var message = msg.toString();\n                if (this.ws) {\n                    if (this.configuration.traceSip === true) {\n                        this.logger.log('sending WebSocket message:\\n\\n' + message + '\\n');\n                    }\n                    this.ws.send(message);\n                    return SIP.Utils.Promise.resolve({ msg: message });\n                }\n                else {\n                    this.onError('unable to send message - WebSocket does not exist');\n                    return SIP.Utils.Promise.reject();\n                }\n            } },\n        /**\n        * Disconnect socket.\n        */\n        disconnectPromise: { writable: true, value: function disconnectPromise(options) {\n                if (this.disconnectionPromise) {\n                    return this.disconnectionPromise;\n                }\n                options = options || {};\n                if (!this.statusTransition(C.STATUS_CLOSING, options.force)) {\n                    return SIP.Utils.Promise.reject('Failed status transition - attempted to disconnect a socket that was not open');\n                }\n                this.disconnectionPromise = new SIP.Utils.Promise(function (resolve, reject) {\n                    this.disconnectDeferredResolve = resolve;\n                    if (this.reconnectTimer) {\n                        SIP.Timers.clearTimeout(this.reconnectTimer);\n                        this.reconnectTimer = null;\n                    }\n                    if (this.ws) {\n                        this.stopSendingKeepAlives();\n                        this.logger.log('closing WebSocket ' + this.server.ws_uri);\n                        this.ws.close(options.code, options.reason);\n                    }\n                    else {\n                        reject('Attempted to disconnect but the websocket doesn\\'t exist');\n                    }\n                }.bind(this));\n                return this.disconnectionPromise;\n            } },\n        /**\n        * Connect socket.\n        */\n        connectPromise: { writable: true, value: function connectPromise(options) {\n                if (this.connectionPromise) {\n                    return this.connectionPromise;\n                }\n                options = options || {};\n                this.server = this.server || this.getNextWsServer(options.force);\n                this.connectionPromise = new SIP.Utils.Promise(function (resolve, reject) {\n                    if ((this.status === C.STATUS_OPEN || this.status === C.STATUS_CLOSING) && !options.force) {\n                        this.logger.warn('WebSocket ' + this.server.ws_uri + ' is already connected');\n                        reject('Failed status check - attempted to open a connection but already open/closing');\n                        return;\n                    }\n                    this.connectDeferredResolve = resolve;\n                    this.status = C.STATUS_CONNECTING;\n                    this.logger.log('connecting to WebSocket ' + this.server.ws_uri);\n                    this.disposeWs();\n                    try {\n                        this.ws = new WebSocket(this.server.ws_uri, 'sip');\n                    }\n                    catch (e) {\n                        this.ws = null;\n                        this.status = C.STATUS_CLOSED; // force status to closed in error case\n                        this.onError('error connecting to WebSocket ' + this.server.ws_uri + ':' + e);\n                        reject('Failed to create a websocket');\n                        return;\n                    }\n                    if (!this.ws) {\n                        reject('Unexpected instance websocket not set');\n                        return;\n                    }\n                    this.connectionTimeout = SIP.Timers.setTimeout(function () {\n                        this.onError('took too long to connect - exceeded time set in configuration.connectionTimeout: ' + this.configuration.connectionTimeout + 's');\n                    }.bind(this), this.configuration.connectionTimeout * 1000);\n                    this.boundOnOpen = this.onOpen.bind(this);\n                    this.boundOnMessage = this.onMessage.bind(this);\n                    this.boundOnClose = this.onClose.bind(this);\n                    this.boundOnError = this.onError.bind(this);\n                    this.ws.addEventListener('open', this.boundOnOpen);\n                    this.ws.addEventListener('message', this.boundOnMessage);\n                    this.ws.addEventListener('close', this.boundOnClose);\n                    this.ws.addEventListener('error', this.boundOnError);\n                }.bind(this));\n                return this.connectionPromise;\n            } },\n        // Transport Event Handlers\n        /**\n        * @event\n        * @param {event} e\n        */\n        onOpen: { writable: true, value: function onOpen() {\n                this.status = C.STATUS_OPEN; // quietly force status to open\n                this.emit('connected');\n                SIP.Timers.clearTimeout(this.connectionTimeout);\n                this.logger.log('WebSocket ' + this.server.ws_uri + ' connected');\n                // Clear reconnectTimer since we are not disconnected\n                if (this.reconnectTimer !== null) {\n                    SIP.Timers.clearTimeout(this.reconnectTimer);\n                    this.reconnectTimer = null;\n                }\n                // Reset reconnectionAttempts\n                this.reconnectionAttempts = 0;\n                // Reset disconnection promise so we can disconnect from a fresh state\n                this.disconnectionPromise = null;\n                this.disconnectDeferredResolve = null;\n                // Start sending keep-alives\n                this.startSendingKeepAlives();\n                if (this.connectDeferredResolve) {\n                    this.connectDeferredResolve({ overrideEvent: true });\n                }\n                else {\n                    this.logger.warn('Unexpected websocket.onOpen with no connectDeferredResolve');\n                }\n            } },\n        /**\n        * @event\n        * @param {event} e\n        */\n        onClose: { writable: true, value: function onClose(e) {\n                this.logger.log('WebSocket disconnected (code: ' + e.code + (e.reason ? '| reason: ' + e.reason : '') + ')');\n                this.emit('disconnected', { code: e.code, reason: e.reason });\n                if (this.status !== C.STATUS_CLOSING) {\n                    this.logger.warn('WebSocket abrupt disconnection');\n                    this.emit('transportError');\n                }\n                this.stopSendingKeepAlives();\n                // Clean up connection variables so we can connect again from a fresh state\n                SIP.Timers.clearTimeout(this.connectionTimeout);\n                this.connectionTimeout = null;\n                this.connectionPromise = null;\n                this.connectDeferredResolve = null;\n                // Check whether the user requested to close.\n                if (this.disconnectDeferredResolve) {\n                    this.disconnectDeferredResolve({ overrideEvent: true });\n                    this.statusTransition(C.STATUS_CLOSED);\n                    this.disconnectDeferredResolve = null;\n                    return;\n                }\n                this.status = C.STATUS_CLOSED; // quietly force status to closed\n                this.reconnect();\n            } },\n        /**\n        * Removes event listeners and clears the instance ws\n        * @private\n        * @param {event} e\n        */\n        disposeWs: { writable: true, value: function disposeWs() {\n                if (this.ws) {\n                    this.ws.removeEventListener('open', this.boundOnOpen);\n                    this.ws.removeEventListener('message', this.boundOnMessage);\n                    this.ws.removeEventListener('close', this.boundOnClose);\n                    this.ws.removeEventListener('error', this.boundOnError);\n                    this.boundOnOpen = null;\n                    this.boundOnMessage = null;\n                    this.boundOnClose = null;\n                    this.boundOnError = null;\n                    this.ws = null;\n                }\n            } },\n        /**\n        * @event\n        * @param {event} e\n        */\n        onMessage: { writable: true, value: function onMessage(e) {\n                var data = e.data;\n                // CRLF Keep Alive response from server. Clear our keep alive timeout.\n                if (/^(\\r\\n)+$/.test(data)) {\n                    this.clearKeepAliveTimeout();\n                    if (this.configuration.traceSip === true) {\n                        this.logger.log('received WebSocket message with CRLF Keep Alive response');\n                    }\n                    return;\n                }\n                else if (!data) {\n                    this.logger.warn('received empty message, message discarded');\n                    return;\n                }\n                // WebSocket binary message.\n                else if (typeof data !== 'string') {\n                    try {\n                        data = String.fromCharCode.apply(null, new Uint8Array(data));\n                    }\n                    catch (err) {\n                        this.logger.warn('received WebSocket binary message failed to be converted into string, message discarded');\n                        return;\n                    }\n                    if (this.configuration.traceSip === true) {\n                        this.logger.log('received WebSocket binary message:\\n\\n' + data + '\\n');\n                    }\n                }\n                // WebSocket text message.\n                else {\n                    if (this.configuration.traceSip === true) {\n                        this.logger.log('received WebSocket text message:\\n\\n' + data + '\\n');\n                    }\n                }\n                this.emit('message', data);\n            } },\n        /**\n        * @event\n        * @param {event} e\n        */\n        onError: { writable: true, value: function onError(e) {\n                this.logger.warn('Transport error: ' + e);\n                this.emit('transportError');\n            } },\n        /**\n        * Reconnection attempt logic.\n        * @private\n        */\n        reconnect: { writable: true, value: function reconnect() {\n                if (this.reconnectionAttempts > 0) {\n                    this.logger.log('Reconnection attempt ' + this.reconnectionAttempts + ' failed');\n                }\n                if (this.noAvailableServers()) {\n                    this.logger.warn('no available ws servers left - going to closed state');\n                    this.status = C.STATUS_CLOSED;\n                    this.emit('closed');\n                    this.resetServerErrorStatus();\n                    return;\n                }\n                if (this.isConnected()) {\n                    this.logger.warn('attempted to reconnect while connected - forcing disconnect');\n                    this.disconnect({ force: true });\n                }\n                this.reconnectionAttempts += 1;\n                if (this.reconnectionAttempts > this.configuration.maxReconnectionAttempts) {\n                    this.logger.warn('maximum reconnection attempts for WebSocket ' + this.server.ws_uri);\n                    this.logger.log('transport ' + this.server.ws_uri + ' failed | connection state set to \\'error\\'');\n                    this.server.isError = true;\n                    this.emit('transportError');\n                    this.server = this.getNextWsServer();\n                    this.reconnectionAttempts = 0;\n                    this.reconnect();\n                }\n                else {\n                    this.logger.log('trying to reconnect to WebSocket ' + this.server.ws_uri + ' (reconnection attempt ' + this.reconnectionAttempts + ')');\n                    this.reconnectTimer = SIP.Timers.setTimeout(function () {\n                        this.connect();\n                        this.reconnectTimer = null;\n                    }.bind(this), (this.reconnectionAttempts === 1) ? 0 : this.configuration.reconnectionTimeout * 1000);\n                }\n            } },\n        /**\n        * Resets the error state of all servers in the configuration\n        */\n        resetServerErrorStatus: { writable: true, value: function resetServerErrorStatus() {\n                var idx, length = this.configuration.wsServers.length;\n                for (idx = 0; idx < length; idx++) {\n                    this.configuration.wsServers[idx].isError = false;\n                }\n            } },\n        /**\n        * Retrieve the next server to which connect.\n        * @private\n        * @param {Boolean} force allows bypass of server error status checking\n        * @returns {Object} wsServer\n        */\n        getNextWsServer: { writable: true, value: function getNextWsServer(force) {\n                if (this.noAvailableServers()) {\n                    this.logger.warn('attempted to get next ws server but there are no available ws servers left');\n                    return;\n                }\n                // Order servers by weight\n                var idx, length, wsServer, candidates = [];\n                length = this.configuration.wsServers.length;\n                for (idx = 0; idx < length; idx++) {\n                    wsServer = this.configuration.wsServers[idx];\n                    if (wsServer.isError && !force) {\n                        continue;\n                    }\n                    else if (candidates.length === 0) {\n                        candidates.push(wsServer);\n                    }\n                    else if (wsServer.weight > candidates[0].weight) {\n                        candidates = [wsServer];\n                    }\n                    else if (wsServer.weight === candidates[0].weight) {\n                        candidates.push(wsServer);\n                    }\n                }\n                idx = Math.floor(Math.random() * candidates.length);\n                return candidates[idx];\n            } },\n        /**\n        * Checks all configuration servers, returns true if all of them have isError: true and false otherwise\n        * @private\n        * @returns {Boolean}\n        */\n        noAvailableServers: { writable: true, value: function noAvailableServers() {\n                var server;\n                for (server in this.configuration.wsServers) {\n                    if (!this.configuration.wsServers[server].isError) {\n                        return false;\n                    }\n                }\n                return true;\n            } },\n        //==============================\n        // KeepAlive Stuff\n        //==============================\n        /**\n         * Send a keep-alive (a double-CRLF sequence).\n         * @private\n         * @returns {Boolean}\n         */\n        sendKeepAlive: { writable: true, value: function sendKeepAlive() {\n                if (this.keepAliveDebounceTimeout) {\n                    // We already have an outstanding keep alive, do not send another.\n                    return;\n                }\n                this.keepAliveDebounceTimeout = SIP.Timers.setTimeout(function () {\n                    this.emit('keepAliveDebounceTimeout');\n                    this.clearKeepAliveTimeout();\n                }.bind(this), this.configuration.keepAliveDebounce * 1000);\n                return this.send('\\r\\n\\r\\n');\n            } },\n        clearKeepAliveTimeout: { writable: true, value: function clearKeepAliveTimeout() {\n                SIP.Timers.clearTimeout(this.keepAliveDebounceTimeout);\n                this.keepAliveDebounceTimeout = null;\n            } },\n        /**\n         * Start sending keep-alives.\n         * @private\n         */\n        startSendingKeepAlives: { writable: true, value: function startSendingKeepAlives() {\n                if (this.configuration.keepAliveInterval && !this.keepAliveInterval) {\n                    this.keepAliveInterval = SIP.Timers.setInterval(function () {\n                        this.sendKeepAlive();\n                        this.startSendingKeepAlives();\n                    }.bind(this), computeKeepAliveTimeout(this.configuration.keepAliveInterval));\n                }\n            } },\n        /**\n         * Stop sending keep-alives.\n         * @private\n         */\n        stopSendingKeepAlives: { writable: true, value: function stopSendingKeepAlives() {\n                SIP.Timers.clearInterval(this.keepAliveInterval);\n                SIP.Timers.clearTimeout(this.keepAliveDebounceTimeout);\n                this.keepAliveInterval = null;\n                this.keepAliveDebounceTimeout = null;\n            } },\n        //==============================\n        // Status Stuff\n        //==============================\n        /**\n        * Checks given status against instance current status. Returns true if they match\n        * @private\n        * @param {Number} status\n        * @param {Boolean} [force]\n        * @returns {Boolean}\n        */\n        statusAssert: { writable: true, value: function statusAssert(status, force) {\n                if (status === this.status) {\n                    return true;\n                }\n                else {\n                    if (force) {\n                        this.logger.warn('Attempted to assert ' + Object.keys(C)[this.status] + ' as ' + Object.keys(C)[status] + '- continuing with option: \\'force\\'');\n                        return true;\n                    }\n                    else {\n                        this.logger.warn('Tried to assert ' + Object.keys(C)[status] + ' but is currently ' + Object.keys(C)[this.status]);\n                        return false;\n                    }\n                }\n            } },\n        /**\n        * Transitions the status. Checks for legal transition via assertion beforehand\n        * @private\n        * @param {Number} status\n        * @param {Boolean} [force]\n        * @returns {Boolean}\n        */\n        statusTransition: { writable: true, value: function statusTransition(status, force) {\n                this.logger.log('Attempting to transition status from ' + Object.keys(C)[this.status] + ' to ' + Object.keys(C)[status]);\n                if ((status === C.STATUS_OPEN && this.statusAssert(C.STATUS_CONNECTING, force)) ||\n                    (status === C.STATUS_CLOSING && this.statusAssert(C.STATUS_OPEN, force)) ||\n                    (status === C.STATUS_CLOSED && this.statusAssert(C.STATUS_CLOSING, force))) {\n                    this.status = status;\n                    return true;\n                }\n                else {\n                    this.logger.warn('Status transition failed - result: no-op - reason: either gave an nonexistent status or attempted illegal transition');\n                    return false;\n                }\n            } },\n        //==============================\n        // Configuration Handling\n        //==============================\n        /**\n         * Configuration load.\n         * @private\n         * returns {Boolean}\n         */\n        loadConfig: { writable: true, value: function loadConfig(configuration) {\n                var parameter, value, checked_value, settings = {\n                    wsServers: [{\n                            scheme: 'WSS',\n                            sip_uri: '<sip:edge.sip.onsip.com;transport=ws;lr>',\n                            weight: 0,\n                            ws_uri: 'wss://edge.sip.onsip.com',\n                            isError: false\n                        }],\n                    connectionTimeout: 5,\n                    maxReconnectionAttempts: 3,\n                    reconnectionTimeout: 4,\n                    keepAliveInterval: 0,\n                    keepAliveDebounce: 10,\n                    // Logging\n                    traceSip: false,\n                };\n                // Pre-Configuration\n                function aliasUnderscored(parameter, logger) {\n                    var underscored = parameter.replace(/([a-z][A-Z])/g, function (m) {\n                        return m[0] + '_' + m[1].toLowerCase();\n                    });\n                    if (parameter === underscored) {\n                        return;\n                    }\n                    var hasParameter = configuration.hasOwnProperty(parameter);\n                    if (configuration.hasOwnProperty(underscored)) {\n                        logger.warn(underscored + ' is deprecated, please use ' + parameter);\n                        if (hasParameter) {\n                            logger.warn(parameter + ' overriding ' + underscored);\n                        }\n                    }\n                    configuration[parameter] = hasParameter ? configuration[parameter] : configuration[underscored];\n                }\n                var configCheck = this.getConfigurationCheck();\n                // Check Mandatory parameters\n                for (parameter in configCheck.mandatory) {\n                    aliasUnderscored(parameter, this.logger);\n                    if (!configuration.hasOwnProperty(parameter)) {\n                        throw new SIP.Exceptions.ConfigurationError(parameter);\n                    }\n                    else {\n                        value = configuration[parameter];\n                        checked_value = configCheck.mandatory[parameter](value);\n                        if (checked_value !== undefined) {\n                            settings[parameter] = checked_value;\n                        }\n                        else {\n                            throw new SIP.Exceptions.ConfigurationError(parameter, value);\n                        }\n                    }\n                }\n                // Check Optional parameters\n                for (parameter in configCheck.optional) {\n                    aliasUnderscored(parameter, this.logger);\n                    if (configuration.hasOwnProperty(parameter)) {\n                        value = configuration[parameter];\n                        // If the parameter value is an empty array, but shouldn't be, apply its default value.\n                        if (value instanceof Array && value.length === 0) {\n                            continue;\n                        }\n                        // If the parameter value is null, empty string, or undefined then apply its default value.\n                        if (value === null || value === '' || value === undefined) {\n                            continue;\n                        }\n                        // If it's a number with NaN value then also apply its default value.\n                        // NOTE: JS does not allow \"value === NaN\", the following does the work:\n                        else if (typeof (value) === 'number' && isNaN(value)) {\n                            continue;\n                        }\n                        checked_value = configCheck.optional[parameter](value);\n                        if (checked_value !== undefined) {\n                            settings[parameter] = checked_value;\n                        }\n                        else {\n                            throw new SIP.Exceptions.ConfigurationError(parameter, value);\n                        }\n                    }\n                }\n                var skeleton = {};\n                // Fill the value of the configuration_skeleton\n                for (parameter in settings) {\n                    skeleton[parameter] = {\n                        value: settings[parameter],\n                    };\n                }\n                Object.defineProperties(this.configuration, skeleton);\n                this.logger.log('configuration parameters after validation:');\n                for (parameter in settings) {\n                    this.logger.log('· ' + parameter + ': ' + JSON.stringify(settings[parameter]));\n                }\n                return;\n            } },\n        /**\n         * Configuration checker.\n         * @private\n         * @return {Boolean}\n         */\n        getConfigurationCheck: { writable: true, value: function getConfigurationCheck() {\n                return {\n                    mandatory: {},\n                    optional: {\n                        //Note: this function used to call 'this.logger.error' but calling 'this' with anything here is invalid\n                        wsServers: function (wsServers) {\n                            var idx, length, url;\n                            /* Allow defining wsServers parameter as:\n                             *  String: \"host\"\n                             *  Array of Strings: [\"host1\", \"host2\"]\n                             *  Array of Objects: [{ws_uri:\"host1\", weight:1}, {ws_uri:\"host2\", weight:0}]\n                             *  Array of Objects and Strings: [{ws_uri:\"host1\"}, \"host2\"]\n                             */\n                            if (typeof wsServers === 'string') {\n                                wsServers = [{ ws_uri: wsServers }];\n                            }\n                            else if (wsServers instanceof Array) {\n                                length = wsServers.length;\n                                for (idx = 0; idx < length; idx++) {\n                                    if (typeof wsServers[idx] === 'string') {\n                                        wsServers[idx] = { ws_uri: wsServers[idx] };\n                                    }\n                                }\n                            }\n                            else {\n                                return;\n                            }\n                            if (wsServers.length === 0) {\n                                return false;\n                            }\n                            length = wsServers.length;\n                            for (idx = 0; idx < length; idx++) {\n                                if (!wsServers[idx].ws_uri) {\n                                    return;\n                                }\n                                if (wsServers[idx].weight && !Number(wsServers[idx].weight)) {\n                                    return;\n                                }\n                                url = SIP.Grammar.parse(wsServers[idx].ws_uri, 'absoluteURI');\n                                if (url === -1) {\n                                    return;\n                                }\n                                else if (['wss', 'ws', 'udp'].indexOf(url.scheme) < 0) {\n                                    return;\n                                }\n                                else {\n                                    wsServers[idx].sip_uri = '<sip:' + url.host + (url.port ? ':' + url.port : '') + ';transport=' + url.scheme.replace(/^wss$/i, 'ws') + ';lr>';\n                                    if (!wsServers[idx].weight) {\n                                        wsServers[idx].weight = 0;\n                                    }\n                                    wsServers[idx].isError = false;\n                                    wsServers[idx].scheme = url.scheme.toUpperCase();\n                                }\n                            }\n                            return wsServers;\n                        },\n                        keepAliveInterval: function (keepAliveInterval) {\n                            var value;\n                            if (SIP.Utils.isDecimal(keepAliveInterval)) {\n                                value = Number(keepAliveInterval);\n                                if (value > 0) {\n                                    return value;\n                                }\n                            }\n                        },\n                        keepAliveDebounce: function (keepAliveDebounce) {\n                            var value;\n                            if (SIP.Utils.isDecimal(keepAliveDebounce)) {\n                                value = Number(keepAliveDebounce);\n                                if (value > 0) {\n                                    return value;\n                                }\n                            }\n                        },\n                        traceSip: function (traceSip) {\n                            if (typeof traceSip === 'boolean') {\n                                return traceSip;\n                            }\n                        },\n                        connectionTimeout: function (connectionTimeout) {\n                            var value;\n                            if (SIP.Utils.isDecimal(connectionTimeout)) {\n                                value = Number(connectionTimeout);\n                                if (value > 0) {\n                                    return value;\n                                }\n                            }\n                        },\n                        maxReconnectionAttempts: function (maxReconnectionAttempts) {\n                            var value;\n                            if (SIP.Utils.isDecimal(maxReconnectionAttempts)) {\n                                value = Number(maxReconnectionAttempts);\n                                if (value >= 0) {\n                                    return value;\n                                }\n                            }\n                        },\n                        reconnectionTimeout: function (reconnectionTimeout) {\n                            var value;\n                            if (SIP.Utils.isDecimal(reconnectionTimeout)) {\n                                value = Number(reconnectionTimeout);\n                                if (value > 0) {\n                                    return value;\n                                }\n                            }\n                        }\n                    }\n                };\n            } }\n    });\n    Transport.C = C;\n    SIP.Web.Transport = Transport;\n    return Transport;\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(28)))\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * @fileoverview SessionDescriptionHandler\n */\n/* SessionDescriptionHandler\n * @class PeerConnection helper Class.\n * @param {SIP.Session} session\n * @param {Object} [options]\n */\nmodule.exports = function (SIP) {\n    // Constructor\n    var SessionDescriptionHandler = function (logger, observer, options) {\n        // TODO: Validate the options\n        this.options = options || {};\n        this.logger = logger;\n        this.observer = observer;\n        this.dtmfSender = null;\n        this.shouldAcquireMedia = true;\n        this.CONTENT_TYPE = 'application/sdp';\n        this.C = {};\n        this.C.DIRECTION = {\n            NULL: null,\n            SENDRECV: \"sendrecv\",\n            SENDONLY: \"sendonly\",\n            RECVONLY: \"recvonly\",\n            INACTIVE: \"inactive\"\n        };\n        this.logger.log('SessionDescriptionHandlerOptions: ' + JSON.stringify(this.options));\n        this.direction = this.C.DIRECTION.NULL;\n        this.modifiers = this.options.modifiers || [];\n        if (!Array.isArray(this.modifiers)) {\n            this.modifiers = [this.modifiers];\n        }\n        var environment = global.window || global;\n        this.WebRTC = {\n            MediaStream: environment.MediaStream,\n            getUserMedia: environment.navigator.mediaDevices.getUserMedia.bind(environment.navigator.mediaDevices),\n            RTCPeerConnection: environment.RTCPeerConnection\n        };\n        this.iceGatheringDeferred = null;\n        this.iceGatheringTimeout = false;\n        this.iceGatheringTimer = null;\n        this.initPeerConnection(this.options.peerConnectionOptions);\n        this.constraints = this.checkAndDefaultConstraints(this.options.constraints);\n    };\n    /**\n     * @param {SIP.Session} session\n     * @param {Object} [options]\n     */\n    SessionDescriptionHandler.defaultFactory = function defaultFactory(session, options) {\n        var logger = session.ua.getLogger('sip.invitecontext.sessionDescriptionHandler', session.id);\n        var SessionDescriptionHandlerObserver = __webpack_require__(31);\n        var observer = new SessionDescriptionHandlerObserver(session, options);\n        return new SessionDescriptionHandler(logger, observer, options);\n    };\n    SessionDescriptionHandler.prototype = Object.create(SIP.SessionDescriptionHandler.prototype, {\n        // Functions the sesssion can use\n        /**\n         * Destructor\n         */\n        close: { writable: true, value: function () {\n                this.logger.log('closing PeerConnection');\n                // have to check signalingState since this.close() gets called multiple times\n                if (this.peerConnection && this.peerConnection.signalingState !== 'closed') {\n                    if (this.peerConnection.getSenders) {\n                        this.peerConnection.getSenders().forEach(function (sender) {\n                            if (sender.track) {\n                                sender.track.stop();\n                            }\n                        });\n                    }\n                    else {\n                        this.logger.warn('Using getLocalStreams which is deprecated');\n                        this.peerConnection.getLocalStreams().forEach(function (stream) {\n                            stream.getTracks().forEach(function (track) {\n                                track.stop();\n                            });\n                        });\n                    }\n                    if (this.peerConnection.getReceivers) {\n                        this.peerConnection.getReceivers().forEach(function (receiver) {\n                            if (receiver.track) {\n                                receiver.track.stop();\n                            }\n                        });\n                    }\n                    else {\n                        this.logger.warn('Using getRemoteStreams which is deprecated');\n                        this.peerConnection.getRemoteStreams().forEach(function (stream) {\n                            stream.getTracks().forEach(function (track) {\n                                track.stop();\n                            });\n                        });\n                    }\n                    this.resetIceGatheringComplete();\n                    this.peerConnection.close();\n                }\n            } },\n        /**\n         * Gets the local description from the underlying media implementation\n         * @param {Object} [options] Options object to be used by getDescription\n         * @param {MediaStreamConstraints} [options.constraints] MediaStreamConstraints https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints\n         * @param {Object} [options.peerConnectionOptions] If this is set it will recreate the peer connection with the new options\n         * @param {Array} [modifiers] Array with one time use description modifiers\n         * @returns {Promise} Promise that resolves with the local description to be used for the session\n         */\n        getDescription: { writable: true, value: function (options, modifiers) {\n                options = options || {};\n                if (options.peerConnectionOptions) {\n                    this.initPeerConnection(options.peerConnectionOptions);\n                }\n                // Merge passed constraints with saved constraints and save\n                var newConstraints = Object.assign({}, this.constraints, options.constraints);\n                newConstraints = this.checkAndDefaultConstraints(newConstraints);\n                if (JSON.stringify(newConstraints) !== JSON.stringify(this.constraints)) {\n                    this.constraints = newConstraints;\n                    this.shouldAcquireMedia = true;\n                }\n                modifiers = modifiers || [];\n                if (!Array.isArray(modifiers)) {\n                    modifiers = [modifiers];\n                }\n                modifiers = modifiers.concat(this.modifiers);\n                return SIP.Utils.Promise.resolve()\n                    .then(function () {\n                    if (this.shouldAcquireMedia) {\n                        return this.acquire(this.constraints).then(function () {\n                            this.shouldAcquireMedia = false;\n                        }.bind(this));\n                    }\n                }.bind(this))\n                    .then(function () {\n                    return this.createOfferOrAnswer(options.RTCOfferOptions, modifiers);\n                }.bind(this))\n                    .then(function (description) {\n                    this.emit('getDescription', description);\n                    return {\n                        body: description.sdp,\n                        contentType: this.CONTENT_TYPE\n                    };\n                }.bind(this));\n            } },\n        /**\n         * Check if the Session Description Handler can handle the Content-Type described by a SIP Message\n         * @param {String} contentType The content type that is in the SIP Message\n         * @returns {boolean}\n         */\n        hasDescription: { writable: true, value: function hasDescription(contentType) {\n                return contentType === this.CONTENT_TYPE;\n            } },\n        /**\n         * The modifier that should be used when the session would like to place the call on hold\n         * @param {String} [sdp] The description that will be modified\n         * @returns {Promise} Promise that resolves with modified SDP\n         */\n        holdModifier: { writable: true, value: function holdModifier(description) {\n                if (!(/a=(sendrecv|sendonly|recvonly|inactive)/).test(description.sdp)) {\n                    description.sdp = description.sdp.replace(/(m=[^\\r]*\\r\\n)/g, '$1a=sendonly\\r\\n');\n                }\n                else {\n                    description.sdp = description.sdp.replace(/a=sendrecv\\r\\n/g, 'a=sendonly\\r\\n');\n                    description.sdp = description.sdp.replace(/a=recvonly\\r\\n/g, 'a=inactive\\r\\n');\n                }\n                return SIP.Utils.Promise.resolve(description);\n            } },\n        /**\n         * Set the remote description to the underlying media implementation\n         * @param {String} sessionDescription The description provided by a SIP message to be set on the media implementation\n         * @param {Object} [options] Options object to be used by getDescription\n         * @param {MediaStreamConstraints} [options.constraints] MediaStreamConstraints https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints\n         * @param {Object} [options.peerConnectionOptions] If this is set it will recreate the peer connection with the new options\n         * @param {Array} [modifiers] Array with one time use description modifiers\n         * @returns {Promise} Promise that resolves once the description is set\n         */\n        setDescription: { writable: true, value: function setDescription(sessionDescription, options, modifiers) {\n                var _this = this;\n                var self = this;\n                options = options || {};\n                if (options.peerConnectionOptions) {\n                    this.initPeerConnection(options.peerConnectionOptions);\n                }\n                modifiers = modifiers || [];\n                if (!Array.isArray(modifiers)) {\n                    modifiers = [modifiers];\n                }\n                modifiers = modifiers.concat(this.modifiers);\n                var description = {\n                    type: this.hasOffer('local') ? 'answer' : 'offer',\n                    sdp: sessionDescription\n                };\n                return SIP.Utils.Promise.resolve()\n                    .then(function () {\n                    // Media should be acquired in getDescription unless we need to do it sooner for some reason (FF61+)\n                    if (this.shouldAcquireMedia && this.options.alwaysAcquireMediaFirst) {\n                        return this.acquire(this.constraints).then(function () {\n                            this.shouldAcquireMedia = false;\n                        }.bind(this));\n                    }\n                }.bind(this))\n                    .then(function () {\n                    return SIP.Utils.reducePromises(modifiers, description);\n                })\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"setDescription\", e, \"The modifiers did not resolve successfully\");\n                    _this.logger.error(error.message);\n                    self.emit('peerConnection-setRemoteDescriptionFailed', error);\n                    throw error;\n                })\n                    .then(function (modifiedDescription) {\n                    self.emit('setDescription', modifiedDescription);\n                    return self.peerConnection.setRemoteDescription(modifiedDescription);\n                })\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    // Check the original SDP for video, and ensure that we have want to do audio fallback\n                    if ((/^m=video.+$/gm).test(sessionDescription) && !options.disableAudioFallback) {\n                        // Do not try to audio fallback again\n                        options.disableAudioFallback = true;\n                        // Remove video first, then do the other modifiers\n                        return _this.setDescription(sessionDescription, options, [SIP.Web.Modifiers.stripVideo].concat(modifiers));\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"setDescription\", e);\n                    _this.logger.error(error.error);\n                    _this.emit('peerConnection-setRemoteDescriptionFailed', error);\n                    throw error;\n                })\n                    .then(function setRemoteDescriptionSuccess() {\n                    if (self.peerConnection.getReceivers) {\n                        self.emit('setRemoteDescription', self.peerConnection.getReceivers());\n                    }\n                    else {\n                        self.emit('setRemoteDescription', self.peerConnection.getRemoteStreams());\n                    }\n                    self.emit('confirmed', self);\n                });\n            } },\n        /**\n         * Send DTMF via RTP (RFC 4733)\n         * @param {String} tones A string containing DTMF digits\n         * @param {Object} [options] Options object to be used by sendDtmf\n         * @returns {boolean} true if DTMF send is successful, false otherwise\n         */\n        sendDtmf: { writable: true, value: function sendDtmf(tones, options) {\n                if (!this.dtmfSender && this.hasBrowserGetSenderSupport()) {\n                    var senders = this.peerConnection.getSenders();\n                    if (senders.length > 0) {\n                        this.dtmfSender = senders[0].dtmf;\n                    }\n                }\n                if (!this.dtmfSender && this.hasBrowserTrackSupport()) {\n                    var streams = this.peerConnection.getLocalStreams();\n                    if (streams.length > 0) {\n                        var audioTracks = streams[0].getAudioTracks();\n                        if (audioTracks.length > 0) {\n                            this.dtmfSender = this.peerConnection.createDTMFSender(audioTracks[0]);\n                        }\n                    }\n                }\n                if (!this.dtmfSender) {\n                    return false;\n                }\n                try {\n                    this.dtmfSender.insertDTMF(tones, options.duration, options.interToneGap);\n                }\n                catch (e) {\n                    if (e.type === \"InvalidStateError\" || e.type === \"InvalidCharacterError\") {\n                        this.logger.error(e);\n                        return false;\n                    }\n                    else {\n                        throw e;\n                    }\n                }\n                this.logger.log('DTMF sent via RTP: ' + tones.toString());\n                return true;\n            } },\n        getDirection: { writable: true, value: function getDirection() {\n                return this.direction;\n            } },\n        // Internal functions\n        createOfferOrAnswer: { writable: true, value: function createOfferOrAnswer(RTCOfferOptions, modifiers) {\n                var _this = this;\n                var self = this;\n                var methodName;\n                var pc = this.peerConnection;\n                RTCOfferOptions = RTCOfferOptions || {};\n                methodName = self.hasOffer('remote') ? 'createAnswer' : 'createOffer';\n                return pc[methodName](RTCOfferOptions)\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"createOfferOrAnswer\", e, 'peerConnection-' + methodName + 'Failed');\n                    _this.emit('peerConnection-' + methodName + 'Failed', error);\n                    throw error;\n                })\n                    .then(function (sdp) {\n                    return SIP.Utils.reducePromises(modifiers, self.createRTCSessionDescriptionInit(sdp));\n                })\n                    .then(function (sdp) {\n                    self.resetIceGatheringComplete();\n                    return pc.setLocalDescription(sdp);\n                })\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"createOfferOrAnswer\", e, 'peerConnection-SetLocalDescriptionFailed');\n                    _this.emit('peerConnection-SetLocalDescriptionFailed', error);\n                    throw error;\n                })\n                    .then(function onSetLocalDescriptionSuccess() {\n                    return self.waitForIceGatheringComplete();\n                })\n                    .then(function readySuccess() {\n                    var localDescription = self.createRTCSessionDescriptionInit(self.peerConnection.localDescription);\n                    return SIP.Utils.reducePromises(modifiers, localDescription);\n                })\n                    .then(function (localDescription) {\n                    self.setDirection(localDescription.sdp);\n                    return localDescription;\n                })\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"createOfferOrAnswer\", e);\n                    _this.logger.error(error);\n                    throw error;\n                });\n            } },\n        // Creates an RTCSessionDescriptionInit from an RTCSessionDescription\n        createRTCSessionDescriptionInit: { writable: true, value: function createRTCSessionDescriptionInit(RTCSessionDescription) {\n                return {\n                    type: RTCSessionDescription.type,\n                    sdp: RTCSessionDescription.sdp\n                };\n            } },\n        addDefaultIceCheckingTimeout: { writable: true, value: function addDefaultIceCheckingTimeout(peerConnectionOptions) {\n                if (peerConnectionOptions.iceCheckingTimeout === undefined) {\n                    peerConnectionOptions.iceCheckingTimeout = 5000;\n                }\n                return peerConnectionOptions;\n            } },\n        addDefaultIceServers: { writable: true, value: function addDefaultIceServers(rtcConfiguration) {\n                if (!rtcConfiguration.iceServers) {\n                    rtcConfiguration.iceServers = [{ urls: 'stun:stun.l.google.com:19302' }];\n                }\n                return rtcConfiguration;\n            } },\n        checkAndDefaultConstraints: { writable: true, value: function checkAndDefaultConstraints(constraints) {\n                var defaultConstraints = { audio: true, video: !this.options.alwaysAcquireMediaFirst };\n                constraints = constraints || defaultConstraints;\n                // Empty object check\n                if (Object.keys(constraints).length === 0 && constraints.constructor === Object) {\n                    return defaultConstraints;\n                }\n                return constraints;\n            } },\n        hasBrowserTrackSupport: { writable: true, value: function hasBrowserTrackSupport() {\n                return Boolean(this.peerConnection.addTrack);\n            } },\n        hasBrowserGetSenderSupport: { writable: true, value: function hasBrowserGetSenderSupport() {\n                return Boolean(this.peerConnection.getSenders);\n            } },\n        initPeerConnection: { writable: true, value: function initPeerConnection(options) {\n                var self = this;\n                options = options || {};\n                options = this.addDefaultIceCheckingTimeout(options);\n                options.rtcConfiguration = options.rtcConfiguration || {};\n                options.rtcConfiguration = this.addDefaultIceServers(options.rtcConfiguration);\n                this.logger.log('initPeerConnection');\n                if (this.peerConnection) {\n                    this.logger.log('Already have a peer connection for this session. Tearing down.');\n                    this.resetIceGatheringComplete();\n                    this.peerConnection.close();\n                }\n                this.peerConnection = new this.WebRTC.RTCPeerConnection(options.rtcConfiguration);\n                this.logger.log('New peer connection created');\n                if ('ontrack' in this.peerConnection) {\n                    this.peerConnection.addEventListener('track', function (e) {\n                        self.logger.log('track added');\n                        self.observer.trackAdded();\n                        self.emit('addTrack', e);\n                    });\n                }\n                else {\n                    this.logger.warn('Using onaddstream which is deprecated');\n                    this.peerConnection.onaddstream = function (e) {\n                        self.logger.log('stream added');\n                        self.emit('addStream', e);\n                    };\n                }\n                this.peerConnection.onicecandidate = function (e) {\n                    self.emit('iceCandidate', e);\n                    if (e.candidate) {\n                        self.logger.log('ICE candidate received: ' + (e.candidate.candidate === null ? null : e.candidate.candidate.trim()));\n                    }\n                    else if (e.candidate === null) {\n                        // indicates the end of candidate gathering\n                        self.logger.log('ICE candidate gathering complete');\n                        self.triggerIceGatheringComplete();\n                    }\n                };\n                this.peerConnection.onicegatheringstatechange = function () {\n                    self.logger.log('RTCIceGatheringState changed: ' + this.iceGatheringState);\n                    switch (this.iceGatheringState) {\n                        case 'gathering':\n                            self.emit('iceGathering', this);\n                            if (!self.iceGatheringTimer && options.iceCheckingTimeout) {\n                                self.iceGatheringTimeout = false;\n                                self.iceGatheringTimer = SIP.Timers.setTimeout(function () {\n                                    self.logger.log('RTCIceChecking Timeout Triggered after ' + options.iceCheckingTimeout + ' milliseconds');\n                                    self.iceGatheringTimeout = true;\n                                    self.triggerIceGatheringComplete();\n                                }, options.iceCheckingTimeout);\n                            }\n                            break;\n                        case 'complete':\n                            self.triggerIceGatheringComplete();\n                            break;\n                    }\n                };\n                this.peerConnection.oniceconnectionstatechange = function () {\n                    var stateEvent;\n                    switch (this.iceConnectionState) {\n                        case 'new':\n                            stateEvent = 'iceConnection';\n                            break;\n                        case 'checking':\n                            stateEvent = 'iceConnectionChecking';\n                            break;\n                        case 'connected':\n                            stateEvent = 'iceConnectionConnected';\n                            break;\n                        case 'completed':\n                            stateEvent = 'iceConnectionCompleted';\n                            break;\n                        case 'failed':\n                            stateEvent = 'iceConnectionFailed';\n                            break;\n                        case 'disconnected':\n                            stateEvent = 'iceConnectionDisconnected';\n                            break;\n                        case 'closed':\n                            stateEvent = 'iceConnectionClosed';\n                            break;\n                        default:\n                            self.logger.warn('Unknown iceConnection state:', this.iceConnectionState);\n                            return;\n                    }\n                    self.emit(stateEvent, this);\n                };\n            } },\n        acquire: { writable: true, value: function acquire(constraints) {\n                var _this = this;\n                // Default audio & video to true\n                constraints = this.checkAndDefaultConstraints(constraints);\n                return new SIP.Utils.Promise(function (resolve, reject) {\n                    /*\n                     * Make the call asynchronous, so that ICCs have a chance\n                     * to define callbacks to `userMediaRequest`\n                     */\n                    this.logger.log('acquiring local media');\n                    this.emit('userMediaRequest', constraints);\n                    if (constraints.audio || constraints.video) {\n                        this.WebRTC.getUserMedia(constraints)\n                            .then(function (streams) {\n                            this.observer.trackAdded();\n                            this.emit('userMedia', streams);\n                            resolve(streams);\n                        }.bind(this)).catch(function (e) {\n                            this.emit('userMediaFailed', e);\n                            reject(e);\n                        }.bind(this));\n                    }\n                    else {\n                        // Local streams were explicitly excluded.\n                        resolve([]);\n                    }\n                }.bind(this))\n                    .catch(function (e) {\n                    // TODO: This propogates downwards\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"acquire\", e, \"unable to acquire streams\");\n                    _this.logger.error(error.message);\n                    _this.logger.error(error.error);\n                    throw error;\n                })\n                    .then(function acquireSucceeded(streams) {\n                    this.logger.log('acquired local media streams');\n                    try {\n                        // Remove old tracks\n                        if (this.peerConnection.removeTrack) {\n                            this.peerConnection.getSenders().forEach(function (sender) {\n                                this.peerConnection.removeTrack(sender);\n                            }, this);\n                        }\n                        return streams;\n                    }\n                    catch (e) {\n                        return SIP.Utils.Promise.reject(e);\n                    }\n                }.bind(this))\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"acquire\", e, \"error removing streams\");\n                    _this.logger.error(error.message);\n                    _this.logger.error(error.error);\n                    throw error;\n                })\n                    .then(function addStreams(streams) {\n                    try {\n                        streams = [].concat(streams);\n                        streams.forEach(function (stream) {\n                            if (this.peerConnection.addTrack) {\n                                stream.getTracks().forEach(function (track) {\n                                    this.peerConnection.addTrack(track, stream);\n                                }, this);\n                            }\n                            else {\n                                // Chrome 59 does not support addTrack\n                                this.peerConnection.addStream(stream);\n                            }\n                        }, this);\n                    }\n                    catch (e) {\n                        return SIP.Utils.Promise.reject(e);\n                    }\n                    return SIP.Utils.Promise.resolve();\n                }.bind(this))\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"acquire\", e, \"error adding stream\");\n                    _this.logger.error(error.message);\n                    _this.logger.error(error.error);\n                    throw error;\n                });\n            } },\n        hasOffer: { writable: true, value: function hasOffer(where) {\n                var offerState = 'have-' + where + '-offer';\n                return this.peerConnection.signalingState === offerState;\n            } },\n        // ICE gathering state handling\n        isIceGatheringComplete: { writable: true, value: function isIceGatheringComplete() {\n                return this.peerConnection.iceGatheringState === 'complete' || this.iceGatheringTimeout;\n            } },\n        resetIceGatheringComplete: { writable: true, value: function resetIceGatheringComplete() {\n                this.iceGatheringTimeout = false;\n                if (this.iceGatheringTimer) {\n                    SIP.Timers.clearTimeout(this.iceGatheringTimer);\n                    this.iceGatheringTimer = null;\n                }\n                if (this.iceGatheringDeferred) {\n                    this.iceGatheringDeferred.reject();\n                    this.iceGatheringDeferred = null;\n                }\n            } },\n        setDirection: { writable: true, value: function setDirection(sdp) {\n                var match = sdp.match(/a=(sendrecv|sendonly|recvonly|inactive)/);\n                if (match === null) {\n                    this.direction = this.C.DIRECTION.NULL;\n                    this.observer.directionChanged();\n                    return;\n                }\n                var direction = match[1];\n                switch (direction) {\n                    case this.C.DIRECTION.SENDRECV:\n                    case this.C.DIRECTION.SENDONLY:\n                    case this.C.DIRECTION.RECVONLY:\n                    case this.C.DIRECTION.INACTIVE:\n                        this.direction = direction;\n                        break;\n                    default:\n                        this.direction = this.C.DIRECTION.NULL;\n                        break;\n                }\n                this.observer.directionChanged();\n            } },\n        triggerIceGatheringComplete: { writable: true, value: function triggerIceGatheringComplete() {\n                if (this.isIceGatheringComplete()) {\n                    this.emit('iceGatheringComplete', this);\n                    if (this.iceGatheringTimer) {\n                        SIP.Timers.clearTimeout(this.iceGatheringTimer);\n                        this.iceGatheringTimer = null;\n                    }\n                    if (this.iceGatheringDeferred) {\n                        this.iceGatheringDeferred.resolve();\n                        this.iceGatheringDeferred = null;\n                    }\n                }\n            } },\n        waitForIceGatheringComplete: { writable: true, value: function waitForIceGatheringComplete() {\n                if (this.isIceGatheringComplete()) {\n                    return SIP.Utils.Promise.resolve();\n                }\n                else if (!this.isIceGatheringDeferred) {\n                    this.iceGatheringDeferred = SIP.Utils.defer();\n                }\n                return this.iceGatheringDeferred.promise;\n            } }\n    });\n    return SessionDescriptionHandler;\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(28)))\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SessionDescriptionHandlerObserver\n */\n/* SessionDescriptionHandlerObserver\n * @class SessionDescriptionHandler Observer Class.\n * @param {SIP.Session} session\n * @param {Object} [options]\n */\n// Constructor\nvar SessionDescriptionHandlerObserver = function (session, options) {\n    this.session = session || {};\n    this.options = options || {};\n};\nSessionDescriptionHandlerObserver.prototype = {\n    trackAdded: function () {\n        this.session.emit('trackAdded');\n    },\n    directionChanged: function () {\n        this.session.emit('directionChanged');\n    },\n};\nmodule.exports = SessionDescriptionHandlerObserver;\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview Incoming SIP Message Sanity Check\n */\n/**\n * SIP message sanity check.\n * @augments SIP\n * @function\n * @param {SIP.IncomingMessage} message\n * @param {SIP.UA} ua\n * @param {SIP.Transport} transport\n * @returns {Boolean}\n */\nmodule.exports = function (SIP) {\n    var sanityCheck, requests = [], responses = [], all = [];\n    // Reply\n    function reply(status_code, message, transport) {\n        var to, response = SIP.Utils.buildStatusLine(status_code), vias = message.getHeaders('via'), length = vias.length, idx = 0;\n        for (idx; idx < length; idx++) {\n            response += \"Via: \" + vias[idx] + \"\\r\\n\";\n        }\n        to = message.getHeader('To');\n        if (!message.to_tag) {\n            to += ';tag=' + SIP.Utils.newTag();\n        }\n        response += \"To: \" + to + \"\\r\\n\";\n        response += \"From: \" + message.getHeader('From') + \"\\r\\n\";\n        response += \"Call-ID: \" + message.call_id + \"\\r\\n\";\n        response += \"CSeq: \" + message.cseq + \" \" + message.method + \"\\r\\n\";\n        response += \"\\r\\n\";\n        transport.send(response);\n    }\n    /*\n     * Sanity Check for incoming Messages\n     *\n     * Requests:\n     *  - _rfc3261_8_2_2_1_ Receive a Request with a non supported URI scheme\n     *  - _rfc3261_16_3_4_ Receive a Request already sent by us\n     *   Does not look at via sent-by but at sipjsId, which is inserted as\n     *   a prefix in all initial requests generated by the ua\n     *  - _rfc3261_18_3_request_ Body Content-Length\n     *  - _rfc3261_8_2_2_2_ Merged Requests\n     *\n     * Responses:\n     *  - _rfc3261_8_1_3_3_ Multiple Via headers\n     *  - _rfc3261_18_1_2_ sent-by mismatch\n     *  - _rfc3261_18_3_response_ Body Content-Length\n     *\n     * All:\n     *  - Minimum headers in a SIP message\n     */\n    // Sanity Check functions for requests\n    function rfc3261_8_2_2_1(message, ua, transport) {\n        if (!message.ruri || message.ruri.scheme !== 'sip') {\n            reply(416, message, transport);\n            return false;\n        }\n    }\n    function rfc3261_16_3_4(message, ua, transport) {\n        if (!message.to_tag) {\n            if (message.call_id.substr(0, 5) === ua.configuration.sipjsId) {\n                reply(482, message, transport);\n                return false;\n            }\n        }\n    }\n    function rfc3261_18_3_request(message, ua, transport) {\n        var len = SIP.Utils.str_utf8_length(message.body), contentLength = message.getHeader('content-length');\n        if (len < contentLength) {\n            reply(400, message, transport);\n            return false;\n        }\n    }\n    function rfc3261_8_2_2_2(message, ua, transport) {\n        var tr, idx, fromTag = message.from_tag, call_id = message.call_id, cseq = message.cseq;\n        if (!message.to_tag) {\n            if (message.method === SIP.C.INVITE) {\n                tr = ua.transactions.ist[message.via_branch];\n                if (tr) {\n                    return;\n                }\n                else {\n                    for (idx in ua.transactions.ist) {\n                        tr = ua.transactions.ist[idx];\n                        if (tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n                            reply(482, message, transport);\n                            return false;\n                        }\n                    }\n                }\n            }\n            else {\n                tr = ua.transactions.nist[message.via_branch];\n                if (tr) {\n                    return;\n                }\n                else {\n                    for (idx in ua.transactions.nist) {\n                        tr = ua.transactions.nist[idx];\n                        if (tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n                            reply(482, message, transport);\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    // Sanity Check functions for responses\n    function rfc3261_8_1_3_3(message, ua) {\n        if (message.getHeaders('via').length > 1) {\n            ua.getLogger('sip.sanitycheck').warn('More than one Via header field present in the response. Dropping the response');\n            return false;\n        }\n    }\n    function rfc3261_18_1_2(message, ua) {\n        var viaHost = ua.configuration.viaHost;\n        if (message.via.host !== viaHost || message.via.port !== undefined) {\n            ua.getLogger('sip.sanitycheck').warn('Via sent-by in the response does not match UA Via host value. Dropping the response');\n            return false;\n        }\n    }\n    function rfc3261_18_3_response(message, ua) {\n        var len = SIP.Utils.str_utf8_length(message.body), contentLength = message.getHeader('content-length');\n        if (len < contentLength) {\n            ua.getLogger('sip.sanitycheck').warn('Message body length is lower than the value in Content-Length header field. Dropping the response');\n            return false;\n        }\n    }\n    // Sanity Check functions for requests and responses\n    function minimumHeaders(message, ua) {\n        var mandatoryHeaders = ['from', 'to', 'call_id', 'cseq', 'via'], idx = mandatoryHeaders.length;\n        while (idx--) {\n            if (!message.hasHeader(mandatoryHeaders[idx])) {\n                ua.getLogger('sip.sanitycheck').warn('Missing mandatory header field : ' + mandatoryHeaders[idx] + '. Dropping the response');\n                return false;\n            }\n        }\n    }\n    requests.push(rfc3261_8_2_2_1);\n    requests.push(rfc3261_16_3_4);\n    requests.push(rfc3261_18_3_request);\n    requests.push(rfc3261_8_2_2_2);\n    responses.push(rfc3261_8_1_3_3);\n    responses.push(rfc3261_18_1_2);\n    responses.push(rfc3261_18_3_response);\n    all.push(minimumHeaders);\n    sanityCheck = function (message, ua, transport) {\n        var len, pass;\n        len = all.length;\n        while (len--) {\n            pass = all[len](message, ua, transport);\n            if (pass === false) {\n                return false;\n            }\n        }\n        if (message instanceof SIP.IncomingRequest) {\n            len = requests.length;\n            while (len--) {\n                pass = requests[len](message, ua, transport);\n                if (pass === false) {\n                    return false;\n                }\n            }\n        }\n        else if (message instanceof SIP.IncomingResponse) {\n            len = responses.length;\n            while (len--) {\n                pass = responses[len](message, ua, transport);\n                if (pass === false) {\n                    return false;\n                }\n            }\n        }\n        //Everything is OK\n        return true;\n    };\n    SIP.sanityCheck = sanityCheck;\n};\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar md5 = __webpack_require__(34);\n/**\n * @fileoverview SIP Digest Authentication\n */\n/**\n * SIP Digest Authentication.\n * @augments SIP.\n * @function Digest Authentication\n * @param {SIP.UA} ua\n */\nmodule.exports = function (Utils) {\n    var DigestAuthentication;\n    DigestAuthentication = function (ua) {\n        this.logger = ua.getLogger('sipjs.digestauthentication');\n        this.username = ua.configuration.authorizationUser;\n        this.password = ua.configuration.password;\n        this.cnonce = null;\n        this.nc = 0;\n        this.ncHex = '00000000';\n        this.response = null;\n    };\n    /**\n    * Performs Digest authentication given a SIP request and the challenge\n    * received in a response to that request.\n    * Returns true if credentials were successfully generated, false otherwise.\n    *\n    * @param {SIP.OutgoingRequest} request\n    * @param {Object} challenge\n    */\n    DigestAuthentication.prototype.authenticate = function (request, challenge) {\n        // Inspect and validate the challenge.\n        this.algorithm = challenge.algorithm;\n        this.realm = challenge.realm;\n        this.nonce = challenge.nonce;\n        this.opaque = challenge.opaque;\n        this.stale = challenge.stale;\n        if (this.algorithm) {\n            if (this.algorithm !== 'MD5') {\n                this.logger.warn('challenge with Digest algorithm different than \"MD5\", authentication aborted');\n                return false;\n            }\n        }\n        else {\n            this.algorithm = 'MD5';\n        }\n        if (!this.realm) {\n            this.logger.warn('challenge without Digest realm, authentication aborted');\n            return false;\n        }\n        if (!this.nonce) {\n            this.logger.warn('challenge without Digest nonce, authentication aborted');\n            return false;\n        }\n        // 'qop' can contain a list of values (Array). Let's choose just one.\n        if (challenge.qop) {\n            if (challenge.qop.indexOf('auth') > -1) {\n                this.qop = 'auth';\n            }\n            else if (challenge.qop.indexOf('auth-int') > -1) {\n                this.qop = 'auth-int';\n            }\n            else {\n                // Otherwise 'qop' is present but does not contain 'auth' or 'auth-int', so abort here.\n                this.logger.warn('challenge without Digest qop different than \"auth\" or \"auth-int\", authentication aborted');\n                return false;\n            }\n        }\n        else {\n            this.qop = null;\n        }\n        // Fill other attributes.\n        this.method = request.method;\n        this.uri = request.ruri;\n        this.cnonce = Utils.createRandomToken(12);\n        this.nc += 1;\n        this.updateNcHex();\n        // nc-value = 8LHEX. Max value = 'FFFFFFFF'.\n        if (this.nc === 4294967296) {\n            this.nc = 1;\n            this.ncHex = '00000001';\n        }\n        // Calculate the Digest \"response\" value.\n        this.calculateResponse();\n        return true;\n    };\n    /**\n    * Generate Digest 'response' value.\n    * @private\n    */\n    DigestAuthentication.prototype.calculateResponse = function () {\n        var ha1, ha2;\n        // HA1 = MD5(A1) = MD5(username:realm:password)\n        ha1 = md5(this.username + \":\" + this.realm + \":\" + this.password);\n        if (this.qop === 'auth') {\n            // HA2 = MD5(A2) = MD5(method:digestURI)\n            ha2 = md5(this.method + \":\" + this.uri);\n            // response = MD5(HA1:nonce:nonceCount:credentialsNonce:qop:HA2)\n            this.response = md5(ha1 + \":\" + this.nonce + \":\" + this.ncHex + \":\" + this.cnonce + \":auth:\" + ha2);\n        }\n        else if (this.qop === 'auth-int') {\n            // HA2 = MD5(A2) = MD5(method:digestURI:MD5(entityBody))\n            ha2 = md5(this.method + \":\" + this.uri + \":\" + md5(this.body ? this.body : \"\"));\n            // response = MD5(HA1:nonce:nonceCount:credentialsNonce:qop:HA2)\n            this.response = md5(ha1 + \":\" + this.nonce + \":\" + this.ncHex + \":\" + this.cnonce + \":auth-int:\" + ha2);\n        }\n        else if (this.qop === null) {\n            // HA2 = MD5(A2) = MD5(method:digestURI)\n            ha2 = md5(this.method + \":\" + this.uri);\n            // response = MD5(HA1:nonce:HA2)\n            this.response = md5(ha1 + \":\" + this.nonce + \":\" + ha2);\n        }\n    };\n    /**\n    * Return the Proxy-Authorization or WWW-Authorization header value.\n    */\n    DigestAuthentication.prototype.toString = function () {\n        var auth_params = [];\n        if (!this.response) {\n            throw new Error('response field does not exist, cannot generate Authorization header');\n        }\n        auth_params.push('algorithm=' + this.algorithm);\n        auth_params.push('username=\"' + this.username + '\"');\n        auth_params.push('realm=\"' + this.realm + '\"');\n        auth_params.push('nonce=\"' + this.nonce + '\"');\n        auth_params.push('uri=\"' + this.uri + '\"');\n        auth_params.push('response=\"' + this.response + '\"');\n        if (this.opaque) {\n            auth_params.push('opaque=\"' + this.opaque + '\"');\n        }\n        if (this.qop) {\n            auth_params.push('qop=' + this.qop);\n            auth_params.push('cnonce=\"' + this.cnonce + '\"');\n            auth_params.push('nc=' + this.ncHex);\n        }\n        return 'Digest ' + auth_params.join(', ');\n    };\n    /**\n    * Generate the 'nc' value as required by Digest in this.ncHex by reading this.nc.\n    * @private\n    */\n    DigestAuthentication.prototype.updateNcHex = function () {\n        var hex = Number(this.nc).toString(16);\n        this.ncHex = '00000000'.substr(0, 8 - hex.length) + hex;\n    };\n    return DigestAuthentication;\n};\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(__webpack_require__(35));\n\t}\n\telse {}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var T = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        for (var i = 0; i < 64; i++) {\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\n\t        }\n\t    }());\n\n\t    /**\n\t     * MD5 hash algorithm.\n\t     */\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var M_offset_0  = M[offset + 0];\n\t            var M_offset_1  = M[offset + 1];\n\t            var M_offset_2  = M[offset + 2];\n\t            var M_offset_3  = M[offset + 3];\n\t            var M_offset_4  = M[offset + 4];\n\t            var M_offset_5  = M[offset + 5];\n\t            var M_offset_6  = M[offset + 6];\n\t            var M_offset_7  = M[offset + 7];\n\t            var M_offset_8  = M[offset + 8];\n\t            var M_offset_9  = M[offset + 9];\n\t            var M_offset_10 = M[offset + 10];\n\t            var M_offset_11 = M[offset + 11];\n\t            var M_offset_12 = M[offset + 12];\n\t            var M_offset_13 = M[offset + 13];\n\t            var M_offset_14 = M[offset + 14];\n\t            var M_offset_15 = M[offset + 15];\n\n\t            // Working varialbes\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\n\t            // Computation\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\n\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\n\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\n\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\n\t            var nBitsTotalL = nBitsTotal;\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\n\t            );\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\n\t            );\n\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    function FF(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function GG(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function HH(a, b, c, d, x, s, t) {\n\t        var n = a + (b ^ c ^ d) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function II(a, b, c, d, x, s, t) {\n\t        var n = a + (c ^ (b | ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.MD5('message');\n\t     *     var hash = CryptoJS.MD5(wordArray);\n\t     */\n\t    C.MD5 = Hasher._createHelper(MD5);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\n\t     */\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\n\t}(Math));\n\n\n\treturn CryptoJS.MD5;\n\n}));\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse {}\n}(this, function () {\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\t    /*\n\t     * Local polyfil of Object.create\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {};\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }())\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            var r = (function (m_w) {\n\t                var m_w = m_w;\n\t                var m_z = 0x3ade68b1;\n\t                var mask = 0xffffffff;\n\n\t                return function () {\n\t                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\n\t                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\n\t                    var result = ((m_z << 0x10) + m_w) & mask;\n\t                    result /= 0x100000000;\n\t                    result += 0.5;\n\t                    return result * (Math.random() > .5 ? 1 : -1);\n\t                }\n\t            });\n\n\t            for (var i = 0, rcache; i < nBytes; i += 4) {\n\t                var _r = r((rcache || Math.random()) * 0x100000000);\n\n\t                rcache = _r() * 0x3ade67b7;\n\t                words.push((_r() * 0x100000000) | 0);\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                var processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar Grammar = __webpack_require__(37);\nmodule.exports = function (SIP) {\n    return {\n        parse: function parseCustom(input, startRule) {\n            var options = { startRule: startRule, SIP: SIP };\n            try {\n                Grammar.parse(input, options);\n            }\n            catch (e) {\n                options.data = -1;\n            }\n            return options.data;\n        }\n    };\n};\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleIndices = { Contact: 119, Name_Addr_Header: 156, Record_Route: 176, Request_Response: 81, SIP_URI: 45, Subscription_State: 186, Supported: 191, Require: 182, Via: 194, absoluteURI: 84, Call_ID: 118, Content_Disposition: 130, Content_Length: 135, Content_Type: 136, CSeq: 146, displayName: 122, Event: 149, From: 151, host: 52, Max_Forwards: 154, Min_SE: 213, Proxy_Authenticate: 157, quoted_string: 40, Refer_To: 178, Replaces: 179, Session_Expires: 210, stun_URI: 217, To: 192, turn_URI: 223, uuid: 226, WWW_Authenticate: 209, challenge: 158, sipfrag: 230, Referred_By: 231 },\n      peg$startRuleIndex   = 119,\n\n      peg$consts = [\n        \"\\r\\n\",\n        peg$literalExpectation(\"\\r\\n\", false),\n        /^[0-9]/,\n        peg$classExpectation([[\"0\", \"9\"]], false, false),\n        /^[a-zA-Z]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"]], false, false),\n        /^[0-9a-fA-F]/,\n        peg$classExpectation([[\"0\", \"9\"], [\"a\", \"f\"], [\"A\", \"F\"]], false, false),\n        /^[\\0-\\xFF]/,\n        peg$classExpectation([[\"\\0\", \"\\xFF\"]], false, false),\n        /^[\"]/,\n        peg$classExpectation([\"\\\"\"], false, false),\n        \" \",\n        peg$literalExpectation(\" \", false),\n        \"\\t\",\n        peg$literalExpectation(\"\\t\", false),\n        /^[a-zA-Z0-9]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"]], false, false),\n        \";\",\n        peg$literalExpectation(\";\", false),\n        \"/\",\n        peg$literalExpectation(\"/\", false),\n        \"?\",\n        peg$literalExpectation(\"?\", false),\n        \":\",\n        peg$literalExpectation(\":\", false),\n        \"@\",\n        peg$literalExpectation(\"@\", false),\n        \"&\",\n        peg$literalExpectation(\"&\", false),\n        \"=\",\n        peg$literalExpectation(\"=\", false),\n        \"+\",\n        peg$literalExpectation(\"+\", false),\n        \"$\",\n        peg$literalExpectation(\"$\", false),\n        \",\",\n        peg$literalExpectation(\",\", false),\n        \"-\",\n        peg$literalExpectation(\"-\", false),\n        \"_\",\n        peg$literalExpectation(\"_\", false),\n        \".\",\n        peg$literalExpectation(\".\", false),\n        \"!\",\n        peg$literalExpectation(\"!\", false),\n        \"~\",\n        peg$literalExpectation(\"~\", false),\n        \"*\",\n        peg$literalExpectation(\"*\", false),\n        \"'\",\n        peg$literalExpectation(\"'\", false),\n        \"(\",\n        peg$literalExpectation(\"(\", false),\n        \")\",\n        peg$literalExpectation(\")\", false),\n        \"%\",\n        peg$literalExpectation(\"%\", false),\n        function() {return \" \"; },\n        function() {return ':'; },\n        /^[!-~]/,\n        peg$classExpectation([[\"!\", \"~\"]], false, false),\n        /^[\\x80-\\uFFFF]/,\n        peg$classExpectation([[\"\\x80\", \"\\uFFFF\"]], false, false),\n        /^[\\x80-\\xBF]/,\n        peg$classExpectation([[\"\\x80\", \"\\xBF\"]], false, false),\n        /^[a-f]/,\n        peg$classExpectation([[\"a\", \"f\"]], false, false),\n        \"`\",\n        peg$literalExpectation(\"`\", false),\n        \"<\",\n        peg$literalExpectation(\"<\", false),\n        \">\",\n        peg$literalExpectation(\">\", false),\n        \"\\\\\",\n        peg$literalExpectation(\"\\\\\", false),\n        \"[\",\n        peg$literalExpectation(\"[\", false),\n        \"]\",\n        peg$literalExpectation(\"]\", false),\n        \"{\",\n        peg$literalExpectation(\"{\", false),\n        \"}\",\n        peg$literalExpectation(\"}\", false),\n        function() {return \"*\"; },\n        function() {return \"/\"; },\n        function() {return \"=\"; },\n        function() {return \"(\"; },\n        function() {return \")\"; },\n        function() {return \">\"; },\n        function() {return \"<\"; },\n        function() {return \",\"; },\n        function() {return \";\"; },\n        function() {return \":\"; },\n        function() {return \"\\\"\"; },\n        /^[!-']/,\n        peg$classExpectation([[\"!\", \"'\"]], false, false),\n        /^[*-[]/,\n        peg$classExpectation([[\"*\", \"[\"]], false, false),\n        /^[\\]-~]/,\n        peg$classExpectation([[\"]\", \"~\"]], false, false),\n        function(contents) {\n                                return contents; },\n        /^[#-[]/,\n        peg$classExpectation([[\"#\", \"[\"]], false, false),\n        /^[\\0-\\t]/,\n        peg$classExpectation([[\"\\0\", \"\\t\"]], false, false),\n        /^[\\x0B-\\f]/,\n        peg$classExpectation([[\"\\x0B\", \"\\f\"]], false, false),\n        /^[\\x0E-\\x7F]/,\n        peg$classExpectation([[\"\\x0E\", \"\\x7F\"]], false, false),\n        function() {\n                                options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port);\n                                delete options.data.scheme;\n                                delete options.data.user;\n                                delete options.data.host;\n                                delete options.data.host_type;\n                                delete options.data.port;\n                              },\n        function() {\n                                options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port, options.data.uri_params, options.data.uri_headers);\n                                delete options.data.scheme;\n                                delete options.data.user;\n                                delete options.data.host;\n                                delete options.data.host_type;\n                                delete options.data.port;\n                                delete options.data.uri_params;\n\n                                if (options.startRule === 'SIP_URI') { options.data = options.data.uri;}\n                              },\n        \"sips\",\n        peg$literalExpectation(\"sips\", true),\n        \"sip\",\n        peg$literalExpectation(\"sip\", true),\n        function(uri_scheme) {\n                            options.data.scheme = uri_scheme; },\n        function() {\n                            options.data.user = decodeURIComponent(text().slice(0, -1));},\n        function() {\n                            options.data.password = text(); },\n        function() {\n                            options.data.host = text();\n                            return options.data.host; },\n        function() {\n                          options.data.host_type = 'domain';\n                          return text(); },\n        /^[a-zA-Z0-9_\\-]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \"_\", \"-\"], false, false),\n        /^[a-zA-Z0-9\\-]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \"-\"], false, false),\n        function() {\n                            options.data.host_type = 'IPv6';\n                            return text(); },\n        \"::\",\n        peg$literalExpectation(\"::\", false),\n        function() {\n                          options.data.host_type = 'IPv6';\n                          return text(); },\n        function() {\n                            options.data.host_type = 'IPv4';\n                            return text(); },\n        \"25\",\n        peg$literalExpectation(\"25\", false),\n        /^[0-5]/,\n        peg$classExpectation([[\"0\", \"5\"]], false, false),\n        \"2\",\n        peg$literalExpectation(\"2\", false),\n        /^[0-4]/,\n        peg$classExpectation([[\"0\", \"4\"]], false, false),\n        \"1\",\n        peg$literalExpectation(\"1\", false),\n        /^[1-9]/,\n        peg$classExpectation([[\"1\", \"9\"]], false, false),\n        function(port) {\n                            port = parseInt(port.join(''));\n                            options.data.port = port;\n                            return port; },\n        \"transport=\",\n        peg$literalExpectation(\"transport=\", true),\n        \"udp\",\n        peg$literalExpectation(\"udp\", true),\n        \"tcp\",\n        peg$literalExpectation(\"tcp\", true),\n        \"sctp\",\n        peg$literalExpectation(\"sctp\", true),\n        \"tls\",\n        peg$literalExpectation(\"tls\", true),\n        function(transport) {\n                              if(!options.data.uri_params) options.data.uri_params={};\n                              options.data.uri_params['transport'] = transport.toLowerCase(); },\n        \"user=\",\n        peg$literalExpectation(\"user=\", true),\n        \"phone\",\n        peg$literalExpectation(\"phone\", true),\n        \"ip\",\n        peg$literalExpectation(\"ip\", true),\n        function(user) {\n                              if(!options.data.uri_params) options.data.uri_params={};\n                              options.data.uri_params['user'] = user.toLowerCase(); },\n        \"method=\",\n        peg$literalExpectation(\"method=\", true),\n        function(method) {\n                              if(!options.data.uri_params) options.data.uri_params={};\n                              options.data.uri_params['method'] = method; },\n        \"ttl=\",\n        peg$literalExpectation(\"ttl=\", true),\n        function(ttl) {\n                              if(!options.data.params) options.data.params={};\n                              options.data.params['ttl'] = ttl; },\n        \"maddr=\",\n        peg$literalExpectation(\"maddr=\", true),\n        function(maddr) {\n                              if(!options.data.uri_params) options.data.uri_params={};\n                              options.data.uri_params['maddr'] = maddr; },\n        \"lr\",\n        peg$literalExpectation(\"lr\", true),\n        function() {\n                              if(!options.data.uri_params) options.data.uri_params={};\n                              options.data.uri_params['lr'] = undefined; },\n        function(param, value) {\n                              if(!options.data.uri_params) options.data.uri_params = {};\n                              if (value === null){\n                                value = undefined;\n                              }\n                              else {\n                                value = value[1];\n                              }\n                              options.data.uri_params[param.toLowerCase()] = value;},\n        function(hname, hvalue) {\n                              hname = hname.join('').toLowerCase();\n                              hvalue = hvalue.join('');\n                              if(!options.data.uri_headers) options.data.uri_headers = {};\n                              if (!options.data.uri_headers[hname]) {\n                                options.data.uri_headers[hname] = [hvalue];\n                              } else {\n                                options.data.uri_headers[hname].push(hvalue);\n                              }},\n        function() {\n                              // lots of tests fail if this isn't guarded...\n                              if (options.startRule === 'Refer_To') {\n                                options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port, options.data.uri_params, options.data.uri_headers);\n                                delete options.data.scheme;\n                                delete options.data.user;\n                                delete options.data.host;\n                                delete options.data.host_type;\n                                delete options.data.port;\n                                delete options.data.uri_params;\n                              }\n                            },\n        \"//\",\n        peg$literalExpectation(\"//\", false),\n        function() {\n                            options.data.scheme= text(); },\n        peg$literalExpectation(\"SIP\", true),\n        function() {\n                            options.data.sip_version = text(); },\n        \"INVITE\",\n        peg$literalExpectation(\"INVITE\", false),\n        \"ACK\",\n        peg$literalExpectation(\"ACK\", false),\n        \"VXACH\",\n        peg$literalExpectation(\"VXACH\", false),\n        \"OPTIONS\",\n        peg$literalExpectation(\"OPTIONS\", false),\n        \"BYE\",\n        peg$literalExpectation(\"BYE\", false),\n        \"CANCEL\",\n        peg$literalExpectation(\"CANCEL\", false),\n        \"REGISTER\",\n        peg$literalExpectation(\"REGISTER\", false),\n        \"SUBSCRIBE\",\n        peg$literalExpectation(\"SUBSCRIBE\", false),\n        \"NOTIFY\",\n        peg$literalExpectation(\"NOTIFY\", false),\n        \"REFER\",\n        peg$literalExpectation(\"REFER\", false),\n        \"PUBLISH\",\n        peg$literalExpectation(\"PUBLISH\", false),\n        function() {\n\n                            options.data.method = text();\n                            return options.data.method; },\n        function(status_code) {\n                          options.data.status_code = parseInt(status_code.join('')); },\n        function() {\n                          options.data.reason_phrase = text(); },\n        function() {\n                      options.data = text(); },\n        function() {\n                                var idx, length;\n                                length = options.data.multi_header.length;\n                                for (idx = 0; idx < length; idx++) {\n                                  if (options.data.multi_header[idx].parsed === null) {\n                                    options.data = null;\n                                    break;\n                                  }\n                                }\n                                if (options.data !== null) {\n                                  options.data = options.data.multi_header;\n                                } else {\n                                  options.data = -1;\n                                }},\n        function() {\n                                var header;\n                                if(!options.data.multi_header) options.data.multi_header = [];\n                                try {\n                                  header = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                                  delete options.data.uri;\n                                  delete options.data.displayName;\n                                  delete options.data.params;\n                                } catch(e) {\n                                  header = null;\n                                }\n                                options.data.multi_header.push( { 'position': peg$currPos,\n                                                          'offset': location().start.offset,\n                                                          'parsed': header\n                                                        });},\n        function(displayName) {\n                                displayName = text().trim();\n                                if (displayName[0] === '\\\"') {\n                                  displayName = displayName.substring(1, displayName.length-1);\n                                }\n                                options.data.displayName = displayName; },\n        \"q\",\n        peg$literalExpectation(\"q\", true),\n        function(q) {\n                                if(!options.data.params) options.data.params = {};\n                                options.data.params['q'] = q; },\n        \"expires\",\n        peg$literalExpectation(\"expires\", true),\n        function(expires) {\n                                if(!options.data.params) options.data.params = {};\n                                options.data.params['expires'] = expires; },\n        function(delta_seconds) {\n                                return parseInt(delta_seconds.join('')); },\n        \"0\",\n        peg$literalExpectation(\"0\", false),\n        function() {\n                                return parseFloat(text()); },\n        function(param, value) {\n                                if(!options.data.params) options.data.params = {};\n                                if (value === null){\n                                  value = undefined;\n                                }\n                                else {\n                                  value = value[1];\n                                }\n                                options.data.params[param.toLowerCase()] = value;},\n        \"render\",\n        peg$literalExpectation(\"render\", true),\n        \"session\",\n        peg$literalExpectation(\"session\", true),\n        \"icon\",\n        peg$literalExpectation(\"icon\", true),\n        \"alert\",\n        peg$literalExpectation(\"alert\", true),\n        function() {\n                                    if (options.startRule === 'Content_Disposition') {\n                                      options.data.type = text().toLowerCase();\n                                    }\n                                  },\n        \"handling\",\n        peg$literalExpectation(\"handling\", true),\n        \"optional\",\n        peg$literalExpectation(\"optional\", true),\n        \"required\",\n        peg$literalExpectation(\"required\", true),\n        function(length) {\n                                options.data = parseInt(length.join('')); },\n        function() {\n                                options.data = text(); },\n        \"text\",\n        peg$literalExpectation(\"text\", true),\n        \"image\",\n        peg$literalExpectation(\"image\", true),\n        \"audio\",\n        peg$literalExpectation(\"audio\", true),\n        \"video\",\n        peg$literalExpectation(\"video\", true),\n        \"application\",\n        peg$literalExpectation(\"application\", true),\n        \"message\",\n        peg$literalExpectation(\"message\", true),\n        \"multipart\",\n        peg$literalExpectation(\"multipart\", true),\n        \"x-\",\n        peg$literalExpectation(\"x-\", true),\n        function(cseq_value) {\n                          options.data.value=parseInt(cseq_value.join('')); },\n        function(expires) {options.data = expires; },\n        function(event_type) {\n                               options.data.event = event_type.toLowerCase(); },\n        function() {\n                        var tag = options.data.tag;\n                          options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                          if (tag) {options.data.setParam('tag',tag)}\n                        },\n        \"tag\",\n        peg$literalExpectation(\"tag\", true),\n        function(tag) {options.data.tag = tag; },\n        function(forwards) {\n                          options.data = parseInt(forwards.join('')); },\n        function(min_expires) {options.data = min_expires; },\n        function() {\n                                options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                              },\n        \"digest\",\n        peg$literalExpectation(\"Digest\", true),\n        \"realm\",\n        peg$literalExpectation(\"realm\", true),\n        function(realm) { options.data.realm = realm; },\n        \"domain\",\n        peg$literalExpectation(\"domain\", true),\n        \"nonce\",\n        peg$literalExpectation(\"nonce\", true),\n        function(nonce) { options.data.nonce=nonce; },\n        \"opaque\",\n        peg$literalExpectation(\"opaque\", true),\n        function(opaque) { options.data.opaque=opaque; },\n        \"stale\",\n        peg$literalExpectation(\"stale\", true),\n        \"true\",\n        peg$literalExpectation(\"true\", true),\n        function() { options.data.stale=true; },\n        \"false\",\n        peg$literalExpectation(\"false\", true),\n        function() { options.data.stale=false; },\n        \"algorithm\",\n        peg$literalExpectation(\"algorithm\", true),\n        \"md5\",\n        peg$literalExpectation(\"MD5\", true),\n        \"md5-sess\",\n        peg$literalExpectation(\"MD5-sess\", true),\n        function(algorithm) {\n                              options.data.algorithm=algorithm.toUpperCase(); },\n        \"qop\",\n        peg$literalExpectation(\"qop\", true),\n        \"auth-int\",\n        peg$literalExpectation(\"auth-int\", true),\n        \"auth\",\n        peg$literalExpectation(\"auth\", true),\n        function(qop_value) {\n                                options.data.qop || (options.data.qop=[]);\n                                options.data.qop.push(qop_value.toLowerCase()); },\n        function(rack_value) {\n                          options.data.value=parseInt(rack_value.join('')); },\n        function() {\n                          var idx, length;\n                          length = options.data.multi_header.length;\n                          for (idx = 0; idx < length; idx++) {\n                            if (options.data.multi_header[idx].parsed === null) {\n                              options.data = null;\n                              break;\n                            }\n                          }\n                          if (options.data !== null) {\n                            options.data = options.data.multi_header;\n                          } else {\n                            options.data = -1;\n                          }},\n        function() {\n                          var header;\n                          if(!options.data.multi_header) options.data.multi_header = [];\n                          try {\n                            header = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                            delete options.data.uri;\n                            delete options.data.displayName;\n                            delete options.data.params;\n                          } catch(e) {\n                            header = null;\n                          }\n                          options.data.multi_header.push( { 'position': peg$currPos,\n                                                    'offset': location().start.offset,\n                                                    'parsed': header\n                                                  });},\n        function() {\n                      options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                    },\n        function() {\n                              if (!(options.data.replaces_from_tag && options.data.replaces_to_tag)) {\n                                options.data = -1;\n                              }\n                            },\n        function() {\n                              options.data = {\n                                call_id: options.data\n                              };\n                            },\n        \"from-tag\",\n        peg$literalExpectation(\"from-tag\", true),\n        function(from_tag) {\n                              options.data.replaces_from_tag = from_tag;\n                            },\n        \"to-tag\",\n        peg$literalExpectation(\"to-tag\", true),\n        function(to_tag) {\n                              options.data.replaces_to_tag = to_tag;\n                            },\n        \"early-only\",\n        peg$literalExpectation(\"early-only\", true),\n        function() {\n                              options.data.early_only = true;\n                            },\n        function(head, r) {return r;},\n        function(head, tail) { return list(head, tail); },\n        function(value) {\n                        if (options.startRule === 'Require') {\n                          options.data = value || [];\n                        }\n                      },\n        function(rseq_value) {\n                          options.data.value=parseInt(rseq_value.join('')); },\n        \"active\",\n        peg$literalExpectation(\"active\", true),\n        \"pending\",\n        peg$literalExpectation(\"pending\", true),\n        \"terminated\",\n        peg$literalExpectation(\"terminated\", true),\n        function() {\n                                options.data.state = text(); },\n        \"reason\",\n        peg$literalExpectation(\"reason\", true),\n        function(reason) {\n                                if (typeof reason !== 'undefined') options.data.reason = reason; },\n        function(expires) {\n                                if (typeof expires !== 'undefined') options.data.expires = expires; },\n        \"retry_after\",\n        peg$literalExpectation(\"retry_after\", true),\n        function(retry_after) {\n                                if (typeof retry_after !== 'undefined') options.data.retry_after = retry_after; },\n        \"deactivated\",\n        peg$literalExpectation(\"deactivated\", true),\n        \"probation\",\n        peg$literalExpectation(\"probation\", true),\n        \"rejected\",\n        peg$literalExpectation(\"rejected\", true),\n        \"timeout\",\n        peg$literalExpectation(\"timeout\", true),\n        \"giveup\",\n        peg$literalExpectation(\"giveup\", true),\n        \"noresource\",\n        peg$literalExpectation(\"noresource\", true),\n        \"invariant\",\n        peg$literalExpectation(\"invariant\", true),\n        function(value) {\n                        if (options.startRule === 'Supported') {\n                          options.data = value || [];\n                        }\n                      },\n        function() {\n                      var tag = options.data.tag;\n                        options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                        if (tag) {options.data.setParam('tag',tag)}\n                      },\n        \"ttl\",\n        peg$literalExpectation(\"ttl\", true),\n        function(via_ttl_value) {\n                              options.data.ttl = via_ttl_value; },\n        \"maddr\",\n        peg$literalExpectation(\"maddr\", true),\n        function(via_maddr) {\n                              options.data.maddr = via_maddr; },\n        \"received\",\n        peg$literalExpectation(\"received\", true),\n        function(via_received) {\n                              options.data.received = via_received; },\n        \"branch\",\n        peg$literalExpectation(\"branch\", true),\n        function(via_branch) {\n                              options.data.branch = via_branch; },\n        \"rport\",\n        peg$literalExpectation(\"rport\", true),\n        function() {\n                              if(typeof response_port !== 'undefined')\n                                options.data.rport = response_port.join(''); },\n        function(via_protocol) {\n                              options.data.protocol = via_protocol; },\n        peg$literalExpectation(\"UDP\", true),\n        peg$literalExpectation(\"TCP\", true),\n        peg$literalExpectation(\"TLS\", true),\n        peg$literalExpectation(\"SCTP\", true),\n        function(via_transport) {\n                              options.data.transport = via_transport; },\n        function() {\n                              options.data.host = text(); },\n        function(via_sent_by_port) {\n                              options.data.port = parseInt(via_sent_by_port.join('')); },\n        function(ttl) {\n                              return parseInt(ttl.join('')); },\n        function(deltaSeconds) {\n                              if (options.startRule === 'Session_Expires') {\n                                options.data.deltaSeconds = deltaSeconds;\n                              }\n                            },\n        \"refresher\",\n        peg$literalExpectation(\"refresher\", false),\n        \"uas\",\n        peg$literalExpectation(\"uas\", false),\n        \"uac\",\n        peg$literalExpectation(\"uac\", false),\n        function(endpoint) {\n                              if (options.startRule === 'Session_Expires') {\n                                options.data.refresher = endpoint;\n                              }\n                            },\n        function(deltaSeconds) {\n                              if (options.startRule === 'Min_SE') {\n                                options.data = deltaSeconds;\n                              }\n                            },\n        \"stuns\",\n        peg$literalExpectation(\"stuns\", true),\n        \"stun\",\n        peg$literalExpectation(\"stun\", true),\n        function(scheme) {\n                              options.data.scheme = scheme; },\n        function(host) {\n                              options.data.host = host; },\n        \"?transport=\",\n        peg$literalExpectation(\"?transport=\", false),\n        \"turns\",\n        peg$literalExpectation(\"turns\", true),\n        \"turn\",\n        peg$literalExpectation(\"turn\", true),\n        function() {\n                              options.data.transport = transport; },\n        function() {\n                          options.data = text(); },\n        \"Referred-By\",\n        peg$literalExpectation(\"Referred-By\", false),\n        \"b\",\n        peg$literalExpectation(\"b\", false),\n        \"cid\",\n        peg$literalExpectation(\"cid\", false)\n      ],\n\n      peg$bytecode = [\n        peg$decode(\"2 \\\"\\\"6 7!\"),\n        peg$decode(\"4\\\"\\\"\\\"5!7#\"),\n        peg$decode(\"4$\\\"\\\"5!7%\"),\n        peg$decode(\"4&\\\"\\\"5!7'\"),\n        peg$decode(\";'.# &;(\"),\n        peg$decode(\"4(\\\"\\\"5!7)\"),\n        peg$decode(\"4*\\\"\\\"5!7+\"),\n        peg$decode(\"2,\\\"\\\"6,7-\"),\n        peg$decode(\"2.\\\"\\\"6.7/\"),\n        peg$decode(\"40\\\"\\\"5!71\"),\n        peg$decode(\"22\\\"\\\"6273.\\x89 &24\\\"\\\"6475.} &26\\\"\\\"6677.q &28\\\"\\\"6879.e &2:\\\"\\\"6:7;.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E\"),\n        peg$decode(\";).# &;,\"),\n        peg$decode(\"2F\\\"\\\"6F7G.} &2H\\\"\\\"6H7I.q &2J\\\"\\\"6J7K.e &2L\\\"\\\"6L7M.Y &2N\\\"\\\"6N7O.M &2P\\\"\\\"6P7Q.A &2R\\\"\\\"6R7S.5 &2T\\\"\\\"6T7U.) &2V\\\"\\\"6V7W\"),\n        peg$decode(\"%%2X\\\"\\\"6X7Y/5#;#/,$;#/#$+#)(#'#(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"%%$;$0#*;$&/,#; /#$+\\\")(\\\"'#&'#.\\\" &\\\"/=#$;$/&#0#*;$&&&#/'$8\\\":Z\\\" )(\\\"'#&'#\"),\n        peg$decode(\";..\\\" &\\\"\"),\n        peg$decode(\"%$;'.# &;(0)*;'.# &;(&/?#28\\\"\\\"6879/0$;//'$8#:[# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%%$;2/&#0#*;2&&&#/g#$%$;.0#*;.&/,#;2/#$+\\\")(\\\"'#&'#0=*%$;.0#*;.&/,#;2/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"4\\\\\\\"\\\"5!7].# &;3\"),\n        peg$decode(\"4^\\\"\\\"5!7_\"),\n        peg$decode(\"4`\\\"\\\"5!7a\"),\n        peg$decode(\";!.) &4b\\\"\\\"5!7c\"),\n        peg$decode(\"%$;).\\x95 &2F\\\"\\\"6F7G.\\x89 &2J\\\"\\\"6J7K.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O/\\x9E#0\\x9B*;).\\x95 &2F\\\"\\\"6F7G.\\x89 &2J\\\"\\\"6J7K.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O&&&#/\\\"!&,)\"),\n        peg$decode(\"%$;).\\x89 &2F\\\"\\\"6F7G.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O/\\x92#0\\x8F*;).\\x89 &2F\\\"\\\"6F7G.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O&&&#/\\\"!&,)\"),\n        peg$decode(\"2T\\\"\\\"6T7U.\\xE3 &2V\\\"\\\"6V7W.\\xD7 &2f\\\"\\\"6f7g.\\xCB &2h\\\"\\\"6h7i.\\xBF &2:\\\"\\\"6:7;.\\xB3 &2D\\\"\\\"6D7E.\\xA7 &22\\\"\\\"6273.\\x9B &28\\\"\\\"6879.\\x8F &2j\\\"\\\"6j7k.\\x83 &;&.} &24\\\"\\\"6475.q &2l\\\"\\\"6l7m.e &2n\\\"\\\"6n7o.Y &26\\\"\\\"6677.M &2>\\\"\\\"6>7?.A &2p\\\"\\\"6p7q.5 &2r\\\"\\\"6r7s.) &;'.# &;(\"),\n        peg$decode(\"%$;).\\u012B &2F\\\"\\\"6F7G.\\u011F &2J\\\"\\\"6J7K.\\u0113 &2L\\\"\\\"6L7M.\\u0107 &2X\\\"\\\"6X7Y.\\xFB &2P\\\"\\\"6P7Q.\\xEF &2H\\\"\\\"6H7I.\\xE3 &2@\\\"\\\"6@7A.\\xD7 &2d\\\"\\\"6d7e.\\xCB &2R\\\"\\\"6R7S.\\xBF &2N\\\"\\\"6N7O.\\xB3 &2T\\\"\\\"6T7U.\\xA7 &2V\\\"\\\"6V7W.\\x9B &2f\\\"\\\"6f7g.\\x8F &2h\\\"\\\"6h7i.\\x83 &28\\\"\\\"6879.w &2j\\\"\\\"6j7k.k &;&.e &24\\\"\\\"6475.Y &2l\\\"\\\"6l7m.M &2n\\\"\\\"6n7o.A &26\\\"\\\"6677.5 &2p\\\"\\\"6p7q.) &2r\\\"\\\"6r7s/\\u0134#0\\u0131*;).\\u012B &2F\\\"\\\"6F7G.\\u011F &2J\\\"\\\"6J7K.\\u0113 &2L\\\"\\\"6L7M.\\u0107 &2X\\\"\\\"6X7Y.\\xFB &2P\\\"\\\"6P7Q.\\xEF &2H\\\"\\\"6H7I.\\xE3 &2@\\\"\\\"6@7A.\\xD7 &2d\\\"\\\"6d7e.\\xCB &2R\\\"\\\"6R7S.\\xBF &2N\\\"\\\"6N7O.\\xB3 &2T\\\"\\\"6T7U.\\xA7 &2V\\\"\\\"6V7W.\\x9B &2f\\\"\\\"6f7g.\\x8F &2h\\\"\\\"6h7i.\\x83 &28\\\"\\\"6879.w &2j\\\"\\\"6j7k.k &;&.e &24\\\"\\\"6475.Y &2l\\\"\\\"6l7m.M &2n\\\"\\\"6n7o.A &26\\\"\\\"6677.5 &2p\\\"\\\"6p7q.) &2r\\\"\\\"6r7s&&&#/\\\"!&,)\"),\n        peg$decode(\"%;//?#2P\\\"\\\"6P7Q/0$;//'$8#:t# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#24\\\"\\\"6475/0$;//'$8#:u# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2>\\\"\\\"6>7?/0$;//'$8#:v# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2T\\\"\\\"6T7U/0$;//'$8#:w# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2V\\\"\\\"6V7W/0$;//'$8#:x# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%2h\\\"\\\"6h7i/0#;//'$8\\\":y\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;//6#2f\\\"\\\"6f7g/'$8\\\":z\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2D\\\"\\\"6D7E/0$;//'$8#:{# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#22\\\"\\\"6273/0$;//'$8#:|# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#28\\\"\\\"6879/0$;//'$8#:}# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//0#;&/'$8\\\":~\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;&/0#;//'$8\\\":~\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;=/T#$;G.) &;K.# &;F0/*;G.) &;K.# &;F&/,$;>/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"4\\x7F\\\"\\\"5!7\\x80.A &4\\x81\\\"\\\"5!7\\x82.5 &4\\x83\\\"\\\"5!7\\x84.) &;3.# &;.\"),\n        peg$decode(\"%%;//Q#;&/H$$;J.# &;K0)*;J.# &;K&/,$;&/#$+$)($'#(#'#(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"%;//]#;&/T$%$;J.# &;K0)*;J.# &;K&/\\\"!&,)/1$;&/($8$:\\x85$!!)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";..G &2L\\\"\\\"6L7M.; &4\\x86\\\"\\\"5!7\\x87./ &4\\x83\\\"\\\"5!7\\x84.# &;3\"),\n        peg$decode(\"%2j\\\"\\\"6j7k/J#4\\x88\\\"\\\"5!7\\x89.5 &4\\x8A\\\"\\\"5!7\\x8B.) &4\\x8C\\\"\\\"5!7\\x8D/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;N/M#28\\\"\\\"6879/>$;O.\\\" &\\\"/0$;S/'$8$:\\x8E$ )($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;N/d#28\\\"\\\"6879/U$;O.\\\" &\\\"/G$;S/>$;_/5$;l.\\\" &\\\"/'$8&:\\x8F& )(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\x90\\\"\\\"5$7\\x91.) &3\\x92\\\"\\\"5#7\\x93/' 8!:\\x94!! )\"),\n        peg$decode(\"%;P/]#%28\\\"\\\"6879/,#;R/#$+\\\")(\\\"'#&'#.\\\" &\\\"/6$2:\\\"\\\"6:7;/'$8#:\\x95# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"$;+.) &;-.# &;Q/2#0/*;+.) &;-.# &;Q&&&#\"),\n        peg$decode(\"2<\\\"\\\"6<7=.q &2>\\\"\\\"6>7?.e &2@\\\"\\\"6@7A.Y &2B\\\"\\\"6B7C.M &2D\\\"\\\"6D7E.A &22\\\"\\\"6273.5 &26\\\"\\\"6677.) &24\\\"\\\"6475\"),\n        peg$decode(\"%$;+._ &;-.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E0e*;+._ &;-.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E&/& 8!:\\x96! )\"),\n        peg$decode(\"%;T/J#%28\\\"\\\"6879/,#;^/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;U.) &;\\\\.# &;X/& 8!:\\x97! )\"),\n        peg$decode(\"%$%;V/2#2J\\\"\\\"6J7K/#$+\\\")(\\\"'#&'#0<*%;V/2#2J\\\"\\\"6J7K/#$+\\\")(\\\"'#&'#&/D#;W/;$2J\\\"\\\"6J7K.\\\" &\\\"/'$8#:\\x98# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"$4\\x99\\\"\\\"5!7\\x9A/,#0)*4\\x99\\\"\\\"5!7\\x9A&&&#\"),\n        peg$decode(\"%4$\\\"\\\"5!7%/?#$4\\x9B\\\"\\\"5!7\\x9C0)*4\\x9B\\\"\\\"5!7\\x9C&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%2l\\\"\\\"6l7m/?#;Y/6$2n\\\"\\\"6n7o/'$8#:\\x9D# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%%;Z/\\xB3#28\\\"\\\"6879/\\xA4$;Z/\\x9B$28\\\"\\\"6879/\\x8C$;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+-)(-'#(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0790 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/\\xA4#;Z/\\x9B$28\\\"\\\"6879/\\x8C$;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+,)(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u06F9 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/\\x8C#;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u067A &%2\\x9E\\\"\\\"6\\x9E7\\x9F/t#;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0613 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/\\\\#;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+&)(&'#(%'#($'#(#'#(\\\"'#&'#.\\u05C4 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/D#;Z/;$28\\\"\\\"6879/,$;[/#$+$)($'#(#'#(\\\"'#&'#.\\u058D &%2\\x9E\\\"\\\"6\\x9E7\\x9F/,#;[/#$+\\\")(\\\"'#&'#.\\u056E &%2\\x9E\\\"\\\"6\\x9E7\\x9F/,#;Z/#$+\\\")(\\\"'#&'#.\\u054F &%;Z/\\x9B#2\\x9E\\\"\\\"6\\x9E7\\x9F/\\x8C$;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$++)(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u04C7 &%;Z/\\xAA#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x83$2\\x9E\\\"\\\"6\\x9E7\\x9F/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0430 &%;Z/\\xB9#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x92$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/k$2\\x9E\\\"\\\"6\\x9E7\\x9F/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+))()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u038A &%;Z/\\xC8#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xA1$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/z$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/S$2\\x9E\\\"\\\"6\\x9E7\\x9F/D$;Z/;$28\\\"\\\"6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u02D5 &%;Z/\\xD7#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xB0$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x89$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/b$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/;$2\\x9E\\\"\\\"6\\x9E7\\x9F/,$;[/#$+')(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0211 &%;Z/\\xFE#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xD7$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xB0$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x89$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/b$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/;$2\\x9E\\\"\\\"6\\x9E7\\x9F/,$;Z/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0126 &%;Z/\\u011C#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xF5$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xCE$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xA7$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x80$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/Y$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/2$2\\x9E\\\"\\\"6\\x9E7\\x9F/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#/& 8!:\\xA0! )\"),\n        peg$decode(\"%;#/M#;#.\\\" &\\\"/?$;#.\\\" &\\\"/1$;#.\\\" &\\\"/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;Z/;#28\\\"\\\"6879/,$;Z/#$+#)(#'#(\\\"'#&'#.# &;\\\\\"),\n        peg$decode(\"%;]/o#2J\\\"\\\"6J7K/`$;]/W$2J\\\"\\\"6J7K/H$;]/?$2J\\\"\\\"6J7K/0$;]/'$8':\\xA1' )(''#(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%2\\xA2\\\"\\\"6\\xA27\\xA3/2#4\\xA4\\\"\\\"5!7\\xA5/#$+\\\")(\\\"'#&'#.\\x98 &%2\\xA6\\\"\\\"6\\xA67\\xA7/;#4\\xA8\\\"\\\"5!7\\xA9/,$;!/#$+#)(#'#(\\\"'#&'#.j &%2\\xAA\\\"\\\"6\\xAA7\\xAB/5#;!/,$;!/#$+#)(#'#(\\\"'#&'#.B &%4\\xAC\\\"\\\"5!7\\xAD/,#;!/#$+\\\")(\\\"'#&'#.# &;!\"),\n        peg$decode(\"%%;!.\\\" &\\\"/[#;!.\\\" &\\\"/M$;!.\\\" &\\\"/?$;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+%)(%'#($'#(#'#(\\\"'#&'#/' 8!:\\xAE!! )\"),\n        peg$decode(\"$%22\\\"\\\"6273/,#;`/#$+\\\")(\\\"'#&'#0<*%22\\\"\\\"6273/,#;`/#$+\\\")(\\\"'#&'#&\"),\n        peg$decode(\";a.A &;b.; &;c.5 &;d./ &;e.) &;f.# &;g\"),\n        peg$decode(\"%3\\xAF\\\"\\\"5*7\\xB0/a#3\\xB1\\\"\\\"5#7\\xB2.G &3\\xB3\\\"\\\"5#7\\xB4.; &3\\xB5\\\"\\\"5$7\\xB6./ &3\\xB7\\\"\\\"5#7\\xB8.# &;6/($8\\\":\\xB9\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xBA\\\"\\\"5%7\\xBB/I#3\\xBC\\\"\\\"5%7\\xBD./ &3\\xBE\\\"\\\"5\\\"7\\xBF.# &;6/($8\\\":\\xC0\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xC1\\\"\\\"5'7\\xC2/1#;\\x90/($8\\\":\\xC3\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xC4\\\"\\\"5$7\\xC5/1#;\\xF0/($8\\\":\\xC6\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xC7\\\"\\\"5&7\\xC8/1#;T/($8\\\":\\xC9\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xCA\\\"\\\"5\\\"7\\xCB/N#%2>\\\"\\\"6>7?/,#;6/#$+\\\")(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\xCC\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;h/P#%2>\\\"\\\"6>7?/,#;i/#$+\\\")(\\\"'#&'#.\\\" &\\\"/)$8\\\":\\xCD\\\"\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%$;j/&#0#*;j&&&#/\\\"!&,)\"),\n        peg$decode(\"%$;j/&#0#*;j&&&#/\\\"!&,)\"),\n        peg$decode(\";k.) &;+.# &;-\"),\n        peg$decode(\"2l\\\"\\\"6l7m.e &2n\\\"\\\"6n7o.Y &24\\\"\\\"6475.M &28\\\"\\\"6879.A &2<\\\"\\\"6<7=.5 &2@\\\"\\\"6@7A.) &2B\\\"\\\"6B7C\"),\n        peg$decode(\"%26\\\"\\\"6677/n#;m/e$$%2<\\\"\\\"6<7=/,#;m/#$+\\\")(\\\"'#&'#0<*%2<\\\"\\\"6<7=/,#;m/#$+\\\")(\\\"'#&'#&/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;n/A#2>\\\"\\\"6>7?/2$;o/)$8#:\\xCE#\\\"\\\" )(#'#(\\\"'#&'#\"),\n        peg$decode(\"$;p.) &;+.# &;-/2#0/*;p.) &;+.# &;-&&&#\"),\n        peg$decode(\"$;p.) &;+.# &;-0/*;p.) &;+.# &;-&\"),\n        peg$decode(\"2l\\\"\\\"6l7m.e &2n\\\"\\\"6n7o.Y &24\\\"\\\"6475.M &26\\\"\\\"6677.A &28\\\"\\\"6879.5 &2@\\\"\\\"6@7A.) &2B\\\"\\\"6B7C\"),\n        peg$decode(\";\\x91.# &;r\"),\n        peg$decode(\"%;\\x90/G#;'/>$;s/5$;'/,$;\\x84/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";M.# &;t\"),\n        peg$decode(\"%;\\x7F/E#28\\\"\\\"6879/6$;u.# &;x/'$8#:\\xCF# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;v.# &;w/J#%26\\\"\\\"6677/,#;\\x83/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%2\\xD0\\\"\\\"6\\xD07\\xD1/:#;\\x80/1$;w.\\\" &\\\"/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%24\\\"\\\"6475/,#;{/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;z/3#$;y0#*;y&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\";*.) &;+.# &;-\"),\n        peg$decode(\";+.\\x8F &;-.\\x89 &22\\\"\\\"6273.} &26\\\"\\\"6677.q &28\\\"\\\"6879.e &2:\\\"\\\"6:7;.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E\"),\n        peg$decode(\"%;|/e#$%24\\\"\\\"6475/,#;|/#$+\\\")(\\\"'#&'#0<*%24\\\"\\\"6475/,#;|/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%$;~0#*;~&/e#$%22\\\"\\\"6273/,#;}/#$+\\\")(\\\"'#&'#0<*%22\\\"\\\"6273/,#;}/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"$;~0#*;~&\"),\n        peg$decode(\";+.w &;-.q &28\\\"\\\"6879.e &2:\\\"\\\"6:7;.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E\"),\n        peg$decode(\"%%;\\\"/\\x87#$;\\\".G &;!.A &2@\\\"\\\"6@7A.5 &2F\\\"\\\"6F7G.) &2J\\\"\\\"6J7K0M*;\\\".G &;!.A &2@\\\"\\\"6@7A.5 &2F\\\"\\\"6F7G.) &2J\\\"\\\"6J7K&/#$+\\\")(\\\"'#&'#/& 8!:\\xD2! )\"),\n        peg$decode(\";\\x81.# &;\\x82\"),\n        peg$decode(\"%%;O/2#2:\\\"\\\"6:7;/#$+\\\")(\\\"'#&'#.\\\" &\\\"/,#;S/#$+\\\")(\\\"'#&'#.\\\" &\\\"\"),\n        peg$decode(\"$;+.\\x83 &;-.} &2B\\\"\\\"6B7C.q &2D\\\"\\\"6D7E.e &22\\\"\\\"6273.Y &28\\\"\\\"6879.M &2:\\\"\\\"6:7;.A &2<\\\"\\\"6<7=.5 &2>\\\"\\\"6>7?.) &2@\\\"\\\"6@7A/\\x8C#0\\x89*;+.\\x83 &;-.} &2B\\\"\\\"6B7C.q &2D\\\"\\\"6D7E.e &22\\\"\\\"6273.Y &28\\\"\\\"6879.M &2:\\\"\\\"6:7;.A &2<\\\"\\\"6<7=.5 &2>\\\"\\\"6>7?.) &2@\\\"\\\"6@7A&&&#\"),\n        peg$decode(\"$;y0#*;y&\"),\n        peg$decode(\"%3\\x92\\\"\\\"5#7\\xD3/q#24\\\"\\\"6475/b$$;!/&#0#*;!&&&#/L$2J\\\"\\\"6J7K/=$$;!/&#0#*;!&&&#/'$8%:\\xD4% )(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"2\\xD5\\\"\\\"6\\xD57\\xD6\"),\n        peg$decode(\"2\\xD7\\\"\\\"6\\xD77\\xD8\"),\n        peg$decode(\"2\\xD9\\\"\\\"6\\xD97\\xDA\"),\n        peg$decode(\"2\\xDB\\\"\\\"6\\xDB7\\xDC\"),\n        peg$decode(\"2\\xDD\\\"\\\"6\\xDD7\\xDE\"),\n        peg$decode(\"2\\xDF\\\"\\\"6\\xDF7\\xE0\"),\n        peg$decode(\"2\\xE1\\\"\\\"6\\xE17\\xE2\"),\n        peg$decode(\"2\\xE3\\\"\\\"6\\xE37\\xE4\"),\n        peg$decode(\"2\\xE5\\\"\\\"6\\xE57\\xE6\"),\n        peg$decode(\"2\\xE7\\\"\\\"6\\xE77\\xE8\"),\n        peg$decode(\"2\\xE9\\\"\\\"6\\xE97\\xEA\"),\n        peg$decode(\"%;\\x85.Y &;\\x86.S &;\\x88.M &;\\x89.G &;\\x8A.A &;\\x8B.; &;\\x8C.5 &;\\x8F./ &;\\x8D.) &;\\x8E.# &;6/& 8!:\\xEB! )\"),\n        peg$decode(\"%;\\x84/G#;'/>$;\\x92/5$;'/,$;\\x94/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\x93/' 8!:\\xEC!! )\"),\n        peg$decode(\"%;!/5#;!/,$;!/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(0G*;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(&/& 8!:\\xED! )\"),\n        peg$decode(\"%;\\xB6/Y#$%;A/,#;\\xB6/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xB6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;9/N#%2:\\\"\\\"6:7;/,#;9/#$+\\\")(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\xEE\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;:.c &%;\\x98/Y#$%;A/,#;\\x98/#$+\\\")(\\\"'#&'#06*%;A/,#;\\x98/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/& 8!:\\xEF! )\"),\n        peg$decode(\"%;L.# &;\\x99/]#$%;B/,#;\\x9B/#$+\\\")(\\\"'#&'#06*%;B/,#;\\x9B/#$+\\\")(\\\"'#&'#&/'$8\\\":\\xF0\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\x9A.\\\" &\\\"/>#;@/5$;M/,$;?/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%%;6/Y#$%;./,#;6/#$+\\\")(\\\"'#&'#06*%;./,#;6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#.# &;H/' 8!:\\xF1!! )\"),\n        peg$decode(\";\\x9C.) &;\\x9D.# &;\\xA0\"),\n        peg$decode(\"%3\\xF2\\\"\\\"5!7\\xF3/:#;</1$;\\x9F/($8#:\\xF4#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\xF5\\\"\\\"5'7\\xF6/:#;</1$;\\x9E/($8#:\\xF7#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\xF8!! )\"),\n        peg$decode(\"%2\\xF9\\\"\\\"6\\xF97\\xFA/o#%2J\\\"\\\"6J7K/M#;!.\\\" &\\\"/?$;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+$)($'#(#'#(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\xFB\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;6/J#%;</,#;\\xA1/#$+\\\")(\\\"'#&'#.\\\" &\\\"/)$8\\\":\\xFC\\\"\\\"! )(\\\"'#&'#\"),\n        peg$decode(\";6.) &;T.# &;H\"),\n        peg$decode(\"%;\\xA3/Y#$%;B/,#;\\xA4/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA4/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%3\\xFD\\\"\\\"5&7\\xFE.G &3\\xFF\\\"\\\"5'7\\u0100.; &3\\u0101\\\"\\\"5$7\\u0102./ &3\\u0103\\\"\\\"5%7\\u0104.# &;6/& 8!:\\u0105! )\"),\n        peg$decode(\";\\xA5.# &;\\xA0\"),\n        peg$decode(\"%3\\u0106\\\"\\\"5(7\\u0107/M#;</D$3\\u0108\\\"\\\"5(7\\u0109./ &3\\u010A\\\"\\\"5(7\\u010B.# &;6/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;6/Y#$%;A/,#;6/#$+\\\")(\\\"'#&'#06*%;A/,#;6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u010C!! )\"),\n        peg$decode(\"%;\\xA9/& 8!:\\u010D! )\"),\n        peg$decode(\"%;\\xAA/k#;;/b$;\\xAF/Y$$%;B/,#;\\xB0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xB0/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xAB.# &;\\xAC\"),\n        peg$decode(\"3\\u010E\\\"\\\"5$7\\u010F.S &3\\u0110\\\"\\\"5%7\\u0111.G &3\\u0112\\\"\\\"5%7\\u0113.; &3\\u0114\\\"\\\"5%7\\u0115./ &3\\u0116\\\"\\\"5+7\\u0117.# &;\\xAD\"),\n        peg$decode(\"3\\u0118\\\"\\\"5'7\\u0119./ &3\\u011A\\\"\\\"5)7\\u011B.# &;\\xAD\"),\n        peg$decode(\";6.# &;\\xAE\"),\n        peg$decode(\"%3\\u011C\\\"\\\"5\\\"7\\u011D/,#;6/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\";\\xAD.# &;6\"),\n        peg$decode(\"%;6/5#;</,$;\\xB1/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\";6.# &;H\"),\n        peg$decode(\"%;\\xB3/5#;./,$;\\x90/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u011E!! )\"),\n        peg$decode(\"%;\\x9E/' 8!:\\u011F!! )\"),\n        peg$decode(\"%;\\xB6/^#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/($8\\\":\\u0120\\\"!!)(\\\"'#&'#\"),\n        peg$decode(\"%%;7/e#$%2J\\\"\\\"6J7K/,#;7/#$+\\\")(\\\"'#&'#0<*%2J\\\"\\\"6J7K/,#;7/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"%;L.# &;\\x99/]#$%;B/,#;\\xB8/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xB8/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u0121\\\" )(\\\"'#&'#\"),\n        peg$decode(\";\\xB9.# &;\\xA0\"),\n        peg$decode(\"%3\\u0122\\\"\\\"5#7\\u0123/:#;</1$;6/($8#:\\u0124#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u0125!! )\"),\n        peg$decode(\"%;\\x9E/' 8!:\\u0126!! )\"),\n        peg$decode(\"%$;\\x9A0#*;\\x9A&/x#;@/o$;M/f$;?/]$$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/'$8%:\\u0127% )(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xBE\"),\n        peg$decode(\"%3\\u0128\\\"\\\"5&7\\u0129/k#;./b$;\\xC1/Y$$%;A/,#;\\xC1/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xC1/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#.# &;\\xBF\"),\n        peg$decode(\"%;6/k#;./b$;\\xC0/Y$$%;A/,#;\\xC0/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xC0/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;6/;#;</2$;6.# &;H/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xC2.G &;\\xC4.A &;\\xC6.; &;\\xC8.5 &;\\xC9./ &;\\xCA.) &;\\xCB.# &;\\xC0\"),\n        peg$decode(\"%3\\u012A\\\"\\\"5%7\\u012B/5#;</,$;\\xC3/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;I/' 8!:\\u012C!! )\"),\n        peg$decode(\"%3\\u012D\\\"\\\"5&7\\u012E/\\x97#;</\\x8E$;D/\\x85$;\\xC5/|$$%$;'/&#0#*;'&&&#/,#;\\xC5/#$+\\\")(\\\"'#&'#0C*%$;'/&#0#*;'&&&#/,#;\\xC5/#$+\\\")(\\\"'#&'#&/,$;E/#$+&)(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";t.# &;w\"),\n        peg$decode(\"%3\\u012F\\\"\\\"5%7\\u0130/5#;</,$;\\xC7/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;I/' 8!:\\u0131!! )\"),\n        peg$decode(\"%3\\u0132\\\"\\\"5&7\\u0133/:#;</1$;I/($8#:\\u0134#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0135\\\"\\\"5%7\\u0136/]#;</T$%3\\u0137\\\"\\\"5$7\\u0138/& 8!:\\u0139! ).4 &%3\\u013A\\\"\\\"5%7\\u013B/& 8!:\\u013C! )/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u013D\\\"\\\"5)7\\u013E/R#;</I$3\\u013F\\\"\\\"5#7\\u0140./ &3\\u0141\\\"\\\"5(7\\u0142.# &;6/($8#:\\u0143#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0144\\\"\\\"5#7\\u0145/\\x93#;</\\x8A$;D/\\x81$%;\\xCC/e#$%2D\\\"\\\"6D7E/,#;\\xCC/#$+\\\")(\\\"'#&'#0<*%2D\\\"\\\"6D7E/,#;\\xCC/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/,$;E/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0146\\\"\\\"5(7\\u0147./ &3\\u0148\\\"\\\"5$7\\u0149.# &;6/' 8!:\\u014A!! )\"),\n        peg$decode(\"%;6/Y#$%;A/,#;6/#$+\\\")(\\\"'#&'#06*%;A/,#;6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\xCF/G#;./>$;\\xCF/5$;./,$;\\x90/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u014B!! )\"),\n        peg$decode(\"%;\\xD1/]#$%;A/,#;\\xD1/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xD1/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014C\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\x99/]#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014D\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;L.O &;\\x99.I &%;@.\\\" &\\\"/:#;t/1$;?.\\\" &\\\"/#$+#)(#'#(\\\"'#&'#/]#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014E\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\xD4/]#$%;B/,#;\\xD5/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xD5/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014F\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\x96/& 8!:\\u0150! )\"),\n        peg$decode(\"%3\\u0151\\\"\\\"5(7\\u0152/:#;</1$;6/($8#:\\u0153#! )(#'#(\\\"'#&'#.g &%3\\u0154\\\"\\\"5&7\\u0155/:#;</1$;6/($8#:\\u0156#! )(#'#(\\\"'#&'#.: &%3\\u0157\\\"\\\"5*7\\u0158/& 8!:\\u0159! ).# &;\\xA0\"),\n        peg$decode(\"%%;6/k#$%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#0<*%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#&/)$8\\\":\\u015B\\\"\\\"! )(\\\"'#&'#.\\\" &\\\"/' 8!:\\u015C!! )\"),\n        peg$decode(\"%;\\xD8/Y#$%;A/,#;\\xD8/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xD8/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\x99/Y#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u015D!! )\"),\n        peg$decode(\"%;\\xDB/Y#$%;B/,#;\\xDC/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xDC/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%3\\u015E\\\"\\\"5&7\\u015F.; &3\\u0160\\\"\\\"5'7\\u0161./ &3\\u0162\\\"\\\"5*7\\u0163.# &;6/& 8!:\\u0164! )\"),\n        peg$decode(\"%3\\u0165\\\"\\\"5&7\\u0166/:#;</1$;\\xDD/($8#:\\u0167#! )(#'#(\\\"'#&'#.} &%3\\xF5\\\"\\\"5'7\\xF6/:#;</1$;\\x9E/($8#:\\u0168#! )(#'#(\\\"'#&'#.P &%3\\u0169\\\"\\\"5+7\\u016A/:#;</1$;\\x9E/($8#:\\u016B#! )(#'#(\\\"'#&'#.# &;\\xA0\"),\n        peg$decode(\"3\\u016C\\\"\\\"5+7\\u016D.k &3\\u016E\\\"\\\"5)7\\u016F._ &3\\u0170\\\"\\\"5(7\\u0171.S &3\\u0172\\\"\\\"5'7\\u0173.G &3\\u0174\\\"\\\"5&7\\u0175.; &3\\u0176\\\"\\\"5*7\\u0177./ &3\\u0178\\\"\\\"5)7\\u0179.# &;6\"),\n        peg$decode(\";1.\\\" &\\\"\"),\n        peg$decode(\"%%;6/k#$%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#0<*%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#&/)$8\\\":\\u015B\\\"\\\"! )(\\\"'#&'#.\\\" &\\\"/' 8!:\\u017A!! )\"),\n        peg$decode(\"%;L.# &;\\x99/]#$%;B/,#;\\xE1/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xE1/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u017B\\\" )(\\\"'#&'#\"),\n        peg$decode(\";\\xB9.# &;\\xA0\"),\n        peg$decode(\"%;\\xE3/Y#$%;A/,#;\\xE3/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xE3/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\xEA/k#;./b$;\\xED/Y$$%;B/,#;\\xE4/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xE4/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xE5.; &;\\xE6.5 &;\\xE7./ &;\\xE8.) &;\\xE9.# &;\\xA0\"),\n        peg$decode(\"%3\\u017C\\\"\\\"5#7\\u017D/:#;</1$;\\xF0/($8#:\\u017E#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u017F\\\"\\\"5%7\\u0180/:#;</1$;T/($8#:\\u0181#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0182\\\"\\\"5(7\\u0183/F#;</=$;\\\\.) &;Y.# &;X/($8#:\\u0184#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0185\\\"\\\"5&7\\u0186/:#;</1$;6/($8#:\\u0187#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0188\\\"\\\"5%7\\u0189/O#%;</3#$;!0#*;!&/#$+\\\")(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\u018A\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\xEB/G#;;/>$;6/5$;;/,$;\\xEC/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\x92\\\"\\\"5#7\\xD3.# &;6/' 8!:\\u018B!! )\"),\n        peg$decode(\"%3\\xB1\\\"\\\"5#7\\u018C.G &3\\xB3\\\"\\\"5#7\\u018D.; &3\\xB7\\\"\\\"5#7\\u018E./ &3\\xB5\\\"\\\"5$7\\u018F.# &;6/' 8!:\\u0190!! )\"),\n        peg$decode(\"%;\\xEE/D#%;C/,#;\\xEF/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;U.) &;\\\\.# &;X/& 8!:\\u0191! )\"),\n        peg$decode(\"%%;!.\\\" &\\\"/[#;!.\\\" &\\\"/M$;!.\\\" &\\\"/?$;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+%)(%'#($'#(#'#(\\\"'#&'#/' 8!:\\u0192!! )\"),\n        peg$decode(\"%%;!/?#;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+#)(#'#(\\\"'#&'#/' 8!:\\u0193!! )\"),\n        peg$decode(\";\\xBE\"),\n        peg$decode(\"%;\\x9E/^#$%;B/,#;\\xF3/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xF3/#$+\\\")(\\\"'#&'#&/($8\\\":\\u0194\\\"!!)(\\\"'#&'#\"),\n        peg$decode(\";\\xF4.# &;\\xA0\"),\n        peg$decode(\"%2\\u0195\\\"\\\"6\\u01957\\u0196/L#;</C$2\\u0197\\\"\\\"6\\u01977\\u0198.) &2\\u0199\\\"\\\"6\\u01997\\u019A/($8#:\\u019B#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\x9E/^#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/($8\\\":\\u019C\\\"!!)(\\\"'#&'#\"),\n        peg$decode(\"%;6/5#;0/,$;\\xF7/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"$;2.) &;4.# &;.0/*;2.) &;4.# &;.&\"),\n        peg$decode(\"$;%0#*;%&\"),\n        peg$decode(\"%;\\xFA/;#28\\\"\\\"6879/,$;\\xFB/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u019D\\\"\\\"5%7\\u019E.) &3\\u019F\\\"\\\"5$7\\u01A0/' 8!:\\u01A1!! )\"),\n        peg$decode(\"%;\\xFC/J#%28\\\"\\\"6879/,#;^/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\\\.) &;X.# &;\\x82/' 8!:\\u01A2!! )\"),\n        peg$decode(\";\\\".S &;!.M &2F\\\"\\\"6F7G.A &2J\\\"\\\"6J7K.5 &2H\\\"\\\"6H7I.) &2N\\\"\\\"6N7O\"),\n        peg$decode(\"2L\\\"\\\"6L7M.\\x95 &2B\\\"\\\"6B7C.\\x89 &2<\\\"\\\"6<7=.} &2R\\\"\\\"6R7S.q &2T\\\"\\\"6T7U.e &2V\\\"\\\"6V7W.Y &2P\\\"\\\"6P7Q.M &2@\\\"\\\"6@7A.A &2D\\\"\\\"6D7E.5 &22\\\"\\\"6273.) &2>\\\"\\\"6>7?\"),\n        peg$decode(\"%;\\u0100/b#28\\\"\\\"6879/S$;\\xFB/J$%2\\u01A3\\\"\\\"6\\u01A37\\u01A4/,#;\\xEC/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u01A5\\\"\\\"5%7\\u01A6.) &3\\u01A7\\\"\\\"5$7\\u01A8/' 8!:\\u01A1!! )\"),\n        peg$decode(\"%;\\xEC/O#3\\xB1\\\"\\\"5#7\\xB2.6 &3\\xB3\\\"\\\"5#7\\xB4.* &$;+0#*;+&/'$8\\\":\\u01A9\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\u0104/\\x87#2F\\\"\\\"6F7G/x$;\\u0103/o$2F\\\"\\\"6F7G/`$;\\u0103/W$2F\\\"\\\"6F7G/H$;\\u0103/?$2F\\\"\\\"6F7G/0$;\\u0105/'$8):\\u01AA) )()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;#/>#;#/5$;#/,$;#/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\u0103/,#;\\u0103/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\u0103/5#;\\u0103/,$;\\u0103/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\x84/U#;'/L$;\\x92/C$;'/:$;\\x90/1$; .\\\" &\\\"/#$+&)(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%2\\u01AB\\\"\\\"6\\u01AB7\\u01AC.) &2\\u01AD\\\"\\\"6\\u01AD7\\u01AE/w#;0/n$;\\u0108/e$$%;B/2#;\\u0109.# &;\\xA0/#$+\\\")(\\\"'#&'#0<*%;B/2#;\\u0109.# &;\\xA0/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\x99.# &;L\"),\n        peg$decode(\"%2\\u01AF\\\"\\\"6\\u01AF7\\u01B0/5#;</,$;\\u010A/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;D/S#;,/J$2:\\\"\\\"6:7;/;$;,.# &;T/,$;E/#$+%)(%'#($'#(#'#(\\\"'#&'#\")\n      ],\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleIndices)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleIndex = peg$startRuleIndices[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$decode(s) {\n    var bc = new Array(s.length), i;\n\n    for (i = 0; i < s.length; i++) {\n      bc[i] = s.charCodeAt(i) - 32;\n    }\n\n    return bc;\n  }\n\n  function peg$parseRule(index) {\n    var bc    = peg$bytecode[index],\n        ip    = 0,\n        ips   = [],\n        end   = bc.length,\n        ends  = [],\n        stack = [],\n        params, i;\n\n    while (true) {\n      while (ip < end) {\n        switch (bc[ip]) {\n          case 0:\n            stack.push(peg$consts[bc[ip + 1]]);\n            ip += 2;\n            break;\n\n          case 1:\n            stack.push(void 0);\n            ip++;\n            break;\n\n          case 2:\n            stack.push(null);\n            ip++;\n            break;\n\n          case 3:\n            stack.push(peg$FAILED);\n            ip++;\n            break;\n\n          case 4:\n            stack.push([]);\n            ip++;\n            break;\n\n          case 5:\n            stack.push(peg$currPos);\n            ip++;\n            break;\n\n          case 6:\n            stack.pop();\n            ip++;\n            break;\n\n          case 7:\n            peg$currPos = stack.pop();\n            ip++;\n            break;\n\n          case 8:\n            stack.length -= bc[ip + 1];\n            ip += 2;\n            break;\n\n          case 9:\n            stack.splice(-2, 1);\n            ip++;\n            break;\n\n          case 10:\n            stack[stack.length - 2].push(stack.pop());\n            ip++;\n            break;\n\n          case 11:\n            stack.push(stack.splice(stack.length - bc[ip + 1], bc[ip + 1]));\n            ip += 2;\n            break;\n\n          case 12:\n            stack.push(input.substring(stack.pop(), peg$currPos));\n            ip++;\n            break;\n\n          case 13:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (stack[stack.length - 1]) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 14:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (stack[stack.length - 1] === peg$FAILED) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 15:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (stack[stack.length - 1] !== peg$FAILED) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 16:\n            if (stack[stack.length - 1] !== peg$FAILED) {\n              ends.push(end);\n              ips.push(ip);\n\n              end = ip + 2 + bc[ip + 1];\n              ip += 2;\n            } else {\n              ip += 2 + bc[ip + 1];\n            }\n\n            break;\n\n          case 17:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (input.length > peg$currPos) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 18:\n            ends.push(end);\n            ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n            if (input.substr(peg$currPos, peg$consts[bc[ip + 1]].length) === peg$consts[bc[ip + 1]]) {\n              end = ip + 4 + bc[ip + 2];\n              ip += 4;\n            } else {\n              end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n              ip += 4 + bc[ip + 2];\n            }\n\n            break;\n\n          case 19:\n            ends.push(end);\n            ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n            if (input.substr(peg$currPos, peg$consts[bc[ip + 1]].length).toLowerCase() === peg$consts[bc[ip + 1]]) {\n              end = ip + 4 + bc[ip + 2];\n              ip += 4;\n            } else {\n              end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n              ip += 4 + bc[ip + 2];\n            }\n\n            break;\n\n          case 20:\n            ends.push(end);\n            ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n            if (peg$consts[bc[ip + 1]].test(input.charAt(peg$currPos))) {\n              end = ip + 4 + bc[ip + 2];\n              ip += 4;\n            } else {\n              end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n              ip += 4 + bc[ip + 2];\n            }\n\n            break;\n\n          case 21:\n            stack.push(input.substr(peg$currPos, bc[ip + 1]));\n            peg$currPos += bc[ip + 1];\n            ip += 2;\n            break;\n\n          case 22:\n            stack.push(peg$consts[bc[ip + 1]]);\n            peg$currPos += peg$consts[bc[ip + 1]].length;\n            ip += 2;\n            break;\n\n          case 23:\n            stack.push(peg$FAILED);\n            if (peg$silentFails === 0) {\n              peg$fail(peg$consts[bc[ip + 1]]);\n            }\n            ip += 2;\n            break;\n\n          case 24:\n            peg$savedPos = stack[stack.length - 1 - bc[ip + 1]];\n            ip += 2;\n            break;\n\n          case 25:\n            peg$savedPos = peg$currPos;\n            ip++;\n            break;\n\n          case 26:\n            params = bc.slice(ip + 4, ip + 4 + bc[ip + 3]);\n            for (i = 0; i < bc[ip + 3]; i++) {\n              params[i] = stack[stack.length - 1 - params[i]];\n            }\n\n            stack.splice(\n              stack.length - bc[ip + 2],\n              bc[ip + 2],\n              peg$consts[bc[ip + 1]].apply(null, params)\n            );\n\n            ip += 4 + bc[ip + 3];\n            break;\n\n          case 27:\n            stack.push(peg$parseRule(bc[ip + 1]));\n            ip += 2;\n            break;\n\n          case 28:\n            peg$silentFails++;\n            ip++;\n            break;\n\n          case 29:\n            peg$silentFails--;\n            ip++;\n            break;\n\n          default:\n            throw new Error(\"Invalid opcode: \" + bc[ip] + \".\");\n        }\n      }\n\n      if (ends.length > 0) {\n        end = ends.pop();\n        ip = ips.pop();\n      } else {\n        break;\n      }\n    }\n\n    return stack[0];\n  }\n\n\n    options.data = {}; // Object to which header attributes will be assigned during parsing\n\n    function list (head, tail) {\n      return [head].concat(tail);\n    }\n\n\n  peg$result = peg$parseRule(peg$startRuleIndex);\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * @name SIP\n * @namespace\n */\n\nmodule.exports = function (SIP) {\n    var Modifiers;\n    function stripPayload(sdp, payload) {\n        var i;\n        var media_descs = [];\n        var current_media_desc;\n        var lines = sdp.split(/\\r\\n/);\n        for (i = 0; i < lines.length;) {\n            var line = lines[i];\n            if (/^m=(?:audio|video)/.test(line)) {\n                current_media_desc = {\n                    index: i,\n                    stripped: []\n                };\n                media_descs.push(current_media_desc);\n            }\n            else if (current_media_desc) {\n                var rtpmap = /^a=rtpmap:(\\d+) ([^/]+)\\//.exec(line);\n                if (rtpmap && payload === rtpmap[2]) {\n                    lines.splice(i, 1);\n                    current_media_desc.stripped.push(rtpmap[1]);\n                    continue; // Don't increment 'i'\n                }\n            }\n            i++;\n        }\n        for (i = 0; i < media_descs.length; i++) {\n            var mline = lines[media_descs[i].index].split(' ');\n            // Ignore the first 3 parameters of the mline. The codec information is after that\n            for (var j = 3; j < mline.length;) {\n                if (media_descs[i].stripped.indexOf(mline[j]) !== -1) {\n                    mline.splice(j, 1);\n                    continue;\n                }\n                j++;\n            }\n            lines[media_descs[i].index] = mline.join(' ');\n        }\n        return lines.join('\\r\\n');\n    }\n    function stripMediaDescription(sdp, description) {\n        var descriptionRegExp = new RegExp(\"m=\" + description + \".*$\", \"gm\");\n        var groupRegExp = new RegExp(\"^a=group:.*$\", \"gm\");\n        if (descriptionRegExp.test(sdp)) {\n            var midLineToRemove_1;\n            sdp = sdp.split(/^m=/gm).filter(function (section) {\n                if (section.substr(0, description.length) === description) {\n                    midLineToRemove_1 = section.match(/^a=mid:.*$/gm);\n                    if (midLineToRemove_1) {\n                        midLineToRemove_1 = midLineToRemove_1[0].match(/:.+$/g)[0].substr(1);\n                    }\n                    return false;\n                }\n                return true;\n            }).join('m=');\n            var groupLine = sdp.match(groupRegExp);\n            if (groupLine && groupLine.length === 1) {\n                groupLine = groupLine[0];\n                var groupRegExpReplace = new RegExp(\"\\ *\" + midLineToRemove_1 + \"[^\\ ]*\", \"g\");\n                groupLine = groupLine.replace(groupRegExpReplace, \"\");\n                sdp = sdp.split(groupRegExp).join(groupLine);\n            }\n        }\n        return sdp;\n    }\n    Modifiers = {\n        stripTcpCandidates: function (description) {\n            description.sdp = description.sdp.replace(/^a=candidate:\\d+ \\d+ tcp .*?\\r\\n/img, \"\");\n            return SIP.Utils.Promise.resolve(description);\n        },\n        stripTelephoneEvent: function (description) {\n            description.sdp = stripPayload(description.sdp, 'telephone-event');\n            return SIP.Utils.Promise.resolve(description);\n        },\n        cleanJitsiSdpImageattr: function (description) {\n            description.sdp = description.sdp.replace(/^(a=imageattr:.*?)(x|y)=\\[0-/gm, \"$1$2=[1:\");\n            return SIP.Utils.Promise.resolve(description);\n        },\n        stripG722: function (description) {\n            description.sdp = stripPayload(description.sdp, 'G722');\n            return SIP.Utils.Promise.resolve(description);\n        },\n        stripRtpPayload: function (payload) {\n            return function (description) {\n                description.sdp = stripPayload(description.sdp, payload);\n                return SIP.Utils.Promise.resolve(description);\n            };\n        },\n        stripVideo: function (description) {\n            description.sdp = stripMediaDescription(description.sdp, \"video\");\n            return SIP.Utils.Promise.resolve(description);\n        },\n        addMidLines: function (description) {\n            var sdp = description.sdp;\n            if (sdp.search(/^a=mid.*$/gm) === -1) {\n                var mlines_1 = sdp.match(/^m=.*$/gm);\n                sdp = sdp.split(/^m=.*$/gm);\n                mlines_1.forEach(function (elem, idx) {\n                    mlines_1[idx] = elem + '\\na=mid:' + idx;\n                });\n                sdp.forEach(function (elem, idx) {\n                    if (mlines_1[idx]) {\n                        sdp[idx] = elem + mlines_1[idx];\n                    }\n                });\n                sdp = sdp.join('');\n                description.sdp = sdp;\n            }\n            return SIP.Utils.Promise.resolve(description);\n        }\n    };\n    return Modifiers;\n};\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * @fileoverview Simple\n */\n/* Simple\n * @class Simple\n */\nmodule.exports = function (SIP) {\n    var C = {\n        STATUS_NULL: 0,\n        STATUS_NEW: 1,\n        STATUS_CONNECTING: 2,\n        STATUS_CONNECTED: 3,\n        STATUS_COMPLETED: 4\n    };\n    /*\n     * @param {Object} options\n     */\n    var Simple = function (options) {\n        /*\n         *  {\n         *    media: {\n         *      remote: {\n         *        audio: <DOM element>,\n         *        video: <DOM element>\n         *      },\n         *      local: {\n         *        video: <DOM element>\n         *      }\n         *    },\n         *    ua: {\n         *       <UA Configuration Options>\n         *    }\n         *  }\n         */\n        if (options.media.remote.video) {\n            this.video = true;\n        }\n        else {\n            this.video = false;\n        }\n        if (options.media.remote.audio) {\n            this.audio = true;\n        }\n        else {\n            this.audio = false;\n        }\n        if (!this.audio && !this.video) {\n            // Need to do at least audio or video\n            // Error\n            throw new Error('At least one remote audio or video element is required for Simple.');\n        }\n        this.options = options;\n        // https://stackoverflow.com/questions/7944460/detect-safari-browser\n        var browserUa = global.navigator.userAgent.toLowerCase();\n        var isSafari = false;\n        var isFirefox = false;\n        if (browserUa.indexOf('safari') > -1 && browserUa.indexOf('chrome') < 0) {\n            isSafari = true;\n        }\n        else if (browserUa.indexOf('firefox') > -1 && browserUa.indexOf('chrome') < 0) {\n            isFirefox = true;\n        }\n        var sessionDescriptionHandlerFactoryOptions = {};\n        if (isSafari) {\n            sessionDescriptionHandlerFactoryOptions.modifiers = [SIP.Web.Modifiers.stripG722];\n        }\n        if (isFirefox) {\n            sessionDescriptionHandlerFactoryOptions.alwaysAcquireMediaFirst = true;\n        }\n        if (!this.options.ua.uri) {\n            this.anonymous = true;\n        }\n        this.ua = new SIP.UA({\n            // User Configurable Options\n            uri: this.options.ua.uri,\n            authorizationUser: this.options.ua.authorizationUser,\n            password: this.options.ua.password,\n            displayName: this.options.ua.displayName,\n            // Undocumented \"Advanced\" Options\n            userAgentString: this.options.ua.userAgentString,\n            // Fixed Options\n            register: true,\n            sessionDescriptionHandlerFactoryOptions: sessionDescriptionHandlerFactoryOptions,\n            transportOptions: {\n                traceSip: this.options.ua.traceSip,\n                wsServers: this.options.ua.wsServers\n            }\n        });\n        this.state = C.STATUS_NULL;\n        this.logger = this.ua.getLogger('sip.simple');\n        this.ua.on('registered', function () {\n            this.emit('registered', this.ua);\n        }.bind(this));\n        this.ua.on('unregistered', function () {\n            this.emit('unregistered', this.ua);\n        }.bind(this));\n        this.ua.on('failed', function () {\n            this.emit('unregistered', this.ua);\n        }.bind(this));\n        this.ua.on('invite', function (session) {\n            // If there is already an active session reject the incoming session\n            if (this.state !== C.STATUS_NULL && this.state !== C.STATUS_COMPLETED) {\n                this.logger.warn('Rejecting incoming call. Simple only supports 1 call at a time');\n                session.reject();\n                return;\n            }\n            this.session = session;\n            this.setupSession();\n            this.emit('ringing', this.session);\n        }.bind(this));\n        this.ua.on('message', function (message) {\n            this.emit('message', message);\n        }.bind(this));\n        return this;\n    };\n    Simple.prototype = Object.create(SIP.EventEmitter.prototype);\n    Simple.C = C;\n    // Public\n    Simple.prototype.call = function (destination) {\n        if (!this.ua || !this.checkRegistration()) {\n            this.logger.warn('A registered UA is required for calling');\n            return;\n        }\n        if (this.state !== C.STATUS_NULL && this.state !== C.STATUS_COMPLETED) {\n            this.logger.warn('Cannot make more than a single call with Simple');\n            return;\n        }\n        // Safari hack, because you cannot call .play() from a non user action\n        if (this.options.media.remote.audio) {\n            this.options.media.remote.audio.autoplay = true;\n        }\n        if (this.options.media.remote.video) {\n            this.options.media.remote.video.autoplay = true;\n        }\n        if (this.options.media.local && this.options.media.local.video) {\n            this.options.media.local.video.autoplay = true;\n            this.options.media.local.video.volume = 0;\n        }\n        this.session = this.ua.invite(destination, {\n            sessionDescriptionHandlerOptions: {\n                constraints: {\n                    audio: this.audio,\n                    video: this.video\n                }\n            }\n        });\n        this.setupSession();\n        return this.session;\n    };\n    Simple.prototype.answer = function () {\n        if (this.state !== C.STATUS_NEW && this.state !== C.STATUS_CONNECTING) {\n            this.logger.warn('No call to answer');\n            return;\n        }\n        // Safari hack, because you cannot call .play() from a non user action\n        if (this.options.media.remote.audio) {\n            this.options.media.remote.audio.autoplay = true;\n        }\n        if (this.options.media.remote.video) {\n            this.options.media.remote.video.autoplay = true;\n        }\n        return this.session.accept({\n            sessionDescriptionHandlerOptions: {\n                constraints: {\n                    audio: this.audio,\n                    video: this.video\n                }\n            }\n        });\n        // emit call is active\n    };\n    Simple.prototype.reject = function () {\n        if (this.state !== C.STATUS_NEW && this.state !== C.STATUS_CONNECTING) {\n            this.logger.warn('Call is already answered');\n            return;\n        }\n        return this.session.reject();\n    };\n    Simple.prototype.hangup = function () {\n        if (this.state !== C.STATUS_CONNECTED && this.state !== C.STATUS_CONNECTING && this.state !== C.STATUS_NEW) {\n            this.logger.warn('No active call to hang up on');\n            return;\n        }\n        if (this.state !== C.STATUS_CONNECTED) {\n            return this.session.cancel();\n        }\n        else {\n            return this.session.bye();\n        }\n    };\n    Simple.prototype.hold = function () {\n        if (this.state !== C.STATUS_CONNECTED || this.session.local_hold) {\n            this.logger.warn('Cannot put call on hold');\n            return;\n        }\n        this.mute();\n        this.logger.log('Placing session on hold');\n        return this.session.hold();\n    };\n    Simple.prototype.unhold = function () {\n        if (this.state !== C.STATUS_CONNECTED || !this.session.local_hold) {\n            this.logger.warn('Cannot unhold a call that is not on hold');\n            return;\n        }\n        this.unmute();\n        this.logger.log('Placing call off hold');\n        return this.session.unhold();\n    };\n    Simple.prototype.mute = function () {\n        if (this.state !== C.STATUS_CONNECTED) {\n            this.logger.warn('An acitve call is required to mute audio');\n            return;\n        }\n        this.logger.log('Muting Audio');\n        this.toggleMute(true);\n        this.emit('mute', this);\n    };\n    Simple.prototype.unmute = function () {\n        if (this.state !== C.STATUS_CONNECTED) {\n            this.logger.warn('An active call is required to unmute audio');\n            return;\n        }\n        this.logger.log('Unmuting Audio');\n        this.toggleMute(false);\n        this.emit('unmute', this);\n    };\n    Simple.prototype.sendDTMF = function (tone) {\n        if (this.state !== C.STATUS_CONNECTED) {\n            this.logger.warn('An active call is required to send a DTMF tone');\n            return;\n        }\n        this.logger.log('Sending DTMF tone: ' + tone);\n        this.session.dtmf(tone);\n    };\n    Simple.prototype.message = function (destination, message) {\n        if (!this.ua || !this.checkRegistration()) {\n            this.logger.warn('A registered UA is required to send a message');\n            return;\n        }\n        if (!destination || !message) {\n            this.logger.warn('A destination and message are required to send a message');\n            return;\n        }\n        this.ua.message(destination, message);\n    };\n    // Private Helpers\n    Simple.prototype.checkRegistration = function () {\n        return (this.anonymous || (this.ua && this.ua.isRegistered()));\n    };\n    Simple.prototype.setupRemoteMedia = function () {\n        // If there is a video track, it will attach the video and audio to the same element\n        var pc = this.session.sessionDescriptionHandler.peerConnection;\n        var remoteStream;\n        if (pc.getReceivers) {\n            remoteStream = new global.window.MediaStream();\n            pc.getReceivers().forEach(function (receiver) {\n                var track = receiver.track;\n                if (track) {\n                    remoteStream.addTrack(track);\n                }\n            });\n        }\n        else {\n            remoteStream = pc.getRemoteStreams()[0];\n        }\n        if (this.video) {\n            this.options.media.remote.video.srcObject = remoteStream;\n            this.options.media.remote.video.play().catch(function () {\n                this.logger.log('play was rejected');\n            }.bind(this));\n        }\n        else if (this.audio) {\n            this.options.media.remote.audio.srcObject = remoteStream;\n            this.options.media.remote.audio.play().catch(function () {\n                this.logger.log('play was rejected');\n            }.bind(this));\n        }\n    };\n    Simple.prototype.setupLocalMedia = function () {\n        if (this.video && this.options.media.local && this.options.media.local.video) {\n            var pc = this.session.sessionDescriptionHandler.peerConnection;\n            var localStream;\n            if (pc.getSenders) {\n                localStream = new global.window.MediaStream();\n                pc.getSenders().forEach(function (sender) {\n                    var track = sender.track;\n                    if (track && track.kind === 'video') {\n                        localStream.addTrack(track);\n                    }\n                });\n            }\n            else {\n                localStream = pc.getLocalStreams()[0];\n            }\n            this.options.media.local.video.srcObject = localStream;\n            this.options.media.local.video.volume = 0;\n            this.options.media.local.video.play();\n        }\n    };\n    Simple.prototype.cleanupMedia = function () {\n        if (this.video) {\n            this.options.media.remote.video.srcObject = null;\n            this.options.media.remote.video.pause();\n            if (this.options.media.local && this.options.media.local.video) {\n                this.options.media.local.video.srcObject = null;\n                this.options.media.local.video.pause();\n            }\n        }\n        if (this.audio) {\n            this.options.media.remote.audio.srcObject = null;\n            this.options.media.remote.audio.pause();\n        }\n    };\n    Simple.prototype.setupSession = function () {\n        this.state = C.STATUS_NEW;\n        this.emit('new', this.session);\n        this.session.on('progress', this.onProgress.bind(this));\n        this.session.on('accepted', this.onAccepted.bind(this));\n        this.session.on('rejected', this.onEnded.bind(this));\n        this.session.on('failed', this.onFailed.bind(this));\n        this.session.on('terminated', this.onEnded.bind(this));\n    };\n    Simple.prototype.destroyMedia = function () {\n        this.session.sessionDescriptionHandler.close();\n    };\n    Simple.prototype.toggleMute = function (mute) {\n        var pc = this.session.sessionDescriptionHandler.peerConnection;\n        if (pc.getSenders) {\n            pc.getSenders().forEach(function (sender) {\n                if (sender.track) {\n                    sender.track.enabled = !mute;\n                }\n            });\n        }\n        else {\n            pc.getLocalStreams().forEach(function (stream) {\n                stream.getAudioTracks().forEach(function (track) {\n                    track.enabled = !mute;\n                });\n                stream.getVideoTracks().forEach(function (track) {\n                    track.enabled = !mute;\n                });\n            });\n        }\n    };\n    Simple.prototype.onAccepted = function () {\n        this.state = C.STATUS_CONNECTED;\n        this.emit('connected', this.session);\n        this.setupLocalMedia();\n        this.setupRemoteMedia();\n        this.session.sessionDescriptionHandler.on('addTrack', function () {\n            this.logger.log('A track has been added, triggering new remoteMedia setup');\n            this.setupRemoteMedia();\n        }.bind(this));\n        this.session.sessionDescriptionHandler.on('addStream', function () {\n            this.logger.log('A stream has been added, trigger new remoteMedia setup');\n            this.setupRemoteMedia();\n        }.bind(this));\n        this.session.on('hold', function () {\n            this.emit('hold', this.session);\n        }.bind(this));\n        this.session.on('unhold', function () {\n            this.emit('unhold', this.session);\n        }.bind(this));\n        this.session.on('dtmf', function (tone) {\n            this.emit('dtmf', tone);\n        }.bind(this));\n        this.session.on('bye', this.onEnded.bind(this));\n    };\n    Simple.prototype.onProgress = function () {\n        this.state = C.STATUS_CONNECTING;\n        this.emit('connecting', this.session);\n    };\n    Simple.prototype.onFailed = function () {\n        this.onEnded();\n    };\n    Simple.prototype.onEnded = function () {\n        this.state = C.STATUS_COMPLETED;\n        this.emit('ended', this.session);\n        this.cleanupMedia();\n    };\n    return Simple;\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(28)))\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\nvar toplevel = global.window || global;\nfunction getPrefixedProperty(object, name) {\n    if (object == null) {\n        return;\n    }\n    var capitalizedName = name.charAt(0).toUpperCase() + name.slice(1);\n    var prefixedNames = [name, 'webkit' + capitalizedName, 'moz' + capitalizedName];\n    for (var i in prefixedNames) {\n        var property = object[prefixedNames[i]];\n        if (property) {\n            return property.bind(object);\n        }\n    }\n}\nmodule.exports = {\n    WebSocket: toplevel.WebSocket,\n    Transport: __webpack_require__(10),\n    open: toplevel.open,\n    Promise: toplevel.Promise,\n    timers: toplevel,\n    // Console is not defined in ECMAScript, so just in case...\n    console: toplevel.console || {\n        debug: function () { },\n        log: function () { },\n        warn: function () { },\n        error: function () { }\n    },\n    addEventListener: getPrefixedProperty(toplevel, 'addEventListener'),\n    removeEventListener: getPrefixedProperty(toplevel, 'removeEventListener')\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(28)))\n\n/***/ })\n/******/ ]);\n});","(function() {\n  var context = this;\n\n  (function() {\n    (function() {\n      var slice = [].slice;\n\n      this.ActionCable = {\n        INTERNAL: {\n          \"message_types\": {\n            \"welcome\": \"welcome\",\n            \"ping\": \"ping\",\n            \"confirmation\": \"confirm_subscription\",\n            \"rejection\": \"reject_subscription\"\n          },\n          \"default_mount_path\": \"/cable\",\n          \"protocols\": [\"actioncable-v1-json\", \"actioncable-unsupported\"]\n        },\n        WebSocket: window.WebSocket,\n        logger: window.console,\n        createConsumer: function(url) {\n          var ref;\n          if (url == null) {\n            url = (ref = this.getConfig(\"url\")) != null ? ref : this.INTERNAL.default_mount_path;\n          }\n          return new ActionCable.Consumer(this.createWebSocketURL(url));\n        },\n        getConfig: function(name) {\n          var element;\n          element = document.head.querySelector(\"meta[name='action-cable-\" + name + \"']\");\n          return element != null ? element.getAttribute(\"content\") : void 0;\n        },\n        createWebSocketURL: function(url) {\n          var a;\n          if (url && !/^wss?:/i.test(url)) {\n            a = document.createElement(\"a\");\n            a.href = url;\n            a.href = a.href;\n            a.protocol = a.protocol.replace(\"http\", \"ws\");\n            return a.href;\n          } else {\n            return url;\n          }\n        },\n        startDebugging: function() {\n          return this.debugging = true;\n        },\n        stopDebugging: function() {\n          return this.debugging = null;\n        },\n        log: function() {\n          var messages, ref;\n          messages = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          if (this.debugging) {\n            messages.push(Date.now());\n            return (ref = this.logger).log.apply(ref, [\"[ActionCable]\"].concat(slice.call(messages)));\n          }\n        }\n      };\n\n    }).call(this);\n  }).call(context);\n\n  var ActionCable = context.ActionCable;\n\n  (function() {\n    (function() {\n      var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n      ActionCable.ConnectionMonitor = (function() {\n        var clamp, now, secondsSince;\n\n        ConnectionMonitor.pollInterval = {\n          min: 3,\n          max: 30\n        };\n\n        ConnectionMonitor.staleThreshold = 6;\n\n        function ConnectionMonitor(connection) {\n          this.connection = connection;\n          this.visibilityDidChange = bind(this.visibilityDidChange, this);\n          this.reconnectAttempts = 0;\n        }\n\n        ConnectionMonitor.prototype.start = function() {\n          if (!this.isRunning()) {\n            this.startedAt = now();\n            delete this.stoppedAt;\n            this.startPolling();\n            document.addEventListener(\"visibilitychange\", this.visibilityDidChange);\n            return ActionCable.log(\"ConnectionMonitor started. pollInterval = \" + (this.getPollInterval()) + \" ms\");\n          }\n        };\n\n        ConnectionMonitor.prototype.stop = function() {\n          if (this.isRunning()) {\n            this.stoppedAt = now();\n            this.stopPolling();\n            document.removeEventListener(\"visibilitychange\", this.visibilityDidChange);\n            return ActionCable.log(\"ConnectionMonitor stopped\");\n          }\n        };\n\n        ConnectionMonitor.prototype.isRunning = function() {\n          return (this.startedAt != null) && (this.stoppedAt == null);\n        };\n\n        ConnectionMonitor.prototype.recordPing = function() {\n          return this.pingedAt = now();\n        };\n\n        ConnectionMonitor.prototype.recordConnect = function() {\n          this.reconnectAttempts = 0;\n          this.recordPing();\n          delete this.disconnectedAt;\n          return ActionCable.log(\"ConnectionMonitor recorded connect\");\n        };\n\n        ConnectionMonitor.prototype.recordDisconnect = function() {\n          this.disconnectedAt = now();\n          return ActionCable.log(\"ConnectionMonitor recorded disconnect\");\n        };\n\n        ConnectionMonitor.prototype.startPolling = function() {\n          this.stopPolling();\n          return this.poll();\n        };\n\n        ConnectionMonitor.prototype.stopPolling = function() {\n          return clearTimeout(this.pollTimeout);\n        };\n\n        ConnectionMonitor.prototype.poll = function() {\n          return this.pollTimeout = setTimeout((function(_this) {\n            return function() {\n              _this.reconnectIfStale();\n              return _this.poll();\n            };\n          })(this), this.getPollInterval());\n        };\n\n        ConnectionMonitor.prototype.getPollInterval = function() {\n          var interval, max, min, ref;\n          ref = this.constructor.pollInterval, min = ref.min, max = ref.max;\n          interval = 5 * Math.log(this.reconnectAttempts + 1);\n          return Math.round(clamp(interval, min, max) * 1000);\n        };\n\n        ConnectionMonitor.prototype.reconnectIfStale = function() {\n          if (this.connectionIsStale()) {\n            ActionCable.log(\"ConnectionMonitor detected stale connection. reconnectAttempts = \" + this.reconnectAttempts + \", pollInterval = \" + (this.getPollInterval()) + \" ms, time disconnected = \" + (secondsSince(this.disconnectedAt)) + \" s, stale threshold = \" + this.constructor.staleThreshold + \" s\");\n            this.reconnectAttempts++;\n            if (this.disconnectedRecently()) {\n              return ActionCable.log(\"ConnectionMonitor skipping reopening recent disconnect\");\n            } else {\n              ActionCable.log(\"ConnectionMonitor reopening\");\n              return this.connection.reopen();\n            }\n          }\n        };\n\n        ConnectionMonitor.prototype.connectionIsStale = function() {\n          var ref;\n          return secondsSince((ref = this.pingedAt) != null ? ref : this.startedAt) > this.constructor.staleThreshold;\n        };\n\n        ConnectionMonitor.prototype.disconnectedRecently = function() {\n          return this.disconnectedAt && secondsSince(this.disconnectedAt) < this.constructor.staleThreshold;\n        };\n\n        ConnectionMonitor.prototype.visibilityDidChange = function() {\n          if (document.visibilityState === \"visible\") {\n            return setTimeout((function(_this) {\n              return function() {\n                if (_this.connectionIsStale() || !_this.connection.isOpen()) {\n                  ActionCable.log(\"ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = \" + document.visibilityState);\n                  return _this.connection.reopen();\n                }\n              };\n            })(this), 200);\n          }\n        };\n\n        now = function() {\n          return new Date().getTime();\n        };\n\n        secondsSince = function(time) {\n          return (now() - time) / 1000;\n        };\n\n        clamp = function(number, min, max) {\n          return Math.max(min, Math.min(max, number));\n        };\n\n        return ConnectionMonitor;\n\n      })();\n\n    }).call(this);\n    (function() {\n      var i, message_types, protocols, ref, supportedProtocols, unsupportedProtocol,\n        slice = [].slice,\n        bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n        indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n      ref = ActionCable.INTERNAL, message_types = ref.message_types, protocols = ref.protocols;\n\n      supportedProtocols = 2 <= protocols.length ? slice.call(protocols, 0, i = protocols.length - 1) : (i = 0, []), unsupportedProtocol = protocols[i++];\n\n      ActionCable.Connection = (function() {\n        Connection.reopenDelay = 500;\n\n        function Connection(consumer) {\n          this.consumer = consumer;\n          this.open = bind(this.open, this);\n          this.subscriptions = this.consumer.subscriptions;\n          this.monitor = new ActionCable.ConnectionMonitor(this);\n          this.disconnected = true;\n        }\n\n        Connection.prototype.send = function(data) {\n          if (this.isOpen()) {\n            this.webSocket.send(JSON.stringify(data));\n            return true;\n          } else {\n            return false;\n          }\n        };\n\n        Connection.prototype.open = function() {\n          if (this.isActive()) {\n            ActionCable.log(\"Attempted to open WebSocket, but existing socket is \" + (this.getState()));\n            return false;\n          } else {\n            ActionCable.log(\"Opening WebSocket, current state is \" + (this.getState()) + \", subprotocols: \" + protocols);\n            if (this.webSocket != null) {\n              this.uninstallEventHandlers();\n            }\n            this.webSocket = new ActionCable.WebSocket(this.consumer.url, protocols);\n            this.installEventHandlers();\n            this.monitor.start();\n            return true;\n          }\n        };\n\n        Connection.prototype.close = function(arg) {\n          var allowReconnect, ref1;\n          allowReconnect = (arg != null ? arg : {\n            allowReconnect: true\n          }).allowReconnect;\n          if (!allowReconnect) {\n            this.monitor.stop();\n          }\n          if (this.isActive()) {\n            return (ref1 = this.webSocket) != null ? ref1.close() : void 0;\n          }\n        };\n\n        Connection.prototype.reopen = function() {\n          var error;\n          ActionCable.log(\"Reopening WebSocket, current state is \" + (this.getState()));\n          if (this.isActive()) {\n            try {\n              return this.close();\n            } catch (error1) {\n              error = error1;\n              return ActionCable.log(\"Failed to reopen WebSocket\", error);\n            } finally {\n              ActionCable.log(\"Reopening WebSocket in \" + this.constructor.reopenDelay + \"ms\");\n              setTimeout(this.open, this.constructor.reopenDelay);\n            }\n          } else {\n            return this.open();\n          }\n        };\n\n        Connection.prototype.getProtocol = function() {\n          var ref1;\n          return (ref1 = this.webSocket) != null ? ref1.protocol : void 0;\n        };\n\n        Connection.prototype.isOpen = function() {\n          return this.isState(\"open\");\n        };\n\n        Connection.prototype.isActive = function() {\n          return this.isState(\"open\", \"connecting\");\n        };\n\n        Connection.prototype.isProtocolSupported = function() {\n          var ref1;\n          return ref1 = this.getProtocol(), indexOf.call(supportedProtocols, ref1) >= 0;\n        };\n\n        Connection.prototype.isState = function() {\n          var ref1, states;\n          states = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          return ref1 = this.getState(), indexOf.call(states, ref1) >= 0;\n        };\n\n        Connection.prototype.getState = function() {\n          var ref1, state, value;\n          for (state in WebSocket) {\n            value = WebSocket[state];\n            if (value === ((ref1 = this.webSocket) != null ? ref1.readyState : void 0)) {\n              return state.toLowerCase();\n            }\n          }\n          return null;\n        };\n\n        Connection.prototype.installEventHandlers = function() {\n          var eventName, handler;\n          for (eventName in this.events) {\n            handler = this.events[eventName].bind(this);\n            this.webSocket[\"on\" + eventName] = handler;\n          }\n        };\n\n        Connection.prototype.uninstallEventHandlers = function() {\n          var eventName;\n          for (eventName in this.events) {\n            this.webSocket[\"on\" + eventName] = function() {};\n          }\n        };\n\n        Connection.prototype.events = {\n          message: function(event) {\n            var identifier, message, ref1, type;\n            if (!this.isProtocolSupported()) {\n              return;\n            }\n            ref1 = JSON.parse(event.data), identifier = ref1.identifier, message = ref1.message, type = ref1.type;\n            switch (type) {\n              case message_types.welcome:\n                this.monitor.recordConnect();\n                return this.subscriptions.reload();\n              case message_types.ping:\n                return this.monitor.recordPing();\n              case message_types.confirmation:\n                return this.subscriptions.notify(identifier, \"connected\");\n              case message_types.rejection:\n                return this.subscriptions.reject(identifier);\n              default:\n                return this.subscriptions.notify(identifier, \"received\", message);\n            }\n          },\n          open: function() {\n            ActionCable.log(\"WebSocket onopen event, using '\" + (this.getProtocol()) + \"' subprotocol\");\n            this.disconnected = false;\n            if (!this.isProtocolSupported()) {\n              ActionCable.log(\"Protocol is unsupported. Stopping monitor and disconnecting.\");\n              return this.close({\n                allowReconnect: false\n              });\n            }\n          },\n          close: function(event) {\n            ActionCable.log(\"WebSocket onclose event\");\n            if (this.disconnected) {\n              return;\n            }\n            this.disconnected = true;\n            this.monitor.recordDisconnect();\n            return this.subscriptions.notifyAll(\"disconnected\", {\n              willAttemptReconnect: this.monitor.isRunning()\n            });\n          },\n          error: function() {\n            return ActionCable.log(\"WebSocket onerror event\");\n          }\n        };\n\n        return Connection;\n\n      })();\n\n    }).call(this);\n    (function() {\n      var slice = [].slice;\n\n      ActionCable.Subscriptions = (function() {\n        function Subscriptions(consumer) {\n          this.consumer = consumer;\n          this.subscriptions = [];\n        }\n\n        Subscriptions.prototype.create = function(channelName, mixin) {\n          var channel, params, subscription;\n          channel = channelName;\n          params = typeof channel === \"object\" ? channel : {\n            channel: channel\n          };\n          subscription = new ActionCable.Subscription(this.consumer, params, mixin);\n          return this.add(subscription);\n        };\n\n        Subscriptions.prototype.add = function(subscription) {\n          this.subscriptions.push(subscription);\n          this.consumer.ensureActiveConnection();\n          this.notify(subscription, \"initialized\");\n          this.sendCommand(subscription, \"subscribe\");\n          return subscription;\n        };\n\n        Subscriptions.prototype.remove = function(subscription) {\n          this.forget(subscription);\n          if (!this.findAll(subscription.identifier).length) {\n            this.sendCommand(subscription, \"unsubscribe\");\n          }\n          return subscription;\n        };\n\n        Subscriptions.prototype.reject = function(identifier) {\n          var i, len, ref, results, subscription;\n          ref = this.findAll(identifier);\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            this.forget(subscription);\n            this.notify(subscription, \"rejected\");\n            results.push(subscription);\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.forget = function(subscription) {\n          var s;\n          this.subscriptions = (function() {\n            var i, len, ref, results;\n            ref = this.subscriptions;\n            results = [];\n            for (i = 0, len = ref.length; i < len; i++) {\n              s = ref[i];\n              if (s !== subscription) {\n                results.push(s);\n              }\n            }\n            return results;\n          }).call(this);\n          return subscription;\n        };\n\n        Subscriptions.prototype.findAll = function(identifier) {\n          var i, len, ref, results, s;\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            s = ref[i];\n            if (s.identifier === identifier) {\n              results.push(s);\n            }\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.reload = function() {\n          var i, len, ref, results, subscription;\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            results.push(this.sendCommand(subscription, \"subscribe\"));\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.notifyAll = function() {\n          var args, callbackName, i, len, ref, results, subscription;\n          callbackName = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            results.push(this.notify.apply(this, [subscription, callbackName].concat(slice.call(args))));\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.notify = function() {\n          var args, callbackName, i, len, results, subscription, subscriptions;\n          subscription = arguments[0], callbackName = arguments[1], args = 3 <= arguments.length ? slice.call(arguments, 2) : [];\n          if (typeof subscription === \"string\") {\n            subscriptions = this.findAll(subscription);\n          } else {\n            subscriptions = [subscription];\n          }\n          results = [];\n          for (i = 0, len = subscriptions.length; i < len; i++) {\n            subscription = subscriptions[i];\n            results.push(typeof subscription[callbackName] === \"function\" ? subscription[callbackName].apply(subscription, args) : void 0);\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.sendCommand = function(subscription, command) {\n          var identifier;\n          identifier = subscription.identifier;\n          return this.consumer.send({\n            command: command,\n            identifier: identifier\n          });\n        };\n\n        return Subscriptions;\n\n      })();\n\n    }).call(this);\n    (function() {\n      ActionCable.Subscription = (function() {\n        var extend;\n\n        function Subscription(consumer, params, mixin) {\n          this.consumer = consumer;\n          if (params == null) {\n            params = {};\n          }\n          this.identifier = JSON.stringify(params);\n          extend(this, mixin);\n        }\n\n        Subscription.prototype.perform = function(action, data) {\n          if (data == null) {\n            data = {};\n          }\n          data.action = action;\n          return this.send(data);\n        };\n\n        Subscription.prototype.send = function(data) {\n          return this.consumer.send({\n            command: \"message\",\n            identifier: this.identifier,\n            data: JSON.stringify(data)\n          });\n        };\n\n        Subscription.prototype.unsubscribe = function() {\n          return this.consumer.subscriptions.remove(this);\n        };\n\n        extend = function(object, properties) {\n          var key, value;\n          if (properties != null) {\n            for (key in properties) {\n              value = properties[key];\n              object[key] = value;\n            }\n          }\n          return object;\n        };\n\n        return Subscription;\n\n      })();\n\n    }).call(this);\n    (function() {\n      ActionCable.Consumer = (function() {\n        function Consumer(url) {\n          this.url = url;\n          this.subscriptions = new ActionCable.Subscriptions(this);\n          this.connection = new ActionCable.Connection(this);\n        }\n\n        Consumer.prototype.send = function(data) {\n          return this.connection.send(data);\n        };\n\n        Consumer.prototype.connect = function() {\n          return this.connection.open();\n        };\n\n        Consumer.prototype.disconnect = function() {\n          return this.connection.close({\n            allowReconnect: false\n          });\n        };\n\n        Consumer.prototype.ensureActiveConnection = function() {\n          if (!this.connection.isActive()) {\n            return this.connection.open();\n          }\n        };\n\n        return Consumer;\n\n      })();\n\n    }).call(this);\n  }).call(this);\n\n  if (typeof module === \"object\" && module.exports) {\n    module.exports = ActionCable;\n  } else if (typeof define === \"function\" && define.amd) {\n    define(ActionCable);\n  }\n}).call(this);\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*eslint no-console: 0*/\n\n/**\n * eyeson Logger implement debug|info|warn|error methods.\n **/\nexport default (function() {\n  return {\n    error: function(...args) {\n      return console.error(...args);\n    },\n    warn: function(...args) {\n      return console.warn(...args);\n    },\n    info: function(...args) {\n      return console.log(...args);\n    },\n    debug: function(...args) {\n      if (!console.debug) {\n        return null;\n      }\n      return console.debug(...args);\n    }\n  };\n}());\n","/* eslint-disable max-lines */\nimport Logger from './Logger';\n\n/**\n * eyeson Communications Api\n **/\nclass ComApi {\n  constructor(uri, token) {\n    this.uri = uri;\n    this.token = token.replace(/\\W+/g, '');\n    this.cache = { users: [] };\n    this.onError = null;\n    this._handleError = this._handleError.bind(this);\n  }\n\n  _request(path, options = {}) {\n    return fetch(new Request(this.uri + path), options).then(response => {\n      const contentType = response.headers.get('content-type');\n\n      if (\n        contentType &&\n        contentType.indexOf('application/json') !== -1 &&\n        response.ok\n      ) {\n        return response.json();\n      }\n\n      // not json - e.g. broadcast stop\n      if (response.ok) {\n        return response.text();\n      }\n\n      throw new Error(`ComApiError: ${response.status}`);\n    });\n  }\n\n  /**\n   * NOTE: slightly adjusted from:\n   * https://gist.github.com/ghinda/8442a57f22099bdb2e34\n   **/\n  /* eslint-disable */\n  _objectToFormData(obj, form, namespace) {\n    let fd = form || new FormData();\n    let formKey = null;\n\n    for (let property in obj) {\n      if (!obj.hasOwnProperty(property)) {\n        return;\n      }\n      if (namespace) {\n        // adjusted, skip \"int props\" for layout api\n        let prop = isNaN(parseInt(property)) ? property : '';\n        formKey = namespace + '[' + prop + ']';\n      } else {\n        formKey = property;\n      }\n      // if the property is an object, but not a File, use recursivity.\n      if (\n        typeof obj[property] === 'object' &&\n        !(obj[property] instanceof File)\n      ) {\n        this._objectToFormData(obj[property], fd, property);\n      } else {\n        // if it's a string or a File object\n        fd.append(formKey, obj[property]);\n      }\n    }\n\n    return fd;\n  }\n  /* eslint-enable */\n\n  _post(path, data) {\n    return this._request(path, {\n      method: 'POST',\n      body: this._objectToFormData(data)\n    });\n  }\n\n  _put(path, data) {\n    const formData = new FormData();\n    /* eslint-disable guard-for-in */\n    for (const key in data) {\n      formData.append(key, data[key]);\n    }\n    /* eslint-enable */\n    return this._request(path, {\n      method: 'PUT',\n      body: formData\n    });\n  }\n\n  _handleError(error) {\n    Logger.error('ComApi::handleError', error);\n    if (this.onError) {\n      this.onError(error);\n    }\n  }\n\n  onError(callback) {\n    this.onError = callback;\n  }\n\n  /**\n   * Fetch room details including the user and credentials from com-api.\n   **/\n  getRoom(callback) {\n    return this._request(`/rooms/${this.token}`)\n      .then(callback)\n      .catch(error => {\n        return callback ? callback({ error: error }) : { error: error };\n      });\n  }\n\n  /**\n   * Retrieve user information. Will use cache on multiple requests.\n   **/\n  getUser(userId, callback) {\n    const user = this.cache.users.find(cachedUser => cachedUser.id === userId);\n\n    if (user) {\n      callback(user);\n      return null;\n    }\n\n    return this._request(`/rooms/${this.token}/users/${userId}`)\n      .then(apiUser => {\n        let users = this.cache.users.filter(\n          cachedUser => cachedUser.id !== userId\n        );\n        let extendedUser = this.addUserAttributes(apiUser, userId);\n        users.push(extendedUser);\n        this.cache.users = users;\n        callback(extendedUser);\n      })\n      .catch(this._handleError);\n  }\n\n  addUserAttributes(user, userId) {\n    let largeAvatarUrl = user.avatar;\n\n    try {\n      largeAvatarUrl = `${user.avatar}?size=large`;\n    } catch (error) {\n      Logger.warn('ComApi::addUserAttributes missing', user);\n    }\n\n    return Object.assign(user, {\n      id: userId,\n      apiId: user.id,\n      sipId: (user.sip && user.sip.authorizationUser) || null,\n      largeAvatar: largeAvatarUrl\n    });\n  }\n\n  /**\n   * Request a guest user from api.\n   **/\n  requestUser(user, callback) {\n    return this._post(`/guests/${this.token}`, {\n      name: user.name,\n      email: user.email,\n      custom_fields: { // eslint-disable-line camelcase\n        locale: (user.locale || 'en')\n      }\n    })\n      .then(callback)\n      .catch(error => callback({ error: error }));\n  }\n\n  /**\n   * Broadcast to a platform.\n   **/\n  /* eslint-disable camelcase */\n  startBroadcast(data, platform) {\n    return this._post(`/rooms/${this.token}/broadcasts`, {\n      platform: platform,\n      player_url: data.playerUrl || '',\n      stream_url: data.streamUrl\n    });\n  }\n  /* eslint-enable camelcase */\n\n  /**\n   * Broadcast to a platform.\n   **/\n  /* eslint-disable camelcase */\n  publishBroadcast(data, platform) {\n    return this._put(`/rooms/${this.token}/broadcasts/${platform}`, {\n      player_url: data.playerUrl\n    });\n  }\n  /* eslint-enable camelcase */\n\n  /**\n   * Stop a broadcast from a platform.\n   **/\n  stopBroadcast(platform) {\n    return this._request(`/rooms/${this.token}/broadcasts/${platform}`, {\n      method: 'DELETE'\n    });\n  }\n\n  /**\n   * Stop all broadcasts.\n   **/\n  stopAllBroadcasts() {\n    return this._request(`/rooms/${this.token}/broadcasts`, {\n      method: 'DELETE'\n    });\n  }\n\n  /**\n   * Start a recording.\n   **/\n  startRecording() {\n    return this._post(`/rooms/${this.token}/recording`, {});\n  }\n\n  /**\n   * Stop a recording\n   **/\n  stopRecording() {\n    return this._request(`/rooms/${this.token}/recording`, {\n      method: 'DELETE'\n    }).catch(this._handleError);\n  }\n\n  /**\n   * Set layout\n   * params object either as { layout: 'auto' } or { users: [ id1, id2 ...] }\n   **/\n  setLayout(params) {\n    return this._post(`/rooms/${this.token}/layout`, params).catch(\n      this._handleError\n    );\n  }\n\n  /**\n   * Set layer\n   *\n   * params object: {\n   *   insert: {\n   *     icon:    user['avatar'],\n   *     title:   \"#{user['name']}:\",\n   *     content: question.truncate(280)\n   *   }\n   * }\n   *\n   **/\n  setLayer(params) {\n    return this._post(`/rooms/${this.token}/layers`, params).catch(\n      this._handleError\n    );\n  }\n\n  /**\n   * Clear front most layer\n   **/\n  clearFrontLayer() {\n    return this._request(`/rooms/${this.token}/layers/1`, {\n      method: 'DELETE'\n    }).catch(this._handleError);\n  }\n\n  /**\n   * Take a snapshot of the current podium\n   **/\n  takeSnapshot() {\n    return this._post(`/rooms/${this.token}/snapshot`).catch(this._handleError);\n  }\n\n  /**\n   * Annotate current podium\n   **/\n  createAnnotation(callback, onError) {\n    return this._post(`/rooms/${this.token}/annotation`)\n      .then(callback)\n      .catch(error => {\n        onError(error);\n        this._handleError(error);\n      });\n  }\n\n  /**\n   * Annotate current podium\n   **/\n  stopAnnotation() {\n    return this._request(`/rooms/${this.token}/annotation`, {\n      method: 'DELETE'\n    }).catch(this._handleError);\n  }\n\n  /**\n   * Start a playback\n   **/\n  startPlayback(playback) {\n    return this._post(`/rooms/${this.token}/playbacks`, {\n      playback: playback\n    }).catch(this._handleError);\n  }\n\n  /**\n   * Stop a playback identified by play_id\n   **/\n  stopPlayback(playback) {\n    return this._request(`/rooms/${this.token}/playbacks/${playback.play_id}`, {\n      method: 'DELETE'\n    }).catch(this._handleError);\n  }\n\n  /**\n   * Lock meeting to freeze current participants\n   */\n  lockMeeting() {\n    return this._post(`/rooms/${this.token}/lock`)\n      .catch(this._handleError);\n  }\n}\n\nexport default ComApi;\n/* eslint-enable max-lines */\n","/* eslint-disable */\n/**\n* Creates and returns a new, throttled version of the passed function, that,\n* when invoked repeatedly, will only actually call the original function at most\n* once per every wait milliseconds. Useful for rate-limiting events that occur\n* faster than you can keep up with.\n*\n* By default, throttle will execute the function as soon as you call it for the\n* first time, and, if you call it again any number of times during the wait\n* period, as soon as that period is over. If you'd like to disable the\n* leading-edge call, pass {leading: false}, and if you'd like to disable the\n* execution on the trailing-edge, pass {trailing: false}.\n*\n* @see http://underscorejs.org/#throttle\n**/\nexport default (func, wait, options) => {\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  if (!options) options = {};\n  var later = function() {\n    previous = options.leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n  return function() {\n    var now = Date.now();\n    if (!previous && options.leading === false) previous = now;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n}\n/* eslint-enable */\n","import Logger from './../Logger';\n\nclass BaseEvent {\n  constructor(context) {\n    this.context = context;\n  }\n\n  handle(msg) {\n    Logger.error('BaseEvent::handle is not implemented', msg);\n  }\n}\n\nexport default BaseEvent;\n","import BaseEvent from './BaseEvent';\n\nclass StartPlaybackEvent extends BaseEvent {\n  handle(msg) {\n    this.context._api.startPlayback(msg.playback);\n  }\n}\n\nclass StopPlaybackEvent extends BaseEvent {\n  handle(msg) {\n    this.context._api.stopPlayback(msg.playback);\n  }\n}\n\nexport { StartPlaybackEvent, StopPlaybackEvent };\n","import BaseEvent from './BaseEvent';\n\nclass PublicEvent extends BaseEvent {\n  handle(msg) {\n    if (msg._src === 'client') {\n      return;\n    }\n\n    Reflect.deleteProperty(msg, '_src');\n    this.context.listeners.forEach(callback => callback(msg));\n  }\n}\n\nexport default PublicEvent;\n","import PublicEvent from './PublicEvent';\n\nclass StartAnnotationEvent extends PublicEvent {\n  handle() {\n    this.context.annotationLoop = window.setInterval(() => {\n      this.context._api.createAnnotation(\n        response => {\n          return super.handle({ type: 'annotation', annotation: response });\n        },\n        () => {\n          window.clearInterval(this.context.annotationLoop);\n        }\n      );\n    }, 1000);\n  }\n}\n\nclass StopAnnotationEvent extends PublicEvent {\n  handle() {\n    window.clearInterval(this.context.annotationLoop);\n    this.context._api.stopAnnotation();\n  }\n}\n\nexport { StartAnnotationEvent, StopAnnotationEvent };\n","import PublicEvent from './PublicEvent';\n\nclass StfuEvent extends PublicEvent {\n  handle() {\n    this.context._rtConnection.send({ message: 'stfu' });\n  }\n}\n\nexport default StfuEvent;\n","import BaseEvent from './BaseEvent';\n\nclass IgnoreEvent extends BaseEvent {\n  handle() {\n    // do nothing.\n  }\n}\n\nexport default IgnoreEvent;\n","import BaseEvent from './BaseEvent';\n\nclass ForwardEvent extends BaseEvent {\n  handle(msg) {\n    this.context.listeners.forEach(callback => callback(msg));\n  }\n}\n\nexport default ForwardEvent;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  const {navigator} = window;\n\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection &&\n       !window.RTCIceGatherer)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const browserDetails = utils.detectBrowser(window);\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n          this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const addIceCandidateNullSupported =\n    window.RTCPeerConnection.prototype.addIceCandidate.length === 0;\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!addIceCandidateNullSupported && !arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions. Native support planned for Chrome M77.\n      if (browserDetails.version < 78 &&\n        arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window) {\n  const browserDetails = utils.detectBrowser(window);\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  const shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));\n  };\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    window.navigator.getDisplayMedia.bind(window.navigator);\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nimport {filterIceServers} from './filtericeservers';\nimport shimRTCPeerConnection from 'rtcpeerconnection-shim';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      const origMSTEnabled = Object.getOwnPropertyDescriptor(\n          window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set(value) {\n          origMSTEnabled.set.call(this, value);\n          const ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  const RTCPeerConnectionShim = shimRTCPeerConnection(window,\n      browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = filterIceServers(config.iceServers,\n        browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nexport function shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender &&\n      !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack =\n        window.RTCRtpSender.prototype.setTrack;\n  }\n}\n","/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nexport function filterIceServers(iceServers, edgeVersion) {\n  let hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(server => {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      const isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(url => {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        const validTurn = url.startsWith('turn') &&\n            !url.startsWith('turn:[') &&\n            url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window) {\n  const browserDetails = utils.detectBrowser(window);\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  // as well as ignoring {sdpMid, candidate: \"\"}\n  if (browserDetails.version < 68) {\n    const nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      if (arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        const initParameters = arguments[1];\n        const shouldPerformCheck = initParameters &&\n                                  'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params)) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        var params = origGetParameters.apply(this, arguments);\n        if (!('sendEncodings' in this)) {\n          return params;\n        }\n        return Object.assign({}, {encodings: this.sendEncodings}, params);\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateOffer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio');\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeAllowExtmapMixed(window) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      desc.sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter = adapterFactory({window});\nexport default adapter;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as edgeShim from './edge/edge_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimEdge: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimGetStats(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n      firefoxShim.shimAddTransceiver(window);\n      firefoxShim.shimGetParameters(window);\n      firefoxShim.shimCreateOffer(window);\n      firefoxShim.shimCreateAnswer(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n      safariShim.shimAudioContext(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","import screenfull from 'screenfull';\n\nclass FullscreenHelper {\n  constructor() {\n    this.onChange = this.onChange.bind(this);\n    this.hasSupport = Boolean(screenfull.isEnabled);\n  }\n\n  toggle() {\n    return this.isFullscreen() ? screenfull.exit() : screenfull.request();\n  }\n\n  canFullscreen() {\n    return this.hasSupport;\n  }\n\n  isFullscreen() {\n    return this.hasSupport && screenfull.isFullscreen;\n  }\n\n  onChange(callback) {\n    if (!this.hasSupport) {\n      return;\n    }\n\n    screenfull.on('change', () => callback(this.isFullscreen()));\n  }\n\n  off() {\n    if (!this.hasSupport) {\n      return;\n    }\n\n    screenfull.off('change');\n  }\n}\n\nexport default FullscreenHelper;\n","/* eslint-disable max-lines */\nimport Logger from './Logger';\nimport adapter from 'webrtc-adapter';\nimport platform from 'platform';\nimport FullscreenHelper from './FullscreenHelper';\n\n/**\n * Feature Detector.\n **/\nexport default (function() {\n  return {\n    environment: function() {\n      return {\n        canMix: this.canMix(),\n        canPip: this.hasPipSupport(),\n        canSFU: this.canSFU(),\n        isPhone: this.isPhone(),\n        inIframe: this.inIframe(),\n        canUseEyeson: this.canUseEyeson(),\n        canFullscreen: this.canFullscreen(),\n        hasMobileDevice: this.hasMobileDevice(),\n        canToggleCamera: this.canToggleCamera(),\n        canPresentFiles: this.canPresentFiles(),\n        canScreenCapture: this.canScreenCapture(),\n        canAdjustSettings: this.canAdjustDeviceSettings(),\n        isExperimentalBrowser: this.isExperimentalBrowser()\n      };\n    },\n\n    platform: () => platform,\n\n    /**\n     * Test if browser should be able to use eyeson.\n     **/\n    canUseEyeson: function() {\n      return (\n        !this.isWebView() &&\n        this.hasGetUserMedia() &&\n        this.hasPeerConnection() &&\n        this.isRecentBrowser()\n      );\n    },\n\n    hasGetUserMedia: function() {\n      return (\n        'mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices\n      );\n    },\n\n    hasGetDisplayMedia: function() {\n      return (\n        'mediaDevices' in navigator &&\n        'getDisplayMedia' in navigator.mediaDevices\n      );\n    },\n\n    hasPeerConnection: function() {\n      return 'RTCPeerConnection' in window;\n    },\n\n    isRecentBrowser: function() {\n      if (this.isChrome()) {\n        return this.isRecentChrome();\n      }\n      if (this.isFF()) {\n        return this.isRecentFF();\n      }\n      if (this.isEdge()) {\n        return this.isRecentEdge();\n      }\n      if (this.isSafari()) {\n        return this.isRecentSafari();\n      }\n      return false;\n    },\n\n    hasCaptureStream: function() {\n      return (\n        'captureStream' in window.HTMLMediaElement.prototype ||\n        'mozCaptureStream' in window.HTMLMediaElement.prototype\n      );\n    },\n\n    hasCanvasCaptureSupport: function() {\n      return (\n        'CanvasCaptureMediaStream' in window ||\n        'CanvasCaptureMediaStreamTrack' in window\n      );\n    },\n\n    hasSenders: function() {\n      return 'RTCRtpSender' in window;\n    },\n\n    /**\n     * 07 Aug 2019 - Safari doesn't seem to fire the event properly.\n     **/\n    hasTrackOnUnmute: function() {\n      if (this.isSafari() || this.isEdge()) {\n        return false;\n      }\n      return 'onunmute' in MediaStreamTrack.prototype;\n    },\n\n    /**\n     * https://caniuse.com/#feat=webp\n     **/\n    hasWebpSupport: function() {\n      if (this.isRecentChrome()) {\n        return true;\n      }\n      if (this.isFF()) {\n        return adapter.browserDetails.version >= 65;\n      }\n      if (this.isEdge()) {\n        return true;\n      }\n\n      return false;\n    },\n    /**\n     * Test if user agent supports changing of audio output.\n     **/\n    canChangeAudioOutput: function() {\n      if (!document) {\n        return true;\n      }\n      return 'setSinkId' in document.createElement('video');\n    },\n\n    /**\n     * Test if user agent supports changing the microphone.\n     * For now, simply check if we're dealing with Safari, haven't found a\n     * better way to check this yet.\n     * https://bugs.webkit.org/show_bug.cgi?id=175975\n     **/\n    canChangeMicrophone: function() {\n      return adapter.browserDetails.browser !== 'safari' && !this.isTestSuite();\n    },\n\n    /**\n     * Test if user agent supports remembering devices.\n     * For now, simply check if we're dealing with Safari, haven't found a\n     * better way to check this yet.\n     * https://bugs.webkit.org/show_bug.cgi?id=175975\n     **/\n    canChangeCamera: function() {\n      return !this.isIOSDevice() && !this.isTestSuite();\n    },\n\n    /**\n     * Test if user agent supports screen capture feature.\n     **/\n    canScreenCapture: function() {\n      if (this.isTestSuite() || !this.canUseEyeson() || this.isEdge()) {\n        return false;\n      }\n      return (\n        this.hasGetDisplayMedia() || (this.isFF() && this.hasGetUserMedia())\n      );\n    },\n\n    canPresentFiles: function() {\n      if (\n        this.isTestSuite() ||\n        !this.canUseEyeson() ||\n        this.isEdge() ||\n        (this.isFF() && adapter.browserDetails.version <= 60) ||\n        this.isIOSDevice()\n      ) {\n        return false;\n      }\n      return true;\n    },\n\n    /**\n     * Unfortunately we had issues with higher resolution constraints on\n     * Safari (iOS and Mac).\n     **/\n    requiresLowerConstraints: function() {\n      return adapter.browserDetails.browser === 'safari';\n    },\n\n    browserName: function() {\n      let name = adapter.browserDetails.browser.replace(/\\w\\S*/g, txt => {\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n      });\n      return name;\n    },\n\n    browserVersion: function() {\n      return adapter.browserDetails.version;\n    },\n\n    isEdge: function() {\n      return adapter.browserDetails.browser === 'edge';\n    },\n\n    isFF: function() {\n      return adapter.browserDetails.browser === 'firefox';\n    },\n\n    isChrome: function() {\n      return adapter.browserDetails.browser === 'chrome';\n    },\n\n    isSafari: function() {\n      return adapter.browserDetails.browser === 'safari';\n    },\n\n    /**\n     * Older versions of Edge (20.10240) et al. pass through adapter until\n     * they hit RTCIceTransport and blow up.\n     **/\n    isRecentEdge: function() {\n      if (!this.isEdge()) {\n        return false;\n      }\n      return adapter.browserDetails.version > 15000;\n    },\n\n    /**\n     * https://en.wikipedia.org/wiki/Firefox_version_history\n     * A customer is on WinXP (hello 2019) and FF seems\n     * to be locked at 52 with an extended support version on that OS.\n     * May god have mercy on those poor souls.\n     **/\n    isRecentFF: function() {\n      if (!this.isFF()) {\n        return false;\n      }\n      return adapter.browserDetails.version >= 52;\n    },\n\n    /**\n     * https://en.wikipedia.org/wiki/Google_Chrome_version_history\n     **/\n    isRecentChrome: function() {\n      if (!this.isChrome()) {\n        return false;\n      }\n      return adapter.browserDetails.version >= 70;\n    },\n\n    isRecentSafari: function() {\n      if (!this.isSafari()) {\n        return false;\n      }\n      return adapter.browserDetails.version >= 10;\n    },\n\n    isExperimentalBrowser: function() {\n      return ['safari', 'edge'].includes(adapter.browserDetails.browser);\n    },\n\n    /**\n     * Unfortunately Safari on iOS pauses the local camera during PIP,\n     * and afterwards the remote video is frozen.\n     **/\n    hasPipSupport: function() {\n      if (!document) {\n        return true;\n      }\n\n      const video = document.createElement('video');\n      const hasSupport = Boolean(\n        video.webkitSupportsPresentationMode ||\n          'pictureInPictureEnabled' in document\n      );\n      if (video.remove) {\n        video.remove();\n      }\n      return hasSupport && !this.isIOSDevice();\n    },\n\n    /**\n     * Check user agent if it is an Android device.\n     **/\n    isAndroidDevice: function() {\n      return Boolean(navigator.userAgent.match(/Android/i));\n    },\n\n    /**\n     * Check user agent if it is an iOS device.\n     * This check includes detection of \"Desktop mode\" on mobile devices\n     **/\n    isIOSDevice: function() {\n      // Resource: https://stackoverflow.com/a/58064481\n      return (/iPad|iPhone|iPod/.test(navigator.platform) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) && !window.MSStream;\n    },\n\n    /**\n     * Check user agent if it is an iPhone.\n     * This check includes detection of \"Desktop mode\" on iPhone.\n     * To distinguish between iPad and iPhone in \"Desktio mode\",\n     * we have to additionally check for aspect ratio\n     **/\n    isIPhone: function() {\n      // Resource: https://stackoverflow.com/a/58064481\n      return (/iPhone/.test(navigator.platform) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1 && window.screen.height / window.screen.width >= 1.5)) && !window.MSStream;\n    },\n\n    /**\n     * As a solution for mobile sites, our Android engineers recommend to\n     * specifically detect “mobile” in the User-Agent string as well as\n     * “android.”\n     *\n     * https://webmasters.googleblog.com/2011/03/mo-better-to-also-detect-mobile-user.html\n     **/\n    isAndroidPhone: function() {\n      const isAndroid = /(android)/i.test(navigator.userAgent);\n      const isMobile = /(mobile)/i.test(navigator.userAgent);\n      return isAndroid && isMobile;\n    },\n\n    /**\n     * Is the app running inside an iFrame.\n     * https://stackoverflow.com/a/326076/980524\n     **/\n    inIframe: function() {\n      try {\n        return window.self !== window.top;\n      } catch (error) {\n        return true;\n      }\n    },\n\n    /**\n     * Phone vs. tablet\n     **/\n    isPhone: function() {\n      return this.isIPhone() || this.isAndroidPhone();\n    },\n\n    /**\n     * ...\n     **/\n    hasMobileDevice: function() {\n      return this.isIOSDevice() || this.isAndroidDevice();\n    },\n\n    /**\n     * Is the app running on a touch device.\n     * https://stackoverflow.com/a/4819886/980524\n     * Note: touch device, might be a laptop with a touch display or those\n     * dell tablets we have laying around here.\n     **/\n    isTouchDevice: function() {\n      return Boolean('ontouchstart' in window || navigator.maxTouchPoints);\n    },\n\n    /**\n     * Unfortunately the facebook streaming procedure doesn't work on Safari\n     * on iOS. Facebook's popup hints that it is not compatible with EDGE.\n     **/\n    canLiveStreamToFacebook: function() {\n      return !this.isIOSDevice() && !this.isEdge() && !this.isTestSuite();\n    },\n\n    /**\n     * iOS doesn't propagate tap events to react when we have display tooltips.\n     * This results in annoying \"double taps\" from the user.\n     * But the tooltips aren't designed for touch devices anyway.\n     **/\n    canDisplayTooltips: function() {\n      return !this.isIOSDevice() && !this.isTestSuite();\n    },\n\n    /**\n     * iOS doesn't handle stream switching properly, the remote stream freezes\n     * sometimes when making changes.\n     **/\n    canAdjustDeviceSettings: function() {\n      return !this.isIOSDevice();\n    },\n\n    /**\n     * iOS doesn't handle stream switching properly, the remote stream freezes\n     * sometimes when making changes.\n     **/\n    canToggleCamera: function() {\n      return !this.isIOSDevice();\n    },\n\n    canMix: function() {\n      return (\n        this.isChrome() && this.canScreenCapture() && this.hasCaptureStream()\n      );\n    },\n\n    /**\n     * Browsers don't behave the same way when setting the .enabled property of\n     * a MediaSTreamTrack to false.\n     * In Chrome (as of May 2019) the activity indicator stays active even if\n     * the track is disabled (enabled: false).\n     * https://bugs.chromium.org/p/webrtc/issues/detail?id=5942\n     * While in Firefox the indicator is turned off.\n     */\n    stopsDeviceActivityIndicatorOnDisable: function() {\n      if (this.isFF()) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Edge doesn't have this property and raises an error when trying to\n     * access it.\n     **/\n    supportsBlurOnSVG: function() {\n      return (\n        typeof SVGElement !== 'undefined' &&\n        typeof SVGElement.prototype.blur !== 'undefined'\n      );\n    },\n\n    /**\n     * Chrome will throw a SecurityException when trying to read the\n     * `localStorage` property.\n     **/\n    hasLocalStorage: function() {\n      try {\n        const hasLocalStorage =\n          typeof window.localStorage === 'object' &&\n          window.localStorage !== null;\n        window.localStorage.setItem('eyeson.test', 'test');\n        const canGet = window.localStorage.getItem('eyeson.test') === 'test';\n        return hasLocalStorage && canGet;\n      } catch (error) {\n        Logger.debug('FeatureDetector::hasLocalStorage:', error.message);\n        return false;\n      }\n    },\n\n    canFullscreen: function() {\n      return new FullscreenHelper().canFullscreen();\n    },\n\n    isFullscreen: function() {\n      return new FullscreenHelper().isFullscreen();\n    },\n\n    canSFU: function() {\n      const safariWithoutVP8 =\n        this.isSafari() && adapter.browserDetails.version <= 605;\n      return !this.isIOSDevice() && !this.isEdge() && !safariWithoutVP8 && !this.isTestSuite();\n    },\n\n    canShare: function() {\n      return Boolean(navigator.share);\n    },\n\n    /**\n     * https://developer.chrome.com/multidevice/user-agent#webview_user_agent\n     *\n     * If you’re attempting to differentiate between the WebView and Chrome for\n     * Android, you should look for the presence of the Version/_X.X_ string in\n     * the WebView user-agent string.\n     *\n     * In the newer versions of WebView, you can differentiate the WebView by\n     * looking for the wv field as highlighted below\n     **/\n    isWebView: function() {\n      return (\n        /Version\\/|wv/i.test(navigator.userAgent) && this.isAndroidDevice()\n      );\n    },\n\n    /* eslint-disable no-process-env */\n    /* global process */\n    isTestSuite: function() {\n      return (\n        process.env.NODE_ENV === 'test' ||\n        adapter.browserDetails.browser === 'test-suite'\n      );\n    }\n    /* eslint-enable no-process-env */\n  };\n})();\n/* eslint-enable max-lines */\n","/**\n * Ninja Stream\n **/\nclass NinjaStream {\n  constructor() {\n    this._stream = this.createStream();\n  }\n\n  get stream() {\n    return this._stream;\n  }\n\n  /**\n   * Create a dummy stream from a canvas element.\n   **/\n  createStream() {\n    const width = 0;\n    const height = 0;\n    let canvas = Object.assign(document.createElement('canvas'), {\n      width,\n      height\n    });\n    canvas.id = 'eyeson-ninja-stream';\n    canvas.getContext('2d').fillRect(0, 0, width, height);\n    return canvas.captureStream();\n  }\n}\n\nexport default NinjaStream;\n","import FeatureDetector from './FeatureDetector';\n\n/**\n * Wrapper around localStorage API in order to prefix keys to be stored and\n * offer default values on demand. If no localStorage is provided by\n * the user-agent, we use a temporary fallbackStorage.\n **/\nexport default (function() {\n  const prefix = 'eyeson.';\n  let fallbackStorage = {};\n  const hasLocalStorage = FeatureDetector.hasLocalStorage();\n\n  return {\n    store: function(key, value) {\n      if (!hasLocalStorage) {\n        fallbackStorage[key] = value;\n        return;\n      }\n      window.localStorage.setItem(prefix + key, JSON.stringify(value));\n    },\n    load: function(key, defaultValueParam) {\n      let defaultValue = defaultValueParam;\n      if (typeof defaultValue === 'object' && !Array.isArray(defaultValue)) {\n        defaultValue = Object.assign({}, defaultValue);\n      }\n      if (!hasLocalStorage) {\n        return fallbackStorage[key] || defaultValue;\n      }\n      let storedValue = window.localStorage.getItem(prefix + key);\n      if (!storedValue) {\n        return defaultValue;\n      }\n      return JSON.parse(storedValue);\n    }\n  };\n}());\n","import FeatureDetector from '../FeatureDetector';\n\nconst CanvasMedia =\n  window.CanvasCaptureMediaStream || window.CanvasCaptureMediaStreamTrack;\n\nexport const hasAudio = stream => {\n  return Boolean(\n    stream &&\n      stream.getAudioTracks().length > 0 &&\n      stream.getAudioTracks()[0].enabled\n  );\n};\n\nexport const hasVideo = stream => {\n  return Boolean(\n    stream &&\n      stream.getVideoTracks().length > 0 &&\n      stream.getVideoTracks()[0].enabled\n  );\n};\n\nexport const disableAudio = stream => {\n  stream.getAudioTracks().forEach(track => (track.enabled = false));\n  return stream;\n};\n\nexport const enableAudio = stream => {\n  stream.getAudioTracks().forEach(track => (track.enabled = true));\n  return stream;\n};\n\n// In order to be \"informed\" about track ending in compose_canvas where we\n// create offscreen/hidden video elements and need to clean them up afterwards,\n// we need to dispatch 'stopped' ourselves. The 'ended' event is not emitted\n// after stopping the track, as one might expect see:\n// https://stackoverflow.com/q/55953038/980524\nexport const stopTrack = track => {\n  track.stop();\n  return track.dispatchEvent(new Event('stopped'));\n};\n\nexport const stopStream = stream => {\n  stream.getTracks().forEach(stopTrack);\n};\n\nconst isScreenTrack = track => {\n  return (\n    /screen|monitor|window|web-contents-media-stream/i.test(track.label) ||\n    track.type === 'screen-track'\n  );\n};\n\nconst isCanvasTrack = track => {\n  return Boolean(\n    (track.type === 'canvas-track' || track instanceof CanvasMedia) &&\n      track.canvas &&\n      track.canvas.id !== 'eyeson-ninja-stream'\n  );\n};\n\nconst isCameraTrack = track => {\n  return !isCanvasTrack(track) && !isScreenTrack(track);\n};\n\nexport const getScreenTracks = stream => {\n  return stream.getVideoTracks().filter(isScreenTrack);\n};\n\nexport const getCameraTracks = stream => {\n  return stream.getVideoTracks().filter(isCameraTrack);\n};\n\nexport const stopCamera = stream => {\n  getCameraTracks(stream).forEach(stopTrack);\n};\n\nexport const disableCamera = stream => {\n  getCameraTracks(stream).forEach(track => (track.enabled = false));\n  return stream;\n};\n\nexport const enableCamera = stream => {\n  getCameraTracks(stream).forEach(track => (track.enabled = true));\n  return stream;\n};\n\nexport const toggleCamera = (stream, enabled) => {\n  getCameraTracks(stream).forEach(track => (track.enabled = enabled));\n  return stream;\n};\n\nexport const getCanvasTracks = stream => {\n  // current FF implementation\n  if (stream instanceof CanvasMedia) {\n    return stream.getVideoTracks();\n  }\n\n  return stream.getVideoTracks().filter(isCanvasTrack);\n};\n\nexport const isScreenStream = stream => {\n  return hasVideo(stream) && stream.getVideoTracks().some(isScreenTrack);\n};\n\nexport const isCanvasStream = stream => {\n  if (!FeatureDetector.hasCanvasCaptureSupport()) {\n    return false;\n  }\n\n  return stream.getVideoTracks().some(isCanvasTrack);\n};\n\nexport const isCameraStream = stream => {\n  return hasVideo(stream) && !isScreenStream(stream) && !isCanvasStream(stream);\n};\n\nexport const isCanvasPresentationStream = stream => {\n  if (!stream) {\n    return false;\n  }\n  return isCanvasStream(stream) && stream.getVideoTracks().some(isCanvasTrack);\n};\n\nexport const isPresentationStream = stream => {\n  return isScreenStream(stream) || isCanvasStream(stream);\n};\n\nexport const hasCameraVideo = stream => {\n  return getCameraTracks(stream).some(track => track.enabled);\n};\n\n// try to make FF's captureStream handling track based.\nexport const captureStream = canvas => {\n  // NOTE: getContext is needed for firefox, otherwise we get an exception:\n  // NS_ERROR_NOT_INITIALIZED when calling .captureStream on the canvas.\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1257440\n  canvas.getContext('2d');\n\n  // 0 param is fps, but since that doesn't work cross browser, we use 0\n  // and request frames manually.\n  const stream = canvas.captureStream(30);\n\n  const [track] = stream.getVideoTracks();\n  if (!('requestFrame' in track)) {\n    track.type = 'canvas-track';\n    track.canvas = canvas;\n    track.requestFrame = () => stream.requestFrame();\n  }\n\n  return stream;\n};\n","/* eslint-disable max-lines */\nimport Logger from './Logger';\nimport LocalStorage from './LocalStorage';\nimport { stopStream } from './utils/StreamHelpers';\n\n/**\n * eyeson Device Manager used to handle cameras, microphones and speakers.\n **/\nclass DeviceManager {\n  /* eslint-disable max-statements */\n  constructor(options) {\n    this.sinkId = 'default';\n    this.options = options || { audio: true, video: true, eco: false };\n    this.stream = null;\n    this.cameras = [];\n    this.listeners = [];\n    this.speakers = [];\n    this.microphones = [];\n    this.constraints = {};\n    this.terminationInProgress = false;\n\n    DeviceManager.getSinkId().then(sinkId => (this.sinkId = sinkId));\n\n    this.setStream = this.setStream.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.verifyStream = this.verifyStream.bind(this);\n    this.storeConstraints = this.storeConstraints.bind(this);\n    this.adjustAudioTrack = this.adjustAudioTrack.bind(this);\n  }\n  /* eslint-enable max-statements */\n\n  static getDevices() {\n    if (!('mediaDevices' in navigator)) {\n      return new Promise(res => res([]));\n    }\n    return navigator.mediaDevices.enumerateDevices()\n      .then(devices => {\n          // hack for safari ios and desktop because they hide existing devices to avoid fingerprinting: https://webkit.org/blog/7763/a-closer-look-into-webrtc/\n          if (devices.length === 2 && devices.every(device => device.kind === 'audioinput' && device.deviceId === '')) {\n            return [{ deviceId: '', groupId: '', kind: 'audioinput', label: '' }, { deviceId: '', groupId: '', kind: 'videoinput', label: '' }];\n          }\n          return devices;\n        });\n  }\n\n  /**\n   * Get constraints for specified options { audio: true, video: true }\n   * If a specific device is chosen it has to be stored in localStorage or will\n   * be ignored.\n   **/\n  static getConstraints(optionsParam) {\n    const options = optionsParam || { audio: true, video: true };\n    return DeviceManager.getDevices()\n      .then(devices => {\n        return DeviceManager.determineConstraintsForDevices(devices, options);\n      })\n      .catch(error => {\n        Logger.error('DeviceManager::getConstraints ', error);\n      });\n  }\n\n  /* eslint-disable max-statements */\n  static determineConstraintsForDevices(devices, options) {\n    let constraints = LocalStorage.load('mediaConstraints', options);\n\n    if (!('video' in constraints)) {\n      constraints.video = true;\n    }\n    if (!('audio' in constraints)) {\n      constraints.audio = true;\n    }\n\n    if (constraints.video.deviceId) {\n      const videoDeviceId = constraints.video.deviceId.exact;\n      if (!devices.find(device => device.deviceId === videoDeviceId)) {\n        constraints.video = options.video;\n      }\n    }\n    if (constraints.audio.deviceId) {\n      const audioDeviceId = constraints.audio.deviceId.exact;\n      if (!devices.find(device => device.deviceId === audioDeviceId)) {\n        constraints.audio = options.audio;\n      }\n    }\n\n    if (options.video === false && !options.eco) {\n      constraints.video = false;\n    }\n    if (options.video === true && constraints.video === false) {\n      constraints.video = true;\n    }\n    if (options.audio === true && constraints.audio === false) {\n      constraints.audio = true;\n    }\n\n    // In case we don't have a videoinput device but specify\n    // video: true, we get NotFoundError in FF & DevicesNotFoundError in\n    // Chrome.\n    if (devices.filter(device => device.kind === 'videoinput').length === 0) {\n      constraints.video = false;\n    }\n\n    return constraints;\n  }\n  /* eslint-enable max-statements */\n\n  /**\n   * For now we handle the mobile options and constraints completely separately.\n   * That way we can address the facingMode constraint.\n   **/\n  static getMobileConstraints(options) {\n    let constraints = Object.assign({ audio: true, video: true }, options);\n    return new Promise(res => res(constraints));\n  }\n\n  /**\n   * Get sinkId.\n   **/\n  static getSinkId() {\n    let sinkId = LocalStorage.load('sinkId', '');\n    return DeviceManager.getDevices().then(devices => {\n      if (!devices.find(device => device.deviceId === sinkId)) {\n        sinkId = 'default';\n      }\n      return sinkId;\n    });\n  }\n\n  /**\n   * Return available devices in a friendly format.\n   **/\n  static fetchDevices() {\n    return DeviceManager.getDevices().then(devices => {\n      return {\n        cameras: devices.filter(device => device.kind === 'videoinput'),\n        microphones: devices.filter(device => device.kind === 'audioinput'),\n        speakers: devices.filter(device => device.kind === 'audiooutput')\n      };\n    });\n  }\n\n  static fetchInputDevices() {\n    return DeviceManager.getDevices().then(devices => {\n      return devices.filter(device => device.kind.includes('input'));\n    });\n  }\n\n  /**\n   * Sets cameras, microphones, and speakers and starts a video stream\n   * with supplied options.\n   **/\n  start() {\n    this.watchForNewDevices();\n\n    return DeviceManager.fetchDevices()\n      .then(devices => {\n        this.cameras = devices.cameras;\n        this.microphones = devices.microphones;\n        this.speakers = devices.speakers;\n        this.options.audio =\n          this.microphones.length > 0 ? this.options.audio : false;\n        this.options.video =\n          this.cameras.length > 0 ? this.options.video : false;\n        this.emit(devices);\n        return devices;\n      })\n      .then(() => DeviceManager.getConstraints(this.options))\n      .then(constraints => {\n        this.constraints = constraints;\n        return navigator.mediaDevices.getUserMedia({\n          video: this.options.eco ? false : this.constraints.video,\n          audio: this.constraints.audio || true\n        });\n      })\n      .then(this.adjustAudioTrack)\n      .then(this.setStream)\n      .catch(this.handleError);\n  }\n\n  stopStream() {\n    if (!this.stream) {\n      return;\n    }\n\n    stopStream(this.stream);\n    this.stream = null;\n  }\n\n  /**\n   * Stop the media stream. Since we call getUserMedia on gotDevices we don't\n   * have a stream in that case.\n   **/\n  stop() {\n    this.stopStream();\n  }\n\n  terminate() {\n    this.terminationInProgress = true;\n    window.setTimeout(() => this.stop(), 10);\n  }\n\n  watchForNewDevices() {\n    navigator.mediaDevices.ondevicechange = () => {\n      DeviceManager.fetchDevices()\n        .then(devices => this.emit(devices))\n        .catch(this.handleError);\n    };\n  }\n\n  /**\n   * Register listeners for changes on devices.\n   **/\n  onChange(callback) {\n    this.listeners.push(callback);\n  }\n\n  /**\n   * Remove a listener.\n   **/\n  removeListener(callback) {\n    this.listeners = this.listeners.filter(listener => listener !== callback);\n  }\n\n  /**\n   * Wrapper around mediaDevices getUserMedia. Ensures a running stream is\n   * stopped and a new one started with newly defined constraints.\n   **/\n  update(constraints) {\n    this.constraints = constraints || this.constraints;\n    this.stop();\n\n    navigator.mediaDevices\n      .getUserMedia(this.constraints)\n      .then(this.setStream)\n      .catch(this.handleError);\n  }\n\n  /**\n   * Similar to update but instead of directly supplying constraints,\n   * update with options.\n   **/\n  updateWithOptions(options) {\n    this.options = options || this.options;\n    this.stop();\n\n    this.watchForNewDevices();\n\n    return DeviceManager.getConstraints(this.options)\n      .then(constraints => {\n        this.constraints = constraints;\n        return navigator.mediaDevices.getUserMedia({\n          video: this.options.eco ? false : this.constraints.video,\n          audio: this.constraints.audio || true\n        });\n      })\n      .then(this.adjustAudioTrack)\n      .then(this.setStream)\n      .catch(this.handleError);\n  }\n\n  adjustAudioTrack(stream) {\n    if (stream.getAudioTracks().length === 1) {\n      stream.getAudioTracks()[0].enabled = this.options.audio;\n    }\n    return stream;\n  }\n\n  storeConstraints() {\n    Logger.debug('DeviceManager::storeConstraints', this.constraints);\n    LocalStorage.store('mediaConstraints', this.constraints);\n    LocalStorage.store('sinkId', this.sinkId);\n  }\n\n  /**\n   * Set active stream.\n   *\n   * NOTE: This can be called _after_ we have already stopped.\n   **/\n  setStream(stream) {\n    this.stream = stream;\n    if (this.terminationInProgress) {\n      this.stop();\n    }\n\n    this.emit({\n      stream: this.stream,\n      constraints: this.constraints,\n      options: this.options\n    });\n    this.verifyStream();\n  }\n\n  verifyStream() {\n    if (\n      this.constraints.video &&\n      this.stream &&\n      this.stream.getVideoTracks().length === 0 &&\n      !this.options.eco\n    ) {\n      this.handleError({ name: 'EyesonCameraError' });\n    }\n\n    if (\n      this.constraints.audio &&\n      this.stream &&\n      this.stream.getAudioTracks().length === 0\n    ) {\n      this.handleError({ name: 'EyesonMicrophoneError' });\n    }\n  }\n\n  /**\n   * Set video input selection.\n   **/\n  setVideoInput(deviceId) {\n    let videoConstraints = {};\n    Object.assign(videoConstraints, this.constraints.video, {\n      deviceId: { exact: deviceId }\n    });\n    this.constraints.video = videoConstraints;\n    this.update();\n  }\n\n  /**\n   * Set audio input selection.\n   **/\n  setAudioInput(deviceId) {\n    let audioConstraints = {};\n    Object.assign(audioConstraints, this.constraints.audio, {\n      deviceId: { exact: deviceId }\n    });\n    this.constraints.audio = audioConstraints;\n    this.update();\n  }\n\n  /**\n   * Set and store audio output selection.\n   **/\n  setAudioOutput(sinkId) {\n    this.sinkId = sinkId;\n    LocalStorage.store('sinkId', this.sinkId);\n    this.emit({ sinkId: this.sinkId });\n  }\n\n  handleError(error) {\n    Logger.error('DeviceManager::', error);\n    this.emit({ error: error, constraints: this.constraints });\n  }\n\n  /**\n   * emit bound listeners about changes.\n   **/\n  emit(state) {\n    this.listeners.forEach(listener => listener(state));\n  }\n}\n\nexport default DeviceManager;\n/* eslint-enable max-lines */\n","import Logger from './Logger';\nimport NinjaStream from './NinjaStream';\nimport DeviceManager from './DeviceManager';\nimport FeatureDetector from './FeatureDetector';\nimport {\n  stopTrack,\n  captureStream,\n  isCanvasPresentationStream,\n  isScreenStream,\n  getScreenTracks,\n  getCanvasTracks,\n  stopCamera\n} from './utils/StreamHelpers.js';\n\n/**\n * Options are basically what the user of MediaStreamBuilder \"wants\" to see in\n * the conference session. For example: no camera video -> options video: false\n * but we'd still have a media stream track with video because conference server\n * currently expects this behaviour and relies on mute_video command being\n * sent.\n **/\nclass MediaStreamBuilder {\n  constructor(\n    options = {\n      eco: false,\n      audio: true,\n      video: true,\n      screen: false,\n      screenStream: null,\n      canvas: null,\n      existingStream: null\n    }\n  ) {\n    this.options = options;\n\n    this.getMediaStream = this.getMediaStream.bind(this);\n    this.addNinjaTrack = this.addNinjaTrack.bind(this);\n    this.addCanvasTrack = this.addCanvasTrack.bind(this);\n    this.addScreenTrack = this.addScreenTrack.bind(this);\n    this.adjustAudioTrack = this.adjustAudioTrack.bind(this);\n    this.adjustVideoTrack = this.adjustVideoTrack.bind(this);\n    this.addScreenStreamTrack = this.addScreenStreamTrack.bind(this);\n  }\n\n  /**\n   * We always acquire a stream with at least audio enabled and adjust\n   * the desired mute behaviour via the track.\n   * Unless, we have no camera and microphones. In that case we use a\n   * NinjaStream.\n   * If the browser does not support updating the peerConnection\n   * we acquire a audio and video stream and adjust the tracks accordingly.\n   *\n   * In case of replaceTrack support we stop the tracks before\n   * acquiring a new stream. Since stopping a track also stops the source.\n   * So, at least in Safari we'd stop the camera if the old and new track\n   * use the same source.\n   * Furthermore Safari on iOS behaves differently again. Camera muting\n   * _sometimes_ freezes the remote stream video playback (audio fine).\n   **/\n  start() {\n    Logger.debug('MediaStreamBuilder::start', this.options);\n    const { existingStream, video, screen } = this.options;\n\n    if (FeatureDetector.isIOSDevice() && existingStream && typeof video === 'boolean') {\n      return new Promise((resolve, reject) => {\n        try {\n          existingStream.getVideoTracks()[0].enabled = video;\n          resolve(existingStream);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n\n    if (FeatureDetector.isSafari() && screen) {\n      return navigator.mediaDevices\n        .getDisplayMedia({ video: true })\n        .then(stream => {\n          return navigator.mediaDevices\n            .getUserMedia({ audio: true })\n            .then(audioStream => {\n              stream.addTrack(audioStream.getAudioTracks()[0], stream);\n              return stream;\n            });\n        })\n        .then(this.adjustAudioTrack)\n        .then(stream => {\n          const [screenTrack] = stream.getVideoTracks();\n          screenTrack.type = 'screen-track';\n          return stream;\n        });\n    }\n\n    return DeviceManager.fetchInputDevices()\n      .then(this.getMediaStream)\n      .then(this.adjustVideoTrack)\n      .then(this.adjustAudioTrack)\n      .then(this.addCanvasTrack)\n      .then(this.addScreenTrack)\n      .then(this.addNinjaTrack)\n      .catch(error => {\n        Logger.error('MediaStreamBuilder::start ', error, error.message);\n        return Promise.reject(error);\n      });\n  }\n\n  getMediaStream(devices) {\n    if (devices.length === 0) {\n      this.options = { audio: false, video: false };\n      return new NinjaStream().stream;\n    }\n    const { eco, video, existingStream } = this.options;\n    const options = {\n      video: FeatureDetector.hasCaptureStream() || eco ? video : true,\n      audio: true\n    };\n\n    if (FeatureDetector.isPhone() && existingStream) {\n      stopCamera(existingStream);\n      return DeviceManager.getMobileConstraints(options).then(\n        navigator.mediaDevices.getUserMedia\n      );\n    }\n\n    return DeviceManager.getConstraints(options).then(constraints => {\n      return navigator.mediaDevices.getUserMedia(constraints);\n    });\n  }\n\n  /**\n   * Adjust audio and video tracks according to the supplied options.\n   * We stop the video track so the camera indicator isn't active.\n   * We add a filler video track, unless we're in eco mode, which would result\n   * in sdp with media section for video & recvonly. meaning we'd still\n   * receive video.\n   **/\n  adjustVideoTrack(stream) {\n    if (stream.getVideoTracks().length === 1) {\n      const [vTrack] = stream.getVideoTracks();\n      vTrack.enabled = this.options.video;\n      if (this.options.video === false) {\n        stopTrack(vTrack);\n      }\n    }\n    return stream;\n  }\n\n  adjustAudioTrack(stream) {\n    if (stream.getAudioTracks().length === 1) {\n      stream.getAudioTracks()[0].enabled = this.options.audio;\n    }\n    return stream;\n  }\n\n  addCanvasTrack(stream) {\n    const { canvas, existingStream } = this.options;\n    if (canvas) {\n      const canvasStream = captureStream(canvas);\n      const [canvasTrack] = getCanvasTracks(canvasStream);\n      stream.addTrack(canvasTrack, stream);\n    }\n    if (isCanvasPresentationStream(existingStream)) {\n      const [canvasTrack] = getCanvasTracks(existingStream);\n      stream.addTrack(canvasTrack, stream);\n    }\n    return stream;\n  }\n\n  async addScreenTrack(stream) {\n    const { screen, screenStream, existingStream } = this.options;\n    if (screen) {\n      if (screenStream === null || typeof screenStream === 'undefined') {\n        const usedStream = await this.getDisplayMedia();\n        this.addScreenStreamTrack(stream, usedStream);\n      }\n      else {\n        this.addScreenStreamTrack(stream, screenStream);\n      }\n    }\n    if (isScreenStream(existingStream)) {\n      const [screenTrack] = getScreenTracks(existingStream);\n      stream.addTrack(screenTrack, stream);\n    }\n    return stream;\n  }\n\n  addScreenStreamTrack(stream, screenStream) {\n    const [screenTrack] = screenStream.getVideoTracks();\n    // options required for SAFARI\n    screenTrack.type = 'screen-track';\n    stream.addTrack(screenTrack, stream);\n  }\n\n  getDisplayMedia() {\n    if (FeatureDetector.hasGetDisplayMedia()) {\n      return navigator.mediaDevices.getDisplayMedia({\n        video: {\n          width: { max: 1920 },\n          height: { max: 1080 },\n          frameRate: { max: 15 }\n        }\n      });\n    }\n    return navigator.mediaDevices.getUserMedia({\n      video: {\n        mediaSource: 'screen',\n        width: { max: 1920 },\n        height: { max: 1040 },\n        frameRate: { max: 15 }\n      }\n    });\n  }\n\n  addNinjaTrack(stream) {\n    const { eco, video } = this.options;\n    if (eco || !FeatureDetector.hasCaptureStream()) {\n      return stream;\n    }\n    if (stream.getVideoTracks().length === 0) {\n      const [fillerTrack] = new NinjaStream().stream.getVideoTracks();\n      fillerTrack.enabled = video;\n      stream.addTrack(fillerTrack, stream);\n    }\n    return stream;\n  }\n}\n\nexport default MediaStreamBuilder;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport FeatureDetector from '../FeatureDetector';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\n\nconst adjustMediaStreamTracks = (stream, audio, video) => {\n  stream.getAudioTracks().forEach(track => (track.enabled = audio));\n  stream.getVideoTracks().forEach(track => (track.enabled = video));\n  stream.locallyChanged = true;\n  return stream;\n};\n\n/**\n * ChangeLocalStream (optimization after PodiumEvent).\n **/\nclass ChangeLocalStreamEvent extends BaseEvent {\n  handle({ audio, video }) {\n    Logger.debug('ChangeLocalStreamEvent::handle');\n    const { _session } = this.context;\n\n    if (FeatureDetector.isIOSDevice()) {\n      const adjustedStream = adjustMediaStreamTracks(\n        _session.localStream,\n        audio,\n        video\n      );\n      _session.emit({ type: 'stream_update', localStream: adjustedStream });\n      return;\n    }\n\n    new MediaStreamBuilder({\n      audio: audio,\n      video: video,\n      existingStream: _session.localStream\n    })\n      .start()\n      .then(stream => {\n        stream.locallyChanged = true;\n        _session.setStream(stream);\n      })\n      .catch(Logger.error);\n  }\n}\n\nexport default ChangeLocalStreamEvent;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport ForwardEvent from './ForwardEvent';\nimport FeatureDetector from '../FeatureDetector';\nimport ChangeLocalStreamEvent from './ChangeLocalStreamEvent';\nimport {\n  isPresentationStream,\n  isCameraStream,\n  hasAudio,\n  hasVideo\n} from './../utils/StreamHelpers';\n\nclass PodiumEvent extends BaseEvent {\n  handle(msg) {\n    // For dev\n    if (!this.context._session) {\n      return;\n    }\n    Logger.debug('PodiumEvent::handle', msg);\n    const { _session } = this.context;\n    const { localStream } = _session;\n\n    if (!msg.hasPresenter && isPresentationStream(localStream)) {\n      _session.emit({ type: 'stop_presenting' });\n    }\n\n    if (_session) {\n      this.scanMessageForLocalStreamOptimization(localStream, msg);\n    }\n\n    new ForwardEvent(this.context).handle(msg);\n  }\n\n  // Optimization to avoid streaming when not on video podium.\n  // First, we need a localStream, then we avoid adjustments when we initially\n  // join the room (isSource) and finally if we're not on the podium,\n  // but have a local camera stream with video, we change our local stream.\n  //\n  // We only re-activate the camera in the opposite case if the current\n  // localStream was locallyChanged (through this optimization) since we\n  // want to avoid situations where a user doesn't expect to be on the video\n  // podium and we suddenly turned on their camera.\n  //\n  // Last case: someone else is presenting (screen share or canvas presentation)\n  // we're still on the video podium but not actively presenting.\n  scanMessageForLocalStreamOptimization(localStream, msg) {\n    const { media, video, isSource, isPresenter, hasDesktopSources } = msg;\n\n    if (!localStream) {\n      return;\n    }\n\n    if (FeatureDetector.isFF()) {\n      return;\n    }\n\n    if (\n      !media &&\n      isSource &&\n      ((!video && isCameraStream(localStream)) ||\n        (video && !hasVideo(localStream) && localStream.locallyChanged))\n    ) {\n      new ChangeLocalStreamEvent(this.context).handle({\n        audio: hasAudio(localStream),\n        video: video\n      });\n    }\n\n    if (video && !isPresenter && hasDesktopSources) {\n      new ChangeLocalStreamEvent(this.context).handle({\n        audio: hasAudio(localStream),\n        video: false\n      });\n    }\n  }\n}\n\nexport default PodiumEvent;\n","import BaseEvent from './BaseEvent';\n\nclass SnapshotEvent extends BaseEvent {\n  handle() {\n    this.context._api.takeSnapshot();\n  }\n}\n\nexport default SnapshotEvent;\n","import BaseEvent from './BaseEvent';\n\nclass SetLayerEvent extends BaseEvent {\n  handle(msg) {\n    this.context._api.setLayer(msg.params);\n  }\n}\n\nexport default SetLayerEvent;\n","import BaseEvent from './BaseEvent';\n\nclass SendChatEvent extends BaseEvent {\n  handle(msg) {\n    this.context._session.send({\n      type:    'chat',\n      content: msg.content\n    });\n  }\n}\n\nexport default SendChatEvent;\n\n","import BaseEvent from './BaseEvent';\n\nclass SetLayoutEvent extends BaseEvent {\n  handle(msg) {\n    this.context._api.setLayout(msg.params);\n  }\n}\n\nexport default SetLayoutEvent;\n","/**\n * This is where we keep the list of sip events we're interested in forwarding.\n **/\nexport default [\n  'chat',\n  'recording',\n  'memberlist',\n  'source_update',\n  'voice_activity',\n  'stream_offer'\n];\n","/**\n * Podium Facade.\n **/\nclass PodiumFacade {\n  constructor(message, userId) {\n    const { src = [], psrc, asrc, vsrc, dsrc } = message;\n    this.sources = src;\n    this.presenterIdx = psrc;\n    this.audioSources = asrc;\n    this.videoSources = vsrc;\n    this.desktopSources = dsrc;\n    this.userId = userId;\n    this.userSourceIndex = this.sources.indexOf(this.userId);\n  }\n\n  get isSolo() {\n    const uniqueSources = Array.from(new Set(this.sources))\n    return uniqueSources.length === 1 && this.sources[0] === this.userId;\n  }\n\n  get isSource() {\n    return this.sources.includes(this.userId);\n  }\n\n  get isPresenter() {\n    return this.hasPresenter && this.presenter === this.userId;\n  }\n\n  get presenter() {\n    return this.hasPresenter && this.sources[this.presenterIdx];\n  }\n\n  get hasMedia() {\n    return this.sources.some(source => (/media/).test(source));\n  }\n\n  get hasPresenter() {\n    return !isNaN(this.presenterIdx);\n  }\n\n  get hasVideoSources() {\n    return Boolean(this.videoSources);\n  }\n\n  get hasDesktopSources() {\n    return !isNaN(parseInt(this.desktopSources, 10));\n  }\n\n  get hasAudioPosition() {\n    return this.audioSources.includes(this.userSourceIndex);\n  }\n\n  get hasVideoPosition() {\n    return this.videoSources.includes(this.userSourceIndex);\n  }\n\n  get hasMutedVideoPeers() {\n    return (\n      !this.hasDesktopSources &&\n      this.videoSources.filter(source => source !== this.userSourceIndex)\n        .length === 0\n    );\n  }\n}\n\nexport default PodiumFacade;\n","import Logger from './Logger';\nimport PodiumFacade from './PodiumFacade';\n\n/**\n * SipMessageTransformer\n **/\nclass SipMessageTransformer {\n  constructor(user, opts) {\n    this.opts = Object.assign({}, this.defaultOptions, opts);\n    this.user = user;\n    this.debug = this.debug.bind(this);\n    this.stamp = this.stamp.bind(this);\n    this.default = this.default.bind(this);\n    this.process = this.process.bind(this);\n    this.sourceUpdate = this.sourceUpdate.bind(this);\n    this.voiceActivity = this.voiceActivity.bind(this);\n  }\n\n  get defaultOptions() {\n    return { debug: true };\n  }\n\n  debug(...args) {\n    if (this.opts.debug) {\n      Logger.debug(args);\n    }\n  }\n\n  /**\n   * Put a stamp with _src on the message.\n   **/\n  stamp(message) {\n    return Object.assign({ _src: 'sip' }, message);\n  }\n\n  process(message) {\n    /* eslint-disable camelcase */\n    const transformation =\n      {\n        source_update: this.sourceUpdate,\n        voice_activity: this.voiceActivity\n      }[message.type] || this.default;\n    /* eslint-enable camelcase */\n\n    return transformation(this.stamp(message));\n  }\n\n  default(message) {\n    this.debug('SipMessageTransformer::default', message);\n    return message;\n  }\n\n  sourceUpdate(message) {\n    this.debug('SipMessageTransformer::sourceUpdate', message);\n\n    const podium = new PodiumFacade(message, this.user.uri);\n\n    const transformed = Object.assign({\n      type: 'podium',\n      solo: podium.isSolo,\n      audio: podium.hasAudioPosition,\n      video: podium.hasVideoPosition,\n      media: podium.hasMedia,\n      sources: podium.sources,\n      isSource: podium.isSource,\n      presenter: podium.presenter,\n      isPresenter: podium.isPresenter,\n      hasPresenter: podium.hasPresenter,\n      videoSources: podium.videoSources,\n      hasVideoSources: podium.hasVideoSources,\n      hasDesktopSources: podium.hasDesktopSources,\n      hasMutedVideoPeers: podium.hasMutedVideoPeers\n    });\n\n    return transformed;\n  }\n\n  voiceActivity(message) {\n    this.debug('SipMessageTransformer::voiceActivity', message);\n\n    // we rename the type here so we can use 'voice_activity' for passing to the\n    // ui\n    const transformed = Object.assign({\n      type: 'voice_activity_raw',\n      on: message.on,\n      userId: message.cid.split('@').shift()\n    });\n\n    return transformed;\n  }\n}\n\nexport default SipMessageTransformer;\n","/* eslint-disable max-lines */\nimport Logger from './Logger';\nimport FeatureDetector from './FeatureDetector';\nimport 'webrtc-adapter';\nimport {\n  stopTrack,\n  getCanvasTracks,\n  isCanvasPresentationStream\n} from './utils/StreamHelpers';\n\n/**\n * SessionDescriptionHandler\n * This class implements a couple of methods that SIP.js expects.\n * For more details see:\n * https://sipjs.com/api/0.11.0/sessionDescriptionHandler/\n */\nclass SessionDescriptionHandler {\n  constructor(session, options) {\n    this.options = options || {};\n    this.session = session;\n    this.connection =\n      session.passedOptions.sessionDescriptionHandlerOptions.connection;\n    this.CONTENT_TYPE = 'application/sdp';\n    this.initPeerConnection();\n  }\n\n  /**\n   * Gets the local description from the underlying media implementation\n   */\n  getDescription(options, modifiers) {\n    Logger.debug(\n      'SessionDescriptionHandler::getDescription:',\n      options,\n      modifiers\n    );\n    this.localStream = options.stream;\n\n    this.localStream.getTracks().forEach(track => {\n      this.peerConnection.addTrack(track, this.localStream);\n    });\n\n    return this.createOfferOrAnswer(options.RTCConstraints, modifiers).then(\n      sdp => {\n        return { body: sdp, contentType: this.CONTENT_TYPE };\n      }\n    );\n  }\n\n  /**\n   * Set the remote description to the underlying media implementation\n   */\n  setDescription(sessionDescription, options, modifiers) {\n    Logger.debug(\n      'SessionDescriptionHandler::setDescription:',\n      sessionDescription,\n      options,\n      modifiers\n    );\n\n    const description = new RTCSessionDescription({\n      type: this.hasOffer('local') ? 'answer' : 'offer',\n      sdp: sessionDescription\n    });\n\n    return this.peerConnection.setRemoteDescription(description).then(() => {\n      this.session.passedOptions.sessionDescriptionHandlerOptions.remoteDescriptionUpdate(\n        description\n      );\n    });\n  }\n\n  /**\n   * Check if the Session Description Handler can handle the Content-Type\n   * described by a SIP Message\n   */\n  hasDescription(contentType) {\n    Logger.debug('SessionDescriptionHandler::hasDescription:', contentType);\n    return contentType === this.CONTENT_TYPE;\n  }\n\n  /**\n   * This accessor returns the direction of flow for the Session Description\n   * Handler. It is intended to be used as a hold indicator.\n   */\n  getDirection() {\n    Logger.warn('SessionDescriptionHandler::getDirection: NOT IMPLEMENTED');\n  }\n\n  /**\n   * The modifier that should be used when the session would like to place\n   * the call on hold\n   */\n  holdModifier(description) {\n    Logger.warn(\n      'SessionDescriptionHandler::holdModifier: NOT IMPLEMENTED.',\n      description\n    );\n  }\n\n  close() {\n    Logger.debug('SessionDescriptionHandler::close');\n    if (!this.peerConnectionClosed()) {\n      this.stopAllTracks();\n      this.peerConnection.close();\n      clearTimeout(this.iceCheckingTimeout);\n      Logger.debug(\n        'SessionDescriptionHandler::close ' +\n          'Stopped streams and closed peerConnection.'\n      );\n    }\n  }\n\n  /**\n   * Starting here, we have \"Helper\" methods. That is to say: methods not\n   * expected by and for SIP.js\n   */\n  initPeerConnection() {\n    const opts = this.buildPeerConnectionOptions();\n    Logger.debug('SessionDescriptionHandler::initPeerConnection with: ', opts);\n    this.onIceCompleted = new Promise((resolve, reject) => {\n      this.resolveIceCompleted = resolve;\n      this.rejectIceCompleted = reject;\n    });\n    try {\n      this.peerConnection = new RTCPeerConnection(opts);\n      this.peerConnection.ontrack = this.handleOntrack.bind(this);\n      this.peerConnection.onicecandidate = this.gotIceCandidate.bind(this);\n      this.peerConnection.onnegotiationneeded = this.handleNegotiation.bind(\n        this\n      );\n      this.startIceCheckingTimer(opts.iceCheckingTimeout);\n    } catch (error) {\n      Logger.error(\n        'SessionDescriptionHandler::initPeerConnection failed:',\n        error,\n        this.connection.user\n      );\n    }\n  }\n\n  peerConnectionClosed() {\n    return Boolean(\n      this.peerConnection && this.peerConnection.signalingState === 'closed'\n    );\n  }\n\n  /**\n   * Only signal (handleAccept) that we have a remote stream once ontrack\n   * says so. Is called twice, once for audio and once for video track.\n   */\n  handleOntrack(event) {\n    [this.remoteStream] = event.streams;\n    Logger.debug(\n      'SessionDescriptionHandler::handleOntrack: ',\n      event.track.kind\n    );\n    event.track.onunmute = () => {\n      this.session.passedOptions.sessionDescriptionHandlerOptions.handleUnmute(\n        event.track\n      );\n    };\n\n    this.session.passedOptions.sessionDescriptionHandlerOptions.handleAccept(\n      this.remoteStream\n    );\n  }\n\n  startIceCheckingTimer(iceCheckingTimeout) {\n    this.iceCheckingTimer = setTimeout(() => {\n      Logger.debug(\n        'iceCheckingTimeout triggered after: ' +\n          iceCheckingTimeout +\n          ' milliseconds'\n      );\n      this.resolveIceCompleted();\n    }, iceCheckingTimeout);\n  }\n\n  gotIceCandidate(event) {\n    const { candidate } = event;\n\n    if (!candidate) {\n      Logger.debug(\n        'SessionDescriptionHandler::gotIceCandidate: ' +\n          'no candidates left, onIceCompleted.'\n      );\n      this.resolveIceCompleted();\n      return;\n    }\n\n    if (candidate.type === 'relay' && candidate.sdpMid === 'video') {\n      Logger.debug(`SessionDescriptionHandler::gotIceCandidate: ${candidate}.\n                   Relay candidate found, onIceCompleted.`);\n      this.resolveIceCompleted();\n      return;\n    }\n\n    Logger.debug(`SessionDescriptionHandler::gotIceCandidate: ${candidate}`);\n  }\n\n  /**\n   * We need to re-format the iceServers here. SIP.js used to offer a\n   * higher level api and we supplied the servers in a different format e.g:\n   *\n   * { stunServers: [\"stun:stun1.visocon.com:3478\"] }\n   * { turnServers: [{ urls: [1,2,3], username: \"bob\", password: \"nob\" }] }\n   *\n   * We currently have the api set return the creds in that format.\n   * The peerConnection however expects:\n   *\n   * {\n   *   \"iceServers\": [\n   *     { \"urls\": \"stun:stun1.visocon.com:3478\" },\n   *     { \"urls\": [1,2,3], \"username\": \"bob\", \"credential\": \"nob\" }\n   *   ]\n   * }\n   *\n   * Note: Edge is a little picky when it comes to turn server urls. We need\n   * to specify the protocol via (`?transport=udp`) for edge to swallow it.\n   * But we don't want to add additional turn-server for the rest of the\n   * browsers, since FF gives us a warning \"Things will go wrong when providing\n   * more than 5 urls\". We also don't remove any turn urls, since adapter and\n   * edge will be doing that for us.\n   */\n  buildPeerConnectionOptions() {\n    const tmp = Object.assign({}, this.connection.user);\n    tmp.stunServers = { urls: tmp.stunServers };\n    tmp.turnServers = tmp.turnServers.map(server => {\n      if (FeatureDetector.isEdge()) {\n        const urlWithoutProtocol = server.urls.find(\n          url => !url.match(/transport/)\n        );\n        server.urls.push(urlWithoutProtocol + '?transport=udp');\n      }\n      server.credential = server.password;\n      return server;\n    });\n    return Object.assign({}, this.options.peerConnectionOptions, {\n      sdpSemantics: 'unified-plan',\n      iceServers: tmp.turnServers.concat(tmp.stunServers)\n    });\n  }\n\n  createOfferOrAnswer(RTCOfferOptions, modifiers) {\n    Logger.debug(\n      'SessionDescriptionHandler::createOfferOrAnswer: ',\n      RTCOfferOptions,\n      modifiers\n    );\n\n    const offerOptions = RTCOfferOptions || {};\n    const sdpModifiers = modifiers || [];\n\n    const methodName = this.hasOffer('remote') ? 'createAnswer' : 'createOffer';\n\n    return this.peerConnection[methodName](offerOptions)\n      .then(sdp => this.peerConnection.setLocalDescription(sdp))\n      .then(() => this.onIceCompleted)\n      .then(() => {\n        let { sdp } = this.peerConnection.localDescription;\n        try {\n          sdpModifiers.forEach(modifier => {\n            sdp = modifier(sdp);\n          });\n        } catch (error) {\n          Logger.error('sdpModifier failed: ', error, sdp);\n        }\n        return sdp;\n      })\n      .catch(error => {\n        Logger.error('createOfferOrAnswer:', error);\n      });\n  }\n\n  hasOffer(type) {\n    return this.peerConnection.signalingState === `have-${type}-offer`;\n  }\n\n  getLocalStream() {\n    return this.localStream;\n  }\n\n  getRemoteStream() {\n    return this.remoteStream;\n  }\n\n  setStream(newStream) {\n    return new Promise((resolve, reject) => {\n      let oldStream = this.getLocalStream();\n      this.localStream = newStream;\n\n      this.stopUnusedTracks(oldStream, newStream);\n\n      let [audioTrack] = newStream.getAudioTracks();\n      // in case of multiple streams, the preferred video track is the\n      // canvas presentation stream\n      let [videoTrack] = isCanvasPresentationStream(newStream)\n        ? getCanvasTracks(newStream)\n        : newStream.getVideoTracks();\n\n      if (!this.tracksExist()) {\n        resolve({ newStream: newStream, remoteStream: this.remoteStream });\n      }\n\n      const audioSender = this.peerConnection\n        .getSenders()\n        .find(sender => sender.track.kind === 'audio');\n      const videoSender = this.peerConnection\n        .getSenders()\n        .find(sender => sender.track.kind === 'video');\n\n      audioSender\n        .replaceTrack(audioTrack)\n        .then(() => videoSender.replaceTrack(videoTrack))\n        .then(() => {\n          resolve({ newStream: newStream, remoteStream: this.remoteStream });\n        })\n        .catch(reject);\n    });\n  }\n\n  stopUnusedTracks(oldStream, newStream) {\n      const unusedTracks = oldStream\n              .getTracks()\n              .filter(track => !newStream.getTracks().includes(track));\n      unusedTracks.forEach(stopTrack);\n  }\n\n  tracksExist() {\n    return this.peerConnection\n                .getSenders()\n                .find(sender => sender.track !== null) > 0;\n  }\n\n  handleNegotiation() {\n    Logger.debug('SessionDescriptionHandler::handleNegotiation');\n  }\n\n  /**\n   * Stop all tracks\n   */\n  stopAllTracks() {\n    Logger.debug('SessionDescriptionHandler::stopAllTracks');\n    let receivers = this.peerConnection.getReceivers\n      ? this.peerConnection.getReceivers()\n      : [];\n    this.peerConnection\n      .getSenders()\n      .concat(receivers)\n      .forEach(rtp => {\n        if (rtp.track) {\n          stopTrack(rtp.track);\n        }\n      });\n  }\n}\n\nexport default SessionDescriptionHandler;\n/* eslint-enable max-lines */\n","// Due to transport errors in SIP 0.15 we're currently back to 0.11\n// https://github.com/onsip/SIP.js/issues/706\n// https://github.com/onsip/SIP.js/issues/727\n// import { UA } from 'sip.js';\nimport SIP from 'sip.js';\nimport Logger from './Logger';\nimport WHITELIST from './SipMessageWhitelist';\nimport SipMessageTransformer from './SipMessageTransformer';\nimport SessionDescriptionHandler from './SessionDescriptionHandler';\n\nconst factoryOptions = { peerConnectionOptions: { iceCheckingTimeout: 3000 } };\n\n/**\n * eyeson Sip Connection.\n *\n * Registers with provided sip credentials and handles events received.\n **/\nclass SipConnection {\n  constructor(user, room) {\n    this.user = user;\n    this._room = room;\n    this.user.sessionDescriptionHandlerFactoryOptions = factoryOptions;\n    this.user.sessionDescriptionHandlerFactory = (session, options) =>\n      new SessionDescriptionHandler(session, options);\n\n    const uaOptions = this.adjustUserAgentOptions(this.user);\n    // this.userAgent = new UA(uaOptions);\n    this.userAgent = new SIP.UA(uaOptions);\n    this.transformer = new SipMessageTransformer(this.user);\n    this.start = this.start.bind(this);\n  }\n\n  /**\n   * SIP.js introduced transportOptions somewhere after 0.9.0.\n   **/\n  adjustUserAgentOptions(user) {\n    user.autostart = false;\n    user.transportOptions = { wsServers: [user.wsServers], traceSip: true };\n    return user;\n  }\n\n  /**\n   * Connect and register to the configured WebSocket server.\n   **/\n  start() {\n    return new Promise((resolve, reject) => {\n      this.userAgent.once('transportCreated', transport => {\n        transport.on('transportError', () => {\n          reject(new Error('SipTransportError'));\n        });\n        transport.on('connected', () => resolve());\n      });\n      this.userAgent.start();\n    });\n  }\n\n  /**\n   * Start a session on current connection.\n   **/\n  startSession(options, modifiers) {\n    return this.userAgent.invite(this._room.uri, options, modifiers);\n  }\n\n  /**\n   * Stop listening for messages.\n   **/\n  close() {\n    if (!this.userAgent) {\n      return;\n    }\n    this.userAgent.removeAllListeners('message');\n    this.userAgent.unregister();\n    this.userAgent = null;\n  }\n\n  /**\n   * Parse, filter, transform and finally forward messages received from SIP\n   * connection.\n   **/\n  onMessage(callback) {\n    this.userAgent.on('message', response => {\n      Logger.debug('SipConnection::onMessage', response);\n      const message = JSON.parse(response.body);\n\n      if (!WHITELIST.includes(message.type)) {\n        Logger.debug(\n          `SipConnection::onMessage ignoring \"${message.type}\" message.`\n        );\n        return;\n      }\n\n      const transformedMessage = this.transformer.process(message);\n      callback(transformedMessage);\n    });\n  }\n\n  /**\n   * Transport a message over current connection.\n   **/\n  send(msg) {\n    msg.cid = this.user.uri;\n    if (!this.userAgent) {\n      return;\n    }\n    this.userAgent.message(this._room.uri, JSON.stringify(msg));\n  }\n}\n\nexport default SipConnection;\n","import Logger from '../Logger';\nimport PublicEvent from './PublicEvent';\nimport SipConnection from '../SipConnection';\n\nconst startSipConnection = (context, user, room) => {\n  context.connection = new SipConnection(user.sip, room.sip);\n  context._connection\n    .start()\n    .then(() => context.send({ type: 'connection', connectionStatus: 'ready' }))\n    .catch(() =>\n      context.send({ type: 'connection', connectionStatus: 'transport_error' })\n    );\n};\n\nclass RoomReceived extends PublicEvent {\n  handle(msg) {\n    super.handle(msg);\n    this.context.rtData = msg.content;\n\n    if (msg.content.ready !== true) {\n      Logger.debug('RoomReceived not ready:', msg.content);\n      return;\n    }\n\n    const { user, room, links } = msg.content;\n\n    // Update eyeson's public data\n    this.context._eyeson.room = room;\n    this.context._eyeson.user = this.context._api.addUserAttributes(\n      user,\n      user.id\n    );\n    this.context._eyeson.links = links;\n\n    startSipConnection(this.context, user, room);\n  }\n}\n\nexport default RoomReceived;\n","import PublicEvent from './PublicEvent';\n\nclass FetchRoomEvent extends PublicEvent {\n  handle() {\n    this.context._api.getRoom(room => {\n      return super.handle({ type: 'fetch_room', room });\n    });\n  }\n}\n\nexport default FetchRoomEvent;\n","import BaseEvent from './BaseEvent';\n\n/**\n * Deletes a file using the com api.\n **/\nclass DeleteFileEvent extends BaseEvent {\n  handle(msg) {\n    this.context._api.deleteFile(msg.file);\n  }\n}\n\nexport default DeleteFileEvent;\n","import PublicEvent from './PublicEvent';\n\n/**\n * Uploads a file using the com api.\n **/\n\nclass UploadFileEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api.uploadFile(msg.file, this.addFile.bind(this));\n  }\n\n  addFile(response) {\n    super.handle({\n      type: 'add_file',\n      file: response\n    });\n  }\n}\n\nexport default UploadFileEvent;\n","import PublicEvent from './PublicEvent';\n\nclass ReceiveChatEvent extends PublicEvent {\n  handle(msg) {\n    const userId    = msg.cid.split('@').shift();\n\n    this.msg = msg;\n    this.context._api.getUser(userId, this.forwardMessage.bind(this));\n  }\n\n  forwardMessage(user) {\n    const timestamp = Date.parse(this.msg.ts || this.msg.created_at);\n    super.handle({\n      type:      this.msg.type,\n      user:      user,\n      timestamp: new Date(timestamp),\n      content:   this.msg.content\n    });\n  }\n}\n\nexport default ReceiveChatEvent;\n","import Logger from './../Logger';\nimport PublicEvent from './PublicEvent';\n\nclass StopYouTubeEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api\n      .stopBroadcast('youtube')\n      .then(() => super.handle({ type: msg.type }))\n      .catch(error => Logger.warn(error));\n  }\n}\n\nexport default StopYouTubeEvent;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\n\nclass StartStreamEvent extends BaseEvent {\n  handle({ audio = true, video = true }) {\n    Logger.debug(`StartStreamEvent::handle audio: ${audio} video: ${video}`);\n    const { _session } = this.context;\n    new MediaStreamBuilder({ audio: audio, video: video })\n      .start()\n      .then(_session.setStream)\n      .catch(Logger.error);\n  }\n}\n\nexport default StartStreamEvent;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\nimport FeatureDetector from '../FeatureDetector';\nimport {\n  toggleCamera,\n  isCanvasPresentationStream\n} from '../utils/StreamHelpers';\n\n/**\n * ChangeStreamEvent \"changes\" a stream with the given options.\n *\n * The MediaStream is only updated if the Browser turns off device activity\n * indicators on disable (i.e. setting the video tracks `.enabled` prop to\n * false). This is the case for Firefox (May 2019).\n *\n * For other Browsers, a totally new MediaStream is acquired. Although some\n * of its tracks might be re-used / kept alive.\n * See `.setStream` in SDH for more details of current implementation.\n **/\nclass ChangeStreamEvent extends BaseEvent {\n  handle({ audio = true, video = true }) {\n    Logger.debug(`ChangeStreamEvent::handle audio: ${audio} video: ${video}`);\n    const { _session } = this.context;\n\n    const changeStream = () => {\n      return new Promise((resolve, reject) => {\n        if (FeatureDetector.stopsDeviceActivityIndicatorOnDisable()) {\n          toggleCamera(_session.localStream, video);\n          resolve(_session.localStream);\n          return;\n        }\n        new MediaStreamBuilder({\n          audio: audio,\n          video: video,\n          existingStream: _session.localStream\n        })\n          .start()\n          .then(resolve)\n          .catch(reject);\n      });\n    };\n\n    return changeStream()\n      .then(_session.setStream)\n      .then(stream => {\n        if (isCanvasPresentationStream(stream)) {\n          _session.canvasMixer.setStream(stream);\n        } else {\n          _session.send({ type: 'mute_video', on: !video });\n        }\n      })\n      .catch(Logger.errror);\n  }\n}\n\nexport default ChangeStreamEvent;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\n\nclass ToggleCameraEvent extends BaseEvent {\n  handle({ facingMode }) {\n    Logger.debug('ToggleCameraEvent::handle', facingMode);\n    const { _session } = this.context;\n\n    new MediaStreamBuilder({\n      audio: _session.localStream.getAudioTracks()[0].enabled,\n      video: { facingMode: facingMode },\n      existingStream: _session.localStream\n    })\n      .start()\n      .then(_session.setStream);\n  }\n}\n\nexport default ToggleCameraEvent;\n","import BaseEvent from './BaseEvent';\n\nclass StartYouTubeEvent extends BaseEvent {\n  handle(msg) {\n    const { _api, _session } = this.context;\n\n    _api\n      .startBroadcast(msg, 'youtube')\n      .catch(error =>\n        _session.emit({\n          type: 'start_broadcast_error',\n          platform: 'youtube',\n          error: error\n        })\n      );\n  }\n}\n\nexport default StartYouTubeEvent;\n","import Logger from './../Logger';\nimport PublicEvent from './PublicEvent';\n\nclass StopFacebookEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api\n      .stopBroadcast('facebook')\n      .then(() => super.handle({ type: msg.type }))\n      .catch(error => Logger.warn(error));\n  }\n}\n\nexport default StopFacebookEvent;\n","import PublicEvent from './PublicEvent';\nimport { hasVideo } from '../utils/StreamHelpers';\n\nclass AcceptSessionEvent extends PublicEvent {\n  handle(msg) {\n    const {\n      type,\n      session: { sessionDescriptionHandler }\n    } = msg;\n    const localStream = sessionDescriptionHandler.getLocalStream();\n\n    super.handle({\n      type: type,\n      localStream: localStream,\n      remoteStream: sessionDescriptionHandler.getRemoteStream()\n    });\n\n    this.context._connection.send({\n      type: 'mute_video',\n      on: !hasVideo(localStream)\n    });\n  }\n}\n\nexport default AcceptSessionEvent;\n","import BaseEvent from './BaseEvent';\n\nclass StartFacebookEvent extends BaseEvent {\n  handle(msg) {\n    const { _api, _session } = this.context;\n\n    _api\n      .startBroadcast(msg, 'facebook')\n      .catch(error =>\n        _session.emit({\n          type: 'start_broadcast_error',\n          platform: 'facebook',\n          error: error\n        })\n      );\n  }\n}\n\nexport default StartFacebookEvent;\n","import PublicEvent from './PublicEvent';\n\nclass StopRecordingEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api.stopRecording(msg);\n  }\n}\n\nexport default StopRecordingEvent;\n","import BaseEvent from './BaseEvent';\n\n/**\n * VoiceActivityEvent\n **/\nclass VoiceActivityEvent extends BaseEvent {\n  constructor(context) {\n    super(context);\n    this.getUser = this.getUser.bind(this);\n  }\n\n  getUser(id) {\n    return new Promise((resolve, reject) => {\n      try {\n        this.context._api.getUser(id, resolve);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  handle(msg) {\n    this.getUser(msg.userId).then(user => {\n      this.context.send({ type: 'voice_activity', user: user, on: msg.on });\n    });\n  }\n}\n\nexport default VoiceActivityEvent;\n","import PublicEvent from './PublicEvent';\n\nclass StartRecordingEvent extends PublicEvent {\n  handle(msg) {\n    const { _api, _session } = this.context;\n\n    _api\n      .startRecording(msg)\n      .catch(error => _session.emit({ type: 'recording_error', error: error }));\n  }\n}\n\nexport default StartRecordingEvent;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\nimport { getScreenTracks, stopTrack } from '../utils/StreamHelpers';\n\nclass ScreenCaptureEvent extends BaseEvent {\n  handle({ audio, screen = false, screenStream }) {\n    const { _session } = this.context;\n\n    const onError = error => {\n      Logger.error('ScreenCaptureEvent', error);\n      if (!error.name.match(/notallowed|permission/i) && screen) {\n        _session.emit({ type: 'capture_error', name: `error_${error.name}` });\n      }\n      _session.emit({ type: 'stop_presenting' });\n    };\n\n    new MediaStreamBuilder({\n      audio: audio,\n      video: false,\n      screen: screen,\n      screenStream: screenStream,\n      existingStream: _session.localStream\n    })\n      .start()\n      .then(stream => {\n        // cleanup when screen capture is stopped via chrome's built-in/native\n        // \"stop sharing\" button (a blue button on bottom of screen).\n        const [screenTrack] = getScreenTracks(stream);\n        if (screenTrack) {\n          screenTrack.addEventListener('ended', () => {\n            _session.emit({ type: 'stop_presenting' });\n            stopTrack(screenTrack);\n          });\n        }\n        return stream;\n      })\n      .then(stream => {\n        _session.emit({ type: 'start_presenting', stream: stream });\n      })\n      .catch(onError);\n  }\n}\n\nexport default ScreenCaptureEvent;\n","import BaseEvent from './BaseEvent';\n\nclass StartPresentingEvent extends BaseEvent {\n  async handle({ stream = null }) {\n    let presentationStream = stream || this.context._session.localStream;\n    if (\n      this.context._session.canvasMixer &&\n      this.context._session.canvasMixer.stream\n    ) {\n      // eslint-disable-next-line prefer-destructuring\n      presentationStream = this.context._session.canvasMixer.stream;\n    }\n    await this.context._session.setStream(presentationStream);\n    this.context._session.send({ type: 'set_presenter', on: true });\n    this.context._session.send({ type: 'desktopstreaming', on: true });\n    this.context._session.emit({ type: 'presentation_started' });\n  }\n}\n\nexport default StartPresentingEvent;\n","import BaseEvent from './BaseEvent';\n\nclass StopPresentingEvent extends BaseEvent {\n  handle() {\n    if (this.context._session.canvasMixer) {\n      this.context._session.canvasMixer.stop();\n    }\n    this.context._session.send({ type: 'desktopstreaming', on: false });\n    this.context._session.send({ type: 'set_presenter', on: false });\n    this.context._session.emit({ type: 'presentation_ended' });\n  }\n}\n\nexport default StopPresentingEvent;\n","import PublicEvent from './PublicEvent';\n\nclass StopBroadcastsEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api.stopAllBroadcasts()\n      .then(() => super.handle({ type: msg.type }));\n  }\n}\n\nexport default StopBroadcastsEvent;\n","import BaseEvent from './BaseEvent';\n\nclass ClearFrontLayerEvent extends BaseEvent {\n  handle() {\n    this.context._api.clearFrontLayer();\n  }\n}\n\nexport default ClearFrontLayerEvent;\n","import PublicEvent from './PublicEvent';\n\nclass PublishBroadcastEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api.publishBroadcast(msg, 'facebook');\n  }\n}\n\nexport default PublishBroadcastEvent;\n","import ComApi from '../ComApi';\nimport PublicEvent from './PublicEvent';\n\n/**\n * Request a user from guest token.\n * use same error if meeting is locked due to backwards compatibility for mobile apps\n * error 423 Locked = meeting locked\n **/\nclass RequestGuestUserEvent extends PublicEvent {\n  handle(msg) {\n    return new ComApi(msg.api, msg.token).requestUser(\n      { name: msg.name, email: msg.email, locale: msg.locale },\n      response => {\n        if (!response.access_key) {\n          let isLocked = response.locked;\n          if (response.error && response.error.message === 'ComApiError: 423') {\n            isLocked = true;\n          }\n          super.handle({ type: 'error', content: 'Request guest user failed', locked: isLocked });\n          return;\n        }\n        super.handle({ type: 'guest_user', token: response.access_key });\n      }\n    );\n  }\n}\n\nexport default RequestGuestUserEvent;\n","import Logger from './../Logger';\nimport PublicEvent from './PublicEvent';\n\n/**\n * HandleStreamOfferEvent\n *\n * Update our remote description, create an answer and resolve with new sdp.\n * Also register a cb for when the new remote stream is available.\n **/\nclass HandleStreamOfferEvent extends PublicEvent {\n  handle(msg) {\n    if (!this.context._session || !this.context._connection) {\n      Logger.warn('HandleStreamOfferEvent::no session or connection.');\n      return;\n    }\n    const { _connection, _session } = this.context;\n    const pc = _session.peerConnection;\n\n    // Note: .then(pc.createAnswer) causes \"Illegal invocation\" error on chrome\n    // for windows. That's why the more verbose answer => pc.createAnswer\n    // are needed.\n    new Promise((resolve, reject) => {\n      pc.setRemoteDescription(new RTCSessionDescription(msg.sdp))\n        .then(answer => pc.createAnswer(answer))\n        .then(answer => pc.setLocalDescription(answer))\n        .then(() => resolve(pc.localDescription))\n        .catch(reject);\n    })\n      .then(sdp => _connection.send({ type: 'stream_answer', sdp: sdp }))\n      .then(() => _session.remoteDescriptionUpdate(msg.sdp))\n      .catch(Logger.error);\n  }\n}\n\nexport default HandleStreamOfferEvent;\n","import Logger from './../Logger';\nimport BaseEvent from './BaseEvent';\n\n/**\n * HandleStreamAnswerEvent\n *\n * Update our remote description with provided answer.\n **/\nclass HandleStreamAnswerEvent extends BaseEvent {\n  handle(msg) {\n    Logger.debug('HandleStreamAnswerEvent: ', msg);\n    const pc = this.context._session.peerConnection;\n\n    if (pc.signalingState === 'stable') {\n      return;\n    }\n\n    pc\n      .setRemoteDescription(new RTCSessionDescription(msg.sdp))\n      .then(Logger.debug('HandleStreamAnswerEvent: set remote description'))\n      .then(() => {\n        this.context._session.remoteDescriptionUpdate(msg.sdp);\n      })\n      .catch(error => Logger.warn('HandleStreamAnswerEvent: ', error, msg.sdp));\n  }\n}\n\nexport default HandleStreamAnswerEvent;\n","import Logger from './../Logger';\nimport BaseEvent from './BaseEvent';\n\n/**\n * We handle participants list update is separated in two actions: one to\n * add, one to remove. In order to keep it easy to handle, the user data is\n * fetched from api (or later received via websocket). Not to mess with\n * comApi current handling, we keep it here for a while.\n **/\nclass ParticipantListUpdateEvent extends BaseEvent {\n  constructor(context) {\n    super(context);\n    this.getUser = this.getUser.bind(this);\n  }\n\n  getUser(id) {\n    return new Promise((resolve, reject) => {\n      try {\n        this.context._api.getUser(id, resolve);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  handle(msg) {\n    (msg.add || []).forEach((user, idx, add) => {\n      const id = user.cid.split('@').shift();\n\n      const initial = Boolean(\n        add.find(addition => {\n          return addition.cid === this.context._connection.user.uri;\n        })\n      );\n\n      this.getUser(id)\n        .then(apiUser => {\n          this.context.send({\n            type: 'add_user',\n            user: apiUser,\n            initial: initial\n          });\n        })\n        .catch(error => Logger.error(error));\n    });\n    (msg.del || []).forEach(user => {\n      const id = user.split('@').shift();\n\n      this.getUser(id)\n        .then(apiUser => {\n          this.context.send({ type: 'remove_user', userId: id, user: apiUser });\n        })\n        .catch(error => Logger.error(error));\n    });\n    this.context.send({ type: 'playback_update', playing: msg.media || [] });\n  }\n}\n\nexport default ParticipantListUpdateEvent;\n","const toFixedNumber = number => Number(parseFloat(number).toFixed(2));\n\nconst scale = (width, height, max) => {\n  const ratio = Math.min(max.width / width, max.height / height);\n  const xScaled = toFixedNumber(width * ratio);\n  const yScaled = toFixedNumber(height * ratio);\n\n  return { width: xScaled, height: yScaled };\n};\n\nexport default scale;\n","/* eslint-disable */\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @see https://davidwalsh.name/javascript-debounce-function\n **/\nexport default (func, wait, immediate) => {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n/* eslint-enable */\n","import scale from './utils/scale';\nimport Logger from './Logger';\nimport debounce from './utils/debounce';\n\nimport {\n  isScreenStream,\n  getScreenTracks,\n  getCameraTracks,\n  getCanvasTracks,\n  stopStream\n} from './utils/StreamHelpers';\n\nconst FPS = 15;\nconst FPS_INTERVAL = 1000 / FPS;\nconst CAMERA_SMALL = { width: 220, height: 140 };\nconst CAMERA_MEDIUM = { width: 320, height: 240 };\nconst CAMERA_LARGE = { width: 420, height: 340 };\nconst CAMERA_NONE = { width: 0, height: 0 };\n\nconst defaultTrack = {\n  getSettings: () => ({ width: 0, height: 0 }),\n  addEventListener: () => null\n};\n\n// Note:\n// autoplay elements will stop playing in safari if not in viewport:\n// https://webkit.org/blog/6784/new-video-policies-for-ios/\n// that's the reason why we don't set autoplay\n// video.setAttribute('autoplay', '1');\n// but instead `.play` manually.\nconst bindVideoToStream = (video, stream) => {\n  const [track = defaultTrack] = stream.getVideoTracks();\n  const { width, height } = track.getSettings();\n  video.setAttribute('controls', 'true');\n  video.setAttribute('width', width);\n  video.setAttribute('height', height);\n  video.srcObject = stream;\n  track.addEventListener('stopped', () => (video.srcObject = null));\n  video\n    .play()\n    .catch(error =>\n      Logger.warn('bindVideoToStream: play', error, error.message)\n    );\n  return video;\n};\n\n/* eslint-disable max-statements, id-length */\nconst fitImage = (target, source) => {\n  const sourceAspectRatio = source.width / source.height;\n  const targetAspectRatio = target.width / target.height;\n\n  let { width, height } = target;\n  let x = 0;\n  let y = 0;\n\n  // Image's aspect ratio is less than target's we fit on height\n  // and place the image centrally along width\n  if (sourceAspectRatio < targetAspectRatio) {\n    width = source.width * (height / source.height);\n    x = (target.width - width) / 2;\n  }\n  // Image's aspect ratio is greater than target's we fit on width\n  // and place the image centrally along height\n  if (sourceAspectRatio > targetAspectRatio) {\n    height = source.height * (width / source.width);\n    y = (target.height - height) / 2;\n  }\n\n  return { x: x, y: y, width: width, height: height };\n};\n/* eslint-enable max-statements */\n\nclass CanvasMixer {\n  /* eslint-disable max-statements */\n  constructor(canvas, stream) {\n    this.canvas = canvas;\n    this.stream = stream;\n    this.context = this.canvas.getContext('2d', { alpha: false });\n    this.xPos = 0;\n    this.camSize = CAMERA_MEDIUM;\n\n    this.draw = this.draw.bind(this);\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this.onError = this.onError.bind(this);\n    this.onRedraw = this.onRedraw.bind(this);\n    this.setStream = this.setStream.bind(this);\n    this.setCamera = this.setCamera.bind(this);\n    this.drawFrame = this.drawFrame.bind(this);\n    this.calcSizesAndPositions = this.calcSizesAndPositions.bind(this);\n\n    this.bouncedDraw = debounce(this.draw, FPS_INTERVAL);\n  }\n  /* eslint-enable max-statements */\n\n  onError(errorCallback) {\n    this.errorCallback = errorCallback;\n  }\n\n  onRedraw(redrawCallback) {\n    this.redrawCallback = redrawCallback;\n  }\n\n  start() {\n    // build hidden video elements from which we can grab image\n    this.camera = document.createElement('video');\n    this.screen = document.createElement('video');\n\n    this.setCamera({ horizontal: 'right', vertical: 'bottom' }, 'medium');\n    this.setStream(this.stream);\n    this.draw();\n  }\n\n  stop() {\n    if (this.stream) {\n      stopStream(this.stream);\n      this.stream = null;\n      this.screenStream = null;\n      this.cameraStream = null;\n    }\n  }\n\n  setStream(newStream) {\n    this.stream = newStream;\n    this.cameraStream = new MediaStream(getCameraTracks(this.stream));\n    this.screenStream = new MediaStream(getScreenTracks(this.stream));\n    bindVideoToStream(this.camera, this.cameraStream);\n    bindVideoToStream(this.screen, this.screenStream);\n    this.calcSizesAndPositions();\n    this.redrawQueued = true;\n  }\n\n  setCamera(position, size) {\n    this.cameraPosition = position || this.cameraPosition;\n    this.cameraSizeInWords = size || this.cameraSizeInWords;\n    this.redrawQueued = true;\n  }\n\n  calcSizesAndPositions() {\n    // Fetch the latest settings (width and height) from the track directly,\n    // otherwise resized windows won't be positioned/scaled correctly...\n    const [track = defaultTrack] = this.screenStream.getVideoTracks();\n    const { width, height } = track.getSettings();\n    const fitScreen = fitImage(this.canvas, { width: width, height: height });\n\n    this.camSize = {\n      small: CAMERA_SMALL,\n      medium: CAMERA_MEDIUM,\n      large: CAMERA_LARGE,\n      none: CAMERA_NONE\n    }[this.cameraSizeInWords];\n\n    const scaledCam = scale(\n      this.camera.width,\n      this.camera.height,\n      this.camSize\n    );\n\n    this.sizes = {\n      screen: { width: fitScreen.width, height: fitScreen.height },\n      camera: { width: scaledCam.width, height: scaledCam.height }\n    };\n    /* eslint-disable id-length, camelcase */\n    const camPosition = {\n      x:\n        this.cameraPosition.horizontal === 'right'\n          ? this.canvas.width - this.sizes.camera.width\n          : 0,\n      y:\n        this.cameraPosition.vertical === 'bottom'\n          ? this.canvas.height - this.sizes.camera.height\n          : 0\n    };\n    this.positions = {\n      screen: { x: fitScreen.x, y: fitScreen.y },\n      camera: { x: camPosition.x, y: camPosition.y }\n    };\n    /* eslint-enable id-length */\n  }\n\n  /* eslint-disable max-statements */\n  draw() {\n    try {\n      if (!this.stream || !this.stream.active) {\n        return;\n      }\n\n      // Doing this on every draw due to resizeable windows while screensharing\n      this.calcSizesAndPositions();\n\n      // In case we need to report back a redraw - doc/image can re-render\n      if (this.redrawCallback && this.redrawQueued) {\n        this.redrawCallback();\n        this.redrawQueued = false;\n      }\n\n      // Actual drawing code\n      const t0 = performance.now();\n      this.drawFrame(this.screen, this.positions.screen, this.sizes.screen);\n      this.drawFrame(this.camera, this.positions.camera, this.sizes.camera);\n      const t1 = performance.now();\n      if (t1 - t0 >= FPS_INTERVAL) {\n        Logger.warn(`Mixer::drawFrame took ${t1 - t0}ms.`);\n      }\n\n      // Request a frame so remote end receives updates reliably\n      const [track] = getCanvasTracks(this.stream);\n      track.requestFrame();\n\n      // Request another draw if the stream is still active\n      this.bouncedDraw();\n    } catch (error) {\n      Logger.error(error);\n      this.errorCallback(error);\n    }\n  }\n  /* eslint-enable max-statements */\n\n  drawFrame(video, pos, size) {\n    // Pollute the canvas even if we don't have a stream, so we force a frame\n    // update.\n    if (!video || !video.srcObject || !video.srcObject.active) {\n      const imgData = this.context.createImageData(1, 1);\n      this.context.putImageData(imgData, 0, 0);\n      return;\n    }\n\n    // Clear prev drawn frames only for screen streams, otherwise old frames\n    // show up if the window is resized (smaller).\n    if (isScreenStream(video.srcObject)) {\n      this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    this.context.drawImage(video, pos.x, pos.y, size.width, size.height);\n  }\n}\n\nexport default CanvasMixer;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport CanvasMixer from '../CanvasMixer';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\nimport { getScreenTracks, stopTrack } from '../utils/StreamHelpers';\n\nclass StartMixerEvent extends BaseEvent {\n  handle({\n    audio,\n    video,\n    canvas,\n    screen = false,\n    onRedraw,\n    changeStream = false\n  }) {\n    const { _session } = this.context;\n\n    const onError = error => {\n      Logger.error('StartMixerEvent', error);\n      if (!error.name.match(/notallowed|permission/i) && screen) {\n        _session.emit({ type: 'capture_error', name: `error_${error.name}` });\n      }\n      _session.emit({ type: 'stop_presenting' });\n    };\n\n    new MediaStreamBuilder({\n      audio: audio,\n      video: video,\n      screen: screen,\n      canvas: canvas,\n      existingStream: _session.localStream\n    })\n      .start()\n      .then(stream => {\n        // cleanup when screen capture is stopped via chrome's built-in/native\n        // \"stop sharing\" button (a blue button on bottom of screen).\n        const [screenTrack] = getScreenTracks(stream);\n        if (screenTrack) {\n          screenTrack.addEventListener('ended', () => {\n            _session.emit({ type: 'stop_presenting' });\n            stopTrack(screenTrack);\n          });\n        }\n        _session.canvasMixer = new CanvasMixer(canvas, stream);\n        _session.canvasMixer.onError(onError);\n        _session.canvasMixer.onRedraw(onRedraw);\n        _session.canvasMixer.start();\n        return stream;\n      })\n      .then(stream => {\n        if (changeStream) {\n          _session.emit({ type: 'start_presenting', stream: stream });\n        } else {\n          _session.emit({ type: 'stream_update', presentationStream: stream });\n        }\n      })\n      .catch(onError);\n  }\n}\n\nclass UpdateMixerEvent extends BaseEvent {\n  handle({ position, size }) {\n    const { _session } = this.context;\n    try {\n      _session.canvasMixer.setCamera(position, size);\n    } catch (error) {\n      Logger.error(error);\n    }\n  }\n}\n\nexport { StartMixerEvent, UpdateMixerEvent };\n","import BaseEvent from './BaseEvent';\n\nclass LockMeetingEvent extends BaseEvent {\n  handle() {\n    this.context._api.lockMeeting();\n  }\n}\n\nexport default LockMeetingEvent;\n","import Logger from './Logger';\n\nimport { StopPlaybackEvent, StartPlaybackEvent } from './events/PlaybackEvents';\n\nimport {\n  StartAnnotationEvent,\n  StopAnnotationEvent\n} from './events/AnnotationEvents';\n\nimport StfuEvent from './events/StfuEvent';\nimport IgnoreEvent from './events/IgnoreEvent';\nimport PublicEvent from './events/PublicEvent';\nimport PodiumEvent from './events/PodiumEvent';\nimport ForwardEvent from './events/ForwardEvent';\nimport SnapshotEvent from './events/SnapshotEvent';\nimport SetLayerEvent from './events/SetLayerEvent';\nimport SendChatEvent from './events/SendChatEvent';\nimport SetLayoutEvent from './events/SetLayoutEvent';\nimport RoomReceivedEvent from './events/RoomReceivedEvent';\nimport FetchRoomEvent from './events/FetchRoomEvent';\nimport DeleteFileEvent from './events/DeleteFileEvent';\nimport UploadFileEvent from './events/UploadFileEvent';\nimport ReceiveChatEvent from './events/ReceiveChatEvent';\nimport StopYouTubeEvent from './events/StopYouTubeEvent';\nimport StartStreamEvent from './events/StartStreamEvent';\nimport ChangeStreamEvent from './events/ChangeStreamEvent';\nimport ToggleCameraEvent from './events/ToggleCameraEvent';\nimport StartYouTubeEvent from './events/StartYouTubeEvent';\nimport StopFacebookEvent from './events/StopFacebookEvent';\nimport AcceptSessionEvent from './events/AcceptSessionEvent';\nimport StartFacebookEvent from './events/StartFacebookEvent';\nimport StopRecordingEvent from './events/StopRecordingEvent';\nimport VoiceActivityEvent from './events/VoiceActivityEvent';\nimport StartRecordingEvent from './events/StartRecordingEvent';\nimport StartScreenCaptureEvent from './events/ScreenCaptureEvent';\nimport StartPresentingEvent from './events/StartPresentingEvent';\nimport StopPresentingEvent from './events/StopPresentingEvent';\nimport StopBroadcastsEvent from './events/StopBroadcastsEvent';\nimport ClearFrontLayerEvent from './events/ClearFrontLayerEvent';\nimport PublishBroadcastEvent from './events/PublishBroadcastEvent';\nimport RequestGuestUserEvent from './events/RequestGuestUserEvent';\nimport HandleStreamOfferEvent from './events/HandleStreamOfferEvent';\nimport HandleStreamAnswerEvent from './events/HandleStreamAnswerEvent';\nimport ParticipantListUpdateEvent from './events/ParticipantListUpdateEvent';\nimport { StartMixerEvent, UpdateMixerEvent } from './events/MixerEvents';\nimport LockMeetingEvent from './events/LockMeetingEvent';\n\n/**\n * Event Handler uses the connection credentials for the room and\n * the user to setup a (monitored) connection, start a session and\n * listen for any events.\n **/\nclass EventHandler {\n  constructor() {\n    this.listeners = [];\n    this._eyeson = null;\n    this._session = null;\n    this._monitor = null;\n    this._connection = null;\n    this._rtConnection = null;\n\n    this.send = this.send.bind(this);\n  }\n\n  /* eslint-disable max-statements */\n  destroy() {\n    if (this._monitor) {\n      this._monitor.destroy();\n    }\n    if (this._connection) {\n      this._connection.close();\n    }\n    if (this._rtConnection) {\n      this._rtConnection.close();\n    }\n    if (this._session) {\n      this._session.end();\n    }\n    this._api = null;\n    this._session = null;\n    this._monitor = null;\n    this._connection = null;\n    this._rtConnection = null;\n  }\n  /* eslint-enable max-statements */\n\n  set connection(con) {\n    if (this._connection) {\n      Logger.error(\n        'A connection is already set. If you are trying to start a new' +\n          ' session you have to end the current one first.'\n      );\n      return;\n    }\n    this._connection = con;\n    this._connection.onMessage(this.send);\n  }\n\n  set rtConnection(con) {\n    if (this._rtConnection) {\n      Logger.error(\n        'A real-time connection is already set. If you are trying to start' +\n          ' a new session you have the close the current before.'\n      );\n      return;\n    }\n    this._rtConnection = con;\n    this._rtConnection.onMessage(this.send);\n  }\n\n  set monitor(mon) {\n    if (this._monitor) {\n      Logger.error(\n        'A monitor is already set. If you are trying to start a new' +\n          ' session you have to end the current one first.'\n      );\n      return;\n    }\n    this._monitor = mon;\n    this._monitor.onError(this.send);\n  }\n\n  set session(ses) {\n    if (this._session) {\n      Logger.error(\n        'A session is already set. If you are trying to start a new' +\n          ' session you have to end the current one first.'\n      );\n      return;\n    }\n    this._session = ses;\n    this._session.onEvent(this.send);\n  }\n\n  set api(api) {\n    this._api = api;\n  }\n\n  set rtData(data) {\n    this._rtData = data;\n  }\n\n  set eyeson(eyeson) {\n    this._eyeson = eyeson;\n  }\n\n  get monitor() {\n    return this._monitor;\n  }\n\n  /**\n   * Register a new listener.\n   **/\n  onReceive(callback) {\n    Logger.debug('EventHandler::onReceive');\n    this.listeners.push(callback);\n  }\n\n  /**\n   * Unregisters a listener.\n   **/\n  removeListener(callback) {\n    this.listeners = this.listeners.filter(listener => listener !== callback);\n  }\n\n  /**\n   * On receiving an event, notify all registered listeners.\n   **/\n  /* eslint-disable camelcase */\n  send(msg) {\n    if (!msg.silenced) {\n      Logger.debug('EventHandler::send', msg);\n    }\n    new ({\n      stfu: ForwardEvent,\n      chat: ReceiveChatEvent,\n      accept: AcceptSessionEvent,\n      podium: PodiumEvent,\n      snapshot: SnapshotEvent,\n      send_chat: SendChatEvent,\n      set_layer: SetLayerEvent,\n      set_layout: SetLayoutEvent,\n      fetch_room: FetchRoomEvent,\n      room_ready: RoomReceivedEvent,\n      room_setup: RoomReceivedEvent,\n      memberlist: ParticipantListUpdateEvent,\n      upload_file: UploadFileEvent,\n      delete_file: DeleteFileEvent,\n      request_stfu: StfuEvent,\n      stream_offer: HandleStreamOfferEvent,\n      stop_youtube: StopYouTubeEvent,\n      stream_answer: HandleStreamAnswerEvent,\n      start_youtube: StartYouTubeEvent,\n      change_stream: ChangeStreamEvent,\n      toggle_camera: ToggleCameraEvent,\n      stop_facebook: StopFacebookEvent,\n      stop_playback: StopPlaybackEvent,\n      playback_update: ForwardEvent,\n      start_playback: StartPlaybackEvent,\n      start_stream: StartStreamEvent,\n      start_facebook: StartFacebookEvent,\n      stop_recording: StopRecordingEvent,\n      start_screen_capture: StartScreenCaptureEvent,\n      stop_broadcasts: StopBroadcastsEvent,\n      start_recording: StartRecordingEvent,\n      stop_presenting: StopPresentingEvent,\n      start_presenting: StartPresentingEvent,\n      stop_annotation: StopAnnotationEvent,\n      start_annotation: StartAnnotationEvent,\n      publish_broadcast: PublishBroadcastEvent,\n      clear_front_layer: ClearFrontLayerEvent,\n      request_guest_user: RequestGuestUserEvent,\n      voice_activity_raw: VoiceActivityEvent,\n      start_mixer: StartMixerEvent,\n      update_mixer: UpdateMixerEvent,\n      lock_meeting: LockMeetingEvent,\n\n      capture_error: ForwardEvent,\n      voice_activity: ForwardEvent,\n      options_update: ForwardEvent,\n      ext_not_installed: ForwardEvent,\n      broadcasts_update: ForwardEvent,\n      facebook_logged_in: ForwardEvent,\n      facebook_published: ForwardEvent,\n      presentation_ended: ForwardEvent,\n      handle_youtube_error: ForwardEvent,\n      handle_facebook_error: ForwardEvent,\n      status_update_youtube: ForwardEvent,\n\n      recording: IgnoreEvent,\n      ext_cancel: IgnoreEvent,\n      ext_installed: IgnoreEvent,\n      message_status: IgnoreEvent,\n      moderator_info: IgnoreEvent\n    }[msg.type] || PublicEvent)(this).handle(msg);\n  }\n  /* eslint-enable camelcase */\n}\n\nexport default EventHandler;\n","import FeatureDetector from './FeatureDetector';\n\n/**\n * Add 'Visoweb' identifier to origin field of sdp. Believe this is still\n * relevant for some remotes.\n **/\nconst addOriginToSDP = sdp => {\n  return sdp.replace('o=-', 'o=Visoweb');\n};\n\n/**\n * Add session attribute to disable sfu mode from the client.\n **/\nconst enableSFU = sdp => {\n  const splitSDP = sdp.split('\\n');\n  const aLine = 'a=sfu-capable';\n  const tLineIdx = splitSDP.findIndex(line => line.startsWith('t='));\n  // insert aLine after tLine (timing), delete 0 elements\n  splitSDP.splice(tLineIdx + 1, 0, aLine);\n  return splitSDP.join('\\n');\n};\n\nlet SDPModifiers = [addOriginToSDP];\nif (FeatureDetector.canSFU()) {\n  SDPModifiers.push(enableSFU);\n}\n\nexport default SDPModifiers;\n","/* eslint-disable max-lines */\nimport Logger from './Logger';\nimport SDPModifiers from './SDPModifiers';\nimport FeatureDetector from './FeatureDetector';\nimport MediaStreamBuilder from './MediaStreamBuilder';\n\n/**\n * Conference Session is starting a session from active connection,\n * delegating events to registered listeners.\n **/\nclass ConferenceSession {\n  /* eslint-disable max-statements */\n  constructor(connection, options = {}) {\n    this.options = options;\n    this.options.RTCConstraints = Object.assign(\n      {},\n      this.defaultRTCConstraints,\n      { offerToReceiveVideo: !this.options.eco }\n    );\n    this.accepted = false;\n    this.listeners = [];\n    this.connection = connection;\n    this.startAttempts = 0;\n    this.maxStartAttempts = 3;\n\n    this.end = this.end.bind(this);\n    this.emit = this.emit.bind(this);\n    this.setStream = this.setStream.bind(this);\n    this.endSession = this.endSession.bind(this);\n    this.handleExit = this.handleExit.bind(this);\n    this.initSession = this.initSession.bind(this);\n    this.handleFailed = this.handleFailed.bind(this);\n    this.handleAccept = this.handleAccept.bind(this);\n    this.handleUnmute = this.handleUnmute.bind(this);\n    this.restartSession = this.restartSession.bind(this);\n    this.tryRecoveryFrom = this.tryRecoveryFrom.bind(this);\n    this.terminateSession = this.terminateSession.bind(this);\n    this.adjustVideoPodium = this.adjustVideoPodium.bind(this);\n    this.remoteDescriptionUpdate = this.remoteDescriptionUpdate.bind(this);\n  }\n  /* eslint-enable max-statements */\n\n  get peerConnection() {\n    return this.sipSession.sessionDescriptionHandler.peerConnection;\n  }\n\n  get localStream() {\n    return this.sipSession.sessionDescriptionHandler.localStream;\n  }\n\n  get remoteStream() {\n    return this.sipSession.sessionDescriptionHandler.remoteStream;\n  }\n\n  get defaultRTCConstraints() {\n    return { offerToReceiveAudio: true, offerToReceiveVideo: true };\n  }\n\n  /**\n   * Request stream and invoke session start.\n   **/\n  start() {\n    new MediaStreamBuilder(this.options)\n      .start()\n      .then(this.initSession)\n      .catch(this.handleFailed);\n  }\n\n  buildSessionOptions(stream) {\n    return {\n      sessionDescriptionHandlerOptions: {\n        stream: stream,\n        connection: this.connection,\n        handleAccept: this.handleAccept,\n        handleUnmute: this.handleUnmute,\n        RTCConstraints: this.options.RTCConstraints,\n        remoteDescriptionUpdate: this.remoteDescriptionUpdate\n      }\n    };\n  }\n\n  /**\n   * Init session and start stream.\n   **/\n  initSession(stream) {\n    const options = this.buildSessionOptions(stream);\n\n    this.sipSession = this.connection.startSession(options, SDPModifiers);\n    this.sipSession.on('bye', this.handleExit);\n    this.sipSession.on('failed', this.handleFailed);\n    this.sipSession.on('accepted', this.adjustVideoPodium);\n    this.sipSession.on('terminated', this.handleTermination);\n\n    if (!window) {\n      return;\n    }\n\n    window.addEventListener(\n      FeatureDetector.isIOSDevice() ? 'pagehide' : 'beforeunload',\n      this.endSession\n    );\n  }\n\n  /**\n   * End a conference session.\n   **/\n  end() {\n    this.listeners = [];\n    this.endSession();\n  }\n\n  /**\n   * Before terminating the session, remove all listeners and stop all\n   * streams.\n   **/\n  endSession() {\n    Logger.debug('ConferenceSession::endSession');\n    if (this.sipSession) {\n      this.sipSession.removeAllListeners('accepted');\n      this.sipSession.removeAllListeners('bye');\n      this.sipSession.removeAllListeners('connecting');\n      this.sipSession.removeAllListeners('terminated');\n      if (this.sipSession.sessionDescriptionHandler) {\n        this.sipSession.sessionDescriptionHandler.close();\n      }\n      this.connection.close();\n      this.terminateSession();\n    }\n  }\n\n  /**\n   * Depending on the state of the session, this function may send a CANCEL\n   * request, a non-2xx final response, a BYE request, or even no request at\n   * all.\n   * https://sipjs.com/api/0.7.0/session/#terminateoptions\n   **/\n  terminateSession() {\n    Logger.debug('ConferenceSession::terminateSession');\n    try {\n      this.sipSession.terminate();\n    } catch (error) {\n      Logger.error(error);\n    }\n  }\n\n  /**\n   * Replace the active stream with newStream and emit 'stream_update' with the\n   * new stream.\n   *\n   * In case of an error (as will be the case in current EDGE (May 2019))\n   * report back the current streams.\n   **/\n  async setStream(newStream) {\n    if (!this.sipSession) {\n      return null;\n    }\n\n    try {\n      const streams = await this.sipSession.sessionDescriptionHandler.setStream(\n        newStream\n      );\n      this.emit({\n        type: 'stream_update',\n        localStream: streams.newStream,\n        stream: streams.remoteStream\n      });\n      return streams.newStream;\n    } catch (error) {\n      Logger.error('ConferenceSession::setStream', error);\n      this.emit({\n        type: 'stream_update',\n        localStream: this.localStream,\n        stream: this.remoteStream\n      });\n      return this.localStream;\n    }\n  }\n\n  /**\n   * Register a session monitor.\n   **/\n  setMonitor(monitor) {\n    this.monitor = monitor;\n  }\n\n  /**\n   * On Termination log to debug what happened.\n   **/\n  handleTermination(msg, cause) {\n    Logger.debug(msg, cause);\n  }\n\n  /**\n   * Forward accept event, build expected message format.\n   **/\n  handleAccept(remoteStream) {\n    if (this.monitor) {\n      this.monitor.observe(this.sipSession);\n    }\n    if (!this.accepted) {\n      this.emit({ type: 'accept', session: this.sipSession });\n      this.accepted = true;\n    }\n    this.emit({ type: 'stream_update', stream: remoteStream });\n  }\n\n  handleUnmute(track) {\n    this.emit({ type: 'track_unmuted', track: track });\n  }\n\n  remoteDescriptionUpdate(sdpWrapper) {\n    Logger.debug('ConferenceSession::remoteDescriptionUpdate', sdpWrapper.sdp);\n    let sfu = false;\n\n    const splitSDP = sdpWrapper.sdp.split('\\n');\n    const sfuLine = splitSDP.find(line => line.startsWith('a=sfu-mode'));\n\n    if (sfuLine) {\n      sfu = sfuLine.includes('on');\n    }\n\n    this.emit({ type: 'remote_description_update', update: { sfu: sfu } });\n  }\n\n  /**\n   * Once we have accepted the session, we need to adjust the video podium,\n   * according to the current options.\n   **/\n  adjustVideoPodium() {\n    this.send({ type: 'mute_video', on: !this.options.video });\n  }\n\n  /**\n   * Forward exit event\n   **/\n  handleExit() {\n    this.emit({ type: 'exit', reason: 'bye' });\n  }\n\n  /**\n   * Forward failed event unless we attempt a recovery.\n   **/\n  handleFailed(reason) {\n    Logger.warn('ConferenceSession::handleFailed: ', reason);\n    let key = 'default_key';\n    if (reason) {\n      key = reason && (reason.name || reason.reason_phrase || reason.reasonPhrase);\n    }\n\n    if (this.tryRecoveryFrom(key)) {\n      return;\n    }\n\n    const name =\n      {\n        'Busy Here': 'session_in_use',\n        Forbidden: 'session_in_use',\n        NotFoundError: 'devices',\n        NotAllowedError: 'permission',\n        DevicesNotFoundError: 'devices',\n        PermissionDeniedError: 'permission',\n        NotReadableError: 'not_readable',\n        'Request Entity Too Large': 'request_too_large',\n        1006: 'abrupt_disconnect',\n        'Unwanted': 'meeting_locked'\n      }[key] || 'session_failed';\n\n    this.emit({ type: 'error', name: name });\n  }\n\n  /**\n   * Conference session may recover from `failure` if a recovery for that\n   * `failure` is known and its condition applies.\n   **/\n  tryRecoveryFrom(failure) {\n    Logger.debug('ConferenceSession::tryRecoveryFrom: ', failure);\n\n    const recovery = {\n      'Not Found': {\n        condition: () => this.startAttempts < this.maxStartAttempts,\n        action: () => this.restartSession()\n      }\n    }[failure];\n\n    return Boolean(recovery && recovery.condition() && recovery.action());\n  }\n\n  /**\n   * End the previously started session, but keep already registered listeners.\n   **/\n  restartSession() {\n    Logger.debug('ConferenceSession::restartSession: ', this.startAttempts);\n    this.startAttempts += 1;\n\n    setTimeout(() => {\n      this.endSession();\n      this.start();\n    }, 1000);\n\n    return true;\n  }\n\n  /**\n   * Register event listeners.\n   **/\n  onEvent(callback) {\n    this.listeners.push(callback);\n  }\n\n  /**\n   * On receiving an event, notify all registered listeners.\n   **/\n  emit(msg) {\n    this.listeners.forEach(listener => listener(msg));\n  }\n\n  /**\n   * Transport a message over the connection.\n   **/\n  send(msg) {\n    return this.connection.send(msg);\n  }\n}\n\nexport default ConferenceSession;\n\n/* eslint-enable max-lines */\n","import Logger from './Logger';\n/**\n * Connection Monitor informs about on and offline and ice state changes.\n * I.e. when the connection to the conf server (from a webRTC point of view)\n * is breaking up or degrading.\n **/\nclass ConnectionMonitor {\n  constructor() {\n    this.listeners = [];\n    this.prevIceState = 'initial';\n\n    this.pc = null;\n\n    this.onOffline = this.onOffline.bind(this);\n    this.handleIceStateChange = this.handleIceStateChange.bind(this);\n    this.handleConnectionStateChange = this.handleConnectionStateChange.bind(\n      this\n    );\n    this.addEventListeners();\n  }\n\n  addEventListeners() {\n    window.addEventListener('offline', this.onOffline);\n  }\n\n  onOffline() {\n    this.emit({ type: 'offline' });\n  }\n\n  observe(sipSession) {\n    this.sipSession = sipSession;\n    this.pc = this.sipSession.sessionDescriptionHandler.peerConnection;\n    this.pc.oniceconnectionstatechange = this.handleIceStateChange;\n    this.pc.onconnectionstatechange = this.handleConnectionStateChange;\n  }\n\n  destroy() {\n    if (this.sipSession) {\n      this.sipSession.removeAllListeners('connecting');\n      this.pc.onconnectionstatechange = null;\n      this.pc.oniceconnectionstatechange = null;\n      window.removeEventListener('offline', this.onOffline);\n    }\n  }\n\n  onError(errorHandler) {\n    this.listeners.push(errorHandler);\n  }\n\n  emit(msg) {\n    this.listeners.forEach(listener => listener(msg));\n  }\n\n  handleConnectionStateChange(event) {\n    if (!event.currentTarget) {\n      Logger.warn(\n        'connectionStateChange: ',\n        event.currentTarget.connectionState\n      );\n    }\n  }\n\n  /* eslint-disable max-statements */\n  handleIceStateChange(event) {\n    // event doesn't have a current target in EDGE\n    if (!event.currentTarget) {\n      return;\n    }\n\n    const { iceConnectionState: currentIceState } = event.currentTarget;\n\n    if (currentIceState === 'disconnected') {\n      this.emit({ type: 'warning', name: 'ice_disconnected' });\n      // As of Chrome 76 failed is no longer emitted\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=982793&q=ice%20failed&colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Component%20Status%20Owner%20Summary%20OS%20Modified\n      //\n      // We use a 5 seconds delay to re-check the connection.\n      window.setTimeout(() => {\n        if (this.pc.iceConnectionState !== 'connected') {\n          this.emit({ type: 'error', name: 'ice_failed' });\n        }\n      }, 5000);\n    }\n\n    if (currentIceState === 'failed') {\n      this.emit({ type: 'error', name: 'ice_failed' });\n    }\n\n    if (\n      this.prevIceState === 'disconnected' &&\n      ['completed', 'connected'].includes(currentIceState)\n    ) {\n      this.emit({ type: 'clear_warning', name: 'ice_disconnected' });\n    }\n\n    this.prevIceState = currentIceState;\n  }\n  /* eslint-enable max-statements */\n}\n\nexport default ConnectionMonitor;\n","import Logger from './Logger';\nimport ActionCable from 'actioncable';\n\n/**\n * Registers with provided token and room.\n **/\nclass ActionCableConnection {\n  constructor(uri) {\n    this.onMessageHandler = null;\n\n    this.onReceived = this.onReceived.bind(this);\n    this.offMessage = this.offMessage.bind(this);\n    this.onConnected = this.onConnected.bind(this);\n    this.startSession = this.startSession.bind(this);\n    this.onDisconnected = this.onDisconnected.bind(this);\n\n    this.cable = ActionCable.createConsumer(uri);\n  }\n\n  startSession() {\n    this.cable.subscriptions.create(\n      { channel: 'RoomChannel' },\n      {\n        connected: this.onConnected,\n        received: this.onReceived,\n        disconnected: this.onDisconnected\n      }\n    );\n    this.cable.subscriptions.create(\n      { channel: 'UserChannel' },\n      { received: this.onReceived }\n    );\n  }\n\n  onConnected() {\n    if (this.disconnectTimestamp) {\n      this.handleReconnect();\n    }\n    Logger.debug('ActionCableConnection::onConnected');\n  }\n\n  handleReconnect() {\n    this.onMessageHandler({ type: 'reconnect' });\n  }\n\n  onReceived(msg) {\n    Logger.debug('ActionCableConnection::onReceived', msg);\n    msg._src = 'actioncable';\n    this.onMessageHandler(msg);\n  }\n\n  onDisconnected() {\n    Logger.debug('ActionCableConnection::onDisconnected');\n    this.disconnectTimestamp = Date.now();\n    this.onMessageHandler({ type: 'disconnect' });\n  }\n\n  onMessage(onMessageHandler) {\n    this.onMessageHandler = onMessageHandler;\n  }\n\n  offMessage() {\n    this.onMessageHandler = msg => {\n      Logger.debug('ActionCableConnection::defaultMessageHandler: ', msg);\n    };\n  }\n\n  /**\n   * msg has the format { channel: 'xyz', message: 'abc' }\n   **/\n  send({ channel = 'RoomChannel', message = 'ping' }) {\n    const subscription = this.cable.subscriptions.subscriptions.find(\n      sub => sub.identifier === `{\"channel\":\"${channel}\"}`\n    );\n\n    if (!subscription) {\n      Logger.warn(\n        'ActionCableConnection::send no subscription found! ',\n        channel\n      );\n      return;\n    }\n\n    subscription.perform(message, { message: message });\n  }\n\n  close() {\n    this.offMessage();\n    this.onDisconnected();\n  }\n}\n\nexport default ActionCableConnection;\n","/* eslint-disable max-lines */\nimport ComApi from 'eyeson/src/ComApi';\nimport Logger from 'eyeson/src/Logger';\nimport throttle from 'eyeson/src/utils/throttle';\nimport EventHandler from 'eyeson/src/EventHandler';\nimport ConferenceSession from 'eyeson/src/ConferenceSession';\nimport ConnectionMonitor from 'eyeson/src/ConnectionMonitor';\nimport ActionCableConnection from 'eyeson/src/ActionCableConnection';\n\nclass EyesonFactory {\n    constructor() {\n\n        /**\n         * eyeson lib core.\n         **/\n        this.core = { eventHandler: new EventHandler() };\n\n        /**\n         * Initial connection status change updater.\n         **/\n        this.updateStatus = status =>\n            this.core.eventHandler.send({ type: 'connection', connectionStatus: status });\n\n        this.keepRoomAlive = () => {\n            this.core.keepRoomAlive = setInterval(() => {\n                this.core.rtConnection.send({ message: 'user_joins' });\n            }, 30000);\n        };\n\n        /**\n         * Remove this once WSS messages arrive reliably.\n         **/\n        this.pollingFallback = () => {\n            let counter = 1;\n            this.core.pollingFallbackInterval = setInterval(() => {\n                if (counter === 200) {\n                    Logger.debug(\n                        'eyeson::pollingFallback: max count exceeded, clearing interval.'\n                    );\n                    clearInterval(this.core.pollingFallbackInterval);\n                    return;\n                }\n\n                if (this.core.eventHandler._connection) {\n                    Logger.debug(\n                        'eyeson::pollingFallback: connection set, clearing interval.'\n                    );\n                    clearInterval(this.core.pollingFallbackInterval);\n                    return;\n                }\n\n                this.core.comApi.getRoom(data => {\n                    if (data.ready === true) {\n                        Logger.debug('eyeson::pollingFallback: room ready');\n                        this.core.eventHandler.send({ type: 'room_ready', content: data });\n                        return;\n                    }\n                    Logger.debug('eyeson::pollingFallback: room not ready', counter);\n                    counter += 1;\n                });\n            }, 5000);\n        };\n\n        /**\n         * Load initial room data.\n         **/\n        this.loadInitialInfos = data => {\n            if (data.broadcasts) {\n                this.core.eventHandler.send({\n                    type: 'broadcasts_update',\n                    broadcasts: data.broadcasts\n                });\n            }\n        };\n\n        /****** The following represents the public API, adapt with caution! *********/\n        this.config = {\n            api: 'https://api.eyeson.team',\n            youtube: { key: '', client: '' }\n        }\n\n        /****** Public data ********************************************************/\n\n        /**\n         * The room, user and links to be updated when fetched from the ComAPI.\n         **/\n        this.room = {}\n        this.user = {}\n        this.links = {}\n    }\n\n    /**\n     * Join a session and listen to any events. eventHandler keeps all the\n     * stuff.\n     **/\n    joinSession(mediaOptions) {\n        if (!this.core.eventHandler._connection) {\n            Logger.error(\n                'You tried to join a session that is not yet available. ' +\n                'Before calling join, a connection status of connected has ' +\n                'to be received.'\n            );\n            return;\n        }\n\n        const session = new ConferenceSession(\n            this.core.eventHandler._connection,\n            mediaOptions\n        );\n        session.setMonitor(this.core.eventHandler.monitor);\n        this.core.eventHandler.session = session;\n\n        session.start();\n        this.loadInitialInfos(this.core.eventHandler._rtData);\n        clearInterval(this.core.keepRoomAlive);\n        this.session = session; // eslint-disable-line no-invalid-this\n    }\n\n    /**\n     * Initialise our connections.\n     **/\n    /* eslint-disable max-statements */\n    prepareConnection(eyeson) {\n        this.updateStatus('fetch_room');\n\n        this.core.eventHandler.eyeson = eyeson;\n\n        this.core.comApi.onError = () =>\n            this.core.eventHandler.send({ type: 'warning', name: 'error:comapi' });\n\n        this.core.comApi.getRoom(data => {\n            if (data.error) {\n                Logger.warn('eyeson::prepareConnection', data.error);\n                this.updateStatus('access_denied');\n                return;\n            }\n            this.updateStatus('received_room');\n\n            this.core.rtConnection = new ActionCableConnection(data.links.websocket);\n            this.core.eventHandler.rtConnection = this.core.rtConnection;\n            this.core.rtConnection.startSession();\n\n            this.core.eventHandler.monitor = new ConnectionMonitor();\n            this.core.eventHandler.api = this.core.comApi;\n            this.keepRoomAlive();\n            this.pollingFallback();\n        });\n    }\n    /* eslint-enable max-statements */\n\n    /****** Public helper methods **********************************************/\n\n    /**\n     * Attach event listener\n     **/\n    onEvent(listener) {\n        if (typeof listener !== 'function') {\n            Logger.error(\n                'A listener to eyeson events has to be of type function.' +\n                ' The argument passed to onEvent is of type ' +\n                typeof listener +\n                '.'\n            );\n            return;\n        }\n        this.core.eventHandler.onReceive(listener);\n    }\n\n    /**\n     * Remove event listener\n     **/\n    offEvent(listener) {\n        this.core.eventHandler.removeListener(listener);\n    }\n\n    /**\n     * Prepare required core connections.\n     **/\n    connect(token) {\n        Logger.debug('eyeson::connect', token);\n        this.core.comApi = new ComApi(this.config.api, token);\n        this.prepareConnection(this);\n    }\n\n    /**\n     * Join a session with supplied mediaOptions (audio/video).\n     **/\n    join(mediaOptions) {\n        Logger.debug('eyeson::join', mediaOptions);\n        this.joinSession(mediaOptions);\n    }\n\n    /**\n     * Start an eyeson room meeting.\n     **/\n    start(token, mediaOptions = { audio: true, video: true }) {\n        Logger.debug('eyeson::start');\n        const joinOnConnect = event => {\n            if (event.connectionStatus !== 'ready') {\n                return;\n            }\n            this.offEvent(joinOnConnect);\n            this.join(mediaOptions);\n        };\n        this.onEvent(joinOnConnect);\n        this.connect(token);\n    }\n\n    /**\n     * Destroy and cleanup a session.\n     **/\n    destroy() {\n        Logger.debug('eyeson::destroy');\n        clearInterval(this.core.keepRoomAlive);\n        this.core.eventHandler.destroy();\n        this.core.eventHandler = new EventHandler();\n    }\n\n    /**\n     * Receive an event from client.\n     **/\n    send(msg) {\n        msg._src = 'client';\n        return this.core.eventHandler.send(msg);\n    }\n\n    /**\n     * When invoked repeatedly, will only actually call the original function at\n     * most once per every wait milliseconds.\n     **/\n    throttledSend(msg) {\n        if (!this._throttledSend) {\n            this._throttledSend = throttle(message => this.send(message), 500);\n        }\n\n        return this._throttledSend(msg);\n    }\n}\n\nexport default EyesonFactory;\n/* eslint-enable max-lines */","import Logger from '../Logger';\n\nclass GiphyApi {\n  constructor(roomUrl) {\n    this.roomUrl = roomUrl;\n  }\n\n  search(query) {\n    return this.request(`${this.roomUrl}/search?q=${query}`).then(\n      ({ data }) => data\n    );\n  }\n\n  random() {\n    return this.request(`${this.roomUrl}/random`).then(({ data }) => data);\n  }\n\n  trending() {\n    return this.request(`${this.roomUrl}/trending?limit=9`).then(({ data }) =>\n      this.staff().then(staffGifs => [...data, ...staffGifs])\n    );\n  }\n\n  staff() {\n    return this.request(`${this.roomUrl}/staff`).then(({ data }) => data);\n  }\n\n  randomForQuery(query) {\n    return new Promise((res, rej) => {\n      this.search(query)\n        .then(data => {\n          return data.filter(img => img.images.original_mp4.mp4_size >= 40000);\n        })\n        .then(largerGifs => {\n          res(largerGifs[Math.floor(Math.random() * largerGifs.length)]);\n        })\n        .catch(rej);\n    });\n  }\n\n  request(url) {\n    return fetch(new Request(url))\n      .then(response => response.json())\n      .catch(error => {\n        Logger.warn('GiphyApi', url, error);\n        return { data: [] };\n      });\n  }\n}\n\nexport default GiphyApi;\n","/* eslint-disable max-lines */\n/* global gapi */\nimport Logger from '../Logger';\n\nconst API_URL = 'https://www.googleapis.com/youtube/v3';\n\n/**\n * YouTube API Helper.\n *\n * Documenation is available at:\n * - https://developers.google.com/youtube/v3/live/life-of-a-broadcast\n * - https://developers.google.com/youtube/v3/live/docs/liveBroadcasts\n *\n **/\nclass YouTubeApi {\n  /* eslint-disable max-statements */\n  constructor(eyeson) {\n    this.eyeson = eyeson;\n    this.apiKey = eyeson.config.youtube.key;\n    this.clientId = eyeson.config.youtube.client;\n    this.activated = null;\n\n    if (!this.apiKey || !this.clientId) {\n      return;\n    }\n\n    // keep track of broadcastId for deactivation and error\n    this.broadcastId = null;\n\n    this.activate = this.activate.bind(this);\n    this.getStream = this.getStream.bind(this);\n    this.deactivate = this.deactivate.bind(this);\n    this.startStream = this.startStream.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.insertStream = this.insertStream.bind(this);\n    this.clearInterval = this.clearInterval.bind(this);\n    this.insertBroadcast = this.insertBroadcast.bind(this);\n    this.createLiveStream = this.createLiveStream.bind(this);\n    this.cleanupBroadcast = this.cleanupBroadcast.bind(this);\n\n    this.initGoogleApi();\n  }\n  /* eslint-enable max-statements */\n\n  initGoogleApi() {\n    if (!document || typeof gapi !== 'undefined') {\n      return;\n    }\n\n    const ga = document.createElement('script');\n    ga.type = 'text/javascript';\n    ga.async = true;\n    ga.onload = this.handleClientLoad.bind(this);\n    ga.src = '//apis.google.com/js/api.js';\n    document.body.appendChild(ga);\n  }\n\n  handleClientLoad() {\n    gapi.load('client:auth2', this.initClient.bind(this));\n  }\n\n  initClient() {\n    gapi.client.init({\n      apiKey: this.apiKey,\n      clientId: this.clientId,\n      scope: 'https://www.googleapis.com/auth/youtube.force-ssl'\n    });\n\n    if (this.activated) {\n      this.activate();\n    }\n  }\n\n  activate() {\n    try {\n      gapi.auth2\n        .getAuthInstance()\n        .signIn({ prompt: 'select_account' })\n        .then(this.createLiveStream, this.handleError);\n    } catch (error) {\n      this.activated = true;\n      this.handleError();\n    }\n  }\n\n  deactivate() {\n    Logger.warn('YouTubeApi::deactivate');\n    this.clearInterval();\n    this.cleanupBroadcast();\n\n    // make sure we always stop the stream on our side at least.\n    this.eyeson.send({ type: 'stop_youtube' });\n  }\n\n  getDefaultTitle() {\n    return `Live Stream ${new Date().toDateString()}`;\n  }\n\n  // Valid privacy settings are:\n  // unlisted, public, private\n  insertBroadcast() {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts',\n      method: 'POST',\n      params: {\n        part: 'snippet,status'\n      },\n      body: {\n        snippet: {\n          title: this.getDefaultTitle(),\n          scheduledStartTime: new Date().toISOString()\n        },\n        status: {\n          privacyStatus: 'public'\n        }\n      }\n    });\n  }\n\n  listBroadcast(broadcastId) {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts',\n      method: 'GET',\n      params: {\n        id: broadcastId,\n        part: 'id,contentDetails,status'\n      }\n    });\n  }\n\n  insertStream() {\n    return gapi.client.request({\n      path: API_URL + '/liveStreams',\n      method: 'POST',\n      params: {\n        part: 'snippet,cdn'\n      },\n      body: {\n        snippet: {\n          title: this.getDefaultTitle()\n        },\n        cdn: {\n          resolution: 'variable',\n          frameRate: 'variable',\n          ingestionType: 'rtmp'\n        }\n      }\n    });\n  }\n\n  bindBroadcast(broadcastId, streamId) {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts/bind',\n      method: 'POST',\n      params: {\n        id: broadcastId,\n        streamId: streamId,\n        part: 'id,contentDetails'\n      }\n    });\n  }\n\n  // After you call the liveBroadcasts.transition method, it may take several\n  // seconds, or even up to a minute, for that transition to complete. During\n  // that time, you should poll the API to check the broadcast's status. Until\n  // the transition is complete, the broadcast's status will be testingStarting.\n  transitionBroadcast(broadcastId, status) {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts/transition',\n      method: 'POST',\n      params: {\n        id: broadcastId,\n        part: 'id,contentDetails',\n        broadcastStatus: status\n      }\n    });\n  }\n\n  deleteBroadcast(broadcastId) {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts',\n      method: 'DELETE',\n      params: {\n        id: broadcastId\n      }\n    });\n  }\n\n  // This is quite the process, but the calls here mirror what the guide says.\n  // See here: https://developers.google.com/youtube/v3/live/life-of-a-broadcast\n  // and https://stackoverflow.com/a/35083880/980524\n  createLiveStream() {\n    let broadcastId = null;\n    let streamId = null;\n\n    this.insertBroadcast()\n      .then(resp => {\n        broadcastId = JSON.parse(resp.body).id;\n        // keep track of broadcastId for deactivate()\n        this.broadcastId = broadcastId;\n        return this.insertStream();\n      })\n      .then(resp => {\n        streamId = JSON.parse(resp.body).id;\n        return this.bindBroadcast(broadcastId, streamId);\n      })\n      .then(() => this.getStream(streamId))\n      .then(resp => this.startStream(broadcastId, JSON.parse(resp.body)))\n      .then(() => this.waitForStatus(() => this.getStream(streamId), 'active'))\n      .then(() => this.transitionBroadcast(broadcastId, 'testing'))\n      .then(() => {\n        return this.waitForStatus(\n          () => this.getBroadcast(broadcastId),\n          'testing'\n        );\n      })\n      .then(() => this.transitionBroadcast(broadcastId, 'live'))\n      .then(() =>\n        this.eyeson.send({ type: 'status_update_youtube', status: 'live' })\n      )\n      .catch(this.handleError);\n  }\n\n  getStream(streamId) {\n    return gapi.client.request({\n      path: API_URL + '/liveStreams',\n      params: {\n        part: 'cdn,status',\n        id: streamId\n      }\n    });\n  }\n\n  getBroadcast(broadcastId) {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts',\n      params: {\n        part: 'id,status',\n        id: broadcastId\n      }\n    });\n  }\n\n  getViewersCount(broadcastId) {\n    return gapi.client\n      .request({\n        path: API_URL + '/videos',\n        params: {\n          id: broadcastId,\n          part: 'liveStreamingDetails'\n        }\n      })\n      .then(response => {\n        const [video] = response.result.items;\n        if (!video) {\n          return null;\n        }\n        return video.liveStreamingDetails.concurrentViewers;\n      });\n  }\n\n  startStream(broadcastId, responseBody) {\n    const {\n      items: [\n        {\n          cdn: {\n            ingestionInfo: { ingestionAddress, streamName }\n          }\n        }\n      ]\n    } = responseBody;\n\n    this.eyeson.send({\n      type: 'start_youtube',\n      playerUrl: `https://youtu.be/${broadcastId}`,\n      streamUrl: `${ingestionAddress}/${streamName}`\n    });\n  }\n\n  // There are a couple of state changes we have to wait for and the YouTube API\n  // explicitly states we should poll the API... `source` specifies the way to\n  // get data, and `desiredStatus` is the status we're watiting for.\n  waitForStatus(source, desiredStatus) {\n    let intervalCnt = 0;\n    // 5 minutes\n    const maxIntervals = 150;\n\n    return new Promise((resolve, reject) => {\n      this.interval = window.setInterval(() => {\n        Logger.debug('YouTubeApi::waitForStatus', desiredStatus);\n        if (intervalCnt > maxIntervals) {\n          this.clearInterval();\n          let error = new Error('YouTube stream not ', desiredStatus);\n          error.error = 'timeout';\n          reject(error);\n        }\n        intervalCnt += 1;\n\n        source().then(response => {\n          const json = JSON.parse(response.body);\n          const statusObj = json.items[0].status;\n          // statusObj can be either from live stream or broadcast, and those\n          // two have different status we need to look for.\n          const status = statusObj.streamStatus || statusObj.lifeCycleStatus;\n\n          this.eyeson.send({\n            type: 'status_update_youtube',\n            status: status,\n            health: statusObj.healthStatus || {}\n          });\n\n          if (status === desiredStatus) {\n            this.clearInterval();\n            resolve();\n          } else {\n            Logger.warn('YouTubeApi::waitForStatus: ', status);\n          }\n        });\n      }, 2000);\n    });\n  }\n\n  handleError(response) {\n    let error = { reason: 'account_setup' };\n    try {\n      this.clearInterval();\n      this.cleanupBroadcast();\n\n      error = response.error\n        ? { reason: response.error }\n        : JSON.parse(response.body).error.errors[0];\n    } catch (err) {\n      Logger.error('YouTubeApi::handleError', err);\n    }\n\n    this.eyeson.send({\n      type: 'handle_youtube_error',\n      error: Object.assign({}, { name: `youtube_${error.reason}` }, error)\n    });\n  }\n\n  clearInterval() {\n    window.clearInterval(this.interval);\n  }\n\n  // If the broadcast is either\n  // - 'ready'\n  // - 'created'\n  // - 'testing'\n  // - 'testStarting'\n  // (it shows up as \"upcoming\" on YouTube) we delete it so we don't pollute\n  // YouTube with a bunch of \"upcoming\" broadcasts that'll never happen.\n  cleanupBroadcast() {\n    if (!this.broadcastId) {\n      return;\n    }\n\n    const deleteableBroadcastStates = [\n      'ready',\n      'created',\n      'testing',\n      'testStarting'\n    ];\n\n    this.listBroadcast(this.broadcastId)\n      .then(response => {\n        const [broadcast] = response.result.items;\n        const {\n          status: { lifeCycleStatus }\n        } = broadcast;\n\n        if (deleteableBroadcastStates.includes(lifeCycleStatus)) {\n          this.deleteBroadcast(this.broadcastId).then(() => {\n            Logger.debug('YouTubeApi::deleted: ', this.broadcastId);\n          });\n        } else {\n          this.transitionBroadcast(this.broadcastId, 'complete').then(() => {\n            Logger.debug('YouTubeApi::completed: ', this.broadcastId);\n          });\n        }\n        this.broadcastId = null;\n      })\n      .catch(error => {\n        Logger.error('YouTubeApi::cleanupBroadcast', error);\n      });\n  }\n}\n\nexport default YouTubeApi;\n/* eslint-enable max-lines */\n","/* global FB */\n\nconst LOAD_ERRORS = ['FB is not defined', 'FB.login is not a function'];\n\n/**\n * Facebook API.\n **/\nclass FacebookApi {\n  /* eslint-disable max-statements */\n  constructor(eyeson) {\n    this.eyeson = eyeson;\n    this.apiKey = eyeson.config.facebook.key;\n    this.stream = null;\n    this.permalLinkUrl = 'default-permalink-url';\n\n    if (!this.apiKey) {\n      return;\n    }\n\n    this.sendStop = this.sendStop.bind(this);\n    this.loggedIn = this.loggedIn.bind(this);\n    this.fetchLink = this.fetchLink.bind(this);\n    this.startStream = this.startStream.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.streamPublished = this.streamPublished.bind(this);\n\n    this.initFacebookApi();\n  }\n  /* eslint-enable max-statements */\n\n  initFacebookApi() {\n    if (!document || typeof FB !== 'undefined') {\n      return;\n    }\n\n    window.fbAsyncInit = () => {\n      FB.init({\n        appId: this.apiKey,\n        xfbml: true,\n        version: 'v2.9',\n        autoLogAppEvents: true\n      });\n      FB.AppEvents.logPageView();\n    };\n\n    /* eslint-disable */\n    (function(d, s, id) {\n      var js,\n        fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) {\n        return;\n      }\n      js = d.createElement(s);\n      js.id = id;\n      js.src = '//connect.facebook.net/en_US/sdk.js';\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'facebook-jssdk');\n    /* eslint-enable */\n  }\n\n  /**\n   * Start live stream process here.\n   **/\n  activate() {\n    FB.ui(\n      {\n        display: 'popup',\n        method: 'live_broadcast',\n        phase: 'create'\n      },\n      this.startStream\n    );\n  }\n\n  /**\n   * Inovked _after_ activation.\n   **/\n  publish() {\n    FB.ui(\n      {\n        display: 'popup',\n        method: 'live_broadcast',\n        phase: 'publish',\n        broadcast_data: this.stream // eslint-disable-line camelcase\n      },\n      this.streamPublished\n    );\n  }\n\n  /**\n   * Inovked _after_ publish.\n   **/\n  login() {\n    try {\n      FB.login(this.loggedIn, { scope: 'user_videos' });\n    } catch (error) {\n      this.handleError(this.getError(error));\n    }\n  }\n\n  /**\n   * Deactivate the stream.\n   **/\n  deactivate() {\n    this.stream = null;\n    this.sendStop();\n  }\n\n  /**\n   * Wrapper, only send stop when we have a stream.\n   **/\n  sendStop() {\n    return this.stream ? this.eyeson.send({ type: 'stop_facebook' }) : null;\n  }\n\n  getError(response) {\n    let error = { result: { error: { message: 'user closed popup' } } };\n    if (response && response.error_message) {\n      error.result.error.message = response.error_message;\n      return error;\n    }\n    if (\n      response &&\n      (!response.message || LOAD_ERRORS.includes(response.message))\n    ) {\n      error.result.error = {\n        name: 'facebook:not_loaded',\n        message: 'facebook api did not load'\n      };\n    }\n    return error;\n  }\n\n  startStream(stream) {\n    if (!stream || stream.error_message) {\n      this.handleError(this.getError(stream));\n      return;\n    }\n    this.stream = stream;\n    this.eyeson.send({\n      type: 'start_facebook',\n      streamUrl: stream.secure_stream_url\n    });\n  }\n\n  streamPublished(response) {\n    if (!response || response.error_message) {\n      this.handleError(this.getError(response));\n      return;\n    }\n    this.fetchLink();\n    this.eyeson.send({ type: 'facebook_published' });\n  }\n\n  loggedIn(response) {\n    // If someone closes the popup or cancels we actually get undefined for\n    // authResponse & status\n    if (!response.authResponse && !response.status) {\n      this.handleError(this.getError(response));\n      return;\n    }\n\n    this.permalLinkUrl = `https://facebook.com/${response.authResponse.userID}`;\n    this.eyeson.send({ type: 'facebook_logged_in' });\n  }\n\n  fetchLink() {\n    FB.api(`/${this.stream.id}?fields=permalink_url`, response => {\n      // fallback to the users profile page, in case we don't get a\n      // permalink_url\n      if (!response.permalink_url || response.error_message) {\n        response.permalink_url = this.permalLinkUrl; // eslint-disable-line camelcase\n      }\n\n      let playerUrl = response.permalink_url.includes('https://facebook.com')\n        ? response.permalink_url\n        : `https://facebook.com${response.permalink_url}`;\n\n      this.eyeson.send({\n        type: 'publish_broadcast',\n        playerUrl: playerUrl\n      });\n    });\n  }\n\n  handleError(response) {\n    if (!response.result.error.name) {\n      response.result.error.name = 'facebook:closed';\n    }\n    this.sendStop();\n    this.eyeson.send({\n      type: 'handle_facebook_error',\n      error: response.result.error\n    });\n  }\n}\n\nexport default FacebookApi;\n","import Logger from './Logger';\nimport debounce from './utils/debounce';\n\n/**\n * Sound Meter that generates a number correlated to audio volume. The meter\n * itself displays nothing, but it makes the instantaneous and time-decaying\n * volumes available for inspection. It also reports on the fraction of samples\n * that were at or near the top of the measurement range.\n **/\nclass SoundMeter {\n  constructor() {\n    this.level = 0;\n    this.instant = 0.0;\n    this.intervalCounter = 0;\n    this.silenceDuration = 0;\n    this.init();\n    this.offUpdate = this.offUpdate.bind(this);\n  }\n\n  /**\n   * Initialize audio context and prepare script processor to read input\n   * channel data.\n   **/\n  init() {\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    if (typeof AudioContext === 'undefined') {\n      Logger.error(\n        'AudioContext is not available. Probably the current' +\n          ' user agent does not support this feature. Use the feature detector' +\n          ' to hide not supported elements. Any call on onUpdate will not' +\n          ' send values.'\n      );\n      return;\n    }\n\n    this.context = new AudioContext();\n\n    this.context.onstatechange = () => {\n      if (this.context.state === 'suspended') {\n        Logger.error('SoundMeter::init AudioContext: ', this.context.state);\n      }\n    };\n\n    this.script = this.context.createScriptProcessor(2048, 1, 1);\n    this.script.onaudioprocess = event => {\n      const input = event.inputBuffer.getChannelData(0);\n      const sum = input.reduce((prev, current) => {\n        return prev + (current * current);\n      }, 0);\n      this.instant = Math.sqrt(sum / input.length) * 100;\n    };\n  }\n\n  /**\n   * Connect to a media stream.\n   **/\n  connectToSource(stream) {\n    if (!this.context || stream.getAudioTracks().length < 1) {\n      return this;\n    }\n    Logger.debug('SoundMeter::connectToSource', stream);\n    this.mic = this.context.createMediaStreamSource(stream);\n    this.mic.connect(this.script);\n    this.script.connect(this.context.destination);\n    return this;\n  }\n\n  /**\n   * Stop read interval and disconnect from stream.\n   **/\n  stop() {\n    if (!this.context) {\n      return;\n    }\n\n    this.offUpdate();\n    if (this.mic) {\n      this.mic.disconnect();\n    }\n    this.script.disconnect();\n    if (this.context.close) {\n      this.context.close();\n    }\n  }\n\n  offUpdate() {\n    window.clearInterval(this.audioMeterInterval);\n    window.clearInterval(this.readInterval);\n  }\n\n  onUpdate(listener) {\n    if (!this.context) {\n      return;\n    }\n\n    if (this.audioMeterInterval) {\n      clearInterval(this.audioMeterInterval);\n    }\n    this.readInterval = setInterval(\n      this.readAudioLevel.bind(this, listener),\n      SoundMeter.updateInterval\n    );\n  }\n\n  /**\n   * Read audio level. Avoids triggering a re-render of the device-dialog\n   * when the change is below 1% which wouldn't be noticable anyways.\n   *\n   * NOTE: When an USB Microphone is abruptly disconnected. The\n   * intervalCounter reacts: when switching to a different mic, it seems to\n   * take a bit to not return 0.00 for the audio level.\n   **/\n  /* eslint-disable max-statements */\n  readAudioLevel(update) {\n    let audioLevel = this.level;\n\n    // Handle microphone disconnect\n    if (audioLevel === 0 && this.instant === 0 && this.intervalCounter > 5) {\n      this.silenceDuration++;\n      if (this.silenceDuration > 25) {\n        debounce(() => {\n          update({ error: 'EyesonMicrophoneError' });\n        }, 1000);\n      }\n    }\n\n    // Clear a MicrophoneError once we get a signal, intervalCounter might be\n    // too low sometimes.\n    if (this.level !== this.instant) {\n      this.silenceDuration = 0;\n      let diff = Math.abs(audioLevel - this.instant);\n      audioLevel = this.instant;\n\n      if (audioLevel > 0.7 || diff > 1) {\n        this.level = this.instant;\n        update({ value: this.level });\n      }\n    }\n\n    this.intervalCounter++;\n  }\n  /* eslint-enable max-statements */\n}\n\nSoundMeter.updateInterval = 100;\n\nexport default SoundMeter;\n","import EyesonFactory from './src/eyeson-factory';\nimport Logger from 'eyeson/src/Logger';\nimport GiphyApi from 'eyeson/src/utils/GiphyApi';\nimport debounce from 'eyeson/src/utils/debounce';\nimport throttle from 'eyeson/src/utils/throttle';\nimport YouTubeApi from 'eyeson/src/utils/YouTubeApi';\nimport FacebookApi from 'eyeson/src/utils/FacebookApi';\nimport SoundMeter from 'eyeson/src/SoundMeter';\nimport LocalStorage from 'eyeson/src/LocalStorage';\nimport DeviceManager from 'eyeson/src/DeviceManager';\nimport FeatureDetector from 'eyeson/src/FeatureDetector';\nimport FullscreenHelper from 'eyeson/src/FullscreenHelper';\nimport MediaStreamBuilder from 'eyeson/src/MediaStreamBuilder';\nimport * as StreamHelpers from 'eyeson/src/utils/StreamHelpers';\n\nexport {\n    EyesonFactory,\n    Logger,\n    GiphyApi,\n    throttle,\n    debounce,\n    YouTubeApi,\n    SoundMeter,\n    FacebookApi,\n    LocalStorage,\n    StreamHelpers,\n    DeviceManager,\n    FeatureDetector,\n    FullscreenHelper,\n    MediaStreamBuilder\n};\n\nexport default EyesonFactory;"],"sourceRoot":""}